var mn=Object.defineProperty;var _n=(Q,st,y)=>st in Q?mn(Q,st,{enumerable:!0,configurable:!0,writable:!0,value:y}):Q[st]=y;var ee=(Q,st,y)=>_n(Q,typeof st!="symbol"?st+"":st,y);(function(){const st=document.createElement("link").relList;if(st&&st.supports&&st.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))z(b);new MutationObserver(b=>{for(const h of b)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&z(d)}).observe(document,{childList:!0,subtree:!0});function y(b){const h={};return b.integrity&&(h.integrity=b.integrity),b.referrerPolicy&&(h.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?h.credentials="include":b.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function z(b){if(b.ep)return;b.ep=!0;const h=y(b);fetch(b.href,h)}})();function rt(Q,st="info"){const y=document.getElementById("debug-console");if(!y)return;const z=document.createElement("div");z.textContent=`[${new Date().toLocaleTimeString()}] ${Q}`,st==="err"?z.className="log-err":st==="warn"?z.className="log-warn":st==="schema"?z.className="log-schema":z.className="log-info",y.appendChild(z),y.scrollTop=y.scrollHeight}var xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sr(Q){return Q&&Q.__esModule&&Object.prototype.hasOwnProperty.call(Q,"default")?Q.default:Q}function bn(Q){if(Q.__esModule)return Q;var st=Q.default;if(typeof st=="function"){var y=function z(){return this instanceof z?Reflect.construct(st,arguments,this.constructor):st.apply(this,arguments)};y.prototype=st.prototype}else y={};return Object.defineProperty(y,"__esModule",{value:!0}),Object.keys(Q).forEach(function(z){var b=Object.getOwnPropertyDescriptor(Q,z);Object.defineProperty(y,z,b.get?b:{enumerable:!0,get:function(){return Q[z]}})}),y}var Ar={exports:{}};const gn={},yn=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),kr=bn(yn);(function(Q,st){var y=void 0,z=function(b){return y||(y=new Promise(function(h,d){var l=typeof b<"u"?b:{},g=l.onAbort;l.onAbort=function(t){d(new Error(t)),g&&g(t)},l.postRun=l.postRun||[],l.postRun.push(function(){h(l)}),Q=void 0;var s;s||(s=typeof l<"u"?l:{});var A=typeof window=="object",T=typeof WorkerGlobalScope<"u",S=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";s.onRuntimeInitialized=function(){function t(I,X){switch(typeof X){case"boolean":dn(I,X?1:0);break;case"number":fn(I,X);break;case"string":cn(I,X,-1,-1);break;case"object":if(X===null)yr(I);else if(X.length!=null){var ot=Ae(X,Se);hn(I,ot,X.length,-1),Ne(ot)}else Re(I,"Wrong API use : tried to return a value of an unknown type ("+X+").",-1);break;default:yr(I)}}function e(I,X){for(var ot=[],mt=0;mt<I;mt+=1){var bt=Ct(X+4*mt,"i32"),Tt=sn(bt);if(Tt===1||Tt===2)bt=un(bt);else if(Tt===3)bt=on(bt);else if(Tt===4){Tt=bt,bt=an(Tt),Tt=ln(Tt);for(var Wt=new Uint8Array(bt),qt=0;qt<bt;qt+=1)Wt[qt]=$[Tt+qt];bt=Wt}else bt=null;ot.push(bt)}return ot}function n(I,X){this.Qa=I,this.db=X,this.Oa=1,this.lb=[]}function a(I,X){if(this.db=X,X=ft(I)+1,this.eb=Ge(X),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Et(I,tt,this.eb,X),this.kb=this.eb,this.Za=this.pb=null}function E(I){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),I!=null){var X=this.filename,ot="/",mt=X;if(ot&&(ot=typeof ot=="string"?ot:Ce(ot),mt=X?x(ot+"/"+X):ot),X=le(!0,!0),mt=Dr(mt,X),I){if(typeof I=="string"){ot=Array(I.length);for(var bt=0,Tt=I.length;bt<Tt;++bt)ot[bt]=I.charCodeAt(bt);I=ot}ve(mt,X|146),ot=fe(mt,577),ur(ot,I,0,I.length,0),Be(ot),ve(mt,X)}}this.handleError(ht(this.filename,O)),this.db=Ct(O,"i32"),vr(this.db),this.fb={},this.Sa={}}var O=te(4),j=s.cwrap,ht=j("sqlite3_open","number",["string","number"]),yt=j("sqlite3_close_v2","number",["number"]),gt=j("sqlite3_exec","number",["number","string","number","number","number"]),It=j("sqlite3_changes","number",["number"]),Pt=j("sqlite3_prepare_v2","number",["number","string","number","number","number"]),pr=j("sqlite3_sql","string",["number"]),jr=j("sqlite3_normalized_sql","string",["number"]),mr=j("sqlite3_prepare_v2","number",["number","number","number","number","number"]),qr=j("sqlite3_bind_text","number",["number","number","number","number","number"]),_r=j("sqlite3_bind_blob","number",["number","number","number","number","number"]),Wr=j("sqlite3_bind_double","number",["number","number","number"]),Gr=j("sqlite3_bind_int","number",["number","number","number"]),$r=j("sqlite3_bind_parameter_index","number",["number","string"]),Zr=j("sqlite3_step","number",["number"]),Xr=j("sqlite3_errmsg","string",["number"]),Hr=j("sqlite3_column_count","number",["number"]),Yr=j("sqlite3_data_count","number",["number"]),Kr=j("sqlite3_column_double","number",["number","number"]),br=j("sqlite3_column_text","string",["number","number"]),Vr=j("sqlite3_column_blob","number",["number","number"]),Qr=j("sqlite3_column_bytes","number",["number","number"]),Jr=j("sqlite3_column_type","number",["number","number"]),tn=j("sqlite3_column_name","string",["number","number"]),en=j("sqlite3_reset","number",["number"]),rn=j("sqlite3_clear_bindings","number",["number"]),nn=j("sqlite3_finalize","number",["number"]),gr=j("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),sn=j("sqlite3_value_type","number",["number"]),an=j("sqlite3_value_bytes","number",["number"]),on=j("sqlite3_value_text","string",["number"]),ln=j("sqlite3_value_blob","number",["number"]),un=j("sqlite3_value_double","number",["number"]),fn=j("sqlite3_result_double","",["number","number"]),yr=j("sqlite3_result_null","",["number"]),cn=j("sqlite3_result_text","",["number","string","number","number"]),hn=j("sqlite3_result_blob","",["number","number","number","number"]),dn=j("sqlite3_result_int","",["number","number"]),Re=j("sqlite3_result_error","",["number","string","number"]),wr=j("sqlite3_aggregate_context","number",["number","number"]),vr=j("RegisterExtensionFunctions","number",["number"]),Er=j("sqlite3_update_hook","number",["number","number","number"]);n.prototype.bind=function(I){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(I)?this.Cb(I):I!=null&&typeof I=="object"?this.Db(I):!0},n.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var I=Zr(this.Qa);switch(I){case 100:return!0;case 101:return!1;default:throw this.db.handleError(I)}},n.prototype.wb=function(I){return I==null&&(I=this.Oa,this.Oa+=1),Kr(this.Qa,I)},n.prototype.Gb=function(I){if(I==null&&(I=this.Oa,this.Oa+=1),I=br(this.Qa,I),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(I)},n.prototype.Hb=function(I){return I==null&&(I=this.Oa,this.Oa+=1),br(this.Qa,I)},n.prototype.getBlob=function(I){I==null&&(I=this.Oa,this.Oa+=1);var X=Qr(this.Qa,I);I=Vr(this.Qa,I);for(var ot=new Uint8Array(X),mt=0;mt<X;mt+=1)ot[mt]=$[I+mt];return ot},n.prototype.get=function(I,X){X=X||{},I!=null&&this.bind(I)&&this.step(),I=[];for(var ot=Yr(this.Qa),mt=0;mt<ot;mt+=1)switch(Jr(this.Qa,mt)){case 1:var bt=X.useBigInt?this.Gb(mt):this.wb(mt);I.push(bt);break;case 2:I.push(this.wb(mt));break;case 3:I.push(this.Hb(mt));break;case 4:I.push(this.getBlob(mt));break;default:I.push(null)}return I},n.prototype.getColumnNames=function(){for(var I=[],X=Hr(this.Qa),ot=0;ot<X;ot+=1)I.push(tn(this.Qa,ot));return I},n.prototype.getAsObject=function(I,X){I=this.get(I,X),X=this.getColumnNames();for(var ot={},mt=0;mt<X.length;mt+=1)ot[X[mt]]=I[mt];return ot},n.prototype.getSQL=function(){return pr(this.Qa)},n.prototype.getNormalizedSQL=function(){return jr(this.Qa)},n.prototype.run=function(I){return I!=null&&this.bind(I),this.step(),this.reset()},n.prototype.sb=function(I,X){X==null&&(X=this.Oa,this.Oa+=1),I=vt(I);var ot=Ae(I,Se);this.lb.push(ot),this.db.handleError(qr(this.Qa,X,ot,I.length-1,0))},n.prototype.Bb=function(I,X){X==null&&(X=this.Oa,this.Oa+=1);var ot=Ae(I,Se);this.lb.push(ot),this.db.handleError(_r(this.Qa,X,ot,I.length,0))},n.prototype.rb=function(I,X){X==null&&(X=this.Oa,this.Oa+=1),this.db.handleError((I===(I|0)?Gr:Wr)(this.Qa,X,I))},n.prototype.Eb=function(I){I==null&&(I=this.Oa,this.Oa+=1),_r(this.Qa,I,0,0,0)},n.prototype.tb=function(I,X){switch(X==null&&(X=this.Oa,this.Oa+=1),typeof I){case"string":this.sb(I,X);return;case"number":this.rb(I,X);return;case"bigint":this.sb(I.toString(),X);return;case"boolean":this.rb(I+0,X);return;case"object":if(I===null){this.Eb(X);return}if(I.length!=null){this.Bb(I,X);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+I+")."},n.prototype.Db=function(I){var X=this;return Object.keys(I).forEach(function(ot){var mt=$r(X.Qa,ot);mt!==0&&X.tb(I[ot],mt)}),!0},n.prototype.Cb=function(I){for(var X=0;X<I.length;X+=1)this.tb(I[X],X+1);return!0},n.prototype.reset=function(){return this.freemem(),rn(this.Qa)===0&&en(this.Qa)===0},n.prototype.freemem=function(){for(var I;(I=this.lb.pop())!==void 0;)Ne(I)},n.prototype.free=function(){this.freemem();var I=nn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,I},a.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var I=be(),X=te(4);r(O),r(X);try{this.db.handleError(mr(this.db.db,this.kb,-1,O,X)),this.kb=Ct(X,"i32");var ot=Ct(O,"i32");return ot===0?(this.mb(),{done:!0}):(this.Za=new n(ot,this.db),this.db.fb[ot]=this.Za,{value:this.Za,done:!1})}catch(mt){throw this.pb=w(this.kb),this.mb(),mt}finally{_e(I)}},a.prototype.mb=function(){Ne(this.eb),this.eb=null},a.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:w(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(a.prototype[Symbol.iterator]=function(){return this}),E.prototype.run=function(I,X){if(!this.db)throw"Database closed";if(X){I=this.prepare(I,X);try{I.step()}finally{I.free()}}else this.handleError(gt(this.db,I,0,0,O));return this},E.prototype.exec=function(I,X,ot){if(!this.db)throw"Database closed";var mt=be(),bt=null;try{var Tt=qe(I),Wt=te(4);for(I=[];Ct(Tt,"i8")!==0;){r(O),r(Wt),this.handleError(mr(this.db,Tt,-1,O,Wt));var qt=Ct(O,"i32");if(Tt=Ct(Wt,"i32"),qt!==0){var Ft=null;for(bt=new n(qt,this),X!=null&&bt.bind(X);bt.step();)Ft===null&&(Ft={columns:bt.getColumnNames(),values:[]},I.push(Ft)),Ft.values.push(bt.get(null,ot));bt.free()}}return I}catch(Gt){throw bt&&bt.free(),Gt}finally{_e(mt)}},E.prototype.each=function(I,X,ot,mt,bt){typeof X=="function"&&(mt=ot,ot=X,X=void 0),I=this.prepare(I,X);try{for(;I.step();)ot(I.getAsObject(null,bt))}finally{I.free()}if(typeof mt=="function")return mt()},E.prototype.prepare=function(I,X){if(r(O),this.handleError(Pt(this.db,I,-1,O,0)),I=Ct(O,"i32"),I===0)throw"Nothing to prepare";var ot=new n(I,this);return X!=null&&ot.bind(X),this.fb[I]=ot},E.prototype.iterateStatements=function(I){return new a(I,this)},E.prototype.export=function(){Object.values(this.fb).forEach(function(X){X.free()}),Object.values(this.Sa).forEach(Jt),this.Sa={},this.handleError(yt(this.db));var I=zr(this.filename);return this.handleError(ht(this.filename,O)),this.db=Ct(O,"i32"),vr(this.db),I},E.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(I){I.free()}),Object.values(this.Sa).forEach(Jt),this.Sa={},this.Ya&&(Jt(this.Ya),this.Ya=void 0),this.handleError(yt(this.db)),ir("/"+this.filename),this.db=null)},E.prototype.handleError=function(I){if(I===0)return null;throw I=Xr(this.db),Error(I)},E.prototype.getRowsModified=function(){return It(this.db)},E.prototype.create_function=function(I,X){Object.prototype.hasOwnProperty.call(this.Sa,I)&&(Jt(this.Sa[I]),delete this.Sa[I]);var ot=me(function(mt,bt,Tt){bt=e(bt,Tt);try{var Wt=X.apply(null,bt)}catch(qt){Re(mt,qt,-1);return}t(mt,Wt)},"viii");return this.Sa[I]=ot,this.handleError(gr(this.db,I,X.length,1,0,ot,0,0,0)),this},E.prototype.create_aggregate=function(I,X){var ot=X.init||function(){return null},mt=X.finalize||function(Ft){return Ft},bt=X.step;if(!bt)throw"An aggregate function must have a step function in "+I;var Tt={};Object.hasOwnProperty.call(this.Sa,I)&&(Jt(this.Sa[I]),delete this.Sa[I]),X=I+"__finalize",Object.hasOwnProperty.call(this.Sa,X)&&(Jt(this.Sa[X]),delete this.Sa[X]);var Wt=me(function(Ft,Gt,Ze){var oe=wr(Ft,1);Object.hasOwnProperty.call(Tt,oe)||(Tt[oe]=ot()),Gt=e(Gt,Ze),Gt=[Tt[oe]].concat(Gt);try{Tt[oe]=bt.apply(null,Gt)}catch(pn){delete Tt[oe],Re(Ft,pn,-1)}},"viii"),qt=me(function(Ft){var Gt=wr(Ft,1);try{var Ze=mt(Tt[Gt])}catch(oe){delete Tt[Gt],Re(Ft,oe,-1);return}t(Ft,Ze),delete Tt[Gt]},"vi");return this.Sa[I]=Wt,this.Sa[X]=qt,this.handleError(gr(this.db,I,bt.length-1,1,0,0,Wt,qt,0)),this},E.prototype.updateHook=function(I){this.Ya&&(Er(this.db,0,0),Jt(this.Ya),this.Ya=void 0),I&&(this.Ya=me(function(X,ot,mt,bt,Tt){switch(ot){case 18:X="insert";break;case 23:X="update";break;case 9:X="delete";break;default:throw"unknown operationCode in updateHook callback: "+ot}if(mt=mt?L(tt,mt):"",bt=bt?L(tt,bt):"",Tt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";I(X,mt,bt,Number(Tt))},"viiiij"),Er(this.db,this.Ya,0))},s.Database=E};var c={...s},p="./this.program",o=(t,e)=>{throw e},f="",u,_;if(S){var v=kr;f=__dirname+"/",_=t=>(t=pt(t)?new URL(t):t,v.readFileSync(t)),u=async t=>(t=pt(t)?new URL(t):t,v.readFileSync(t,void 0)),!s.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Q.exports=s,o=(t,e)=>{throw process.exitCode=t,e}}else(A||T)&&(T?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),f=f.startsWith("blob:")?"":f.slice(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1),T&&(_=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),u=async t=>{if(pt(t))return new Promise((n,a)=>{var E=new XMLHttpRequest;E.open("GET",t,!0),E.responseType="arraybuffer",E.onload=()=>{E.status==200||E.status==0&&E.response?n(E.response):a(E.status)},E.onerror=a,E.send(null)});var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw Error(e.status+" : "+e.url)});var R=s.print||console.log.bind(console),N=s.printErr||console.error.bind(console);Object.assign(s,c),c=null,s.thisProgram&&(p=s.thisProgram);var P=s.wasmBinary,F,G=!1,M,$,tt,k,B,i,q,lt,H,pt=t=>t.startsWith("file://");function K(){var t=F.buffer;s.HEAP8=$=new Int8Array(t),s.HEAP16=k=new Int16Array(t),s.HEAPU8=tt=new Uint8Array(t),s.HEAPU16=new Uint16Array(t),s.HEAP32=B=new Int32Array(t),s.HEAPU32=i=new Uint32Array(t),s.HEAPF32=q=new Float32Array(t),s.HEAPF64=H=new Float64Array(t),s.HEAP64=lt=new BigInt64Array(t),s.HEAPU64=new BigUint64Array(t)}var ut=0,U=null;function C(t){var e;throw(e=s.onAbort)==null||e.call(s,t),t="Aborted("+t+")",N(t),G=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var ct;async function it(t){if(!P)try{var e=await u(t);return new Uint8Array(e)}catch{}if(t==ct&&P)t=new Uint8Array(P);else if(_)t=_(t);else throw"both async and sync fetching of the wasm failed";return t}async function et(t,e){try{var n=await it(t);return await WebAssembly.instantiate(n,e)}catch(a){N(`failed to asynchronously prepare wasm: ${a}`),C(a)}}async function At(t){var e=ct;if(!P&&typeof WebAssembly.instantiateStreaming=="function"&&!pt(e)&&!S)try{var n=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,t)}catch(a){N(`wasm streaming compile failed: ${a}`),N("falling back to ArrayBuffer instantiation")}return et(e,t)}class xt{constructor(e){ee(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var wt=t=>{for(;0<t.length;)t.shift()(s)},kt=[],Ot=[],Nt=()=>{var t=s.preRun.shift();Ot.unshift(t)};function Ct(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return $[t];case"i8":return $[t];case"i16":return k[t>>1];case"i32":return B[t>>2];case"i64":return lt[t>>3];case"float":return q[t>>2];case"double":return H[t>>3];case"*":return i[t>>2];default:C(`invalid type for getValue: ${e}`)}}var Lt=s.noExitRuntime||!0;function r(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":$[t]=0;break;case"i8":$[t]=0;break;case"i16":k[t>>1]=0;break;case"i32":B[t>>2]=0;break;case"i64":lt[t>>3]=BigInt(0);break;case"float":q[t>>2]=0;break;case"double":H[t>>3]=0;break;case"*":i[t>>2]=0;break;default:C(`invalid type for setValue: ${e}`)}}var W=typeof TextDecoder<"u"?new TextDecoder:void 0,L=(t,e=0,n=NaN)=>{var a=e+n;for(n=e;t[n]&&!(n>=a);)++n;if(16<n-e&&t.buffer&&W)return W.decode(t.subarray(e,n));for(a="";e<n;){var E=t[e++];if(E&128){var O=t[e++]&63;if((E&224)==192)a+=String.fromCharCode((E&31)<<6|O);else{var j=t[e++]&63;E=(E&240)==224?(E&15)<<12|O<<6|j:(E&7)<<18|O<<12|j<<6|t[e++]&63,65536>E?a+=String.fromCharCode(E):(E-=65536,a+=String.fromCharCode(55296|E>>10,56320|E&1023))}}else a+=String.fromCharCode(E)}return a},w=(t,e)=>t?L(tt,t,e):"",m=(t,e)=>{for(var n=0,a=t.length-1;0<=a;a--){var E=t[a];E==="."?t.splice(a,1):E===".."?(t.splice(a,1),n++):n&&(t.splice(a,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},x=t=>{var e=t.charAt(0)==="/",n=t.slice(-1)==="/";return(t=m(t.split("/").filter(a=>!!a),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},Z=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.slice(0,-1)),t+e)},Y=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],D=()=>{if(S){var t=kr;return e=>t.randomFillSync(e)}return e=>crypto.getRandomValues(e)},V=t=>{(V=D())(t)},at=(...t)=>{for(var e="",n=!1,a=t.length-1;-1<=a&&!n;a--){if(n=0<=a?t[a]:"/",typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,n=n.charAt(0)==="/"}return e=m(e.split("/").filter(E=>!!E),!n).join("/"),(n?"/":"")+e||"."},J=[],ft=t=>{for(var e=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);127>=a?e++:2047>=a?e+=2:55296<=a&&57343>=a?(e+=4,++n):e+=3}return e},Et=(t,e,n,a)=>{if(!(0<a))return 0;var E=n;a=n+a-1;for(var O=0;O<t.length;++O){var j=t.charCodeAt(O);if(55296<=j&&57343>=j){var ht=t.charCodeAt(++O);j=65536+((j&1023)<<10)|ht&1023}if(127>=j){if(n>=a)break;e[n++]=j}else{if(2047>=j){if(n+1>=a)break;e[n++]=192|j>>6}else{if(65535>=j){if(n+2>=a)break;e[n++]=224|j>>12}else{if(n+3>=a)break;e[n++]=240|j>>18,e[n++]=128|j>>12&63}e[n++]=128|j>>6&63}e[n++]=128|j&63}}return e[n]=0,n-E},vt=(t,e)=>{var n=Array(ft(t)+1);return t=Et(t,n,0,n.length),e&&(n.length=t),n},Dt=[];function Yt(t,e){Dt[t]={input:[],output:[],cb:e},Ue(t,Mt)}var Mt={open(t){var e=Dt[t.node.rdev];if(!e)throw new nt(43);t.tty=e,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,e,n,a){if(!t.tty||!t.tty.cb.xb)throw new nt(60);for(var E=0,O=0;O<a;O++){try{var j=t.tty.cb.xb(t.tty)}catch{throw new nt(29)}if(j===void 0&&E===0)throw new nt(6);if(j==null)break;E++,e[n+O]=j}return E&&(t.node.atime=Date.now()),E},write(t,e,n,a){if(!t.tty||!t.tty.cb.qb)throw new nt(60);try{for(var E=0;E<a;E++)t.tty.cb.qb(t.tty,e[n+E])}catch{throw new nt(29)}return a&&(t.node.mtime=t.node.ctime=Date.now()),E}},re={xb(){t:{if(!J.length){var t=null;if(S){var e=Buffer.alloc(256),n=0,a=process.stdin.fd;try{n=v.readSync(a,e,0,256)}catch(E){if(E.toString().includes("EOF"))n=0;else throw E}0<n&&(t=e.slice(0,n).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break t}J=vt(t,!0)}t=J.shift()}return t},qb(t,e){e===null||e===10?(R(L(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(R(L(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Rt={qb(t,e){e===null||e===10?(N(L(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(N(L(t.output)),t.output=[])}},_t={Wa:null,Xa(){return _t.createNode(null,"/",16895,0)},createNode(t,e,n,a){if((n&61440)===24576||(n&61440)===4096)throw new nt(63);return _t.Wa||(_t.Wa={dir:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,lookup:_t.La.lookup,hb:_t.La.hb,rename:_t.La.rename,unlink:_t.La.unlink,rmdir:_t.La.rmdir,readdir:_t.La.readdir,symlink:_t.La.symlink},stream:{Va:_t.Ma.Va}},file:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:{Va:_t.Ma.Va,read:_t.Ma.read,write:_t.Ma.write,ib:_t.Ma.ib,jb:_t.Ma.jb}},link:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,readlink:_t.La.readlink},stream:{}},ub:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:Lr}}),n=Ve(t,e,n,a),Ut(n.mode)?(n.La=_t.Wa.dir.node,n.Ma=_t.Wa.dir.stream,n.Na={}):(n.mode&61440)===32768?(n.La=_t.Wa.file.node,n.Ma=_t.Wa.file.stream,n.Ra=0,n.Na=null):(n.mode&61440)===40960?(n.La=_t.Wa.link.node,n.Ma=_t.Wa.link.stream):(n.mode&61440)===8192&&(n.La=_t.Wa.ub.node,n.Ma=_t.Wa.ub.stream),n.atime=n.mtime=n.ctime=Date.now(),t&&(t.Na[e]=n,t.atime=t.mtime=t.ctime=n.atime),n},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Ut(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.atime),e.mtime=new Date(t.mtime),e.ctime=new Date(t.ctime),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},Ua(t,e){for(var n of["mode","atime","mtime","ctime"])e[n]!=null&&(t[n]=e[n]);e.size!==void 0&&(e=e.size,t.Ra!=e&&(e==0?(t.Na=null,t.Ra=0):(n=t.Na,t.Na=new Uint8Array(e),n&&t.Na.set(n.subarray(0,Math.min(e,t.Ra))),t.Ra=e)))},lookup(){throw _t.vb},hb(t,e,n,a){return _t.createNode(t,e,n,a)},rename(t,e,n){try{var a=ie(e,n)}catch{}if(a){if(Ut(t.mode))for(var E in a.Na)throw new nt(55);De(a)}delete t.parent.Na[t.name],e.Na[n]=t,t.name=n,e.ctime=e.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,e){delete t.Na[e],t.ctime=t.mtime=Date.now()},rmdir(t,e){var n=ie(t,e),a;for(a in n.Na)throw new nt(55);delete t.Na[e],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,e,n){return t=_t.createNode(t,e,41471,0),t.link=n,t},readlink(t){if((t.mode&61440)!==40960)throw new nt(28);return t.link}},Ma:{read(t,e,n,a,E){var O=t.node.Na;if(E>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-E,a),8<t&&O.subarray)e.set(O.subarray(E,E+t),n);else for(a=0;a<t;a++)e[n+a]=O[E+a];return t},write(t,e,n,a,E,O){if(e.buffer===$.buffer&&(O=!1),!a)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(O)return t.Na=e.subarray(n,n+a),t.Ra=a;if(t.Ra===0&&E===0)return t.Na=e.slice(n,n+a),t.Ra=a;if(E+a<=t.Ra)return t.Na.set(e.subarray(n,n+a),E),a}O=E+a;var j=t.Na?t.Na.length:0;if(j>=O||(O=Math.max(O,j*(1048576>j?2:1.125)>>>0),j!=0&&(O=Math.max(O,256)),j=t.Na,t.Na=new Uint8Array(O),0<t.Ra&&t.Na.set(j.subarray(0,t.Ra),0)),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(n,n+a),E);else for(O=0;O<a;O++)t.Na[E+O]=e[n+O];return t.Ra=Math.max(t.Ra,E+a),a},Va(t,e,n){if(n===1?e+=t.position:n===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new nt(28);return e},ib(t,e,n,a,E){if((t.node.mode&61440)!==32768)throw new nt(43);if(t=t.node.Na,E&2||!t||t.buffer!==$.buffer){E=!0,a=65536*Math.ceil(e/65536);var O=hr(65536,a);if(O&&tt.fill(0,O,O+a),a=O,!a)throw new nt(48);t&&((0<n||n+e<t.length)&&(t.subarray?t=t.subarray(n,n+e):t=Array.prototype.slice.call(t,n,n+e)),$.set(t,a))}else E=!1,a=t.byteOffset;return{Kb:a,Ab:E}},jb(t,e,n,a){return _t.Ma.write(t,e,0,a,n,!1),0}}},le=(t,e)=>{var n=0;return t&&(n|=365),e&&(n|=146),n},Bt=null,ce={},Kt=[],Oe=1,$t=null,he=!1,Vt=!0,ne={},nt=class{constructor(t){ee(this,"name","ErrnoError");this.Pa=t}},Ir=class{constructor(){ee(this,"gb",{});ee(this,"node",null)}get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},Or=class{constructor(t,e,n,a){ee(this,"La",{});ee(this,"Ma",{});ee(this,"ab",null);t||(t=this),this.parent=t,this.Xa=t.Xa,this.id=Oe++,this.name=e,this.mode=n,this.rdev=a,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function jt(t,e={}){if(!t)throw new nt(44);e.nb??(e.nb=!0),t.charAt(0)==="/"||(t="//"+t);var n=0;t:for(;40>n;n++){t=t.split("/").filter(ht=>!!ht);for(var a=Bt,E="/",O=0;O<t.length;O++){var j=O===t.length-1;if(j&&e.parent)break;if(t[O]!==".")if(t[O]==="..")E=Z(E),a=a.parent;else{E=x(E+"/"+t[O]);try{a=ie(a,t[O])}catch(ht){if((ht==null?void 0:ht.Pa)===44&&j&&e.Jb)return{path:E};throw ht}if(!a.ab||j&&!e.nb||(a=a.ab.root),(a.mode&61440)===40960&&(!j||e.$a)){if(!a.La.readlink)throw new nt(52);a=a.La.readlink(a),a.charAt(0)==="/"||(a=Z(E)+"/"+a),t=a+"/"+t.slice(O+1).join("/");continue t}}}return{path:E,node:a}}throw new nt(32)}function Ce(t){for(var e;;){if(t===t.parent)return t=t.Xa.zb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function Le(t,e){for(var n=0,a=0;a<e.length;a++)n=(n<<5)-n+e.charCodeAt(a)|0;return(t+n>>>0)%$t.length}function De(t){var e=Le(t.parent.id,t.name);if($t[e]===t)$t[e]=t.bb;else for(e=$t[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function ie(t,e){var n=Ut(t.mode)?(n=ue(t,"x"))?n:t.La.lookup?0:2:54;if(n)throw new nt(n);for(n=$t[Le(t.id,e)];n;n=n.bb){var a=n.name;if(n.parent.id===t.id&&a===e)return n}return t.La.lookup(t,e)}function Ve(t,e,n,a){return t=new Or(t,e,n,a),e=Le(t.parent.id,t.name),t.bb=$t[e],$t[e]=t}function Ut(t){return(t&61440)===16384}function Qe(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function ue(t,e){if(Vt)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function Je(t,e){if(!Ut(t.mode))return 54;try{return ie(t,e),20}catch{}return ue(t,"wx")}function tr(t,e,n){try{var a=ie(t,e)}catch(E){return E.Pa}if(t=ue(t,"wx"))return t;if(n){if(!Ut(a.mode))return 54;if(a===a.parent||Ce(a)==="/")return 10}else if(Ut(a.mode))return 31;return 0}function ge(t){if(!t)throw new nt(63);return t}function zt(t){if(t=Kt[t],!t)throw new nt(8);return t}function er(t,e=-1){if(t=Object.assign(new Ir,t),e==-1)t:{for(e=0;4096>=e;e++)if(!Kt[e])break t;throw new nt(33)}return t.fd=e,Kt[e]=t}function Cr(t,e=-1){var n,a;return t=er(t,e),(a=(n=t.Ma)==null?void 0:n.Rb)==null||a.call(n,t),t}function ze(t,e,n){var a=t==null?void 0:t.Ma.Ua;t=a?t:e,a??(a=e.La.Ua),ge(a),a(t,n)}var Lr={open(t){var e,n;t.Ma=ce[t.node.rdev].Ma,(n=(e=t.Ma).open)==null||n.call(e,t)},Va(){throw new nt(70)}};function Ue(t,e){ce[t]={Ma:e}}function rr(t,e){var n=e==="/";if(n&&Bt)throw new nt(10);if(!n&&e){var a=jt(e,{nb:!1});if(e=a.path,a=a.node,a.ab)throw new nt(10);if(!Ut(a.mode))throw new nt(54)}e={type:t,Wb:{},zb:e,Ib:[]},t=t.Xa(e),t.Xa=e,e.root=t,n?Bt=t:a&&(a.ab=e,a.Xa&&a.Xa.Ib.push(e))}function ye(t,e,n){var a=jt(t,{parent:!0}).node;if(t=Y(t),!t)throw new nt(28);if(t==="."||t==="..")throw new nt(20);var E=Je(a,t);if(E)throw new nt(E);if(!a.La.hb)throw new nt(63);return a.La.hb(a,t,e,n)}function Dr(t,e=438){return ye(t,e&4095|32768,0)}function Zt(t,e=511){return ye(t,e&1023|16384,0)}function we(t,e,n){typeof n>"u"&&(n=e,e=438),ye(t,e|8192,n)}function Pe(t,e){if(!at(t))throw new nt(44);var n=jt(e,{parent:!0}).node;if(!n)throw new nt(44);e=Y(e);var a=Je(n,e);if(a)throw new nt(a);if(!n.La.symlink)throw new nt(63);n.La.symlink(n,e,t)}function nr(t){var e=jt(t,{parent:!0}).node;t=Y(t);var n=ie(e,t),a=tr(e,t,!0);if(a)throw new nt(a);if(!e.La.rmdir)throw new nt(63);if(n.ab)throw new nt(10);e.La.rmdir(e,t),De(n)}function ir(t){var e=jt(t,{parent:!0}).node;if(!e)throw new nt(44);t=Y(t);var n=ie(e,t),a=tr(e,t,!1);if(a)throw new nt(a);if(!e.La.unlink)throw new nt(63);if(n.ab)throw new nt(10);e.La.unlink(e,t),De(n)}function de(t,e){return t=jt(t,{$a:!e}).node,ge(t.La.Ta)(t)}function sr(t,e,n,a){ze(t,e,{mode:n&4095|e.mode&-4096,ctime:Date.now(),Fb:a})}function ve(t,e){t=typeof t=="string"?jt(t,{$a:!0}).node:t,sr(null,t,e)}function ar(t,e,n){if(Ut(e.mode))throw new nt(31);if((e.mode&61440)!==32768)throw new nt(28);var a=ue(e,"w");if(a)throw new nt(a);ze(t,e,{size:n,timestamp:Date.now()})}function fe(t,e,n=438){if(t==="")throw new nt(44);if(typeof e=="string"){var a={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof a>"u")throw Error(`Unknown file open mode: ${e}`);e=a}if(n=e&64?n&4095|32768:0,typeof t=="object")a=t;else{var E=t.endsWith("/");t=jt(t,{$a:!(e&131072),Jb:!0}),a=t.node,t=t.path}var O=!1;if(e&64)if(a){if(e&128)throw new nt(20)}else{if(E)throw new nt(31);a=ye(t,n|511,0),O=!0}if(!a)throw new nt(44);if((a.mode&61440)===8192&&(e&=-513),e&65536&&!Ut(a.mode))throw new nt(54);if(!O&&(E=a?(a.mode&61440)===40960?32:Ut(a.mode)&&(Qe(e)!=="r"||e&576)?31:ue(a,Qe(e)):44))throw new nt(E);return e&512&&!O&&(E=a,E=typeof E=="string"?jt(E,{$a:!0}).node:E,ar(null,E,0)),e&=-131713,E=er({node:a,path:Ce(a),flags:e,seekable:!0,position:0,Ma:a.Ma,Lb:[],error:!1}),E.Ma.open&&E.Ma.open(E),O&&ve(a,n&511),!s.logReadFiles||e&1||t in ne||(ne[t]=1),E}function Be(t){if(t.fd===null)throw new nt(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{Kt[t.fd]=null}t.fd=null}function or(t,e,n){if(t.fd===null)throw new nt(8);if(!t.seekable||!t.Ma.Va)throw new nt(70);if(n!=0&&n!=1&&n!=2)throw new nt(28);t.position=t.Ma.Va(t,e,n),t.Lb=[]}function lr(t,e,n,a,E){if(0>a||0>E)throw new nt(28);if(t.fd===null)throw new nt(8);if((t.flags&2097155)===1)throw new nt(8);if(Ut(t.node.mode))throw new nt(31);if(!t.Ma.read)throw new nt(28);var O=typeof E<"u";if(!O)E=t.position;else if(!t.seekable)throw new nt(70);return e=t.Ma.read(t,e,n,a,E),O||(t.position+=e),e}function ur(t,e,n,a,E){if(0>a||0>E)throw new nt(28);if(t.fd===null)throw new nt(8);if(!(t.flags&2097155))throw new nt(8);if(Ut(t.node.mode))throw new nt(31);if(!t.Ma.write)throw new nt(28);t.seekable&&t.flags&1024&&or(t,0,2);var O=typeof E<"u";if(!O)E=t.position;else if(!t.seekable)throw new nt(70);return e=t.Ma.write(t,e,n,a,E,void 0),O||(t.position+=e),e}function zr(t){var e,n=fe(t,n||0);t=de(t).size;var a=new Uint8Array(t);return lr(n,a,0,t,0),e=a,Be(n),e}function Qt(t,e,n){t=x("/dev/"+t);var a=le(!!e,!!n);Qt.yb??(Qt.yb=64);var E=Qt.yb++<<8|0;Ue(E,{open(O){O.seekable=!1},close(){var O;(O=n==null?void 0:n.buffer)!=null&&O.length&&n(10)},read(O,j,ht,yt){for(var gt=0,It=0;It<yt;It++){try{var Pt=e()}catch{throw new nt(29)}if(Pt===void 0&&gt===0)throw new nt(6);if(Pt==null)break;gt++,j[ht+It]=Pt}return gt&&(O.node.atime=Date.now()),gt},write(O,j,ht,yt){for(var gt=0;gt<yt;gt++)try{n(j[ht+gt])}catch{throw new nt(29)}return yt&&(O.node.mtime=O.node.ctime=Date.now()),gt}}),we(t,a,E)}var St={};function se(t,e,n){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":zt(t).path,e.length==0){if(!n)throw new nt(44);return t}return t+"/"+e}function Ee(t,e){B[t>>2]=e.dev,B[t+4>>2]=e.mode,i[t+8>>2]=e.nlink,B[t+12>>2]=e.uid,B[t+16>>2]=e.gid,B[t+20>>2]=e.rdev,lt[t+24>>3]=BigInt(e.size),B[t+32>>2]=4096,B[t+36>>2]=e.blocks;var n=e.atime.getTime(),a=e.mtime.getTime(),E=e.ctime.getTime();return lt[t+40>>3]=BigInt(Math.floor(n/1e3)),i[t+48>>2]=n%1e3*1e6,lt[t+56>>3]=BigInt(Math.floor(a/1e3)),i[t+64>>2]=a%1e3*1e6,lt[t+72>>3]=BigInt(Math.floor(E/1e3)),i[t+80>>2]=E%1e3*1e6,lt[t+88>>3]=BigInt(e.ino),0}var ke=void 0,Te=()=>{var t=B[+ke>>2];return ke+=4,t},Fe=0,Ur=[0,31,60,91,121,152,182,213,244,274,305,335],Pr=[0,31,59,90,120,151,181,212,243,273,304,334],pe={},fr=t=>{var e;M=t,Lt||0<Fe||((e=s.onExit)==null||e.call(s,t),G=!0),o(t,new xt(t))},Br=t=>{if(!G)try{if(t(),!(Lt||0<Fe))try{M=t=M,fr(t)}catch(e){e instanceof xt||e=="unwind"||o(1,e)}}catch(e){e instanceof xt||e=="unwind"||o(1,e)}},Me={},cr=()=>{if(!je){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},e;for(e in Me)Me[e]===void 0?delete t[e]:t[e]=Me[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);je=n}return je},je,qe=t=>{var e=ft(t)+1,n=te(e);return Et(t,tt,n,e),n},Fr=(t,e,n,a)=>{var E={string:gt=>{var It=0;return gt!=null&&gt!==0&&(It=qe(gt)),It},array:gt=>{var It=te(gt.length);return $.set(gt,It),It}};t=s["_"+t];var O=[],j=0;if(a)for(var ht=0;ht<a.length;ht++){var yt=E[n[ht]];yt?(j===0&&(j=be()),O[ht]=yt(a[ht])):O[ht]=a[ht]}return n=t(...O),n=function(gt){return j!==0&&_e(j),e==="string"?gt?L(tt,gt):"":e==="boolean"?!!gt:gt}(n)},Se=0,Ae=(t,e)=>(e=e==1?te(t.length):Ge(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),tt.set(t,e),e),ae,We=[],Ht,Jt=t=>{ae.delete(Ht.get(t)),Ht.set(t,null),We.push(t)},me=(t,e)=>{if(!ae){ae=new WeakMap;var n=Ht.length;if(ae)for(var a=0;a<0+n;a++){var E=Ht.get(a);E&&ae.set(E,a)}}if(n=ae.get(t)||0)return n;if(We.length)n=We.pop();else{try{Ht.grow(1)}catch(yt){throw yt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":yt}n=Ht.length-1}try{Ht.set(n,t)}catch(yt){if(!(yt instanceof TypeError))throw yt;if(typeof WebAssembly.Function=="function"){var O=WebAssembly.Function;a={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},E={parameters:[],results:e[0]=="v"?[]:[a[e[0]]]};for(var j=1;j<e.length;++j)E.parameters.push(a[e[j]]);e=new O(E,t)}else{a=[1],E=e.slice(0,1),e=e.slice(1),j={i:127,p:127,j:126,f:125,d:124,e:111},a.push(96);var ht=e.length;128>ht?a.push(ht):a.push(ht%128|128,ht>>7);for(O of e)a.push(j[O]);E=="v"?a.push(0):a.push(1,j[E]),e=[0,97,115,109,1,0,0,0,1],O=a.length,128>O?e.push(O):e.push(O%128|128,O>>7),e.push(...a),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}Ht.set(n,e)}return ae.set(t,n),n};$t=Array(4096),rr(_t,"/"),Zt("/tmp"),Zt("/home"),Zt("/home/web_user"),function(){Zt("/dev"),Ue(259,{read:()=>0,write:(a,E,O,j)=>j,Va:()=>0}),we("/dev/null",259),Yt(1280,re),Yt(1536,Rt),we("/dev/tty",1280),we("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,n=()=>(e===0&&(V(t),e=t.byteLength),t[--e]);Qt("random",n),Qt("urandom",n),Zt("/dev/shm"),Zt("/dev/shm/tmp")}(),function(){Zt("/proc");var t=Zt("/proc/self");Zt("/proc/self/fd"),rr({Xa(){var e=Ve(t,"fd",16895,73);return e.Ma={Va:_t.Ma.Va},e.La={lookup(n,a){n=+a;var E=zt(n);return n={parent:null,Xa:{zb:"fake"},La:{readlink:()=>E.path},id:n+1},n.parent=n},readdir(){return Array.from(Kt.entries()).filter(([,n])=>n).map(([n])=>n.toString())}},e}},"/proc/self/fd")}(),_t.vb=new nt(44),_t.vb.stack="<generic error, no stack>";var Mr={a:(t,e,n,a)=>C(`Assertion failed: ${t?L(tt,t):""}, at: `+[e?e?L(tt,e):"":"unknown filename",n,a?a?L(tt,a):"":"unknown function"]),i:function(t,e){try{return t=t?L(tt,t):"",ve(t,e),0}catch(n){if(typeof St>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},L:function(t,e,n){try{if(e=e?L(tt,e):"",e=se(t,e),n&-8)return-28;var a=jt(e,{$a:!0}).node;return a?(t="",n&4&&(t+="r"),n&2&&(t+="w"),n&1&&(t+="x"),t&&ue(a,t)?-2:0):-44}catch(E){if(typeof St>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},j:function(t,e){try{var n=zt(t);return sr(n,n.node,e,!1),0}catch(a){if(typeof St>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},h:function(t){try{var e=zt(t);return ze(e,e.node,{timestamp:Date.now(),Fb:!1}),0}catch(n){if(typeof St>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},b:function(t,e,n){ke=n;try{var a=zt(t);switch(e){case 0:var E=Te();if(0>E)break;for(;Kt[E];)E++;return Cr(a,E).fd;case 1:case 2:return 0;case 3:return a.flags;case 4:return E=Te(),a.flags|=E,0;case 12:return E=Te(),k[E+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(O){if(typeof St>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},g:function(t,e){try{var n=zt(t),a=n.node,E=n.Ma.Ta;t=E?n:a,E??(E=a.La.Ta),ge(E);var O=E(t);return Ee(e,O)}catch(j){if(typeof St>"u"||j.name!=="ErrnoError")throw j;return-j.Pa}},H:function(t,e){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var n=zt(t);if(0>e||!(n.flags&2097155))throw new nt(28);return ar(n,n.node,e),0}catch(a){if(typeof St>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},G:function(t,e){try{if(e===0)return-28;var n=ft("/")+1;return e<n?-68:(Et("/",tt,t,e),n)}catch(a){if(typeof St>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},K:function(t,e){try{return t=t?L(tt,t):"",Ee(e,de(t,!0))}catch(n){if(typeof St>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},C:function(t,e,n){try{return e=e?L(tt,e):"",e=se(t,e),Zt(e,n),0}catch(a){if(typeof St>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},J:function(t,e,n,a){try{e=e?L(tt,e):"";var E=a&256;return e=se(t,e,a&4096),Ee(n,E?de(e,!0):de(e))}catch(O){if(typeof St>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},x:function(t,e,n,a){ke=a;try{e=e?L(tt,e):"",e=se(t,e);var E=a?Te():0;return fe(e,n,E).fd}catch(O){if(typeof St>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},v:function(t,e,n,a){try{if(e=e?L(tt,e):"",e=se(t,e),0>=a)return-28;var E=jt(e).node;if(!E)throw new nt(44);if(!E.La.readlink)throw new nt(28);var O=E.La.readlink(E),j=Math.min(a,ft(O)),ht=$[n+j];return Et(O,tt,n,a+1),$[n+j]=ht,j}catch(yt){if(typeof St>"u"||yt.name!=="ErrnoError")throw yt;return-yt.Pa}},u:function(t){try{return t=t?L(tt,t):"",nr(t),0}catch(e){if(typeof St>"u"||e.name!=="ErrnoError")throw e;return-e.Pa}},f:function(t,e){try{return t=t?L(tt,t):"",Ee(e,de(t))}catch(n){if(typeof St>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},r:function(t,e,n){try{return e=e?L(tt,e):"",e=se(t,e),n===0?ir(e):n===512?nr(e):C("Invalid flags passed to unlinkat"),0}catch(a){if(typeof St>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},q:function(t,e,n){try{e=e?L(tt,e):"",e=se(t,e,!0);var a=Date.now(),E,O;if(n){var j=i[n>>2]+4294967296*B[n+4>>2],ht=B[n+8>>2];ht==1073741823?E=a:ht==1073741822?E=null:E=1e3*j+ht/1e6,n+=16,j=i[n>>2]+4294967296*B[n+4>>2],ht=B[n+8>>2],ht==1073741823?O=a:ht==1073741822?O=null:O=1e3*j+ht/1e6}else O=E=a;if((O??E)!==null){t=E;var yt=jt(e,{$a:!0}).node;ge(yt.La.Ua)(yt,{atime:t,mtime:O})}return 0}catch(gt){if(typeof St>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Pa}},m:()=>C(""),l:()=>{Lt=!1,Fe=0},A:function(t,e){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),B[e>>2]=t.getSeconds(),B[e+4>>2]=t.getMinutes(),B[e+8>>2]=t.getHours(),B[e+12>>2]=t.getDate(),B[e+16>>2]=t.getMonth(),B[e+20>>2]=t.getFullYear()-1900,B[e+24>>2]=t.getDay();var n=t.getFullYear();B[e+28>>2]=(n%4!==0||n%100===0&&n%400!==0?Pr:Ur)[t.getMonth()]+t.getDate()-1|0,B[e+36>>2]=-(60*t.getTimezoneOffset()),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var a=new Date(t.getFullYear(),0,1).getTimezoneOffset();B[e+32>>2]=(n!=a&&t.getTimezoneOffset()==Math.min(a,n))|0},y:function(t,e,n,a,E,O,j){E=-9007199254740992>E||9007199254740992<E?NaN:Number(E);try{if(isNaN(E))return 61;var ht=zt(a);if(e&2&&!(n&2)&&(ht.flags&2097155)!==2)throw new nt(2);if((ht.flags&2097155)===1)throw new nt(2);if(!ht.Ma.ib)throw new nt(43);if(!t)throw new nt(28);var yt=ht.Ma.ib(ht,t,E,e,n),gt=yt.Kb;return B[O>>2]=yt.Ab,i[j>>2]=gt,0}catch(It){if(typeof St>"u"||It.name!=="ErrnoError")throw It;return-It.Pa}},z:function(t,e,n,a,E,O){O=-9007199254740992>O||9007199254740992<O?NaN:Number(O);try{var j=zt(E);if(n&2){if(n=O,(j.node.mode&61440)!==32768)throw new nt(43);if(!(a&2)){var ht=tt.slice(t,t+e);j.Ma.jb&&j.Ma.jb(j,ht,n,e,a)}}}catch(yt){if(typeof St>"u"||yt.name!=="ErrnoError")throw yt;return-yt.Pa}},n:(t,e)=>{if(pe[t]&&(clearTimeout(pe[t].id),delete pe[t]),!e)return 0;var n=setTimeout(()=>{delete pe[t],Br(()=>dr(t,performance.now()))},e);return pe[t]={id:n,Xb:e},0},B:(t,e,n,a)=>{var E=new Date().getFullYear(),O=new Date(E,0,1).getTimezoneOffset();E=new Date(E,6,1).getTimezoneOffset(),i[t>>2]=60*Math.max(O,E),B[e>>2]=+(O!=E),e=j=>{var ht=Math.abs(j);return`UTC${0<=j?"-":"+"}${String(Math.floor(ht/60)).padStart(2,"0")}${String(ht%60).padStart(2,"0")}`},t=e(O),e=e(E),E<O?(Et(t,tt,n,17),Et(e,tt,a,17)):(Et(t,tt,a,17),Et(e,tt,n,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var e=tt.length;if(t>>>=0,2147483648<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);t:{a=(Math.min(2147483648,65536*Math.ceil(Math.max(t,a)/65536))-F.buffer.byteLength+65535)/65536|0;try{F.grow(a),K();var E=1;break t}catch{}E=void 0}if(E)return!0}return!1},E:(t,e)=>{var n=0;return cr().forEach((a,E)=>{var O=e+n;for(E=i[t+4*E>>2]=O,O=0;O<a.length;++O)$[E++]=a.charCodeAt(O);$[E]=0,n+=a.length+1}),0},F:(t,e)=>{var n=cr();i[t>>2]=n.length;var a=0;return n.forEach(E=>a+=E.length+1),i[e>>2]=a,0},e:function(t){try{var e=zt(t);return Be(e),0}catch(n){if(typeof St>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},p:function(t,e){try{var n=zt(t);return $[e]=n.tty?2:Ut(n.mode)?3:(n.mode&61440)===40960?7:4,k[e+2>>1]=0,lt[e+8>>3]=BigInt(0),lt[e+16>>3]=BigInt(0),0}catch(a){if(typeof St>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},w:function(t,e,n,a){try{t:{var E=zt(t);t=e;for(var O,j=e=0;j<n;j++){var ht=i[t>>2],yt=i[t+4>>2];t+=8;var gt=lr(E,$,ht,yt,O);if(0>gt){var It=-1;break t}if(e+=gt,gt<yt)break;typeof O<"u"&&(O+=gt)}It=e}return i[a>>2]=It,0}catch(Pt){if(typeof St>"u"||Pt.name!=="ErrnoError")throw Pt;return Pt.Pa}},D:function(t,e,n,a){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var E=zt(t);return or(E,e,n),lt[a>>3]=BigInt(E.position),E.ob&&e===0&&n===0&&(E.ob=null),0}catch(O){if(typeof St>"u"||O.name!=="ErrnoError")throw O;return O.Pa}},I:function(t){var n;try{var e=zt(t);return(n=e.Ma)!=null&&n.fsync?e.Ma.fsync(e):0}catch(a){if(typeof St>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},t:function(t,e,n,a){try{t:{var E=zt(t);t=e;for(var O,j=e=0;j<n;j++){var ht=i[t>>2],yt=i[t+4>>2];t+=8;var gt=ur(E,$,ht,yt,O);if(0>gt){var It=-1;break t}if(e+=gt,gt<yt)break;typeof O<"u"&&(O+=gt)}It=e}return i[a>>2]=It,0}catch(Pt){if(typeof St>"u"||Pt.name!=="ErrnoError")throw Pt;return Pt.Pa}},k:fr},dt;(async function(){var n;function t(a){var E;return dt=a.exports,F=dt.M,K(),Ht=dt.O,ut--,(E=s.monitorRunDependencies)==null||E.call(s,ut),ut==0&&U&&(a=U,U=null,a()),dt}ut++,(n=s.monitorRunDependencies)==null||n.call(s,ut);var e={a:Mr};return s.instantiateWasm?new Promise(a=>{s.instantiateWasm(e,(E,O)=>{t(E),a(E.exports)})}):(ct??(ct=s.locateFile?s.locateFile("sql-wasm.wasm",f):f+"sql-wasm.wasm"),t((await At(e)).instance))})(),s._sqlite3_free=t=>(s._sqlite3_free=dt.P)(t),s._sqlite3_value_text=t=>(s._sqlite3_value_text=dt.Q)(t),s._sqlite3_prepare_v2=(t,e,n,a,E)=>(s._sqlite3_prepare_v2=dt.R)(t,e,n,a,E),s._sqlite3_step=t=>(s._sqlite3_step=dt.S)(t),s._sqlite3_reset=t=>(s._sqlite3_reset=dt.T)(t),s._sqlite3_exec=(t,e,n,a,E)=>(s._sqlite3_exec=dt.U)(t,e,n,a,E),s._sqlite3_finalize=t=>(s._sqlite3_finalize=dt.V)(t),s._sqlite3_column_name=(t,e)=>(s._sqlite3_column_name=dt.W)(t,e),s._sqlite3_column_text=(t,e)=>(s._sqlite3_column_text=dt.X)(t,e),s._sqlite3_column_type=(t,e)=>(s._sqlite3_column_type=dt.Y)(t,e),s._sqlite3_errmsg=t=>(s._sqlite3_errmsg=dt.Z)(t),s._sqlite3_clear_bindings=t=>(s._sqlite3_clear_bindings=dt._)(t),s._sqlite3_value_blob=t=>(s._sqlite3_value_blob=dt.$)(t),s._sqlite3_value_bytes=t=>(s._sqlite3_value_bytes=dt.aa)(t),s._sqlite3_value_double=t=>(s._sqlite3_value_double=dt.ba)(t),s._sqlite3_value_int=t=>(s._sqlite3_value_int=dt.ca)(t),s._sqlite3_value_type=t=>(s._sqlite3_value_type=dt.da)(t),s._sqlite3_result_blob=(t,e,n,a)=>(s._sqlite3_result_blob=dt.ea)(t,e,n,a),s._sqlite3_result_double=(t,e)=>(s._sqlite3_result_double=dt.fa)(t,e),s._sqlite3_result_error=(t,e,n)=>(s._sqlite3_result_error=dt.ga)(t,e,n),s._sqlite3_result_int=(t,e)=>(s._sqlite3_result_int=dt.ha)(t,e),s._sqlite3_result_int64=(t,e)=>(s._sqlite3_result_int64=dt.ia)(t,e),s._sqlite3_result_null=t=>(s._sqlite3_result_null=dt.ja)(t),s._sqlite3_result_text=(t,e,n,a)=>(s._sqlite3_result_text=dt.ka)(t,e,n,a),s._sqlite3_aggregate_context=(t,e)=>(s._sqlite3_aggregate_context=dt.la)(t,e),s._sqlite3_column_count=t=>(s._sqlite3_column_count=dt.ma)(t),s._sqlite3_data_count=t=>(s._sqlite3_data_count=dt.na)(t),s._sqlite3_column_blob=(t,e)=>(s._sqlite3_column_blob=dt.oa)(t,e),s._sqlite3_column_bytes=(t,e)=>(s._sqlite3_column_bytes=dt.pa)(t,e),s._sqlite3_column_double=(t,e)=>(s._sqlite3_column_double=dt.qa)(t,e),s._sqlite3_bind_blob=(t,e,n,a,E)=>(s._sqlite3_bind_blob=dt.ra)(t,e,n,a,E),s._sqlite3_bind_double=(t,e,n)=>(s._sqlite3_bind_double=dt.sa)(t,e,n),s._sqlite3_bind_int=(t,e,n)=>(s._sqlite3_bind_int=dt.ta)(t,e,n),s._sqlite3_bind_text=(t,e,n,a,E)=>(s._sqlite3_bind_text=dt.ua)(t,e,n,a,E),s._sqlite3_bind_parameter_index=(t,e)=>(s._sqlite3_bind_parameter_index=dt.va)(t,e),s._sqlite3_sql=t=>(s._sqlite3_sql=dt.wa)(t),s._sqlite3_normalized_sql=t=>(s._sqlite3_normalized_sql=dt.xa)(t),s._sqlite3_changes=t=>(s._sqlite3_changes=dt.ya)(t),s._sqlite3_close_v2=t=>(s._sqlite3_close_v2=dt.za)(t),s._sqlite3_create_function_v2=(t,e,n,a,E,O,j,ht,yt)=>(s._sqlite3_create_function_v2=dt.Aa)(t,e,n,a,E,O,j,ht,yt),s._sqlite3_update_hook=(t,e,n)=>(s._sqlite3_update_hook=dt.Ba)(t,e,n),s._sqlite3_open=(t,e)=>(s._sqlite3_open=dt.Ca)(t,e);var Ge=s._malloc=t=>(Ge=s._malloc=dt.Da)(t),Ne=s._free=t=>(Ne=s._free=dt.Ea)(t);s._RegisterExtensionFunctions=t=>(s._RegisterExtensionFunctions=dt.Fa)(t);var hr=(t,e)=>(hr=dt.Ga)(t,e),dr=(t,e)=>(dr=dt.Ha)(t,e),_e=t=>(_e=dt.Ia)(t),te=t=>(te=dt.Ja)(t),be=()=>(be=dt.Ka)();s.stackSave=()=>be(),s.stackRestore=t=>_e(t),s.stackAlloc=t=>te(t),s.cwrap=(t,e,n,a)=>{var E=!n||n.every(O=>O==="number"||O==="boolean");return e!=="string"&&E&&!a?s["_"+t]:(...O)=>Fr(t,e,n,O)},s.addFunction=me,s.removeFunction=Jt,s.UTF8ToString=w,s.ALLOC_NORMAL=Se,s.allocate=Ae,s.allocateUTF8OnStack=qe;function $e(){function t(){var E;if(s.calledRun=!0,!G){if(!s.noFSInit&&!he){var e,n;he=!0,a??(a=s.stdin),e??(e=s.stdout),n??(n=s.stderr),a?Qt("stdin",a):Pe("/dev/tty","/dev/stdin"),e?Qt("stdout",null,e):Pe("/dev/tty","/dev/stdout"),n?Qt("stderr",null,n):Pe("/dev/tty1","/dev/stderr"),fe("/dev/stdin",0),fe("/dev/stdout",1),fe("/dev/stderr",1)}if(dt.N(),Vt=!1,(E=s.onRuntimeInitialized)==null||E.call(s),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var a=s.postRun.shift();kt.unshift(a)}wt(kt)}}if(0<ut)U=$e;else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Nt();wt(Ot),0<ut?U=$e:s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),t()},1)):t()}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return $e(),l}),y)};Q.exports=z,Q.exports.default=z})(Ar);var wn=Ar.exports;const Tr=Sr(wn),vn="/npconv/assets/sql-wasm-C1U8OeUW.wasm";async function En(){try{return await Tr({locateFile:()=>String(vn)})}catch{try{return await Tr()}catch(Q){throw rt("Failed to initialize sql.js: "+(Q.message||Q.toString()),"err"),Q}}}function kn(Q){rt("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const st=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];Q.run("BEGIN TRANSACTION");try{for(const y of st)Q.run(y);Q.run("COMMIT"),rt("Schema created.","schema")}catch(y){try{Q.run("ROLLBACK")}catch{}throw rt("Failed to create schema: "+(y.message||y.toString()),"err"),y}}function Tn(Q){try{const st=Q.exec("PRAGMA foreign_key_list('stream_state')"),y=Q.exec("PRAGMA table_info('stream_state')");let z=!1;st&&st.length>0&&st[0].values&&st[0].values.length>0&&(z=!0);let b=!1;if(y&&y.length>0&&y[0].values.length>=2){const h=y[0].values,d=h.map(g=>g[1]),l=h.map(g=>g[5]);d[0]==="progress_time"&&d[1]==="stream_id"&&l[0]===0&&l[1]===1&&(b=!0)}if(!z||!b){rt("Patching stream_state schema to Room-compatible definition...","schema"),Q.run("BEGIN TRANSACTION");const h=Q.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(h&&h.length>0&&h[0].values.length>0){Q.run("ALTER TABLE stream_state RENAME TO stream_state_old"),Q.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{Q.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(d){rt("Note: could not copy old stream_state rows: "+(d.message||d.toString()),"warn")}Q.run("DROP TABLE stream_state_old")}else Q.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");Q.run("COMMIT"),rt("stream_state schema patched.","schema")}else rt("stream_state schema OK.","schema")}catch(st){rt("Failed to ensure stream_state schema: "+(st.message||st.toString()),"err")}}const Xt=0,Sn={content_country:"US",content_language:"en",theme:"DARK"};function Xe(){const Q=new Date,st=y=>String(y).padStart(2,"0");return`${Q.getFullYear()}-${st(Q.getMonth()+1)}-${st(Q.getDate())}-${st(Q.getHours())}-${st(Q.getMinutes())}-${st(Q.getSeconds())}`}function He(Q,st,y=null){let z=st;y&&(st.endsWith(".zip")?z=st.replace(".zip",`-${y}.zip`):st.endsWith(".json")&&(z=st.replace(".json",`-${y}.json`)));const b=URL.createObjectURL(Q),h=document.createElement("a");h.href=b,h.download=z,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(b)}function Ie(Q){throw new Error('Could not dynamically require "'+Q+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(Q,st){(function(y){Q.exports=y()})(function(){return function y(z,b,h){function d(s,A){if(!b[s]){if(!z[s]){var T=typeof Ie=="function"&&Ie;if(!A&&T)return T(s,!0);if(l)return l(s,!0);var S=new Error("Cannot find module '"+s+"'");throw S.code="MODULE_NOT_FOUND",S}var c=b[s]={exports:{}};z[s][0].call(c.exports,function(p){var o=z[s][1][p];return d(o||p)},c,c.exports,y,z,b,h)}return b[s].exports}for(var l=typeof Ie=="function"&&Ie,g=0;g<h.length;g++)d(h[g]);return d}({1:[function(y,z,b){var h=y("./utils"),d=y("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b.encode=function(g){for(var s,A,T,S,c,p,o,f=[],u=0,_=g.length,v=_,R=h.getTypeOf(g)!=="string";u<g.length;)v=_-u,T=R?(s=g[u++],A=u<_?g[u++]:0,u<_?g[u++]:0):(s=g.charCodeAt(u++),A=u<_?g.charCodeAt(u++):0,u<_?g.charCodeAt(u++):0),S=s>>2,c=(3&s)<<4|A>>4,p=1<v?(15&A)<<2|T>>6:64,o=2<v?63&T:64,f.push(l.charAt(S)+l.charAt(c)+l.charAt(p)+l.charAt(o));return f.join("")},b.decode=function(g){var s,A,T,S,c,p,o=0,f=0,u="data:";if(g.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var _,v=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===l.charAt(64)&&v--,g.charAt(g.length-2)===l.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=d.uint8array?new Uint8Array(0|v):new Array(0|v);o<g.length;)s=l.indexOf(g.charAt(o++))<<2|(S=l.indexOf(g.charAt(o++)))>>4,A=(15&S)<<4|(c=l.indexOf(g.charAt(o++)))>>2,T=(3&c)<<6|(p=l.indexOf(g.charAt(o++))),_[f++]=s,c!==64&&(_[f++]=A),p!==64&&(_[f++]=T);return _}},{"./support":30,"./utils":32}],2:[function(y,z,b){var h=y("./external"),d=y("./stream/DataWorker"),l=y("./stream/Crc32Probe"),g=y("./stream/DataLengthProbe");function s(A,T,S,c,p){this.compressedSize=A,this.uncompressedSize=T,this.crc32=S,this.compression=c,this.compressedContent=p}s.prototype={getContentWorker:function(){var A=new d(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),T=this;return A.on("end",function(){if(this.streamInfo.data_length!==T.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),A},getCompressedWorker:function(){return new d(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(A,T,S){return A.pipe(new l).pipe(new g("uncompressedSize")).pipe(T.compressWorker(S)).pipe(new g("compressedSize")).withStreamInfo("compression",T)},z.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(y,z,b){var h=y("./stream/GenericWorker");b.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},b.DEFLATE=y("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(y,z,b){var h=y("./utils"),d=function(){for(var l,g=[],s=0;s<256;s++){l=s;for(var A=0;A<8;A++)l=1&l?3988292384^l>>>1:l>>>1;g[s]=l}return g}();z.exports=function(l,g){return l!==void 0&&l.length?h.getTypeOf(l)!=="string"?function(s,A,T,S){var c=d,p=S+T;s^=-1;for(var o=S;o<p;o++)s=s>>>8^c[255&(s^A[o])];return-1^s}(0|g,l,l.length,0):function(s,A,T,S){var c=d,p=S+T;s^=-1;for(var o=S;o<p;o++)s=s>>>8^c[255&(s^A.charCodeAt(o))];return-1^s}(0|g,l,l.length,0):0}},{"./utils":32}],5:[function(y,z,b){b.base64=!1,b.binary=!1,b.dir=!1,b.createFolders=!0,b.date=null,b.compression=null,b.compressionOptions=null,b.comment=null,b.unixPermissions=null,b.dosPermissions=null},{}],6:[function(y,z,b){var h=null;h=typeof Promise<"u"?Promise:y("lie"),z.exports={Promise:h}},{lie:37}],7:[function(y,z,b){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",d=y("pako"),l=y("./utils"),g=y("./stream/GenericWorker"),s=h?"uint8array":"array";function A(T,S){g.call(this,"FlateWorker/"+T),this._pako=null,this._pakoAction=T,this._pakoOptions=S,this.meta={}}b.magic="\b\0",l.inherits(A,g),A.prototype.processChunk=function(T){this.meta=T.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(s,T.data),!1)},A.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var T=this;this._pako.onData=function(S){T.push({data:S,meta:T.meta})}},b.compressWorker=function(T){return new A("Deflate",T)},b.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(y,z,b){function h(c,p){var o,f="";for(o=0;o<p;o++)f+=String.fromCharCode(255&c),c>>>=8;return f}function d(c,p,o,f,u,_){var v,R,N=c.file,P=c.compression,F=_!==s.utf8encode,G=l.transformTo("string",_(N.name)),M=l.transformTo("string",s.utf8encode(N.name)),$=N.comment,tt=l.transformTo("string",_($)),k=l.transformTo("string",s.utf8encode($)),B=M.length!==N.name.length,i=k.length!==$.length,q="",lt="",H="",pt=N.dir,K=N.date,ut={crc32:0,compressedSize:0,uncompressedSize:0};p&&!o||(ut.crc32=c.crc32,ut.compressedSize=c.compressedSize,ut.uncompressedSize=c.uncompressedSize);var U=0;p&&(U|=8),F||!B&&!i||(U|=2048);var C=0,ct=0;pt&&(C|=16),u==="UNIX"?(ct=798,C|=function(et,At){var xt=et;return et||(xt=At?16893:33204),(65535&xt)<<16}(N.unixPermissions,pt)):(ct=20,C|=function(et){return 63&(et||0)}(N.dosPermissions)),v=K.getUTCHours(),v<<=6,v|=K.getUTCMinutes(),v<<=5,v|=K.getUTCSeconds()/2,R=K.getUTCFullYear()-1980,R<<=4,R|=K.getUTCMonth()+1,R<<=5,R|=K.getUTCDate(),B&&(lt=h(1,1)+h(A(G),4)+M,q+="up"+h(lt.length,2)+lt),i&&(H=h(1,1)+h(A(tt),4)+k,q+="uc"+h(H.length,2)+H);var it="";return it+=`
\0`,it+=h(U,2),it+=P.magic,it+=h(v,2),it+=h(R,2),it+=h(ut.crc32,4),it+=h(ut.compressedSize,4),it+=h(ut.uncompressedSize,4),it+=h(G.length,2),it+=h(q.length,2),{fileRecord:T.LOCAL_FILE_HEADER+it+G+q,dirRecord:T.CENTRAL_FILE_HEADER+h(ct,2)+it+h(tt.length,2)+"\0\0\0\0"+h(C,4)+h(f,4)+G+q+tt}}var l=y("../utils"),g=y("../stream/GenericWorker"),s=y("../utf8"),A=y("../crc32"),T=y("../signature");function S(c,p,o,f){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=o,this.encodeFileName=f,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(S,g),S.prototype.push=function(c){var p=c.meta.percent||0,o=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,g.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:o?(p+100*(o-f-1))/o:100}}))},S.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var p=this.streamFiles&&!c.file.dir;if(p){var o=d(c,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:o.fileRecord,meta:{percent:0}})}else this.accumulate=!0},S.prototype.closedSource=function(c){this.accumulate=!1;var p=this.streamFiles&&!c.file.dir,o=d(c,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),p)this.push({data:function(f){return T.DATA_DESCRIPTOR+h(f.crc32,4)+h(f.compressedSize,4)+h(f.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},S.prototype.flush=function(){for(var c=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var o=this.bytesWritten-c,f=function(u,_,v,R,N){var P=l.transformTo("string",N(R));return T.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(u,2)+h(u,2)+h(_,4)+h(v,4)+h(P.length,2)+P}(this.dirRecords.length,o,c,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},S.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},S.prototype.registerPrevious=function(c){this._sources.push(c);var p=this;return c.on("data",function(o){p.processChunk(o)}),c.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),c.on("error",function(o){p.error(o)}),this},S.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},S.prototype.error=function(c){var p=this._sources;if(!g.prototype.error.call(this,c))return!1;for(var o=0;o<p.length;o++)try{p[o].error(c)}catch{}return!0},S.prototype.lock=function(){g.prototype.lock.call(this);for(var c=this._sources,p=0;p<c.length;p++)c[p].lock()},z.exports=S},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(y,z,b){var h=y("../compressions"),d=y("./ZipFileWorker");b.generateWorker=function(l,g,s){var A=new d(g.streamFiles,s,g.platform,g.encodeFileName),T=0;try{l.forEach(function(S,c){T++;var p=function(_,v){var R=_||v,N=h[R];if(!N)throw new Error(R+" is not a valid compression method !");return N}(c.options.compression,g.compression),o=c.options.compressionOptions||g.compressionOptions||{},f=c.dir,u=c.date;c._compressWorker(p,o).withStreamInfo("file",{name:S,dir:f,date:u,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(A)}),A.entriesCount=T}catch(S){A.error(S)}return A}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(y,z,b){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var d=new h;for(var l in this)typeof this[l]!="function"&&(d[l]=this[l]);return d}}(h.prototype=y("./object")).loadAsync=y("./load"),h.support=y("./support"),h.defaults=y("./defaults"),h.version="3.10.1",h.loadAsync=function(d,l){return new h().loadAsync(d,l)},h.external=y("./external"),z.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(y,z,b){var h=y("./utils"),d=y("./external"),l=y("./utf8"),g=y("./zipEntries"),s=y("./stream/Crc32Probe"),A=y("./nodejsUtils");function T(S){return new d.Promise(function(c,p){var o=S.decompressed.getContentWorker().pipe(new s);o.on("error",function(f){p(f)}).on("end",function(){o.streamInfo.crc32!==S.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}z.exports=function(S,c){var p=this;return c=h.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),A.isNode&&A.isStream(S)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",S,!0,c.optimizedBinaryString,c.base64).then(function(o){var f=new g(c);return f.load(o),f}).then(function(o){var f=[d.Promise.resolve(o)],u=o.files;if(c.checkCRC32)for(var _=0;_<u.length;_++)f.push(T(u[_]));return d.Promise.all(f)}).then(function(o){for(var f=o.shift(),u=f.files,_=0;_<u.length;_++){var v=u[_],R=v.fileNameStr,N=h.resolve(v.fileNameStr);p.file(N,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:c.createFolders}),v.dir||(p.file(N).unsafeOriginalName=R)}return f.zipComment.length&&(p.comment=f.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(y,z,b){var h=y("../utils"),d=y("../stream/GenericWorker");function l(g,s){d.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(s)}h.inherits(l,d),l.prototype._bindStream=function(g){var s=this;(this._stream=g).pause(),g.on("data",function(A){s.push({data:A,meta:{percent:0}})}).on("error",function(A){s.isPaused?this.generatedError=A:s.error(A)}).on("end",function(){s.isPaused?s._upstreamEnded=!0:s.end()})},l.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},z.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(y,z,b){var h=y("readable-stream").Readable;function d(l,g,s){h.call(this,g),this._helper=l;var A=this;l.on("data",function(T,S){A.push(T)||A._helper.pause(),s&&s(S)}).on("error",function(T){A.emit("error",T)}).on("end",function(){A.push(null)})}y("../utils").inherits(d,h),d.prototype._read=function(){this._helper.resume()},z.exports=d},{"../utils":32,"readable-stream":16}],14:[function(y,z,b){z.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,d);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,d)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var d=new Buffer(h);return d.fill(0),d},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(y,z,b){function h(N,P,F){var G,M=l.getTypeOf(P),$=l.extend(F||{},A);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(N=u(N)),$.createFolders&&(G=f(N))&&_.call(this,G,!0);var tt=M==="string"&&$.binary===!1&&$.base64===!1;F&&F.binary!==void 0||($.binary=!tt),(P instanceof T&&P.uncompressedSize===0||$.dir||!P||P.length===0)&&($.base64=!1,$.binary=!0,P="",$.compression="STORE",M="string");var k=null;k=P instanceof T||P instanceof g?P:p.isNode&&p.isStream(P)?new o(N,P):l.prepareContent(N,P,$.binary,$.optimizedBinaryString,$.base64);var B=new S(N,k,$);this.files[N]=B}var d=y("./utf8"),l=y("./utils"),g=y("./stream/GenericWorker"),s=y("./stream/StreamHelper"),A=y("./defaults"),T=y("./compressedObject"),S=y("./zipObject"),c=y("./generate"),p=y("./nodejsUtils"),o=y("./nodejs/NodejsStreamInputAdapter"),f=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var P=N.lastIndexOf("/");return 0<P?N.substring(0,P):""},u=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},_=function(N,P){return P=P!==void 0?P:A.createFolders,N=u(N),this.files[N]||h.call(this,N,null,{dir:!0,createFolders:P}),this.files[N]};function v(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var P,F,G;for(P in this.files)G=this.files[P],(F=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&N(F,G)},filter:function(N){var P=[];return this.forEach(function(F,G){N(F,G)&&P.push(G)}),P},file:function(N,P,F){if(arguments.length!==1)return N=this.root+N,h.call(this,N,P,F),this;if(v(N)){var G=N;return this.filter(function($,tt){return!tt.dir&&G.test($)})}var M=this.files[this.root+N];return M&&!M.dir?M:null},folder:function(N){if(!N)return this;if(v(N))return this.filter(function(M,$){return $.dir&&N.test(M)});var P=this.root+N,F=_.call(this,P),G=this.clone();return G.root=F.name,G},remove:function(N){N=this.root+N;var P=this.files[N];if(P||(N.slice(-1)!=="/"&&(N+="/"),P=this.files[N]),P&&!P.dir)delete this.files[N];else for(var F=this.filter(function(M,$){return $.name.slice(0,N.length)===N}),G=0;G<F.length;G++)delete this.files[F[G].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var P,F={};try{if((F=l.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");l.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var G=F.comment||this.comment||"";P=c.generateWorker(this,F,G)}catch(M){(P=new g("error")).error(M)}return new s(P,F.type||"string",F.mimeType)},generateAsync:function(N,P){return this.generateInternalStream(N).accumulate(P)},generateNodeStream:function(N,P){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(P)}};z.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(y,z,b){z.exports=y("stream")},{stream:void 0}],17:[function(y,z,b){var h=y("./DataReader");function d(l){h.call(this,l);for(var g=0;g<this.data.length;g++)l[g]=255&l[g]}y("../utils").inherits(d,h),d.prototype.byteAt=function(l){return this.data[this.zero+l]},d.prototype.lastIndexOfSignature=function(l){for(var g=l.charCodeAt(0),s=l.charCodeAt(1),A=l.charCodeAt(2),T=l.charCodeAt(3),S=this.length-4;0<=S;--S)if(this.data[S]===g&&this.data[S+1]===s&&this.data[S+2]===A&&this.data[S+3]===T)return S-this.zero;return-1},d.prototype.readAndCheckSignature=function(l){var g=l.charCodeAt(0),s=l.charCodeAt(1),A=l.charCodeAt(2),T=l.charCodeAt(3),S=this.readData(4);return g===S[0]&&s===S[1]&&A===S[2]&&T===S[3]},d.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,g},z.exports=d},{"../utils":32,"./DataReader":18}],18:[function(y,z,b){var h=y("../utils");function d(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var g,s=0;for(this.checkOffset(l),g=this.index+l-1;g>=this.index;g--)s=(s<<8)+this.byteAt(g);return this.index+=l,s},readString:function(l){return h.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},z.exports=d},{"../utils":32}],19:[function(y,z,b){var h=y("./Uint8ArrayReader");function d(l){h.call(this,l)}y("../utils").inherits(d,h),d.prototype.readData=function(l){this.checkOffset(l);var g=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,g},z.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(y,z,b){var h=y("./DataReader");function d(l){h.call(this,l)}y("../utils").inherits(d,h),d.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},d.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},d.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},d.prototype.readData=function(l){this.checkOffset(l);var g=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,g},z.exports=d},{"../utils":32,"./DataReader":18}],21:[function(y,z,b){var h=y("./ArrayReader");function d(l){h.call(this,l)}y("../utils").inherits(d,h),d.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,g},z.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(y,z,b){var h=y("../utils"),d=y("../support"),l=y("./ArrayReader"),g=y("./StringReader"),s=y("./NodeBufferReader"),A=y("./Uint8ArrayReader");z.exports=function(T){var S=h.getTypeOf(T);return h.checkSupport(S),S!=="string"||d.uint8array?S==="nodebuffer"?new s(T):d.uint8array?new A(h.transformTo("uint8array",T)):new l(h.transformTo("array",T)):new g(T)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(y,z,b){b.LOCAL_FILE_HEADER="PK",b.CENTRAL_FILE_HEADER="PK",b.CENTRAL_DIRECTORY_END="PK",b.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",b.ZIP64_CENTRAL_DIRECTORY_END="PK",b.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(y,z,b){var h=y("./GenericWorker"),d=y("../utils");function l(g){h.call(this,"ConvertWorker to "+g),this.destType=g}d.inherits(l,h),l.prototype.processChunk=function(g){this.push({data:d.transformTo(this.destType,g.data),meta:g.meta})},z.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(y,z,b){var h=y("./GenericWorker"),d=y("../crc32");function l(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}y("../utils").inherits(l,h),l.prototype.processChunk=function(g){this.streamInfo.crc32=d(g.data,this.streamInfo.crc32||0),this.push(g)},z.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(y,z,b){var h=y("../utils"),d=y("./GenericWorker");function l(g){d.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}h.inherits(l,d),l.prototype.processChunk=function(g){if(g){var s=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=s+g.data.length}d.prototype.processChunk.call(this,g)},z.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(y,z,b){var h=y("../utils"),d=y("./GenericWorker");function l(g){d.call(this,"DataWorker");var s=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(A){s.dataIsReady=!0,s.data=A,s.max=A&&A.length||0,s.type=h.getTypeOf(A),s.isPaused||s._tickAndRepeat()},function(A){s.error(A)})}h.inherits(l,d),l.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,s=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,s);break;case"uint8array":g=this.data.subarray(this.index,s);break;case"array":case"nodebuffer":g=this.data.slice(this.index,s)}return this.index=s,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},z.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(y,z,b){function h(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,l){return this._listeners[d].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,l){if(this._listeners[d])for(var g=0;g<this._listeners[d].length;g++)this._listeners[d][g].call(this,l)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var l=this;return d.on("data",function(g){l.processChunk(g)}),d.on("end",function(){l.end()}),d.on("error",function(g){l.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,l){return this.extraStreamInfo[d]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},z.exports=h},{}],29:[function(y,z,b){var h=y("../utils"),d=y("./ConvertWorker"),l=y("./GenericWorker"),g=y("../base64"),s=y("../support"),A=y("../external"),T=null;if(s.nodestream)try{T=y("../nodejs/NodejsStreamOutputAdapter")}catch{}function S(p,o){return new A.Promise(function(f,u){var _=[],v=p._internalType,R=p._outputType,N=p._mimeType;p.on("data",function(P,F){_.push(P),o&&o(F)}).on("error",function(P){_=[],u(P)}).on("end",function(){try{var P=function(F,G,M){switch(F){case"blob":return h.newBlob(h.transformTo("arraybuffer",G),M);case"base64":return g.encode(G);default:return h.transformTo(F,G)}}(R,function(F,G){var M,$=0,tt=null,k=0;for(M=0;M<G.length;M++)k+=G[M].length;switch(F){case"string":return G.join("");case"array":return Array.prototype.concat.apply([],G);case"uint8array":for(tt=new Uint8Array(k),M=0;M<G.length;M++)tt.set(G[M],$),$+=G[M].length;return tt;case"nodebuffer":return Buffer.concat(G);default:throw new Error("concat : unsupported type '"+F+"'")}}(v,_),N);f(P)}catch(F){u(F)}_=[]}).resume()})}function c(p,o,f){var u=o;switch(o){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=o,this._mimeType=f,h.checkSupport(u),this._worker=p.pipe(new d(u)),p.lock()}catch(_){this._worker=new l("error"),this._worker.error(_)}}c.prototype={accumulate:function(p){return S(this,p)},on:function(p,o){var f=this;return p==="data"?this._worker.on(p,function(u){o.call(f,u.data,u.meta)}):this._worker.on(p,function(){h.delay(o,arguments,f)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new T(this,{objectMode:this._outputType!=="nodebuffer"},p)}},z.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(y,z,b){if(b.base64=!0,b.array=!0,b.string=!0,b.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",b.nodebuffer=typeof Buffer<"u",b.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")b.blob=!1;else{var h=new ArrayBuffer(0);try{b.blob=new Blob([h],{type:"application/zip"}).size===0}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(h),b.blob=d.getBlob("application/zip").size===0}catch{b.blob=!1}}}try{b.nodestream=!!y("readable-stream").Readable}catch{b.nodestream=!1}},{"readable-stream":16}],31:[function(y,z,b){for(var h=y("./utils"),d=y("./support"),l=y("./nodejsUtils"),g=y("./stream/GenericWorker"),s=new Array(256),A=0;A<256;A++)s[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;s[254]=s[254]=1;function T(){g.call(this,"utf-8 decode"),this.leftOver=null}function S(){g.call(this,"utf-8 encode")}b.utf8encode=function(c){return d.nodebuffer?l.newBufferFrom(c,"utf-8"):function(p){var o,f,u,_,v,R=p.length,N=0;for(_=0;_<R;_++)(64512&(f=p.charCodeAt(_)))==55296&&_+1<R&&(64512&(u=p.charCodeAt(_+1)))==56320&&(f=65536+(f-55296<<10)+(u-56320),_++),N+=f<128?1:f<2048?2:f<65536?3:4;for(o=d.uint8array?new Uint8Array(N):new Array(N),_=v=0;v<N;_++)(64512&(f=p.charCodeAt(_)))==55296&&_+1<R&&(64512&(u=p.charCodeAt(_+1)))==56320&&(f=65536+(f-55296<<10)+(u-56320),_++),f<128?o[v++]=f:(f<2048?o[v++]=192|f>>>6:(f<65536?o[v++]=224|f>>>12:(o[v++]=240|f>>>18,o[v++]=128|f>>>12&63),o[v++]=128|f>>>6&63),o[v++]=128|63&f);return o}(c)},b.utf8decode=function(c){return d.nodebuffer?h.transformTo("nodebuffer",c).toString("utf-8"):function(p){var o,f,u,_,v=p.length,R=new Array(2*v);for(o=f=0;o<v;)if((u=p[o++])<128)R[f++]=u;else if(4<(_=s[u]))R[f++]=65533,o+=_-1;else{for(u&=_===2?31:_===3?15:7;1<_&&o<v;)u=u<<6|63&p[o++],_--;1<_?R[f++]=65533:u<65536?R[f++]=u:(u-=65536,R[f++]=55296|u>>10&1023,R[f++]=56320|1023&u)}return R.length!==f&&(R.subarray?R=R.subarray(0,f):R.length=f),h.applyFromCharCode(R)}(c=h.transformTo(d.uint8array?"uint8array":"array",c))},h.inherits(T,g),T.prototype.processChunk=function(c){var p=h.transformTo(d.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var o=p;(p=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),p.set(o,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var f=function(_,v){var R;for((v=v||_.length)>_.length&&(v=_.length),R=v-1;0<=R&&(192&_[R])==128;)R--;return R<0||R===0?v:R+s[_[R]]>v?R:v}(p),u=p;f!==p.length&&(d.uint8array?(u=p.subarray(0,f),this.leftOver=p.subarray(f,p.length)):(u=p.slice(0,f),this.leftOver=p.slice(f,p.length))),this.push({data:b.utf8decode(u),meta:c.meta})},T.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:b.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},b.Utf8DecodeWorker=T,h.inherits(S,g),S.prototype.processChunk=function(c){this.push({data:b.utf8encode(c.data),meta:c.meta})},b.Utf8EncodeWorker=S},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(y,z,b){var h=y("./support"),d=y("./base64"),l=y("./nodejsUtils"),g=y("./external");function s(o){return o}function A(o,f){for(var u=0;u<o.length;++u)f[u]=255&o.charCodeAt(u);return f}y("setimmediate"),b.newBlob=function(o,f){b.checkSupport("blob");try{return new Blob([o],{type:f})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(o),u.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var T={stringifyByChunk:function(o,f,u){var _=[],v=0,R=o.length;if(R<=u)return String.fromCharCode.apply(null,o);for(;v<R;)f==="array"||f==="nodebuffer"?_.push(String.fromCharCode.apply(null,o.slice(v,Math.min(v+u,R)))):_.push(String.fromCharCode.apply(null,o.subarray(v,Math.min(v+u,R)))),v+=u;return _.join("")},stringifyByChar:function(o){for(var f="",u=0;u<o.length;u++)f+=String.fromCharCode(o[u]);return f},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function S(o){var f=65536,u=b.getTypeOf(o),_=!0;if(u==="uint8array"?_=T.applyCanBeUsed.uint8array:u==="nodebuffer"&&(_=T.applyCanBeUsed.nodebuffer),_)for(;1<f;)try{return T.stringifyByChunk(o,u,f)}catch{f=Math.floor(f/2)}return T.stringifyByChar(o)}function c(o,f){for(var u=0;u<o.length;u++)f[u]=o[u];return f}b.applyFromCharCode=S;var p={};p.string={string:s,array:function(o){return A(o,new Array(o.length))},arraybuffer:function(o){return p.string.uint8array(o).buffer},uint8array:function(o){return A(o,new Uint8Array(o.length))},nodebuffer:function(o){return A(o,l.allocBuffer(o.length))}},p.array={string:S,array:s,arraybuffer:function(o){return new Uint8Array(o).buffer},uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return l.newBufferFrom(o)}},p.arraybuffer={string:function(o){return S(new Uint8Array(o))},array:function(o){return c(new Uint8Array(o),new Array(o.byteLength))},arraybuffer:s,uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return l.newBufferFrom(new Uint8Array(o))}},p.uint8array={string:S,array:function(o){return c(o,new Array(o.length))},arraybuffer:function(o){return o.buffer},uint8array:s,nodebuffer:function(o){return l.newBufferFrom(o)}},p.nodebuffer={string:S,array:function(o){return c(o,new Array(o.length))},arraybuffer:function(o){return p.nodebuffer.uint8array(o).buffer},uint8array:function(o){return c(o,new Uint8Array(o.length))},nodebuffer:s},b.transformTo=function(o,f){if(f=f||"",!o)return f;b.checkSupport(o);var u=b.getTypeOf(f);return p[u][o](f)},b.resolve=function(o){for(var f=o.split("/"),u=[],_=0;_<f.length;_++){var v=f[_];v==="."||v===""&&_!==0&&_!==f.length-1||(v===".."?u.pop():u.push(v))}return u.join("/")},b.getTypeOf=function(o){return typeof o=="string"?"string":Object.prototype.toString.call(o)==="[object Array]"?"array":h.nodebuffer&&l.isBuffer(o)?"nodebuffer":h.uint8array&&o instanceof Uint8Array?"uint8array":h.arraybuffer&&o instanceof ArrayBuffer?"arraybuffer":void 0},b.checkSupport=function(o){if(!h[o.toLowerCase()])throw new Error(o+" is not supported by this platform")},b.MAX_VALUE_16BITS=65535,b.MAX_VALUE_32BITS=-1,b.pretty=function(o){var f,u,_="";for(u=0;u<(o||"").length;u++)_+="\\x"+((f=o.charCodeAt(u))<16?"0":"")+f.toString(16).toUpperCase();return _},b.delay=function(o,f,u){setImmediate(function(){o.apply(u||null,f||[])})},b.inherits=function(o,f){function u(){}u.prototype=f.prototype,o.prototype=new u},b.extend=function(){var o,f,u={};for(o=0;o<arguments.length;o++)for(f in arguments[o])Object.prototype.hasOwnProperty.call(arguments[o],f)&&u[f]===void 0&&(u[f]=arguments[o][f]);return u},b.prepareContent=function(o,f,u,_,v){return g.Promise.resolve(f).then(function(R){return h.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new g.Promise(function(N,P){var F=new FileReader;F.onload=function(G){N(G.target.result)},F.onerror=function(G){P(G.target.error)},F.readAsArrayBuffer(R)}):R}).then(function(R){var N=b.getTypeOf(R);return N?(N==="arraybuffer"?R=b.transformTo("uint8array",R):N==="string"&&(v?R=d.decode(R):u&&_!==!0&&(R=function(P){return A(P,h.uint8array?new Uint8Array(P.length):new Array(P.length))}(R))),R):g.Promise.reject(new Error("Can't read the data of '"+o+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(y,z,b){var h=y("./reader/readerFor"),d=y("./utils"),l=y("./signature"),g=y("./zipEntry"),s=y("./support");function A(T){this.files=[],this.loadOptions=T}A.prototype={checkSignature:function(T){if(!this.reader.readAndCheckSignature(T)){this.reader.index-=4;var S=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(S)+", expected "+d.pretty(T)+")")}},isSignature:function(T,S){var c=this.reader.index;this.reader.setIndex(T);var p=this.reader.readString(4)===S;return this.reader.setIndex(c),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var T=this.reader.readData(this.zipCommentLength),S=s.uint8array?"uint8array":"array",c=d.transformTo(S,T);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var T,S,c,p=this.zip64EndOfCentralSize-44;0<p;)T=this.reader.readInt(2),S=this.reader.readInt(4),c=this.reader.readData(S),this.zip64ExtensibleData[T]={id:T,length:S,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var T,S;for(T=0;T<this.files.length;T++)S=this.files[T],this.reader.setIndex(S.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),S.readLocalPart(this.reader),S.handleUTF8(),S.processAttributes()},readCentralDir:function(){var T;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(T=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(T);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var T=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(T<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(T);var S=T;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(T=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(T),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var p=S-c;if(0<p)this.isSignature(S,l.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(T){this.reader=h(T)},load:function(T){this.prepareReader(T),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},z.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(y,z,b){var h=y("./reader/readerFor"),d=y("./utils"),l=y("./compressedObject"),g=y("./crc32"),s=y("./utf8"),A=y("./compressions"),T=y("./support");function S(c,p){this.options=c,this.loadOptions=p}S.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var p,o;if(c.skip(22),this.fileNameLength=c.readInt(2),o=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(o),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(f){for(var u in A)if(Object.prototype.hasOwnProperty.call(A,u)&&A[u].magic===f)return A[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,p,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var p=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(p),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=h(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var p,o,f,u=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<u;)p=c.readInt(2),o=c.readInt(2),f=c.readData(o),this.extraFields[p]={id:p,length:o,value:f};c.setIndex(u)},handleUTF8:function(){var c=T.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var o=d.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(o)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var u=d.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var p=h(c.value);return p.readInt(1)!==1||g(this.fileName)!==p.readInt(4)?null:s.utf8decode(p.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var p=h(c.value);return p.readInt(1)!==1||g(this.fileComment)!==p.readInt(4)?null:s.utf8decode(p.readData(c.length-5))}return null}},z.exports=S},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(y,z,b){function h(p,o,f){this.name=p,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=o,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var d=y("./stream/StreamHelper"),l=y("./stream/DataWorker"),g=y("./utf8"),s=y("./compressedObject"),A=y("./stream/GenericWorker");h.prototype={internalStream:function(p){var o=null,f="string";try{if(!p)throw new Error("No output type specified.");var u=(f=p.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),o=this._decompressWorker();var _=!this._dataBinary;_&&!u&&(o=o.pipe(new g.Utf8EncodeWorker)),!_&&u&&(o=o.pipe(new g.Utf8DecodeWorker))}catch(v){(o=new A("error")).error(v)}return new d(o,f,"")},async:function(p,o){return this.internalStream(p).accumulate(o)},nodeStream:function(p,o){return this.internalStream(p||"nodebuffer").toNodejsStream(o)},_compressWorker:function(p,o){if(this._data instanceof s&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new g.Utf8EncodeWorker)),s.createWorkerFrom(f,p,o)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof A?this._data:new l(this._data)}};for(var T=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],S=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<T.length;c++)h.prototype[T[c]]=S;z.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(y,z,b){(function(h){var d,l,g=h.MutationObserver||h.WebKitMutationObserver;if(g){var s=0,A=new g(p),T=h.document.createTextNode("");A.observe(T,{characterData:!0}),d=function(){T.data=s=++s%2}}else if(h.setImmediate||h.MessageChannel===void 0)d="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var o=h.document.createElement("script");o.onreadystatechange=function(){p(),o.onreadystatechange=null,o.parentNode.removeChild(o),o=null},h.document.documentElement.appendChild(o)}:function(){setTimeout(p,0)};else{var S=new h.MessageChannel;S.port1.onmessage=p,d=function(){S.port2.postMessage(0)}}var c=[];function p(){var o,f;l=!0;for(var u=c.length;u;){for(f=c,c=[],o=-1;++o<u;)f[o]();u=c.length}l=!1}z.exports=function(o){c.push(o)!==1||l||d()}}).call(this,typeof xe<"u"?xe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(y,z,b){var h=y("immediate");function d(){}var l={},g=["REJECTED"],s=["FULFILLED"],A=["PENDING"];function T(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=A,this.queue=[],this.outcome=void 0,u!==d&&o(this,u)}function S(u,_,v){this.promise=u,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function c(u,_,v){h(function(){var R;try{R=_(v)}catch(N){return l.reject(u,N)}R===u?l.reject(u,new TypeError("Cannot resolve promise with itself")):l.resolve(u,R)})}function p(u){var _=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof _=="function")return function(){_.apply(u,arguments)}}function o(u,_){var v=!1;function R(F){v||(v=!0,l.reject(u,F))}function N(F){v||(v=!0,l.resolve(u,F))}var P=f(function(){_(N,R)});P.status==="error"&&R(P.value)}function f(u,_){var v={};try{v.value=u(_),v.status="success"}catch(R){v.status="error",v.value=R}return v}(z.exports=T).prototype.finally=function(u){if(typeof u!="function")return this;var _=this.constructor;return this.then(function(v){return _.resolve(u()).then(function(){return v})},function(v){return _.resolve(u()).then(function(){throw v})})},T.prototype.catch=function(u){return this.then(null,u)},T.prototype.then=function(u,_){if(typeof u!="function"&&this.state===s||typeof _!="function"&&this.state===g)return this;var v=new this.constructor(d);return this.state!==A?c(v,this.state===s?u:_,this.outcome):this.queue.push(new S(v,u,_)),v},S.prototype.callFulfilled=function(u){l.resolve(this.promise,u)},S.prototype.otherCallFulfilled=function(u){c(this.promise,this.onFulfilled,u)},S.prototype.callRejected=function(u){l.reject(this.promise,u)},S.prototype.otherCallRejected=function(u){c(this.promise,this.onRejected,u)},l.resolve=function(u,_){var v=f(p,_);if(v.status==="error")return l.reject(u,v.value);var R=v.value;if(R)o(u,R);else{u.state=s,u.outcome=_;for(var N=-1,P=u.queue.length;++N<P;)u.queue[N].callFulfilled(_)}return u},l.reject=function(u,_){u.state=g,u.outcome=_;for(var v=-1,R=u.queue.length;++v<R;)u.queue[v].callRejected(_);return u},T.resolve=function(u){return u instanceof this?u:l.resolve(new this(d),u)},T.reject=function(u){var _=new this(d);return l.reject(_,u)},T.all=function(u){var _=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=u.length,R=!1;if(!v)return this.resolve([]);for(var N=new Array(v),P=0,F=-1,G=new this(d);++F<v;)M(u[F],F);return G;function M($,tt){_.resolve($).then(function(k){N[tt]=k,++P!==v||R||(R=!0,l.resolve(G,N))},function(k){R||(R=!0,l.reject(G,k))})}},T.race=function(u){var _=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=u.length,R=!1;if(!v)return this.resolve([]);for(var N=-1,P=new this(d);++N<v;)F=u[N],_.resolve(F).then(function(G){R||(R=!0,l.resolve(P,G))},function(G){R||(R=!0,l.reject(P,G))});var F;return P}},{immediate:36}],38:[function(y,z,b){var h={};(0,y("./lib/utils/common").assign)(h,y("./lib/deflate"),y("./lib/inflate"),y("./lib/zlib/constants")),z.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(y,z,b){var h=y("./zlib/deflate"),d=y("./utils/common"),l=y("./utils/strings"),g=y("./zlib/messages"),s=y("./zlib/zstream"),A=Object.prototype.toString,T=0,S=-1,c=0,p=8;function o(u){if(!(this instanceof o))return new o(u);this.options=d.assign({level:S,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},u||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var v=h.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(v!==T)throw new Error(g[v]);if(_.header&&h.deflateSetHeader(this.strm,_.header),_.dictionary){var R;if(R=typeof _.dictionary=="string"?l.string2buf(_.dictionary):A.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(v=h.deflateSetDictionary(this.strm,R))!==T)throw new Error(g[v]);this._dict_set=!0}}function f(u,_){var v=new o(_);if(v.push(u,!0),v.err)throw v.msg||g[v.err];return v.result}o.prototype.push=function(u,_){var v,R,N=this.strm,P=this.options.chunkSize;if(this.ended)return!1;R=_===~~_?_:_===!0?4:0,typeof u=="string"?N.input=l.string2buf(u):A.call(u)==="[object ArrayBuffer]"?N.input=new Uint8Array(u):N.input=u,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new d.Buf8(P),N.next_out=0,N.avail_out=P),(v=h.deflate(N,R))!==1&&v!==T)return this.onEnd(v),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(d.shrinkBuf(N.output,N.next_out))):this.onData(d.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&v!==1);return R===4?(v=h.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===T):R!==2||(this.onEnd(T),!(N.avail_out=0))},o.prototype.onData=function(u){this.chunks.push(u)},o.prototype.onEnd=function(u){u===T&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},b.Deflate=o,b.deflate=f,b.deflateRaw=function(u,_){return(_=_||{}).raw=!0,f(u,_)},b.gzip=function(u,_){return(_=_||{}).gzip=!0,f(u,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(y,z,b){var h=y("./zlib/inflate"),d=y("./utils/common"),l=y("./utils/strings"),g=y("./zlib/constants"),s=y("./zlib/messages"),A=y("./zlib/zstream"),T=y("./zlib/gzheader"),S=Object.prototype.toString;function c(o){if(!(this instanceof c))return new c(o);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},o||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||o&&o.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&!(15&f.windowBits)&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var u=h.inflateInit2(this.strm,f.windowBits);if(u!==g.Z_OK)throw new Error(s[u]);this.header=new T,h.inflateGetHeader(this.strm,this.header)}function p(o,f){var u=new c(f);if(u.push(o,!0),u.err)throw u.msg||s[u.err];return u.result}c.prototype.push=function(o,f){var u,_,v,R,N,P,F=this.strm,G=this.options.chunkSize,M=this.options.dictionary,$=!1;if(this.ended)return!1;_=f===~~f?f:f===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof o=="string"?F.input=l.binstring2buf(o):S.call(o)==="[object ArrayBuffer]"?F.input=new Uint8Array(o):F.input=o,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new d.Buf8(G),F.next_out=0,F.avail_out=G),(u=h.inflate(F,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&M&&(P=typeof M=="string"?l.string2buf(M):S.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,u=h.inflateSetDictionary(this.strm,P)),u===g.Z_BUF_ERROR&&$===!0&&(u=g.Z_OK,$=!1),u!==g.Z_STREAM_END&&u!==g.Z_OK)return this.onEnd(u),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&u!==g.Z_STREAM_END&&(F.avail_in!==0||_!==g.Z_FINISH&&_!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=l.utf8border(F.output,F.next_out),R=F.next_out-v,N=l.buf2string(F.output,v),F.next_out=R,F.avail_out=G-R,R&&d.arraySet(F.output,F.output,v,R,0),this.onData(N)):this.onData(d.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&($=!0)}while((0<F.avail_in||F.avail_out===0)&&u!==g.Z_STREAM_END);return u===g.Z_STREAM_END&&(_=g.Z_FINISH),_===g.Z_FINISH?(u=h.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===g.Z_OK):_!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(F.avail_out=0))},c.prototype.onData=function(o){this.chunks.push(o)},c.prototype.onEnd=function(o){o===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},b.Inflate=c,b.inflate=p,b.inflateRaw=function(o,f){return(f=f||{}).raw=!0,p(o,f)},b.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(y,z,b){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";b.assign=function(g){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var A=s.shift();if(A){if(typeof A!="object")throw new TypeError(A+"must be non-object");for(var T in A)A.hasOwnProperty(T)&&(g[T]=A[T])}}return g},b.shrinkBuf=function(g,s){return g.length===s?g:g.subarray?g.subarray(0,s):(g.length=s,g)};var d={arraySet:function(g,s,A,T,S){if(s.subarray&&g.subarray)g.set(s.subarray(A,A+T),S);else for(var c=0;c<T;c++)g[S+c]=s[A+c]},flattenChunks:function(g){var s,A,T,S,c,p;for(s=T=0,A=g.length;s<A;s++)T+=g[s].length;for(p=new Uint8Array(T),s=S=0,A=g.length;s<A;s++)c=g[s],p.set(c,S),S+=c.length;return p}},l={arraySet:function(g,s,A,T,S){for(var c=0;c<T;c++)g[S+c]=s[A+c]},flattenChunks:function(g){return[].concat.apply([],g)}};b.setTyped=function(g){g?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,d)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,l))},b.setTyped(h)},{}],42:[function(y,z,b){var h=y("./common"),d=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var g=new h.Buf8(256),s=0;s<256;s++)g[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function A(T,S){if(S<65537&&(T.subarray&&l||!T.subarray&&d))return String.fromCharCode.apply(null,h.shrinkBuf(T,S));for(var c="",p=0;p<S;p++)c+=String.fromCharCode(T[p]);return c}g[254]=g[254]=1,b.string2buf=function(T){var S,c,p,o,f,u=T.length,_=0;for(o=0;o<u;o++)(64512&(c=T.charCodeAt(o)))==55296&&o+1<u&&(64512&(p=T.charCodeAt(o+1)))==56320&&(c=65536+(c-55296<<10)+(p-56320),o++),_+=c<128?1:c<2048?2:c<65536?3:4;for(S=new h.Buf8(_),o=f=0;f<_;o++)(64512&(c=T.charCodeAt(o)))==55296&&o+1<u&&(64512&(p=T.charCodeAt(o+1)))==56320&&(c=65536+(c-55296<<10)+(p-56320),o++),c<128?S[f++]=c:(c<2048?S[f++]=192|c>>>6:(c<65536?S[f++]=224|c>>>12:(S[f++]=240|c>>>18,S[f++]=128|c>>>12&63),S[f++]=128|c>>>6&63),S[f++]=128|63&c);return S},b.buf2binstring=function(T){return A(T,T.length)},b.binstring2buf=function(T){for(var S=new h.Buf8(T.length),c=0,p=S.length;c<p;c++)S[c]=T.charCodeAt(c);return S},b.buf2string=function(T,S){var c,p,o,f,u=S||T.length,_=new Array(2*u);for(c=p=0;c<u;)if((o=T[c++])<128)_[p++]=o;else if(4<(f=g[o]))_[p++]=65533,c+=f-1;else{for(o&=f===2?31:f===3?15:7;1<f&&c<u;)o=o<<6|63&T[c++],f--;1<f?_[p++]=65533:o<65536?_[p++]=o:(o-=65536,_[p++]=55296|o>>10&1023,_[p++]=56320|1023&o)}return A(_,p)},b.utf8border=function(T,S){var c;for((S=S||T.length)>T.length&&(S=T.length),c=S-1;0<=c&&(192&T[c])==128;)c--;return c<0||c===0?S:c+g[T[c]]>S?c:S}},{"./common":41}],43:[function(y,z,b){z.exports=function(h,d,l,g){for(var s=65535&h|0,A=h>>>16&65535|0,T=0;l!==0;){for(l-=T=2e3<l?2e3:l;A=A+(s=s+d[g++]|0)|0,--T;);s%=65521,A%=65521}return s|A<<16|0}},{}],44:[function(y,z,b){z.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(y,z,b){var h=function(){for(var d,l=[],g=0;g<256;g++){d=g;for(var s=0;s<8;s++)d=1&d?3988292384^d>>>1:d>>>1;l[g]=d}return l}();z.exports=function(d,l,g,s){var A=h,T=s+g;d^=-1;for(var S=s;S<T;S++)d=d>>>8^A[255&(d^l[S])];return-1^d}},{}],46:[function(y,z,b){var h,d=y("../utils/common"),l=y("./trees"),g=y("./adler32"),s=y("./crc32"),A=y("./messages"),T=0,S=4,c=0,p=-2,o=-1,f=4,u=2,_=8,v=9,R=286,N=30,P=19,F=2*R+1,G=15,M=3,$=258,tt=$+M+1,k=42,B=113,i=1,q=2,lt=3,H=4;function pt(r,W){return r.msg=A[W],W}function K(r){return(r<<1)-(4<r?9:0)}function ut(r){for(var W=r.length;0<=--W;)r[W]=0}function U(r){var W=r.state,L=W.pending;L>r.avail_out&&(L=r.avail_out),L!==0&&(d.arraySet(r.output,W.pending_buf,W.pending_out,L,r.next_out),r.next_out+=L,W.pending_out+=L,r.total_out+=L,r.avail_out-=L,W.pending-=L,W.pending===0&&(W.pending_out=0))}function C(r,W){l._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,W),r.block_start=r.strstart,U(r.strm)}function ct(r,W){r.pending_buf[r.pending++]=W}function it(r,W){r.pending_buf[r.pending++]=W>>>8&255,r.pending_buf[r.pending++]=255&W}function et(r,W){var L,w,m=r.max_chain_length,x=r.strstart,Z=r.prev_length,Y=r.nice_match,D=r.strstart>r.w_size-tt?r.strstart-(r.w_size-tt):0,V=r.window,at=r.w_mask,J=r.prev,ft=r.strstart+$,Et=V[x+Z-1],vt=V[x+Z];r.prev_length>=r.good_match&&(m>>=2),Y>r.lookahead&&(Y=r.lookahead);do if(V[(L=W)+Z]===vt&&V[L+Z-1]===Et&&V[L]===V[x]&&V[++L]===V[x+1]){x+=2,L++;do;while(V[++x]===V[++L]&&V[++x]===V[++L]&&V[++x]===V[++L]&&V[++x]===V[++L]&&V[++x]===V[++L]&&V[++x]===V[++L]&&V[++x]===V[++L]&&V[++x]===V[++L]&&x<ft);if(w=$-(ft-x),x=ft-$,Z<w){if(r.match_start=W,Y<=(Z=w))break;Et=V[x+Z-1],vt=V[x+Z]}}while((W=J[W&at])>D&&--m!=0);return Z<=r.lookahead?Z:r.lookahead}function At(r){var W,L,w,m,x,Z,Y,D,V,at,J=r.w_size;do{if(m=r.window_size-r.lookahead-r.strstart,r.strstart>=J+(J-tt)){for(d.arraySet(r.window,r.window,J,J,0),r.match_start-=J,r.strstart-=J,r.block_start-=J,W=L=r.hash_size;w=r.head[--W],r.head[W]=J<=w?w-J:0,--L;);for(W=L=J;w=r.prev[--W],r.prev[W]=J<=w?w-J:0,--L;);m+=J}if(r.strm.avail_in===0)break;if(Z=r.strm,Y=r.window,D=r.strstart+r.lookahead,V=m,at=void 0,at=Z.avail_in,V<at&&(at=V),L=at===0?0:(Z.avail_in-=at,d.arraySet(Y,Z.input,Z.next_in,at,D),Z.state.wrap===1?Z.adler=g(Z.adler,Y,at,D):Z.state.wrap===2&&(Z.adler=s(Z.adler,Y,at,D)),Z.next_in+=at,Z.total_in+=at,at),r.lookahead+=L,r.lookahead+r.insert>=M)for(x=r.strstart-r.insert,r.ins_h=r.window[x],r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+M-1])&r.hash_mask,r.prev[x&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=x,x++,r.insert--,!(r.lookahead+r.insert<M)););}while(r.lookahead<tt&&r.strm.avail_in!==0)}function xt(r,W){for(var L,w;;){if(r.lookahead<tt){if(At(r),r.lookahead<tt&&W===T)return i;if(r.lookahead===0)break}if(L=0,r.lookahead>=M&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+M-1])&r.hash_mask,L=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),L!==0&&r.strstart-L<=r.w_size-tt&&(r.match_length=et(r,L)),r.match_length>=M)if(w=l._tr_tally(r,r.strstart-r.match_start,r.match_length-M),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=M){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+M-1])&r.hash_mask,L=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else w=l._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(w&&(C(r,!1),r.strm.avail_out===0))return i}return r.insert=r.strstart<M-1?r.strstart:M-1,W===S?(C(r,!0),r.strm.avail_out===0?lt:H):r.last_lit&&(C(r,!1),r.strm.avail_out===0)?i:q}function wt(r,W){for(var L,w,m;;){if(r.lookahead<tt){if(At(r),r.lookahead<tt&&W===T)return i;if(r.lookahead===0)break}if(L=0,r.lookahead>=M&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+M-1])&r.hash_mask,L=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=M-1,L!==0&&r.prev_length<r.max_lazy_match&&r.strstart-L<=r.w_size-tt&&(r.match_length=et(r,L),r.match_length<=5&&(r.strategy===1||r.match_length===M&&4096<r.strstart-r.match_start)&&(r.match_length=M-1)),r.prev_length>=M&&r.match_length<=r.prev_length){for(m=r.strstart+r.lookahead-M,w=l._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-M),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=m&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+M-1])&r.hash_mask,L=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=M-1,r.strstart++,w&&(C(r,!1),r.strm.avail_out===0))return i}else if(r.match_available){if((w=l._tr_tally(r,0,r.window[r.strstart-1]))&&C(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return i}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(w=l._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<M-1?r.strstart:M-1,W===S?(C(r,!0),r.strm.avail_out===0?lt:H):r.last_lit&&(C(r,!1),r.strm.avail_out===0)?i:q}function kt(r,W,L,w,m){this.good_length=r,this.max_lazy=W,this.nice_length=L,this.max_chain=w,this.func=m}function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*F),this.dyn_dtree=new d.Buf16(2*(2*N+1)),this.bl_tree=new d.Buf16(2*(2*P+1)),ut(this.dyn_ltree),ut(this.dyn_dtree),ut(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(G+1),this.heap=new d.Buf16(2*R+1),ut(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*R+1),ut(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Nt(r){var W;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=u,(W=r.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?k:B,r.adler=W.wrap===2?0:1,W.last_flush=T,l._tr_init(W),c):pt(r,p)}function Ct(r){var W=Nt(r);return W===c&&function(L){L.window_size=2*L.w_size,ut(L.head),L.max_lazy_match=h[L.level].max_lazy,L.good_match=h[L.level].good_length,L.nice_match=h[L.level].nice_length,L.max_chain_length=h[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=M-1,L.match_available=0,L.ins_h=0}(r.state),W}function Lt(r,W,L,w,m,x){if(!r)return p;var Z=1;if(W===o&&(W=6),w<0?(Z=0,w=-w):15<w&&(Z=2,w-=16),m<1||v<m||L!==_||w<8||15<w||W<0||9<W||x<0||f<x)return pt(r,p);w===8&&(w=9);var Y=new Ot;return(r.state=Y).strm=r,Y.wrap=Z,Y.gzhead=null,Y.w_bits=w,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=m+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+M-1)/M),Y.window=new d.Buf8(2*Y.w_size),Y.head=new d.Buf16(Y.hash_size),Y.prev=new d.Buf16(Y.w_size),Y.lit_bufsize=1<<m+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new d.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=W,Y.strategy=x,Y.method=L,Ct(r)}h=[new kt(0,0,0,0,function(r,W){var L=65535;for(L>r.pending_buf_size-5&&(L=r.pending_buf_size-5);;){if(r.lookahead<=1){if(At(r),r.lookahead===0&&W===T)return i;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var w=r.block_start+L;if((r.strstart===0||r.strstart>=w)&&(r.lookahead=r.strstart-w,r.strstart=w,C(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-tt&&(C(r,!1),r.strm.avail_out===0))return i}return r.insert=0,W===S?(C(r,!0),r.strm.avail_out===0?lt:H):(r.strstart>r.block_start&&(C(r,!1),r.strm.avail_out),i)}),new kt(4,4,8,4,xt),new kt(4,5,16,8,xt),new kt(4,6,32,32,xt),new kt(4,4,16,16,wt),new kt(8,16,32,32,wt),new kt(8,16,128,128,wt),new kt(8,32,128,256,wt),new kt(32,128,258,1024,wt),new kt(32,258,258,4096,wt)],b.deflateInit=function(r,W){return Lt(r,W,_,15,8,0)},b.deflateInit2=Lt,b.deflateReset=Ct,b.deflateResetKeep=Nt,b.deflateSetHeader=function(r,W){return r&&r.state?r.state.wrap!==2?p:(r.state.gzhead=W,c):p},b.deflate=function(r,W){var L,w,m,x;if(!r||!r.state||5<W||W<0)return r?pt(r,p):p;if(w=r.state,!r.output||!r.input&&r.avail_in!==0||w.status===666&&W!==S)return pt(r,r.avail_out===0?-5:p);if(w.strm=r,L=w.last_flush,w.last_flush=W,w.status===k)if(w.wrap===2)r.adler=0,ct(w,31),ct(w,139),ct(w,8),w.gzhead?(ct(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),ct(w,255&w.gzhead.time),ct(w,w.gzhead.time>>8&255),ct(w,w.gzhead.time>>16&255),ct(w,w.gzhead.time>>24&255),ct(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),ct(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(ct(w,255&w.gzhead.extra.length),ct(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(r.adler=s(r.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(ct(w,0),ct(w,0),ct(w,0),ct(w,0),ct(w,0),ct(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),ct(w,3),w.status=B);else{var Z=_+(w.w_bits-8<<4)<<8;Z|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(Z|=32),Z+=31-Z%31,w.status=B,it(w,Z),w.strstart!==0&&(it(w,r.adler>>>16),it(w,65535&r.adler)),r.adler=1}if(w.status===69)if(w.gzhead.extra){for(m=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>m&&(r.adler=s(r.adler,w.pending_buf,w.pending-m,m)),U(r),m=w.pending,w.pending!==w.pending_buf_size));)ct(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>m&&(r.adler=s(r.adler,w.pending_buf,w.pending-m,m)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){m=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>m&&(r.adler=s(r.adler,w.pending_buf,w.pending-m,m)),U(r),m=w.pending,w.pending===w.pending_buf_size)){x=1;break}x=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,ct(w,x)}while(x!==0);w.gzhead.hcrc&&w.pending>m&&(r.adler=s(r.adler,w.pending_buf,w.pending-m,m)),x===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){m=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>m&&(r.adler=s(r.adler,w.pending_buf,w.pending-m,m)),U(r),m=w.pending,w.pending===w.pending_buf_size)){x=1;break}x=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,ct(w,x)}while(x!==0);w.gzhead.hcrc&&w.pending>m&&(r.adler=s(r.adler,w.pending_buf,w.pending-m,m)),x===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&U(r),w.pending+2<=w.pending_buf_size&&(ct(w,255&r.adler),ct(w,r.adler>>8&255),r.adler=0,w.status=B)):w.status=B),w.pending!==0){if(U(r),r.avail_out===0)return w.last_flush=-1,c}else if(r.avail_in===0&&K(W)<=K(L)&&W!==S)return pt(r,-5);if(w.status===666&&r.avail_in!==0)return pt(r,-5);if(r.avail_in!==0||w.lookahead!==0||W!==T&&w.status!==666){var Y=w.strategy===2?function(D,V){for(var at;;){if(D.lookahead===0&&(At(D),D.lookahead===0)){if(V===T)return i;break}if(D.match_length=0,at=l._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,at&&(C(D,!1),D.strm.avail_out===0))return i}return D.insert=0,V===S?(C(D,!0),D.strm.avail_out===0?lt:H):D.last_lit&&(C(D,!1),D.strm.avail_out===0)?i:q}(w,W):w.strategy===3?function(D,V){for(var at,J,ft,Et,vt=D.window;;){if(D.lookahead<=$){if(At(D),D.lookahead<=$&&V===T)return i;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=M&&0<D.strstart&&(J=vt[ft=D.strstart-1])===vt[++ft]&&J===vt[++ft]&&J===vt[++ft]){Et=D.strstart+$;do;while(J===vt[++ft]&&J===vt[++ft]&&J===vt[++ft]&&J===vt[++ft]&&J===vt[++ft]&&J===vt[++ft]&&J===vt[++ft]&&J===vt[++ft]&&ft<Et);D.match_length=$-(Et-ft),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=M?(at=l._tr_tally(D,1,D.match_length-M),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(at=l._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),at&&(C(D,!1),D.strm.avail_out===0))return i}return D.insert=0,V===S?(C(D,!0),D.strm.avail_out===0?lt:H):D.last_lit&&(C(D,!1),D.strm.avail_out===0)?i:q}(w,W):h[w.level].func(w,W);if(Y!==lt&&Y!==H||(w.status=666),Y===i||Y===lt)return r.avail_out===0&&(w.last_flush=-1),c;if(Y===q&&(W===1?l._tr_align(w):W!==5&&(l._tr_stored_block(w,0,0,!1),W===3&&(ut(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),U(r),r.avail_out===0))return w.last_flush=-1,c}return W!==S?c:w.wrap<=0?1:(w.wrap===2?(ct(w,255&r.adler),ct(w,r.adler>>8&255),ct(w,r.adler>>16&255),ct(w,r.adler>>24&255),ct(w,255&r.total_in),ct(w,r.total_in>>8&255),ct(w,r.total_in>>16&255),ct(w,r.total_in>>24&255)):(it(w,r.adler>>>16),it(w,65535&r.adler)),U(r),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?c:1)},b.deflateEnd=function(r){var W;return r&&r.state?(W=r.state.status)!==k&&W!==69&&W!==73&&W!==91&&W!==103&&W!==B&&W!==666?pt(r,p):(r.state=null,W===B?pt(r,-3):c):p},b.deflateSetDictionary=function(r,W){var L,w,m,x,Z,Y,D,V,at=W.length;if(!r||!r.state||(x=(L=r.state).wrap)===2||x===1&&L.status!==k||L.lookahead)return p;for(x===1&&(r.adler=g(r.adler,W,at,0)),L.wrap=0,at>=L.w_size&&(x===0&&(ut(L.head),L.strstart=0,L.block_start=0,L.insert=0),V=new d.Buf8(L.w_size),d.arraySet(V,W,at-L.w_size,L.w_size,0),W=V,at=L.w_size),Z=r.avail_in,Y=r.next_in,D=r.input,r.avail_in=at,r.next_in=0,r.input=W,At(L);L.lookahead>=M;){for(w=L.strstart,m=L.lookahead-(M-1);L.ins_h=(L.ins_h<<L.hash_shift^L.window[w+M-1])&L.hash_mask,L.prev[w&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=w,w++,--m;);L.strstart=w,L.lookahead=M-1,At(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=M-1,L.match_available=0,r.next_in=Y,r.input=D,r.avail_in=Z,L.wrap=x,c},b.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(y,z,b){z.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(y,z,b){z.exports=function(h,d){var l,g,s,A,T,S,c,p,o,f,u,_,v,R,N,P,F,G,M,$,tt,k,B,i,q;l=h.state,g=h.next_in,i=h.input,s=g+(h.avail_in-5),A=h.next_out,q=h.output,T=A-(d-h.avail_out),S=A+(h.avail_out-257),c=l.dmax,p=l.wsize,o=l.whave,f=l.wnext,u=l.window,_=l.hold,v=l.bits,R=l.lencode,N=l.distcode,P=(1<<l.lenbits)-1,F=(1<<l.distbits)-1;t:do{v<15&&(_+=i[g++]<<v,v+=8,_+=i[g++]<<v,v+=8),G=R[_&P];e:for(;;){if(_>>>=M=G>>>24,v-=M,(M=G>>>16&255)===0)q[A++]=65535&G;else{if(!(16&M)){if(!(64&M)){G=R[(65535&G)+(_&(1<<M)-1)];continue e}if(32&M){l.mode=12;break t}h.msg="invalid literal/length code",l.mode=30;break t}$=65535&G,(M&=15)&&(v<M&&(_+=i[g++]<<v,v+=8),$+=_&(1<<M)-1,_>>>=M,v-=M),v<15&&(_+=i[g++]<<v,v+=8,_+=i[g++]<<v,v+=8),G=N[_&F];r:for(;;){if(_>>>=M=G>>>24,v-=M,!(16&(M=G>>>16&255))){if(!(64&M)){G=N[(65535&G)+(_&(1<<M)-1)];continue r}h.msg="invalid distance code",l.mode=30;break t}if(tt=65535&G,v<(M&=15)&&(_+=i[g++]<<v,(v+=8)<M&&(_+=i[g++]<<v,v+=8)),c<(tt+=_&(1<<M)-1)){h.msg="invalid distance too far back",l.mode=30;break t}if(_>>>=M,v-=M,(M=A-T)<tt){if(o<(M=tt-M)&&l.sane){h.msg="invalid distance too far back",l.mode=30;break t}if(B=u,(k=0)===f){if(k+=p-M,M<$){for($-=M;q[A++]=u[k++],--M;);k=A-tt,B=q}}else if(f<M){if(k+=p+f-M,(M-=f)<$){for($-=M;q[A++]=u[k++],--M;);if(k=0,f<$){for($-=M=f;q[A++]=u[k++],--M;);k=A-tt,B=q}}}else if(k+=f-M,M<$){for($-=M;q[A++]=u[k++],--M;);k=A-tt,B=q}for(;2<$;)q[A++]=B[k++],q[A++]=B[k++],q[A++]=B[k++],$-=3;$&&(q[A++]=B[k++],1<$&&(q[A++]=B[k++]))}else{for(k=A-tt;q[A++]=q[k++],q[A++]=q[k++],q[A++]=q[k++],2<($-=3););$&&(q[A++]=q[k++],1<$&&(q[A++]=q[k++]))}break}}break}}while(g<s&&A<S);g-=$=v>>3,_&=(1<<(v-=$<<3))-1,h.next_in=g,h.next_out=A,h.avail_in=g<s?s-g+5:5-(g-s),h.avail_out=A<S?S-A+257:257-(A-S),l.hold=_,l.bits=v}},{}],49:[function(y,z,b){var h=y("../utils/common"),d=y("./adler32"),l=y("./crc32"),g=y("./inffast"),s=y("./inftrees"),A=1,T=2,S=0,c=-2,p=1,o=852,f=592;function u(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(k){var B;return k&&k.state?(B=k.state,k.total_in=k.total_out=B.total=0,k.msg="",B.wrap&&(k.adler=1&B.wrap),B.mode=p,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new h.Buf32(o),B.distcode=B.distdyn=new h.Buf32(f),B.sane=1,B.back=-1,S):c}function R(k){var B;return k&&k.state?((B=k.state).wsize=0,B.whave=0,B.wnext=0,v(k)):c}function N(k,B){var i,q;return k&&k.state?(q=k.state,B<0?(i=0,B=-B):(i=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?c:(q.window!==null&&q.wbits!==B&&(q.window=null),q.wrap=i,q.wbits=B,R(k))):c}function P(k,B){var i,q;return k?(q=new _,(k.state=q).window=null,(i=N(k,B))!==S&&(k.state=null),i):c}var F,G,M=!0;function $(k){if(M){var B;for(F=new h.Buf32(512),G=new h.Buf32(32),B=0;B<144;)k.lens[B++]=8;for(;B<256;)k.lens[B++]=9;for(;B<280;)k.lens[B++]=7;for(;B<288;)k.lens[B++]=8;for(s(A,k.lens,0,288,F,0,k.work,{bits:9}),B=0;B<32;)k.lens[B++]=5;s(T,k.lens,0,32,G,0,k.work,{bits:5}),M=!1}k.lencode=F,k.lenbits=9,k.distcode=G,k.distbits=5}function tt(k,B,i,q){var lt,H=k.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new h.Buf8(H.wsize)),q>=H.wsize?(h.arraySet(H.window,B,i-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(q<(lt=H.wsize-H.wnext)&&(lt=q),h.arraySet(H.window,B,i-q,lt,H.wnext),(q-=lt)?(h.arraySet(H.window,B,i-q,q,0),H.wnext=q,H.whave=H.wsize):(H.wnext+=lt,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=lt))),0}b.inflateReset=R,b.inflateReset2=N,b.inflateResetKeep=v,b.inflateInit=function(k){return P(k,15)},b.inflateInit2=P,b.inflate=function(k,B){var i,q,lt,H,pt,K,ut,U,C,ct,it,et,At,xt,wt,kt,Ot,Nt,Ct,Lt,r,W,L,w,m=0,x=new h.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return c;(i=k.state).mode===12&&(i.mode=13),pt=k.next_out,lt=k.output,ut=k.avail_out,H=k.next_in,q=k.input,K=k.avail_in,U=i.hold,C=i.bits,ct=K,it=ut,W=S;t:for(;;)switch(i.mode){case p:if(i.wrap===0){i.mode=13;break}for(;C<16;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(2&i.wrap&&U===35615){x[i.check=0]=255&U,x[1]=U>>>8&255,i.check=l(i.check,x,2,0),C=U=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&U)<<8)+(U>>8))%31){k.msg="incorrect header check",i.mode=30;break}if((15&U)!=8){k.msg="unknown compression method",i.mode=30;break}if(C-=4,r=8+(15&(U>>>=4)),i.wbits===0)i.wbits=r;else if(r>i.wbits){k.msg="invalid window size",i.mode=30;break}i.dmax=1<<r,k.adler=i.check=1,i.mode=512&U?10:12,C=U=0;break;case 2:for(;C<16;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(i.flags=U,(255&i.flags)!=8){k.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){k.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=U>>8&1),512&i.flags&&(x[0]=255&U,x[1]=U>>>8&255,i.check=l(i.check,x,2,0)),C=U=0,i.mode=3;case 3:for(;C<32;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}i.head&&(i.head.time=U),512&i.flags&&(x[0]=255&U,x[1]=U>>>8&255,x[2]=U>>>16&255,x[3]=U>>>24&255,i.check=l(i.check,x,4,0)),C=U=0,i.mode=4;case 4:for(;C<16;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}i.head&&(i.head.xflags=255&U,i.head.os=U>>8),512&i.flags&&(x[0]=255&U,x[1]=U>>>8&255,i.check=l(i.check,x,2,0)),C=U=0,i.mode=5;case 5:if(1024&i.flags){for(;C<16;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}i.length=U,i.head&&(i.head.extra_len=U),512&i.flags&&(x[0]=255&U,x[1]=U>>>8&255,i.check=l(i.check,x,2,0)),C=U=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(K<(et=i.length)&&(et=K),et&&(i.head&&(r=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),h.arraySet(i.head.extra,q,H,et,r)),512&i.flags&&(i.check=l(i.check,q,et,H)),K-=et,H+=et,i.length-=et),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(K===0)break t;for(et=0;r=q[H+et++],i.head&&r&&i.length<65536&&(i.head.name+=String.fromCharCode(r)),r&&et<K;);if(512&i.flags&&(i.check=l(i.check,q,et,H)),K-=et,H+=et,r)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(K===0)break t;for(et=0;r=q[H+et++],i.head&&r&&i.length<65536&&(i.head.comment+=String.fromCharCode(r)),r&&et<K;);if(512&i.flags&&(i.check=l(i.check,q,et,H)),K-=et,H+=et,r)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;C<16;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(U!==(65535&i.check)){k.msg="header crc mismatch",i.mode=30;break}C=U=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),k.adler=i.check=0,i.mode=12;break;case 10:for(;C<32;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}k.adler=i.check=u(U),C=U=0,i.mode=11;case 11:if(i.havedict===0)return k.next_out=pt,k.avail_out=ut,k.next_in=H,k.avail_in=K,i.hold=U,i.bits=C,2;k.adler=i.check=1,i.mode=12;case 12:if(B===5||B===6)break t;case 13:if(i.last){U>>>=7&C,C-=7&C,i.mode=27;break}for(;C<3;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}switch(i.last=1&U,C-=1,3&(U>>>=1)){case 0:i.mode=14;break;case 1:if($(i),i.mode=20,B!==6)break;U>>>=2,C-=2;break t;case 2:i.mode=17;break;case 3:k.msg="invalid block type",i.mode=30}U>>>=2,C-=2;break;case 14:for(U>>>=7&C,C-=7&C;C<32;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if((65535&U)!=(U>>>16^65535)){k.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&U,C=U=0,i.mode=15,B===6)break t;case 15:i.mode=16;case 16:if(et=i.length){if(K<et&&(et=K),ut<et&&(et=ut),et===0)break t;h.arraySet(lt,q,H,et,pt),K-=et,H+=et,ut-=et,pt+=et,i.length-=et;break}i.mode=12;break;case 17:for(;C<14;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(i.nlen=257+(31&U),U>>>=5,C-=5,i.ndist=1+(31&U),U>>>=5,C-=5,i.ncode=4+(15&U),U>>>=4,C-=4,286<i.nlen||30<i.ndist){k.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;C<3;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}i.lens[Z[i.have++]]=7&U,U>>>=3,C-=3}for(;i.have<19;)i.lens[Z[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,L={bits:i.lenbits},W=s(0,i.lens,0,19,i.lencode,0,i.work,L),i.lenbits=L.bits,W){k.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;kt=(m=i.lencode[U&(1<<i.lenbits)-1])>>>16&255,Ot=65535&m,!((wt=m>>>24)<=C);){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(Ot<16)U>>>=wt,C-=wt,i.lens[i.have++]=Ot;else{if(Ot===16){for(w=wt+2;C<w;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(U>>>=wt,C-=wt,i.have===0){k.msg="invalid bit length repeat",i.mode=30;break}r=i.lens[i.have-1],et=3+(3&U),U>>>=2,C-=2}else if(Ot===17){for(w=wt+3;C<w;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}C-=wt,r=0,et=3+(7&(U>>>=wt)),U>>>=3,C-=3}else{for(w=wt+7;C<w;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}C-=wt,r=0,et=11+(127&(U>>>=wt)),U>>>=7,C-=7}if(i.have+et>i.nlen+i.ndist){k.msg="invalid bit length repeat",i.mode=30;break}for(;et--;)i.lens[i.have++]=r}}if(i.mode===30)break;if(i.lens[256]===0){k.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,L={bits:i.lenbits},W=s(A,i.lens,0,i.nlen,i.lencode,0,i.work,L),i.lenbits=L.bits,W){k.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,L={bits:i.distbits},W=s(T,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,L),i.distbits=L.bits,W){k.msg="invalid distances set",i.mode=30;break}if(i.mode=20,B===6)break t;case 20:i.mode=21;case 21:if(6<=K&&258<=ut){k.next_out=pt,k.avail_out=ut,k.next_in=H,k.avail_in=K,i.hold=U,i.bits=C,g(k,it),pt=k.next_out,lt=k.output,ut=k.avail_out,H=k.next_in,q=k.input,K=k.avail_in,U=i.hold,C=i.bits,i.mode===12&&(i.back=-1);break}for(i.back=0;kt=(m=i.lencode[U&(1<<i.lenbits)-1])>>>16&255,Ot=65535&m,!((wt=m>>>24)<=C);){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(kt&&!(240&kt)){for(Nt=wt,Ct=kt,Lt=Ot;kt=(m=i.lencode[Lt+((U&(1<<Nt+Ct)-1)>>Nt)])>>>16&255,Ot=65535&m,!(Nt+(wt=m>>>24)<=C);){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}U>>>=Nt,C-=Nt,i.back+=Nt}if(U>>>=wt,C-=wt,i.back+=wt,i.length=Ot,kt===0){i.mode=26;break}if(32&kt){i.back=-1,i.mode=12;break}if(64&kt){k.msg="invalid literal/length code",i.mode=30;break}i.extra=15&kt,i.mode=22;case 22:if(i.extra){for(w=i.extra;C<w;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}i.length+=U&(1<<i.extra)-1,U>>>=i.extra,C-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;kt=(m=i.distcode[U&(1<<i.distbits)-1])>>>16&255,Ot=65535&m,!((wt=m>>>24)<=C);){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(!(240&kt)){for(Nt=wt,Ct=kt,Lt=Ot;kt=(m=i.distcode[Lt+((U&(1<<Nt+Ct)-1)>>Nt)])>>>16&255,Ot=65535&m,!(Nt+(wt=m>>>24)<=C);){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}U>>>=Nt,C-=Nt,i.back+=Nt}if(U>>>=wt,C-=wt,i.back+=wt,64&kt){k.msg="invalid distance code",i.mode=30;break}i.offset=Ot,i.extra=15&kt,i.mode=24;case 24:if(i.extra){for(w=i.extra;C<w;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}i.offset+=U&(1<<i.extra)-1,U>>>=i.extra,C-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){k.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(ut===0)break t;if(et=it-ut,i.offset>et){if((et=i.offset-et)>i.whave&&i.sane){k.msg="invalid distance too far back",i.mode=30;break}At=et>i.wnext?(et-=i.wnext,i.wsize-et):i.wnext-et,et>i.length&&(et=i.length),xt=i.window}else xt=lt,At=pt-i.offset,et=i.length;for(ut<et&&(et=ut),ut-=et,i.length-=et;lt[pt++]=xt[At++],--et;);i.length===0&&(i.mode=21);break;case 26:if(ut===0)break t;lt[pt++]=i.length,ut--,i.mode=21;break;case 27:if(i.wrap){for(;C<32;){if(K===0)break t;K--,U|=q[H++]<<C,C+=8}if(it-=ut,k.total_out+=it,i.total+=it,it&&(k.adler=i.check=i.flags?l(i.check,lt,it,pt-it):d(i.check,lt,it,pt-it)),it=ut,(i.flags?U:u(U))!==i.check){k.msg="incorrect data check",i.mode=30;break}C=U=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;C<32;){if(K===0)break t;K--,U+=q[H++]<<C,C+=8}if(U!==(4294967295&i.total)){k.msg="incorrect length check",i.mode=30;break}C=U=0}i.mode=29;case 29:W=1;break t;case 30:W=-3;break t;case 31:return-4;case 32:default:return c}return k.next_out=pt,k.avail_out=ut,k.next_in=H,k.avail_in=K,i.hold=U,i.bits=C,(i.wsize||it!==k.avail_out&&i.mode<30&&(i.mode<27||B!==4))&&tt(k,k.output,k.next_out,it-k.avail_out)?(i.mode=31,-4):(ct-=k.avail_in,it-=k.avail_out,k.total_in+=ct,k.total_out+=it,i.total+=it,i.wrap&&it&&(k.adler=i.check=i.flags?l(i.check,lt,it,k.next_out-it):d(i.check,lt,it,k.next_out-it)),k.data_type=i.bits+(i.last?64:0)+(i.mode===12?128:0)+(i.mode===20||i.mode===15?256:0),(ct==0&&it===0||B===4)&&W===S&&(W=-5),W)},b.inflateEnd=function(k){if(!k||!k.state)return c;var B=k.state;return B.window&&(B.window=null),k.state=null,S},b.inflateGetHeader=function(k,B){var i;return k&&k.state&&2&(i=k.state).wrap?((i.head=B).done=!1,S):c},b.inflateSetDictionary=function(k,B){var i,q=B.length;return k&&k.state?(i=k.state).wrap!==0&&i.mode!==11?c:i.mode===11&&d(1,B,q,0)!==i.check?-3:tt(k,B,q,q)?(i.mode=31,-4):(i.havedict=1,S):c},b.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(y,z,b){var h=y("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];z.exports=function(A,T,S,c,p,o,f,u){var _,v,R,N,P,F,G,M,$,tt=u.bits,k=0,B=0,i=0,q=0,lt=0,H=0,pt=0,K=0,ut=0,U=0,C=null,ct=0,it=new h.Buf16(16),et=new h.Buf16(16),At=null,xt=0;for(k=0;k<=15;k++)it[k]=0;for(B=0;B<c;B++)it[T[S+B]]++;for(lt=tt,q=15;1<=q&&it[q]===0;q--);if(q<lt&&(lt=q),q===0)return p[o++]=20971520,p[o++]=20971520,u.bits=1,0;for(i=1;i<q&&it[i]===0;i++);for(lt<i&&(lt=i),k=K=1;k<=15;k++)if(K<<=1,(K-=it[k])<0)return-1;if(0<K&&(A===0||q!==1))return-1;for(et[1]=0,k=1;k<15;k++)et[k+1]=et[k]+it[k];for(B=0;B<c;B++)T[S+B]!==0&&(f[et[T[S+B]]++]=B);if(F=A===0?(C=At=f,19):A===1?(C=d,ct-=257,At=l,xt-=257,256):(C=g,At=s,-1),k=i,P=o,pt=B=U=0,R=-1,N=(ut=1<<(H=lt))-1,A===1&&852<ut||A===2&&592<ut)return 1;for(;;){for(G=k-pt,$=f[B]<F?(M=0,f[B]):f[B]>F?(M=At[xt+f[B]],C[ct+f[B]]):(M=96,0),_=1<<k-pt,i=v=1<<H;p[P+(U>>pt)+(v-=_)]=G<<24|M<<16|$|0,v!==0;);for(_=1<<k-1;U&_;)_>>=1;if(_!==0?(U&=_-1,U+=_):U=0,B++,--it[k]==0){if(k===q)break;k=T[S+f[B]]}if(lt<k&&(U&N)!==R){for(pt===0&&(pt=lt),P+=i,K=1<<(H=k-pt);H+pt<q&&!((K-=it[H+pt])<=0);)H++,K<<=1;if(ut+=1<<H,A===1&&852<ut||A===2&&592<ut)return 1;p[R=U&N]=lt<<24|H<<16|P-o|0}}return U!==0&&(p[P+U]=k-pt<<24|64<<16|0),u.bits=lt,0}},{"../utils/common":41}],51:[function(y,z,b){z.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(y,z,b){var h=y("../utils/common"),d=0,l=1;function g(m){for(var x=m.length;0<=--x;)m[x]=0}var s=0,A=29,T=256,S=T+1+A,c=30,p=19,o=2*S+1,f=15,u=16,_=7,v=256,R=16,N=17,P=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],tt=new Array(2*(S+2));g(tt);var k=new Array(2*c);g(k);var B=new Array(512);g(B);var i=new Array(256);g(i);var q=new Array(A);g(q);var lt,H,pt,K=new Array(c);function ut(m,x,Z,Y,D){this.static_tree=m,this.extra_bits=x,this.extra_base=Z,this.elems=Y,this.max_length=D,this.has_stree=m&&m.length}function U(m,x){this.dyn_tree=m,this.max_code=0,this.stat_desc=x}function C(m){return m<256?B[m]:B[256+(m>>>7)]}function ct(m,x){m.pending_buf[m.pending++]=255&x,m.pending_buf[m.pending++]=x>>>8&255}function it(m,x,Z){m.bi_valid>u-Z?(m.bi_buf|=x<<m.bi_valid&65535,ct(m,m.bi_buf),m.bi_buf=x>>u-m.bi_valid,m.bi_valid+=Z-u):(m.bi_buf|=x<<m.bi_valid&65535,m.bi_valid+=Z)}function et(m,x,Z){it(m,Z[2*x],Z[2*x+1])}function At(m,x){for(var Z=0;Z|=1&m,m>>>=1,Z<<=1,0<--x;);return Z>>>1}function xt(m,x,Z){var Y,D,V=new Array(f+1),at=0;for(Y=1;Y<=f;Y++)V[Y]=at=at+Z[Y-1]<<1;for(D=0;D<=x;D++){var J=m[2*D+1];J!==0&&(m[2*D]=At(V[J]++,J))}}function wt(m){var x;for(x=0;x<S;x++)m.dyn_ltree[2*x]=0;for(x=0;x<c;x++)m.dyn_dtree[2*x]=0;for(x=0;x<p;x++)m.bl_tree[2*x]=0;m.dyn_ltree[2*v]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function kt(m){8<m.bi_valid?ct(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function Ot(m,x,Z,Y){var D=2*x,V=2*Z;return m[D]<m[V]||m[D]===m[V]&&Y[x]<=Y[Z]}function Nt(m,x,Z){for(var Y=m.heap[Z],D=Z<<1;D<=m.heap_len&&(D<m.heap_len&&Ot(x,m.heap[D+1],m.heap[D],m.depth)&&D++,!Ot(x,Y,m.heap[D],m.depth));)m.heap[Z]=m.heap[D],Z=D,D<<=1;m.heap[Z]=Y}function Ct(m,x,Z){var Y,D,V,at,J=0;if(m.last_lit!==0)for(;Y=m.pending_buf[m.d_buf+2*J]<<8|m.pending_buf[m.d_buf+2*J+1],D=m.pending_buf[m.l_buf+J],J++,Y===0?et(m,D,x):(et(m,(V=i[D])+T+1,x),(at=F[V])!==0&&it(m,D-=q[V],at),et(m,V=C(--Y),Z),(at=G[V])!==0&&it(m,Y-=K[V],at)),J<m.last_lit;);et(m,v,x)}function Lt(m,x){var Z,Y,D,V=x.dyn_tree,at=x.stat_desc.static_tree,J=x.stat_desc.has_stree,ft=x.stat_desc.elems,Et=-1;for(m.heap_len=0,m.heap_max=o,Z=0;Z<ft;Z++)V[2*Z]!==0?(m.heap[++m.heap_len]=Et=Z,m.depth[Z]=0):V[2*Z+1]=0;for(;m.heap_len<2;)V[2*(D=m.heap[++m.heap_len]=Et<2?++Et:0)]=1,m.depth[D]=0,m.opt_len--,J&&(m.static_len-=at[2*D+1]);for(x.max_code=Et,Z=m.heap_len>>1;1<=Z;Z--)Nt(m,V,Z);for(D=ft;Z=m.heap[1],m.heap[1]=m.heap[m.heap_len--],Nt(m,V,1),Y=m.heap[1],m.heap[--m.heap_max]=Z,m.heap[--m.heap_max]=Y,V[2*D]=V[2*Z]+V[2*Y],m.depth[D]=(m.depth[Z]>=m.depth[Y]?m.depth[Z]:m.depth[Y])+1,V[2*Z+1]=V[2*Y+1]=D,m.heap[1]=D++,Nt(m,V,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(vt,Dt){var Yt,Mt,re,Rt,_t,le,Bt=Dt.dyn_tree,ce=Dt.max_code,Kt=Dt.stat_desc.static_tree,Oe=Dt.stat_desc.has_stree,$t=Dt.stat_desc.extra_bits,he=Dt.stat_desc.extra_base,Vt=Dt.stat_desc.max_length,ne=0;for(Rt=0;Rt<=f;Rt++)vt.bl_count[Rt]=0;for(Bt[2*vt.heap[vt.heap_max]+1]=0,Yt=vt.heap_max+1;Yt<o;Yt++)Vt<(Rt=Bt[2*Bt[2*(Mt=vt.heap[Yt])+1]+1]+1)&&(Rt=Vt,ne++),Bt[2*Mt+1]=Rt,ce<Mt||(vt.bl_count[Rt]++,_t=0,he<=Mt&&(_t=$t[Mt-he]),le=Bt[2*Mt],vt.opt_len+=le*(Rt+_t),Oe&&(vt.static_len+=le*(Kt[2*Mt+1]+_t)));if(ne!==0){do{for(Rt=Vt-1;vt.bl_count[Rt]===0;)Rt--;vt.bl_count[Rt]--,vt.bl_count[Rt+1]+=2,vt.bl_count[Vt]--,ne-=2}while(0<ne);for(Rt=Vt;Rt!==0;Rt--)for(Mt=vt.bl_count[Rt];Mt!==0;)ce<(re=vt.heap[--Yt])||(Bt[2*re+1]!==Rt&&(vt.opt_len+=(Rt-Bt[2*re+1])*Bt[2*re],Bt[2*re+1]=Rt),Mt--)}}(m,x),xt(V,Et,m.bl_count)}function r(m,x,Z){var Y,D,V=-1,at=x[1],J=0,ft=7,Et=4;for(at===0&&(ft=138,Et=3),x[2*(Z+1)+1]=65535,Y=0;Y<=Z;Y++)D=at,at=x[2*(Y+1)+1],++J<ft&&D===at||(J<Et?m.bl_tree[2*D]+=J:D!==0?(D!==V&&m.bl_tree[2*D]++,m.bl_tree[2*R]++):J<=10?m.bl_tree[2*N]++:m.bl_tree[2*P]++,V=D,Et=(J=0)===at?(ft=138,3):D===at?(ft=6,3):(ft=7,4))}function W(m,x,Z){var Y,D,V=-1,at=x[1],J=0,ft=7,Et=4;for(at===0&&(ft=138,Et=3),Y=0;Y<=Z;Y++)if(D=at,at=x[2*(Y+1)+1],!(++J<ft&&D===at)){if(J<Et)for(;et(m,D,m.bl_tree),--J!=0;);else D!==0?(D!==V&&(et(m,D,m.bl_tree),J--),et(m,R,m.bl_tree),it(m,J-3,2)):J<=10?(et(m,N,m.bl_tree),it(m,J-3,3)):(et(m,P,m.bl_tree),it(m,J-11,7));V=D,Et=(J=0)===at?(ft=138,3):D===at?(ft=6,3):(ft=7,4)}}g(K);var L=!1;function w(m,x,Z,Y){it(m,(s<<1)+(Y?1:0),3),function(D,V,at,J){kt(D),ct(D,at),ct(D,~at),h.arraySet(D.pending_buf,D.window,V,at,D.pending),D.pending+=at}(m,x,Z)}b._tr_init=function(m){L||(function(){var x,Z,Y,D,V,at=new Array(f+1);for(D=Y=0;D<A-1;D++)for(q[D]=Y,x=0;x<1<<F[D];x++)i[Y++]=D;for(i[Y-1]=D,D=V=0;D<16;D++)for(K[D]=V,x=0;x<1<<G[D];x++)B[V++]=D;for(V>>=7;D<c;D++)for(K[D]=V<<7,x=0;x<1<<G[D]-7;x++)B[256+V++]=D;for(Z=0;Z<=f;Z++)at[Z]=0;for(x=0;x<=143;)tt[2*x+1]=8,x++,at[8]++;for(;x<=255;)tt[2*x+1]=9,x++,at[9]++;for(;x<=279;)tt[2*x+1]=7,x++,at[7]++;for(;x<=287;)tt[2*x+1]=8,x++,at[8]++;for(xt(tt,S+1,at),x=0;x<c;x++)k[2*x+1]=5,k[2*x]=At(x,5);lt=new ut(tt,F,T+1,S,f),H=new ut(k,G,0,c,f),pt=new ut(new Array(0),M,0,p,_)}(),L=!0),m.l_desc=new U(m.dyn_ltree,lt),m.d_desc=new U(m.dyn_dtree,H),m.bl_desc=new U(m.bl_tree,pt),m.bi_buf=0,m.bi_valid=0,wt(m)},b._tr_stored_block=w,b._tr_flush_block=function(m,x,Z,Y){var D,V,at=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(J){var ft,Et=4093624447;for(ft=0;ft<=31;ft++,Et>>>=1)if(1&Et&&J.dyn_ltree[2*ft]!==0)return d;if(J.dyn_ltree[18]!==0||J.dyn_ltree[20]!==0||J.dyn_ltree[26]!==0)return l;for(ft=32;ft<T;ft++)if(J.dyn_ltree[2*ft]!==0)return l;return d}(m)),Lt(m,m.l_desc),Lt(m,m.d_desc),at=function(J){var ft;for(r(J,J.dyn_ltree,J.l_desc.max_code),r(J,J.dyn_dtree,J.d_desc.max_code),Lt(J,J.bl_desc),ft=p-1;3<=ft&&J.bl_tree[2*$[ft]+1]===0;ft--);return J.opt_len+=3*(ft+1)+5+5+4,ft}(m),D=m.opt_len+3+7>>>3,(V=m.static_len+3+7>>>3)<=D&&(D=V)):D=V=Z+5,Z+4<=D&&x!==-1?w(m,x,Z,Y):m.strategy===4||V===D?(it(m,2+(Y?1:0),3),Ct(m,tt,k)):(it(m,4+(Y?1:0),3),function(J,ft,Et,vt){var Dt;for(it(J,ft-257,5),it(J,Et-1,5),it(J,vt-4,4),Dt=0;Dt<vt;Dt++)it(J,J.bl_tree[2*$[Dt]+1],3);W(J,J.dyn_ltree,ft-1),W(J,J.dyn_dtree,Et-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,at+1),Ct(m,m.dyn_ltree,m.dyn_dtree)),wt(m),Y&&kt(m)},b._tr_tally=function(m,x,Z){return m.pending_buf[m.d_buf+2*m.last_lit]=x>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&x,m.pending_buf[m.l_buf+m.last_lit]=255&Z,m.last_lit++,x===0?m.dyn_ltree[2*Z]++:(m.matches++,x--,m.dyn_ltree[2*(i[Z]+T+1)]++,m.dyn_dtree[2*C(x)]++),m.last_lit===m.lit_bufsize-1},b._tr_align=function(m){it(m,2,3),et(m,v,tt),function(x){x.bi_valid===16?(ct(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(y,z,b){z.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(y,z,b){(function(h){(function(d,l){if(!d.setImmediate){var g,s,A,T,S=1,c={},p=!1,o=d.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(d);f=f&&f.setTimeout?f:d,g={}.toString.call(d.process)==="[object process]"?function(R){process.nextTick(function(){_(R)})}:function(){if(d.postMessage&&!d.importScripts){var R=!0,N=d.onmessage;return d.onmessage=function(){R=!1},d.postMessage("","*"),d.onmessage=N,R}}()?(T="setImmediate$"+Math.random()+"$",d.addEventListener?d.addEventListener("message",v,!1):d.attachEvent("onmessage",v),function(R){d.postMessage(T+R,"*")}):d.MessageChannel?((A=new MessageChannel).port1.onmessage=function(R){_(R.data)},function(R){A.port2.postMessage(R)}):o&&"onreadystatechange"in o.createElement("script")?(s=o.documentElement,function(R){var N=o.createElement("script");N.onreadystatechange=function(){_(R),N.onreadystatechange=null,s.removeChild(N),N=null},s.appendChild(N)}):function(R){setTimeout(_,0,R)},f.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var N=new Array(arguments.length-1),P=0;P<N.length;P++)N[P]=arguments[P+1];var F={callback:R,args:N};return c[S]=F,g(S),S++},f.clearImmediate=u}function u(R){delete c[R]}function _(R){if(p)setTimeout(_,0,R);else{var N=c[R];if(N){p=!0;try{(function(P){var F=P.callback,G=P.args;switch(G.length){case 0:F();break;case 1:F(G[0]);break;case 2:F(G[0],G[1]);break;case 3:F(G[0],G[1],G[2]);break;default:F.apply(l,G)}})(N)}finally{u(R),p=!1}}}}function v(R){R.source===d&&typeof R.data=="string"&&R.data.indexOf(T)===0&&_(+R.data.slice(T.length))}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,typeof xe<"u"?xe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Nr);var An=Nr.exports;const Ye=Sr(An);async function Nn(Q,st,y,z){rt("Starting conversion to NewPipe format...");let b,h=new Ye,d="",l=null,g=null;if(y==="merge"&&Q){rt("Loading existing NewPipe backup...");const p=await Q.arrayBuffer(),o=await Ye.loadAsync(p),f=o.file("newpipe.db");if(f){const v=await f.async("uint8array");b=new z.Database(v),rt("Database loaded. Running integrity check...");const R=b.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");R&&R[0]&&R[0].values&&rt(`Existing NewPipe database contains: ${R[0].values.flat().join(", ")} tables.`,"schema");try{Tn(b);try{const N=b.exec("PRAGMA table_info('stream_state')")||[],P=b.exec("PRAGMA foreign_key_list('stream_state')")||[],F=b.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];d+=`PRAGMA table_info("stream_state"):
`,N.length>0&&(d+=JSON.stringify(N[0],null,2)+`
`),d+=`
PRAGMA foreign_key_list("stream_state"):
`,P.length>0&&(d+=JSON.stringify(P[0],null,2)+`
`),d+=`
CREATE statement:
`,F.length>0&&F[0].values&&F[0].values.length>0&&(d+=F[0].values[0][0]+`
`)}catch(N){d+="Failed to collect stream_state debug info: "+(N.message||N.toString())+`
`}}catch(N){rt("Warning: failed to ensure stream_state schema: "+(N.message||N.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const u=o.file("preferences.json");u&&(l=await u.async("string"));const _=o.file("newpipe.settings");_&&(g=await _.async("blob"))}else{rt("Creating new NewPipe database..."),b=new z.Database,kn(b);try{const p=b.exec("PRAGMA table_info('stream_state')")||[],o=b.exec("PRAGMA foreign_key_list('stream_state')")||[],f=b.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];d+=`PRAGMA table_info("stream_state"):
`,p.length>0&&(d+=JSON.stringify(p[0],null,2)+`
`),d+=`
PRAGMA foreign_key_list("stream_state"):
`,o.length>0&&(d+=JSON.stringify(o[0],null,2)+`
`),d+=`
CREATE statement:
`,f.length>0&&f[0].values&&f[0].values.length>0&&(d+=f[0].values[0][0]+`
`)}catch(p){d+="Failed to collect stream_state debug info (new DB): "+(p.message||p.toString())+`
`}}rt("Parsing LibreTube JSON...");const s=await st.text(),A=JSON.parse(s);b.run("BEGIN TRANSACTION");try{rt("Processing Subscriptions..."),y==="merge"&&b.run(`DELETE FROM subscriptions WHERE service_id = ${Xt}`);let p=0;if(A.subscriptions){const o=b.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");A.subscriptions.forEach(f=>{try{const u=f.url||`https://www.youtube.com/channel/${f.channelId}`,_=f.name||"Unknown",v=f.avatar||f.avatarUrl||null;if(!u.includes("youtube.com")&&!u.includes("youtu.be")){rt(`Dropped non-YouTube subscription: ${_} (${u})`,"warn");return}o.run([Xt,u,_,v,0,"",0]),p++}catch(u){rt(`ERROR inserting subscription ${f.name}: ${u.message||u.toString()}`,"err")}}),o.free()}rt(`Inserted ${p} subscriptions.`)}catch(p){throw rt(`FATAL ERROR during Subscriptions phase: ${p.message||p.toString()}`,"err"),p}try{rt("Processing Playlists..."),y==="merge"&&(b.run("DELETE FROM playlists"),b.run("DELETE FROM playlist_stream_join"),b.run("DELETE FROM remote_playlists"),rt("Cleared existing playlists and joins."));let p=0;if(A.localPlaylists){const o=b.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),f=b.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),u=b.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)");for(const _ of A.localPlaylists){const v=_.playlist.name||"Untitled";try{if(b.exec(`SELECT uid FROM playlists WHERE name = '${v.replace(/'/g,"''")}'`).length>0){rt(`Skipping duplicate local playlist: ${v}`,"warn");continue}f.run([v,0,-1,p]);const P=b.exec("SELECT last_insert_rowid()")[0].values[0][0];let F=0;for(const G of _.videos){const M=`https://www.youtube.com/watch?v=${G.videoId}`;if(!G.videoId){rt(`Skipped video in playlist ${v} due to missing videoId.`,"warn");continue}try{const $=G.title||"Unknown",tt=G.uploader||"Unknown",k=G.duration||0,B=G.uploadDate?new Date(G.uploadDate).getTime()/1e3:null,i=G.thumbnailUrl||null;o.run([Xt,M,$,"VIDEO_STREAM",k,tt,B,i]);const q=b.exec(`SELECT uid FROM streams WHERE service_id=${Xt} AND url='${M.replace(/'/g,"''")}'`);if(q.length>0&&q[0].values.length>0){const lt=q[0].values[0][0],H=F;if(u.run([P,lt,F++]),H===0)try{b.run(`UPDATE playlists SET thumbnail_stream_id = ${lt} WHERE uid = ${P}`)}catch(pt){rt(`WARN: failed to set playlist thumbnail for ${v}: ${pt.message||pt.toString()}`,"warn")}}else rt(`Warning: Could not find/insert stream for video ${$}`,"warn")}catch($){rt(`ERROR processing video "${G.title}" in playlist "${v}": ${$.message||$.toString()}`,"err")}}p++}catch(R){throw rt(`FATAL ERROR processing playlist "${v}": ${R.message||R.toString()}`,"err"),R}}o.free(),f.free(),u.free()}rt(`Processed ${p} local playlists.`)}catch(p){throw rt(`FATAL ERROR during Local Playlists phase: ${p.message||p.toString()}`,"err"),p}try{rt("Processing Remote Playlist Bookmarks...");let p=0;const o=b.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)");if(A.playlistBookmarks){for(const f of A.playlistBookmarks)try{const u=f.url||(f.playlistId?`https://www.youtube.com/playlist?list=${f.playlistId}`:null);if(!u||!u.includes("youtube.com")&&!u.includes("youtu.be")){rt(`Dropped non-YouTube remote playlist: ${f.playlistName||"Untitled"}`,"warn");continue}const _=f.playlistName||f.name||"Untitled",v=f.thumbnailUrl||null,R=f.uploader||"Unknown",N=typeof f.videos=="number"?f.videos:0;o.run([Xt,_,u,v,R,p++,N])}catch(u){rt(`ERROR inserting remote playlist ${f.playlistName||"Untitled"}: ${u.message||u.toString()}`,"err")}o.free()}rt(`Processed ${p} remote playlist bookmarks.`)}catch(p){throw rt(`FATAL ERROR during Remote Playlists phase: ${p.message||p.toString()}`,"err"),p}try{rt("Processing Watch History...");let p=0,o=0,f=0;const u=A.history||A.watchHistory||A.watch_history||A.watch_history_items||[],_=new Map;if(A.watchPositions&&Array.isArray(A.watchPositions)){for(const v of A.watchPositions)if(v&&v.videoId){const R=Number(v.position||0);_.set(String(v.videoId),R)}}if(u&&u.length>0){const v=b.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),R=b.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),N=b.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const P of u)try{const F=P.videoId||P.videoIdStr||P.id||P.url&&(P.url.match(/v=([^&]+)/)||[])[1];if(!F)continue;const G=`https://www.youtube.com/watch?v=${F}`,M=P.title||P.name||"Unknown",$=P.uploader||P.uploaderName||"Unknown",tt=P.duration||P.length||0,k=P.uploadDate?isNaN(Number(P.uploadDate))?Math.floor(new Date(P.uploadDate).getTime()/1e3):Math.floor(Number(P.uploadDate)):null,B=P.thumbnailUrl||P.thumbnail||null;let i=0;const q=_.get(F),lt="9223372036854775807";if(q!=null)String(q)===lt?i=0:i=Math.floor(Number(q)||0);else{const U=P.currentTime||P.position||P.progress||0;i=Math.floor(Number(U||0)*1e3)}let H=P.accessDate||P.accessedAt||P.lastWatched||P.timestamp||P.date||P.time,pt;if(!H)pt=Date.now();else if(typeof H=="number")pt=H>1e12?Math.floor(H):Math.floor(H*1e3);else{const U=Date.parse(String(H));pt=isNaN(U)?Date.now():U}const K=Number(P.repeatCount||P.watchCount||P.playCount||P.repeat_count||1);v.run([Xt,G,M,"VIDEO_STREAM",tt,$,k,B]);const ut=b.exec(`SELECT uid FROM streams WHERE service_id=${Xt} AND url='${G.replace(/'/g,"''")}'`);if(ut.length>0&&ut[0].values.length>0){const U=ut[0].values[0][0];try{R.run([i,U])}catch(C){rt(`WARN: failed to write stream_state for ${F}: ${C.message||C.toString()}`,"warn")}try{if(y==="merge"){const C=pt-1e3,ct=pt+1e3,it=b.exec(`SELECT access_date, repeat_count FROM stream_history WHERE stream_id = ${U} AND access_date BETWEEN ${C} AND ${ct}`);if(it&&it.length>0&&it[0].values.length>0){const et=Number(it[0].values[0][0]),xt=(Number(it[0].values[0][1])||0)+K;b.run(`UPDATE stream_history SET repeat_count = ${xt} WHERE stream_id = ${U} AND access_date = ${et}`),f++}else N.run([U,pt,K]),o++}else N.run([U,pt,K]),o++}catch(C){rt(`WARN: failed to write stream_history for ${F}: ${C.message||C.toString()}`,"warn")}p++}}catch(F){rt(`ERROR processing history item: ${F.message||F.toString()}`,"warn")}v.free(),R.free(),N.free()}rt(`Processed ${p} history items (added: ${o}, duplicates merged: ${f}).`)}catch(p){rt(`Error processing history: ${p.message}`,"err")}try{b.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),rt("Inserted room_master_table identity.")}catch(p){rt("Error inserting room_master_table: "+p.message,"warn")}try{rt("Committing transaction..."),b.run("COMMIT")}catch(p){throw rt(`FATAL ERROR on COMMIT: ${p.message||p.toString()}`,"err"),p}rt("Exporting database...");const T=b.export();if(h.file("newpipe.db",T),l?(h.file("preferences.json",l),rt("Preserved existing preferences.json.")):(h.file("preferences.json",JSON.stringify(Sn,null,2)),rt("Created default preferences.json.")),g&&(h.file("newpipe.settings",g),rt("Preserved existing newpipe.settings.")),h.file("stream_state_debug.txt",d||"No stream_state debug information collected."),rt("Attached stream_state_debug.txt to zip for inspection.","schema"),d){const p=d.split(`
`).slice(0,12).join(`
`);rt(`stream_state_debug preview:
`+p,"schema")}const S=await h.generateAsync({type:"blob"}),c=Xe();He(S,"newpipe_converted.zip",c),rt("Done! File downloaded.","info")}async function Rn(Q,st,y,z){rt("Starting conversion to LibreTube format...");let b={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[]};if(y==="merge"&&st){rt("Reading target LibreTube file...");const f=await st.text();b=JSON.parse(f),b.subscriptions=[],b.playlistBookmarks=[],b.localPlaylists=[],rt("Target LibreTube file loaded and old playlist/subscription data cleared for merge.")}rt("Reading NewPipe backup...");const h=await Q.arrayBuffer(),l=(await Ye.loadAsync(h)).file("newpipe.db");if(!l)throw new Error("NewPipe ZIP must contain newpipe.db");const g=await l.async("uint8array"),s=new z.Database(g);rt("NewPipe database loaded.");try{let f="";const u=s.exec("PRAGMA table_info('stream_state')")||[],_=s.exec("PRAGMA foreign_key_list('stream_state')")||[],v=s.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];f+=`PRAGMA table_info("stream_state"):
`,u.length>0&&(f+=JSON.stringify(u[0],null,2)+`
`),f+=`
PRAGMA foreign_key_list("stream_state"):
`,_.length>0&&(f+=JSON.stringify(_[0],null,2)+`
`),f+=`
CREATE statement:
`,v.length>0&&v[0].values&&v[0].values.length>0&&(f+=v[0].values[0][0]+`
`);const R=new Blob([f||"No stream_state debug info collected."],{type:"text/plain"}),N=Xe();He(R,"stream_state_debug_input.txt",N),rt("Downloaded separate stream_state debug file for input NewPipe DB.","schema")}catch(f){rt("Failed to collect input stream_state debug: "+(f.message||f.toString()),"warn")}rt("Extracting Subscriptions...");const A=s.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${Xt}`);A.length>0&&A[0].values.forEach(u=>{const _=u[0];if(!_||!_.includes("youtube.com")&&!_.includes("youtu.be")){rt(`Dropped non-YouTube subscription URL: ${u[1]}`,"warn");return}let v="";const R=_.match(/channel\/([\w-]+)/),N=_.match(/user\/([\w-]+)/);R?v=R[1]:N&&(v=N[1]),b.subscriptions.push({channelId:v,url:_,name:u[1],avatar:u[2],verified:!1})}),rt(`Extracted ${b.subscriptions.length} YouTube subscriptions.`),rt("Extracting Remote Playlists...");const T=s.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${Xt}`);T.length>0&&T[0].values.forEach(u=>{const _=u[1];if(!_||!_.includes("youtube.com")&&!_.includes("youtu.be")){rt(`Dropped non-YouTube remote playlist URL: ${u[0]}`,"warn");return}const v=_.match(/[?&]list=([^&]+)/),R=v?v[1]:"";b.playlistBookmarks.push({playlistId:R,playlistName:u[0],thumbnailUrl:u[3],uploader:u[2],uploaderUrl:"",videos:u[4]})}),rt(`Extracted ${b.playlistBookmarks.length} remote playlist bookmarks.`),rt("Extracting Local Playlists...");const S=s.exec("SELECT uid, name FROM playlists");if(S.length>0)for(const f of S[0].values){const u=f[0],_=f[1],v=[],R=s.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${u} AND s.service_id = ${Xt}
                    ORDER BY j.join_index ASC
                `);R.length>0&&R[0].values.forEach(N=>{const P=N[0],F=P.match(/v=([^&]+)/),G=F?F[1]:"";if(!G){rt(`Warning: Skipped stream in playlist "${_}" due to unparseable URL: ${P}`,"warn");return}v.push({id:G,playlistId:u,videoId:G,title:N[1],uploadDate:N[4]?new Date(N[4]*1e3).toISOString().split("T")[0]:"1970-01-01",uploader:N[3],thumbnailUrl:N[5],duration:N[2]})}),(v.length>0||_)&&b.localPlaylists.push({playlist:{id:u,name:_,thumbnailUrl:v.length>0?v[0].thumbnailUrl:""},videos:v})}rt(`Extracted ${b.localPlaylists.length} local playlists.`);const c=JSON.stringify(b,null,2),p=new Blob([c],{type:"application/json"}),o=Xe();He(p,"libretube_converted.json",o),rt("Done! File downloaded.","info")}let Ke;window.onload=async()=>{rt("Initializing SQL.js...");try{Ke=await En(),rt("SQL.js ready.")}catch(Q){rt("Error loading SQL.js: "+(Q.message||Q.toString()),"err")}Rr(),xn()};function Rr(){const Q=document.querySelector('input[name="mode"]:checked'),st=Q?Q.value:"convert",y=document.getElementById("file-newpipe"),z=document.getElementById("file-libretube"),b=document.getElementById("merge-controls"),h=document.getElementById("convert-controls");!y||!z||!b||!h||(st==="merge"?(b.style.display="",h.style.display="none",y.disabled=!1,z.disabled=!1):(b.style.display="none",h.style.display="",y.disabled=!1,z.disabled=!1))}async function xr(Q){var h,d;const st=document.querySelector('input[name="mode"]:checked'),y=st?st.value:"convert",z=(h=document.getElementById("file-newpipe").files)==null?void 0:h[0],b=(d=document.getElementById("file-libretube").files)==null?void 0:d[0];if(y==="merge"&&(!z||!b))return rt("Merge mode requires BOTH files.","err");if(y==="convert"){if(Q==="to_newpipe"&&!b)return rt("Missing LibreTube source file.","err");if(Q==="to_libretube"&&!z)return rt("Missing NewPipe source file.","err")}try{document.querySelectorAll(".controls button").forEach(l=>l.disabled=!0),Q==="to_newpipe"?await Nn(z,b,y,Ke):await Rn(z,b,y,Ke)}catch(l){rt(`FATAL ERROR: ${l.message||l.toString()||"An unknown error occurred"}`,"err"),l.stack?rt(`Stack Trace: ${l.stack}`,"err"):rt(`Error Object: ${l.toString()}`,"err"),console.error(l)}finally{document.querySelectorAll(".controls button").forEach(l=>l.disabled=!1)}}window.processBackup=xr;window.updateUI=Rr;window.addEventListener("DOMContentLoaded",()=>{const Q=document.getElementById("btn-merge"),st=document.getElementById("merge-direction"),y=document.getElementById("playlist-behavior");Q&&st&&y&&(y.value=st.checked?"merge_np_precedence":"merge_lt_precedence",st.addEventListener("change",()=>{st.checked?y.value="merge_np_precedence":y.value="merge_lt_precedence"}),Q.addEventListener("click",async()=>{const z=st.checked?"to_libretube":"to_newpipe";await xr(z)}))});function xn(){document.querySelectorAll(".drop-zone").forEach(Q=>{const st=Q.querySelector('input[type="file"]'),y=Q.querySelector(".file-name");st&&(Q.addEventListener("click",z=>{z.target!==st&&st.click()}),Q.addEventListener("keydown",z=>{(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),st.click())}),Q.addEventListener("dragover",z=>{z.preventDefault(),Q.classList.add("active")}),Q.addEventListener("dragleave",()=>{Q.classList.remove("active")}),Q.addEventListener("drop",z=>{z.preventDefault(),Q.classList.remove("active");const b=z.dataTransfer&&z.dataTransfer.files;if(b&&b.length)try{const h=new DataTransfer;for(let d=0;d<b.length;d++)h.items.add(b[d]);st.files=h.files,st.dispatchEvent(new Event("change",{bubbles:!0}))}catch(h){console.warn("Could not set input.files programmatically",h)}}),st.addEventListener("change",()=>{const z=st.files&&st.files[0];y&&(y.textContent=z?z.name:"")}))})}
//# sourceMappingURL=index-CtT_YsJV.js.map

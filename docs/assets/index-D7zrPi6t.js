var mn=Object.defineProperty;var _n=(J,st,_)=>st in J?mn(J,st,{enumerable:!0,configurable:!0,writable:!0,value:_}):J[st]=_;var ee=(J,st,_)=>_n(J,typeof st!="symbol"?st+"":st,_);(function(){const st=document.createElement("link").relList;if(st&&st.supports&&st.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))U(E);new MutationObserver(E=>{for(const o of E)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&U(h)}).observe(document,{childList:!0,subtree:!0});function _(E){const o={};return E.integrity&&(o.integrity=E.integrity),E.referrerPolicy&&(o.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?o.credentials="include":E.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function U(E){if(E.ep)return;E.ep=!0;const o=_(E);fetch(E.href,o)}})();function rt(J,st="info"){const _=document.getElementById("debug-console");if(!_)return;const U=document.createElement("div");U.textContent=`[${new Date().toLocaleTimeString()}] ${J}`,st==="err"?U.className="log-err":st==="warn"?U.className="log-warn":st==="schema"?U.className="log-schema":U.className="log-info",_.appendChild(U),_.scrollTop=_.scrollHeight}var xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sr(J){return J&&J.__esModule&&Object.prototype.hasOwnProperty.call(J,"default")?J.default:J}function gn(J){if(J.__esModule)return J;var st=J.default;if(typeof st=="function"){var _=function U(){return this instanceof U?Reflect.construct(st,arguments,this.constructor):st.apply(this,arguments)};_.prototype=st.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(J).forEach(function(U){var E=Object.getOwnPropertyDescriptor(J,U);Object.defineProperty(_,U,E.get?E:{enumerable:!0,get:function(){return J[U]}})}),_}var Ar={exports:{}};const bn={},yn=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"})),kr=gn(yn);(function(J,st){var _=void 0,U=function(E){return _||(_=new Promise(function(o,h){var a=typeof E<"u"?E:{},p=a.onAbort;a.onAbort=function(t){h(new Error(t)),p&&p(t)},a.postRun=a.postRun||[],a.postRun.push(function(){o(a)}),J=void 0;var s;s||(s=typeof a<"u"?a:{});var R=typeof window=="object",T=typeof WorkerGlobalScope<"u",S=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";s.onRuntimeInitialized=function(){function t(O,H){switch(typeof H){case"boolean":dn(O,H?1:0);break;case"number":cn(O,H);break;case"string":fn(O,H,-1,-1);break;case"object":if(H===null)yr(O);else if(H.length!=null){var ut=Ae(H,Se);hn(O,ut,H.length,-1),Ne(ut)}else Re(O,"Wrong API use : tried to return a value of an unknown type ("+H+").",-1);break;default:yr(O)}}function e(O,H){for(var ut=[],mt=0;mt<O;mt+=1){var gt=Ct(H+4*mt,"i32"),Tt=sn(gt);if(Tt===1||Tt===2)gt=un(gt);else if(Tt===3)gt=on(gt);else if(Tt===4){Tt=gt,gt=an(Tt),Tt=ln(Tt);for(var Wt=new Uint8Array(gt),qt=0;qt<gt;qt+=1)Wt[qt]=W[Tt+qt];gt=Wt}else gt=null;ut.push(gt)}return ut}function n(O,H){this.Qa=O,this.db=H,this.Oa=1,this.lb=[]}function l(O,H){if(this.db=H,H=ft(O)+1,this.eb=$e(H),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Et(O,V,this.eb,H),this.kb=this.eb,this.Za=this.pb=null}function v(O){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),O!=null){var H=this.filename,ut="/",mt=H;if(ut&&(ut=typeof ut=="string"?ut:Ce(ut),mt=H?x(ut+"/"+H):ut),H=le(!0,!0),mt=Dr(mt,H),O){if(typeof O=="string"){ut=Array(O.length);for(var gt=0,Tt=O.length;gt<Tt;++gt)ut[gt]=O.charCodeAt(gt);O=ut}ve(mt,H|146),ut=ce(mt,577),ur(ut,O,0,O.length,0),Be(ut),ve(mt,H)}}this.handleError(ht(this.filename,C)),this.db=Ct(C,"i32"),vr(this.db),this.fb={},this.Sa={}}var C=te(4),q=s.cwrap,ht=q("sqlite3_open","number",["string","number"]),wt=q("sqlite3_close_v2","number",["number"]),bt=q("sqlite3_exec","number",["number","string","number","number","number"]),Ot=q("sqlite3_changes","number",["number"]),Ut=q("sqlite3_prepare_v2","number",["number","string","number","number","number"]),pr=q("sqlite3_sql","string",["number"]),jr=q("sqlite3_normalized_sql","string",["number"]),mr=q("sqlite3_prepare_v2","number",["number","number","number","number","number"]),qr=q("sqlite3_bind_text","number",["number","number","number","number","number"]),_r=q("sqlite3_bind_blob","number",["number","number","number","number","number"]),Wr=q("sqlite3_bind_double","number",["number","number","number"]),$r=q("sqlite3_bind_int","number",["number","number","number"]),Gr=q("sqlite3_bind_parameter_index","number",["number","string"]),Zr=q("sqlite3_step","number",["number"]),Hr=q("sqlite3_errmsg","string",["number"]),Xr=q("sqlite3_column_count","number",["number"]),Yr=q("sqlite3_data_count","number",["number"]),Kr=q("sqlite3_column_double","number",["number","number"]),gr=q("sqlite3_column_text","string",["number","number"]),Vr=q("sqlite3_column_blob","number",["number","number"]),Qr=q("sqlite3_column_bytes","number",["number","number"]),Jr=q("sqlite3_column_type","number",["number","number"]),tn=q("sqlite3_column_name","string",["number","number"]),en=q("sqlite3_reset","number",["number"]),rn=q("sqlite3_clear_bindings","number",["number"]),nn=q("sqlite3_finalize","number",["number"]),br=q("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),sn=q("sqlite3_value_type","number",["number"]),an=q("sqlite3_value_bytes","number",["number"]),on=q("sqlite3_value_text","string",["number"]),ln=q("sqlite3_value_blob","number",["number"]),un=q("sqlite3_value_double","number",["number"]),cn=q("sqlite3_result_double","",["number","number"]),yr=q("sqlite3_result_null","",["number"]),fn=q("sqlite3_result_text","",["number","string","number","number"]),hn=q("sqlite3_result_blob","",["number","number","number","number"]),dn=q("sqlite3_result_int","",["number","number"]),Re=q("sqlite3_result_error","",["number","string","number"]),wr=q("sqlite3_aggregate_context","number",["number","number"]),vr=q("RegisterExtensionFunctions","number",["number"]),Er=q("sqlite3_update_hook","number",["number","number","number"]);n.prototype.bind=function(O){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(O)?this.Cb(O):O!=null&&typeof O=="object"?this.Db(O):!0},n.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var O=Zr(this.Qa);switch(O){case 100:return!0;case 101:return!1;default:throw this.db.handleError(O)}},n.prototype.wb=function(O){return O==null&&(O=this.Oa,this.Oa+=1),Kr(this.Qa,O)},n.prototype.Gb=function(O){if(O==null&&(O=this.Oa,this.Oa+=1),O=gr(this.Qa,O),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(O)},n.prototype.Hb=function(O){return O==null&&(O=this.Oa,this.Oa+=1),gr(this.Qa,O)},n.prototype.getBlob=function(O){O==null&&(O=this.Oa,this.Oa+=1);var H=Qr(this.Qa,O);O=Vr(this.Qa,O);for(var ut=new Uint8Array(H),mt=0;mt<H;mt+=1)ut[mt]=W[O+mt];return ut},n.prototype.get=function(O,H){H=H||{},O!=null&&this.bind(O)&&this.step(),O=[];for(var ut=Yr(this.Qa),mt=0;mt<ut;mt+=1)switch(Jr(this.Qa,mt)){case 1:var gt=H.useBigInt?this.Gb(mt):this.wb(mt);O.push(gt);break;case 2:O.push(this.wb(mt));break;case 3:O.push(this.Hb(mt));break;case 4:O.push(this.getBlob(mt));break;default:O.push(null)}return O},n.prototype.getColumnNames=function(){for(var O=[],H=Xr(this.Qa),ut=0;ut<H;ut+=1)O.push(tn(this.Qa,ut));return O},n.prototype.getAsObject=function(O,H){O=this.get(O,H),H=this.getColumnNames();for(var ut={},mt=0;mt<H.length;mt+=1)ut[H[mt]]=O[mt];return ut},n.prototype.getSQL=function(){return pr(this.Qa)},n.prototype.getNormalizedSQL=function(){return jr(this.Qa)},n.prototype.run=function(O){return O!=null&&this.bind(O),this.step(),this.reset()},n.prototype.sb=function(O,H){H==null&&(H=this.Oa,this.Oa+=1),O=vt(O);var ut=Ae(O,Se);this.lb.push(ut),this.db.handleError(qr(this.Qa,H,ut,O.length-1,0))},n.prototype.Bb=function(O,H){H==null&&(H=this.Oa,this.Oa+=1);var ut=Ae(O,Se);this.lb.push(ut),this.db.handleError(_r(this.Qa,H,ut,O.length,0))},n.prototype.rb=function(O,H){H==null&&(H=this.Oa,this.Oa+=1),this.db.handleError((O===(O|0)?$r:Wr)(this.Qa,H,O))},n.prototype.Eb=function(O){O==null&&(O=this.Oa,this.Oa+=1),_r(this.Qa,O,0,0,0)},n.prototype.tb=function(O,H){switch(H==null&&(H=this.Oa,this.Oa+=1),typeof O){case"string":this.sb(O,H);return;case"number":this.rb(O,H);return;case"bigint":this.sb(O.toString(),H);return;case"boolean":this.rb(O+0,H);return;case"object":if(O===null){this.Eb(H);return}if(O.length!=null){this.Bb(O,H);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+O+")."},n.prototype.Db=function(O){var H=this;return Object.keys(O).forEach(function(ut){var mt=Gr(H.Qa,ut);mt!==0&&H.tb(O[ut],mt)}),!0},n.prototype.Cb=function(O){for(var H=0;H<O.length;H+=1)this.tb(O[H],H+1);return!0},n.prototype.reset=function(){return this.freemem(),rn(this.Qa)===0&&en(this.Qa)===0},n.prototype.freemem=function(){for(var O;(O=this.lb.pop())!==void 0;)Ne(O)},n.prototype.free=function(){this.freemem();var O=nn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,O},l.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var O=ge(),H=te(4);r(C),r(H);try{this.db.handleError(mr(this.db.db,this.kb,-1,C,H)),this.kb=Ct(H,"i32");var ut=Ct(C,"i32");return ut===0?(this.mb(),{done:!0}):(this.Za=new n(ut,this.db),this.db.fb[ut]=this.Za,{value:this.Za,done:!1})}catch(mt){throw this.pb=b(this.kb),this.mb(),mt}finally{_e(O)}},l.prototype.mb=function(){Ne(this.eb),this.eb=null},l.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:b(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(l.prototype[Symbol.iterator]=function(){return this}),v.prototype.run=function(O,H){if(!this.db)throw"Database closed";if(H){O=this.prepare(O,H);try{O.step()}finally{O.free()}}else this.handleError(bt(this.db,O,0,0,C));return this},v.prototype.exec=function(O,H,ut){if(!this.db)throw"Database closed";var mt=ge(),gt=null;try{var Tt=qe(O),Wt=te(4);for(O=[];Ct(Tt,"i8")!==0;){r(C),r(Wt),this.handleError(mr(this.db,Tt,-1,C,Wt));var qt=Ct(C,"i32");if(Tt=Ct(Wt,"i32"),qt!==0){var Ft=null;for(gt=new n(qt,this),H!=null&&gt.bind(H);gt.step();)Ft===null&&(Ft={columns:gt.getColumnNames(),values:[]},O.push(Ft)),Ft.values.push(gt.get(null,ut));gt.free()}}return O}catch($t){throw gt&&gt.free(),$t}finally{_e(mt)}},v.prototype.each=function(O,H,ut,mt,gt){typeof H=="function"&&(mt=ut,ut=H,H=void 0),O=this.prepare(O,H);try{for(;O.step();)ut(O.getAsObject(null,gt))}finally{O.free()}if(typeof mt=="function")return mt()},v.prototype.prepare=function(O,H){if(r(C),this.handleError(Ut(this.db,O,-1,C,0)),O=Ct(C,"i32"),O===0)throw"Nothing to prepare";var ut=new n(O,this);return H!=null&&ut.bind(H),this.fb[O]=ut},v.prototype.iterateStatements=function(O){return new l(O,this)},v.prototype.export=function(){Object.values(this.fb).forEach(function(H){H.free()}),Object.values(this.Sa).forEach(Jt),this.Sa={},this.handleError(wt(this.db));var O=zr(this.filename);return this.handleError(ht(this.filename,C)),this.db=Ct(C,"i32"),vr(this.db),O},v.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(O){O.free()}),Object.values(this.Sa).forEach(Jt),this.Sa={},this.Ya&&(Jt(this.Ya),this.Ya=void 0),this.handleError(wt(this.db)),ir("/"+this.filename),this.db=null)},v.prototype.handleError=function(O){if(O===0)return null;throw O=Hr(this.db),Error(O)},v.prototype.getRowsModified=function(){return Ot(this.db)},v.prototype.create_function=function(O,H){Object.prototype.hasOwnProperty.call(this.Sa,O)&&(Jt(this.Sa[O]),delete this.Sa[O]);var ut=me(function(mt,gt,Tt){gt=e(gt,Tt);try{var Wt=H.apply(null,gt)}catch(qt){Re(mt,qt,-1);return}t(mt,Wt)},"viii");return this.Sa[O]=ut,this.handleError(br(this.db,O,H.length,1,0,ut,0,0,0)),this},v.prototype.create_aggregate=function(O,H){var ut=H.init||function(){return null},mt=H.finalize||function(Ft){return Ft},gt=H.step;if(!gt)throw"An aggregate function must have a step function in "+O;var Tt={};Object.hasOwnProperty.call(this.Sa,O)&&(Jt(this.Sa[O]),delete this.Sa[O]),H=O+"__finalize",Object.hasOwnProperty.call(this.Sa,H)&&(Jt(this.Sa[H]),delete this.Sa[H]);var Wt=me(function(Ft,$t,Ze){var oe=wr(Ft,1);Object.hasOwnProperty.call(Tt,oe)||(Tt[oe]=ut()),$t=e($t,Ze),$t=[Tt[oe]].concat($t);try{Tt[oe]=gt.apply(null,$t)}catch(pn){delete Tt[oe],Re(Ft,pn,-1)}},"viii"),qt=me(function(Ft){var $t=wr(Ft,1);try{var Ze=mt(Tt[$t])}catch(oe){delete Tt[$t],Re(Ft,oe,-1);return}t(Ft,Ze),delete Tt[$t]},"vi");return this.Sa[O]=Wt,this.Sa[H]=qt,this.handleError(br(this.db,O,gt.length-1,1,0,0,Wt,qt,0)),this},v.prototype.updateHook=function(O){this.Ya&&(Er(this.db,0,0),Jt(this.Ya),this.Ya=void 0),O&&(this.Ya=me(function(H,ut,mt,gt,Tt){switch(ut){case 18:H="insert";break;case 23:H="update";break;case 9:H="delete";break;default:throw"unknown operationCode in updateHook callback: "+ut}if(mt=mt?z(V,mt):"",gt=gt?z(V,gt):"",Tt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";O(H,mt,gt,Number(Tt))},"viiiij"),Er(this.db,this.Ya,0))},s.Database=v};var f={...s},w="./this.program",c=(t,e)=>{throw e},m="",u,g;if(S){var y=kr;m=__dirname+"/",g=t=>(t=pt(t)?new URL(t):t,y.readFileSync(t)),u=async t=>(t=pt(t)?new URL(t):t,y.readFileSync(t,void 0)),!s.thisProgram&&1<process.argv.length&&(w=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),J.exports=s,c=(t,e)=>{throw process.exitCode=t,e}}else(R||T)&&(T?m=self.location.href:typeof document<"u"&&document.currentScript&&(m=document.currentScript.src),m=m.startsWith("blob:")?"":m.slice(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1),T&&(g=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),u=async t=>{if(pt(t))return new Promise((n,l)=>{var v=new XMLHttpRequest;v.open("GET",t,!0),v.responseType="arraybuffer",v.onload=()=>{v.status==200||v.status==0&&v.response?n(v.response):l(v.status)},v.onerror=l,v.send(null)});var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw Error(e.status+" : "+e.url)});var A=s.print||console.log.bind(console),N=s.printErr||console.error.bind(console);Object.assign(s,f),f=null,s.thisProgram&&(w=s.thisProgram);var M=s.wasmBinary,F,j=!1,I,W,V,k,L,i,$,ct,Y,pt=t=>t.startsWith("file://");function K(){var t=F.buffer;s.HEAP8=W=new Int8Array(t),s.HEAP16=k=new Int16Array(t),s.HEAPU8=V=new Uint8Array(t),s.HEAPU16=new Uint16Array(t),s.HEAP32=L=new Int32Array(t),s.HEAPU32=i=new Uint32Array(t),s.HEAPF32=$=new Float32Array(t),s.HEAPF64=Y=new Float64Array(t),s.HEAP64=ct=new BigInt64Array(t),s.HEAPU64=new BigUint64Array(t)}var ot=0,B=null;function D(t){var e;throw(e=s.onAbort)==null||e.call(s,t),t="Aborted("+t+")",N(t),j=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var lt;async function nt(t){if(!M)try{var e=await u(t);return new Uint8Array(e)}catch{}if(t==lt&&M)t=new Uint8Array(M);else if(g)t=g(t);else throw"both async and sync fetching of the wasm failed";return t}async function tt(t,e){try{var n=await nt(t);return await WebAssembly.instantiate(n,e)}catch(l){N(`failed to asynchronously prepare wasm: ${l}`),D(l)}}async function At(t){var e=lt;if(!M&&typeof WebAssembly.instantiateStreaming=="function"&&!pt(e)&&!S)try{var n=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,t)}catch(l){N(`wasm streaming compile failed: ${l}`),N("falling back to ArrayBuffer instantiation")}return tt(e,t)}class St{constructor(e){ee(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var yt=t=>{for(;0<t.length;)t.shift()(s)},kt=[],Rt=[],xt=()=>{var t=s.preRun.shift();Rt.unshift(t)};function Ct(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return W[t];case"i8":return W[t];case"i16":return k[t>>1];case"i32":return L[t>>2];case"i64":return ct[t>>3];case"float":return $[t>>2];case"double":return Y[t>>3];case"*":return i[t>>2];default:D(`invalid type for getValue: ${e}`)}}var Lt=s.noExitRuntime||!0;function r(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":W[t]=0;break;case"i8":W[t]=0;break;case"i16":k[t>>1]=0;break;case"i32":L[t>>2]=0;break;case"i64":ct[t>>3]=BigInt(0);break;case"float":$[t>>2]=0;break;case"double":Y[t>>3]=0;break;case"*":i[t>>2]=0;break;default:D(`invalid type for setValue: ${e}`)}}var G=typeof TextDecoder<"u"?new TextDecoder:void 0,z=(t,e=0,n=NaN)=>{var l=e+n;for(n=e;t[n]&&!(n>=l);)++n;if(16<n-e&&t.buffer&&G)return G.decode(t.subarray(e,n));for(l="";e<n;){var v=t[e++];if(v&128){var C=t[e++]&63;if((v&224)==192)l+=String.fromCharCode((v&31)<<6|C);else{var q=t[e++]&63;v=(v&240)==224?(v&15)<<12|C<<6|q:(v&7)<<18|C<<12|q<<6|t[e++]&63,65536>v?l+=String.fromCharCode(v):(v-=65536,l+=String.fromCharCode(55296|v>>10,56320|v&1023))}}else l+=String.fromCharCode(v)}return l},b=(t,e)=>t?z(V,t,e):"",d=(t,e)=>{for(var n=0,l=t.length-1;0<=l;l--){var v=t[l];v==="."?t.splice(l,1):v===".."?(t.splice(l,1),n++):n&&(t.splice(l,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},x=t=>{var e=t.charAt(0)==="/",n=t.slice(-1)==="/";return(t=d(t.split("/").filter(l=>!!l),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},Z=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.slice(0,-1)),t+e)},X=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],P=()=>{if(S){var t=kr;return e=>t.randomFillSync(e)}return e=>crypto.getRandomValues(e)},Q=t=>{(Q=P())(t)},at=(...t)=>{for(var e="",n=!1,l=t.length-1;-1<=l&&!n;l--){if(n=0<=l?t[l]:"/",typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,n=n.charAt(0)==="/"}return e=d(e.split("/").filter(v=>!!v),!n).join("/"),(n?"/":"")+e||"."},et=[],ft=t=>{for(var e=0,n=0;n<t.length;++n){var l=t.charCodeAt(n);127>=l?e++:2047>=l?e+=2:55296<=l&&57343>=l?(e+=4,++n):e+=3}return e},Et=(t,e,n,l)=>{if(!(0<l))return 0;var v=n;l=n+l-1;for(var C=0;C<t.length;++C){var q=t.charCodeAt(C);if(55296<=q&&57343>=q){var ht=t.charCodeAt(++C);q=65536+((q&1023)<<10)|ht&1023}if(127>=q){if(n>=l)break;e[n++]=q}else{if(2047>=q){if(n+1>=l)break;e[n++]=192|q>>6}else{if(65535>=q){if(n+2>=l)break;e[n++]=224|q>>12}else{if(n+3>=l)break;e[n++]=240|q>>18,e[n++]=128|q>>12&63}e[n++]=128|q>>6&63}e[n++]=128|q&63}}return e[n]=0,n-v},vt=(t,e)=>{var n=Array(ft(t)+1);return t=Et(t,n,0,n.length),e&&(n.length=t),n},Dt=[];function Yt(t,e){Dt[t]={input:[],output:[],cb:e},Pe(t,Mt)}var Mt={open(t){var e=Dt[t.node.rdev];if(!e)throw new it(43);t.tty=e,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,e,n,l){if(!t.tty||!t.tty.cb.xb)throw new it(60);for(var v=0,C=0;C<l;C++){try{var q=t.tty.cb.xb(t.tty)}catch{throw new it(29)}if(q===void 0&&v===0)throw new it(6);if(q==null)break;v++,e[n+C]=q}return v&&(t.node.atime=Date.now()),v},write(t,e,n,l){if(!t.tty||!t.tty.cb.qb)throw new it(60);try{for(var v=0;v<l;v++)t.tty.cb.qb(t.tty,e[n+v])}catch{throw new it(29)}return l&&(t.node.mtime=t.node.ctime=Date.now()),v}},re={xb(){t:{if(!et.length){var t=null;if(S){var e=Buffer.alloc(256),n=0,l=process.stdin.fd;try{n=y.readSync(l,e,0,256)}catch(v){if(v.toString().includes("EOF"))n=0;else throw v}0<n&&(t=e.slice(0,n).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break t}et=vt(t,!0)}t=et.shift()}return t},qb(t,e){e===null||e===10?(A(z(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(A(z(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},It={qb(t,e){e===null||e===10?(N(z(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(N(z(t.output)),t.output=[])}},_t={Wa:null,Xa(){return _t.createNode(null,"/",16895,0)},createNode(t,e,n,l){if((n&61440)===24576||(n&61440)===4096)throw new it(63);return _t.Wa||(_t.Wa={dir:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,lookup:_t.La.lookup,hb:_t.La.hb,rename:_t.La.rename,unlink:_t.La.unlink,rmdir:_t.La.rmdir,readdir:_t.La.readdir,symlink:_t.La.symlink},stream:{Va:_t.Ma.Va}},file:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:{Va:_t.Ma.Va,read:_t.Ma.read,write:_t.Ma.write,ib:_t.Ma.ib,jb:_t.Ma.jb}},link:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,readlink:_t.La.readlink},stream:{}},ub:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:Lr}}),n=Ve(t,e,n,l),Pt(n.mode)?(n.La=_t.Wa.dir.node,n.Ma=_t.Wa.dir.stream,n.Na={}):(n.mode&61440)===32768?(n.La=_t.Wa.file.node,n.Ma=_t.Wa.file.stream,n.Ra=0,n.Na=null):(n.mode&61440)===40960?(n.La=_t.Wa.link.node,n.Ma=_t.Wa.link.stream):(n.mode&61440)===8192&&(n.La=_t.Wa.ub.node,n.Ma=_t.Wa.ub.stream),n.atime=n.mtime=n.ctime=Date.now(),t&&(t.Na[e]=n,t.atime=t.mtime=t.ctime=n.atime),n},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Pt(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.atime),e.mtime=new Date(t.mtime),e.ctime=new Date(t.ctime),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},Ua(t,e){for(var n of["mode","atime","mtime","ctime"])e[n]!=null&&(t[n]=e[n]);e.size!==void 0&&(e=e.size,t.Ra!=e&&(e==0?(t.Na=null,t.Ra=0):(n=t.Na,t.Na=new Uint8Array(e),n&&t.Na.set(n.subarray(0,Math.min(e,t.Ra))),t.Ra=e)))},lookup(){throw _t.vb},hb(t,e,n,l){return _t.createNode(t,e,n,l)},rename(t,e,n){try{var l=ie(e,n)}catch{}if(l){if(Pt(t.mode))for(var v in l.Na)throw new it(55);De(l)}delete t.parent.Na[t.name],e.Na[n]=t,t.name=n,e.ctime=e.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,e){delete t.Na[e],t.ctime=t.mtime=Date.now()},rmdir(t,e){var n=ie(t,e),l;for(l in n.Na)throw new it(55);delete t.Na[e],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,e,n){return t=_t.createNode(t,e,41471,0),t.link=n,t},readlink(t){if((t.mode&61440)!==40960)throw new it(28);return t.link}},Ma:{read(t,e,n,l,v){var C=t.node.Na;if(v>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-v,l),8<t&&C.subarray)e.set(C.subarray(v,v+t),n);else for(l=0;l<t;l++)e[n+l]=C[v+l];return t},write(t,e,n,l,v,C){if(e.buffer===W.buffer&&(C=!1),!l)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(C)return t.Na=e.subarray(n,n+l),t.Ra=l;if(t.Ra===0&&v===0)return t.Na=e.slice(n,n+l),t.Ra=l;if(v+l<=t.Ra)return t.Na.set(e.subarray(n,n+l),v),l}C=v+l;var q=t.Na?t.Na.length:0;if(q>=C||(C=Math.max(C,q*(1048576>q?2:1.125)>>>0),q!=0&&(C=Math.max(C,256)),q=t.Na,t.Na=new Uint8Array(C),0<t.Ra&&t.Na.set(q.subarray(0,t.Ra),0)),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(n,n+l),v);else for(C=0;C<l;C++)t.Na[v+C]=e[n+C];return t.Ra=Math.max(t.Ra,v+l),l},Va(t,e,n){if(n===1?e+=t.position:n===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new it(28);return e},ib(t,e,n,l,v){if((t.node.mode&61440)!==32768)throw new it(43);if(t=t.node.Na,v&2||!t||t.buffer!==W.buffer){v=!0,l=65536*Math.ceil(e/65536);var C=hr(65536,l);if(C&&V.fill(0,C,C+l),l=C,!l)throw new it(48);t&&((0<n||n+e<t.length)&&(t.subarray?t=t.subarray(n,n+e):t=Array.prototype.slice.call(t,n,n+e)),W.set(t,l))}else v=!1,l=t.byteOffset;return{Kb:l,Ab:v}},jb(t,e,n,l){return _t.Ma.write(t,e,0,l,n,!1),0}}},le=(t,e)=>{var n=0;return t&&(n|=365),e&&(n|=146),n},Bt=null,fe={},Kt=[],Oe=1,Gt=null,he=!1,Vt=!0,ne={},it=class{constructor(t){ee(this,"name","ErrnoError");this.Pa=t}},Ir=class{constructor(){ee(this,"gb",{});ee(this,"node",null)}get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},Or=class{constructor(t,e,n,l){ee(this,"La",{});ee(this,"Ma",{});ee(this,"ab",null);t||(t=this),this.parent=t,this.Xa=t.Xa,this.id=Oe++,this.name=e,this.mode=n,this.rdev=l,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function jt(t,e={}){if(!t)throw new it(44);e.nb??(e.nb=!0),t.charAt(0)==="/"||(t="//"+t);var n=0;t:for(;40>n;n++){t=t.split("/").filter(ht=>!!ht);for(var l=Bt,v="/",C=0;C<t.length;C++){var q=C===t.length-1;if(q&&e.parent)break;if(t[C]!==".")if(t[C]==="..")v=Z(v),l=l.parent;else{v=x(v+"/"+t[C]);try{l=ie(l,t[C])}catch(ht){if((ht==null?void 0:ht.Pa)===44&&q&&e.Jb)return{path:v};throw ht}if(!l.ab||q&&!e.nb||(l=l.ab.root),(l.mode&61440)===40960&&(!q||e.$a)){if(!l.La.readlink)throw new it(52);l=l.La.readlink(l),l.charAt(0)==="/"||(l=Z(v)+"/"+l),t=l+"/"+t.slice(C+1).join("/");continue t}}}return{path:v,node:l}}throw new it(32)}function Ce(t){for(var e;;){if(t===t.parent)return t=t.Xa.zb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function Le(t,e){for(var n=0,l=0;l<e.length;l++)n=(n<<5)-n+e.charCodeAt(l)|0;return(t+n>>>0)%Gt.length}function De(t){var e=Le(t.parent.id,t.name);if(Gt[e]===t)Gt[e]=t.bb;else for(e=Gt[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function ie(t,e){var n=Pt(t.mode)?(n=ue(t,"x"))?n:t.La.lookup?0:2:54;if(n)throw new it(n);for(n=Gt[Le(t.id,e)];n;n=n.bb){var l=n.name;if(n.parent.id===t.id&&l===e)return n}return t.La.lookup(t,e)}function Ve(t,e,n,l){return t=new Or(t,e,n,l),e=Le(t.parent.id,t.name),t.bb=Gt[e],Gt[e]=t}function Pt(t){return(t&61440)===16384}function Qe(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function ue(t,e){if(Vt)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function Je(t,e){if(!Pt(t.mode))return 54;try{return ie(t,e),20}catch{}return ue(t,"wx")}function tr(t,e,n){try{var l=ie(t,e)}catch(v){return v.Pa}if(t=ue(t,"wx"))return t;if(n){if(!Pt(l.mode))return 54;if(l===l.parent||Ce(l)==="/")return 10}else if(Pt(l.mode))return 31;return 0}function be(t){if(!t)throw new it(63);return t}function zt(t){if(t=Kt[t],!t)throw new it(8);return t}function er(t,e=-1){if(t=Object.assign(new Ir,t),e==-1)t:{for(e=0;4096>=e;e++)if(!Kt[e])break t;throw new it(33)}return t.fd=e,Kt[e]=t}function Cr(t,e=-1){var n,l;return t=er(t,e),(l=(n=t.Ma)==null?void 0:n.Rb)==null||l.call(n,t),t}function ze(t,e,n){var l=t==null?void 0:t.Ma.Ua;t=l?t:e,l??(l=e.La.Ua),be(l),l(t,n)}var Lr={open(t){var e,n;t.Ma=fe[t.node.rdev].Ma,(n=(e=t.Ma).open)==null||n.call(e,t)},Va(){throw new it(70)}};function Pe(t,e){fe[t]={Ma:e}}function rr(t,e){var n=e==="/";if(n&&Bt)throw new it(10);if(!n&&e){var l=jt(e,{nb:!1});if(e=l.path,l=l.node,l.ab)throw new it(10);if(!Pt(l.mode))throw new it(54)}e={type:t,Wb:{},zb:e,Ib:[]},t=t.Xa(e),t.Xa=e,e.root=t,n?Bt=t:l&&(l.ab=e,l.Xa&&l.Xa.Ib.push(e))}function ye(t,e,n){var l=jt(t,{parent:!0}).node;if(t=X(t),!t)throw new it(28);if(t==="."||t==="..")throw new it(20);var v=Je(l,t);if(v)throw new it(v);if(!l.La.hb)throw new it(63);return l.La.hb(l,t,e,n)}function Dr(t,e=438){return ye(t,e&4095|32768,0)}function Zt(t,e=511){return ye(t,e&1023|16384,0)}function we(t,e,n){typeof n>"u"&&(n=e,e=438),ye(t,e|8192,n)}function Ue(t,e){if(!at(t))throw new it(44);var n=jt(e,{parent:!0}).node;if(!n)throw new it(44);e=X(e);var l=Je(n,e);if(l)throw new it(l);if(!n.La.symlink)throw new it(63);n.La.symlink(n,e,t)}function nr(t){var e=jt(t,{parent:!0}).node;t=X(t);var n=ie(e,t),l=tr(e,t,!0);if(l)throw new it(l);if(!e.La.rmdir)throw new it(63);if(n.ab)throw new it(10);e.La.rmdir(e,t),De(n)}function ir(t){var e=jt(t,{parent:!0}).node;if(!e)throw new it(44);t=X(t);var n=ie(e,t),l=tr(e,t,!1);if(l)throw new it(l);if(!e.La.unlink)throw new it(63);if(n.ab)throw new it(10);e.La.unlink(e,t),De(n)}function de(t,e){return t=jt(t,{$a:!e}).node,be(t.La.Ta)(t)}function sr(t,e,n,l){ze(t,e,{mode:n&4095|e.mode&-4096,ctime:Date.now(),Fb:l})}function ve(t,e){t=typeof t=="string"?jt(t,{$a:!0}).node:t,sr(null,t,e)}function ar(t,e,n){if(Pt(e.mode))throw new it(31);if((e.mode&61440)!==32768)throw new it(28);var l=ue(e,"w");if(l)throw new it(l);ze(t,e,{size:n,timestamp:Date.now()})}function ce(t,e,n=438){if(t==="")throw new it(44);if(typeof e=="string"){var l={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof l>"u")throw Error(`Unknown file open mode: ${e}`);e=l}if(n=e&64?n&4095|32768:0,typeof t=="object")l=t;else{var v=t.endsWith("/");t=jt(t,{$a:!(e&131072),Jb:!0}),l=t.node,t=t.path}var C=!1;if(e&64)if(l){if(e&128)throw new it(20)}else{if(v)throw new it(31);l=ye(t,n|511,0),C=!0}if(!l)throw new it(44);if((l.mode&61440)===8192&&(e&=-513),e&65536&&!Pt(l.mode))throw new it(54);if(!C&&(v=l?(l.mode&61440)===40960?32:Pt(l.mode)&&(Qe(e)!=="r"||e&576)?31:ue(l,Qe(e)):44))throw new it(v);return e&512&&!C&&(v=l,v=typeof v=="string"?jt(v,{$a:!0}).node:v,ar(null,v,0)),e&=-131713,v=er({node:l,path:Ce(l),flags:e,seekable:!0,position:0,Ma:l.Ma,Lb:[],error:!1}),v.Ma.open&&v.Ma.open(v),C&&ve(l,n&511),!s.logReadFiles||e&1||t in ne||(ne[t]=1),v}function Be(t){if(t.fd===null)throw new it(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{Kt[t.fd]=null}t.fd=null}function or(t,e,n){if(t.fd===null)throw new it(8);if(!t.seekable||!t.Ma.Va)throw new it(70);if(n!=0&&n!=1&&n!=2)throw new it(28);t.position=t.Ma.Va(t,e,n),t.Lb=[]}function lr(t,e,n,l,v){if(0>l||0>v)throw new it(28);if(t.fd===null)throw new it(8);if((t.flags&2097155)===1)throw new it(8);if(Pt(t.node.mode))throw new it(31);if(!t.Ma.read)throw new it(28);var C=typeof v<"u";if(!C)v=t.position;else if(!t.seekable)throw new it(70);return e=t.Ma.read(t,e,n,l,v),C||(t.position+=e),e}function ur(t,e,n,l,v){if(0>l||0>v)throw new it(28);if(t.fd===null)throw new it(8);if(!(t.flags&2097155))throw new it(8);if(Pt(t.node.mode))throw new it(31);if(!t.Ma.write)throw new it(28);t.seekable&&t.flags&1024&&or(t,0,2);var C=typeof v<"u";if(!C)v=t.position;else if(!t.seekable)throw new it(70);return e=t.Ma.write(t,e,n,l,v,void 0),C||(t.position+=e),e}function zr(t){var e,n=ce(t,n||0);t=de(t).size;var l=new Uint8Array(t);return lr(n,l,0,t,0),e=l,Be(n),e}function Qt(t,e,n){t=x("/dev/"+t);var l=le(!!e,!!n);Qt.yb??(Qt.yb=64);var v=Qt.yb++<<8|0;Pe(v,{open(C){C.seekable=!1},close(){var C;(C=n==null?void 0:n.buffer)!=null&&C.length&&n(10)},read(C,q,ht,wt){for(var bt=0,Ot=0;Ot<wt;Ot++){try{var Ut=e()}catch{throw new it(29)}if(Ut===void 0&&bt===0)throw new it(6);if(Ut==null)break;bt++,q[ht+Ot]=Ut}return bt&&(C.node.atime=Date.now()),bt},write(C,q,ht,wt){for(var bt=0;bt<wt;bt++)try{n(q[ht+bt])}catch{throw new it(29)}return wt&&(C.node.mtime=C.node.ctime=Date.now()),bt}}),we(t,l,v)}var Nt={};function se(t,e,n){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":zt(t).path,e.length==0){if(!n)throw new it(44);return t}return t+"/"+e}function Ee(t,e){L[t>>2]=e.dev,L[t+4>>2]=e.mode,i[t+8>>2]=e.nlink,L[t+12>>2]=e.uid,L[t+16>>2]=e.gid,L[t+20>>2]=e.rdev,ct[t+24>>3]=BigInt(e.size),L[t+32>>2]=4096,L[t+36>>2]=e.blocks;var n=e.atime.getTime(),l=e.mtime.getTime(),v=e.ctime.getTime();return ct[t+40>>3]=BigInt(Math.floor(n/1e3)),i[t+48>>2]=n%1e3*1e6,ct[t+56>>3]=BigInt(Math.floor(l/1e3)),i[t+64>>2]=l%1e3*1e6,ct[t+72>>3]=BigInt(Math.floor(v/1e3)),i[t+80>>2]=v%1e3*1e6,ct[t+88>>3]=BigInt(e.ino),0}var ke=void 0,Te=()=>{var t=L[+ke>>2];return ke+=4,t},Fe=0,Pr=[0,31,60,91,121,152,182,213,244,274,305,335],Ur=[0,31,59,90,120,151,181,212,243,273,304,334],pe={},cr=t=>{var e;I=t,Lt||0<Fe||((e=s.onExit)==null||e.call(s,t),j=!0),c(t,new St(t))},Br=t=>{if(!j)try{if(t(),!(Lt||0<Fe))try{I=t=I,cr(t)}catch(e){e instanceof St||e=="unwind"||c(1,e)}}catch(e){e instanceof St||e=="unwind"||c(1,e)}},Me={},fr=()=>{if(!je){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:w||"./this.program"},e;for(e in Me)Me[e]===void 0?delete t[e]:t[e]=Me[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);je=n}return je},je,qe=t=>{var e=ft(t)+1,n=te(e);return Et(t,V,n,e),n},Fr=(t,e,n,l)=>{var v={string:bt=>{var Ot=0;return bt!=null&&bt!==0&&(Ot=qe(bt)),Ot},array:bt=>{var Ot=te(bt.length);return W.set(bt,Ot),Ot}};t=s["_"+t];var C=[],q=0;if(l)for(var ht=0;ht<l.length;ht++){var wt=v[n[ht]];wt?(q===0&&(q=ge()),C[ht]=wt(l[ht])):C[ht]=l[ht]}return n=t(...C),n=function(bt){return q!==0&&_e(q),e==="string"?bt?z(V,bt):"":e==="boolean"?!!bt:bt}(n)},Se=0,Ae=(t,e)=>(e=e==1?te(t.length):$e(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),V.set(t,e),e),ae,We=[],Xt,Jt=t=>{ae.delete(Xt.get(t)),Xt.set(t,null),We.push(t)},me=(t,e)=>{if(!ae){ae=new WeakMap;var n=Xt.length;if(ae)for(var l=0;l<0+n;l++){var v=Xt.get(l);v&&ae.set(v,l)}}if(n=ae.get(t)||0)return n;if(We.length)n=We.pop();else{try{Xt.grow(1)}catch(wt){throw wt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":wt}n=Xt.length-1}try{Xt.set(n,t)}catch(wt){if(!(wt instanceof TypeError))throw wt;if(typeof WebAssembly.Function=="function"){var C=WebAssembly.Function;l={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},v={parameters:[],results:e[0]=="v"?[]:[l[e[0]]]};for(var q=1;q<e.length;++q)v.parameters.push(l[e[q]]);e=new C(v,t)}else{l=[1],v=e.slice(0,1),e=e.slice(1),q={i:127,p:127,j:126,f:125,d:124,e:111},l.push(96);var ht=e.length;128>ht?l.push(ht):l.push(ht%128|128,ht>>7);for(C of e)l.push(q[C]);v=="v"?l.push(0):l.push(1,q[v]),e=[0,97,115,109,1,0,0,0,1],C=l.length,128>C?e.push(C):e.push(C%128|128,C>>7),e.push(...l),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}Xt.set(n,e)}return ae.set(t,n),n};Gt=Array(4096),rr(_t,"/"),Zt("/tmp"),Zt("/home"),Zt("/home/web_user"),function(){Zt("/dev"),Pe(259,{read:()=>0,write:(l,v,C,q)=>q,Va:()=>0}),we("/dev/null",259),Yt(1280,re),Yt(1536,It),we("/dev/tty",1280),we("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,n=()=>(e===0&&(Q(t),e=t.byteLength),t[--e]);Qt("random",n),Qt("urandom",n),Zt("/dev/shm"),Zt("/dev/shm/tmp")}(),function(){Zt("/proc");var t=Zt("/proc/self");Zt("/proc/self/fd"),rr({Xa(){var e=Ve(t,"fd",16895,73);return e.Ma={Va:_t.Ma.Va},e.La={lookup(n,l){n=+l;var v=zt(n);return n={parent:null,Xa:{zb:"fake"},La:{readlink:()=>v.path},id:n+1},n.parent=n},readdir(){return Array.from(Kt.entries()).filter(([,n])=>n).map(([n])=>n.toString())}},e}},"/proc/self/fd")}(),_t.vb=new it(44),_t.vb.stack="<generic error, no stack>";var Mr={a:(t,e,n,l)=>D(`Assertion failed: ${t?z(V,t):""}, at: `+[e?e?z(V,e):"":"unknown filename",n,l?l?z(V,l):"":"unknown function"]),i:function(t,e){try{return t=t?z(V,t):"",ve(t,e),0}catch(n){if(typeof Nt>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},L:function(t,e,n){try{if(e=e?z(V,e):"",e=se(t,e),n&-8)return-28;var l=jt(e,{$a:!0}).node;return l?(t="",n&4&&(t+="r"),n&2&&(t+="w"),n&1&&(t+="x"),t&&ue(l,t)?-2:0):-44}catch(v){if(typeof Nt>"u"||v.name!=="ErrnoError")throw v;return-v.Pa}},j:function(t,e){try{var n=zt(t);return sr(n,n.node,e,!1),0}catch(l){if(typeof Nt>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},h:function(t){try{var e=zt(t);return ze(e,e.node,{timestamp:Date.now(),Fb:!1}),0}catch(n){if(typeof Nt>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},b:function(t,e,n){ke=n;try{var l=zt(t);switch(e){case 0:var v=Te();if(0>v)break;for(;Kt[v];)v++;return Cr(l,v).fd;case 1:case 2:return 0;case 3:return l.flags;case 4:return v=Te(),l.flags|=v,0;case 12:return v=Te(),k[v+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(C){if(typeof Nt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},g:function(t,e){try{var n=zt(t),l=n.node,v=n.Ma.Ta;t=v?n:l,v??(v=l.La.Ta),be(v);var C=v(t);return Ee(e,C)}catch(q){if(typeof Nt>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},H:function(t,e){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var n=zt(t);if(0>e||!(n.flags&2097155))throw new it(28);return ar(n,n.node,e),0}catch(l){if(typeof Nt>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},G:function(t,e){try{if(e===0)return-28;var n=ft("/")+1;return e<n?-68:(Et("/",V,t,e),n)}catch(l){if(typeof Nt>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},K:function(t,e){try{return t=t?z(V,t):"",Ee(e,de(t,!0))}catch(n){if(typeof Nt>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},C:function(t,e,n){try{return e=e?z(V,e):"",e=se(t,e),Zt(e,n),0}catch(l){if(typeof Nt>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},J:function(t,e,n,l){try{e=e?z(V,e):"";var v=l&256;return e=se(t,e,l&4096),Ee(n,v?de(e,!0):de(e))}catch(C){if(typeof Nt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},x:function(t,e,n,l){ke=l;try{e=e?z(V,e):"",e=se(t,e);var v=l?Te():0;return ce(e,n,v).fd}catch(C){if(typeof Nt>"u"||C.name!=="ErrnoError")throw C;return-C.Pa}},v:function(t,e,n,l){try{if(e=e?z(V,e):"",e=se(t,e),0>=l)return-28;var v=jt(e).node;if(!v)throw new it(44);if(!v.La.readlink)throw new it(28);var C=v.La.readlink(v),q=Math.min(l,ft(C)),ht=W[n+q];return Et(C,V,n,l+1),W[n+q]=ht,q}catch(wt){if(typeof Nt>"u"||wt.name!=="ErrnoError")throw wt;return-wt.Pa}},u:function(t){try{return t=t?z(V,t):"",nr(t),0}catch(e){if(typeof Nt>"u"||e.name!=="ErrnoError")throw e;return-e.Pa}},f:function(t,e){try{return t=t?z(V,t):"",Ee(e,de(t))}catch(n){if(typeof Nt>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},r:function(t,e,n){try{return e=e?z(V,e):"",e=se(t,e),n===0?ir(e):n===512?nr(e):D("Invalid flags passed to unlinkat"),0}catch(l){if(typeof Nt>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},q:function(t,e,n){try{e=e?z(V,e):"",e=se(t,e,!0);var l=Date.now(),v,C;if(n){var q=i[n>>2]+4294967296*L[n+4>>2],ht=L[n+8>>2];ht==1073741823?v=l:ht==1073741822?v=null:v=1e3*q+ht/1e6,n+=16,q=i[n>>2]+4294967296*L[n+4>>2],ht=L[n+8>>2],ht==1073741823?C=l:ht==1073741822?C=null:C=1e3*q+ht/1e6}else C=v=l;if((C??v)!==null){t=v;var wt=jt(e,{$a:!0}).node;be(wt.La.Ua)(wt,{atime:t,mtime:C})}return 0}catch(bt){if(typeof Nt>"u"||bt.name!=="ErrnoError")throw bt;return-bt.Pa}},m:()=>D(""),l:()=>{Lt=!1,Fe=0},A:function(t,e){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),L[e>>2]=t.getSeconds(),L[e+4>>2]=t.getMinutes(),L[e+8>>2]=t.getHours(),L[e+12>>2]=t.getDate(),L[e+16>>2]=t.getMonth(),L[e+20>>2]=t.getFullYear()-1900,L[e+24>>2]=t.getDay();var n=t.getFullYear();L[e+28>>2]=(n%4!==0||n%100===0&&n%400!==0?Ur:Pr)[t.getMonth()]+t.getDate()-1|0,L[e+36>>2]=-(60*t.getTimezoneOffset()),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var l=new Date(t.getFullYear(),0,1).getTimezoneOffset();L[e+32>>2]=(n!=l&&t.getTimezoneOffset()==Math.min(l,n))|0},y:function(t,e,n,l,v,C,q){v=-9007199254740992>v||9007199254740992<v?NaN:Number(v);try{if(isNaN(v))return 61;var ht=zt(l);if(e&2&&!(n&2)&&(ht.flags&2097155)!==2)throw new it(2);if((ht.flags&2097155)===1)throw new it(2);if(!ht.Ma.ib)throw new it(43);if(!t)throw new it(28);var wt=ht.Ma.ib(ht,t,v,e,n),bt=wt.Kb;return L[C>>2]=wt.Ab,i[q>>2]=bt,0}catch(Ot){if(typeof Nt>"u"||Ot.name!=="ErrnoError")throw Ot;return-Ot.Pa}},z:function(t,e,n,l,v,C){C=-9007199254740992>C||9007199254740992<C?NaN:Number(C);try{var q=zt(v);if(n&2){if(n=C,(q.node.mode&61440)!==32768)throw new it(43);if(!(l&2)){var ht=V.slice(t,t+e);q.Ma.jb&&q.Ma.jb(q,ht,n,e,l)}}}catch(wt){if(typeof Nt>"u"||wt.name!=="ErrnoError")throw wt;return-wt.Pa}},n:(t,e)=>{if(pe[t]&&(clearTimeout(pe[t].id),delete pe[t]),!e)return 0;var n=setTimeout(()=>{delete pe[t],Br(()=>dr(t,performance.now()))},e);return pe[t]={id:n,Xb:e},0},B:(t,e,n,l)=>{var v=new Date().getFullYear(),C=new Date(v,0,1).getTimezoneOffset();v=new Date(v,6,1).getTimezoneOffset(),i[t>>2]=60*Math.max(C,v),L[e>>2]=+(C!=v),e=q=>{var ht=Math.abs(q);return`UTC${0<=q?"-":"+"}${String(Math.floor(ht/60)).padStart(2,"0")}${String(ht%60).padStart(2,"0")}`},t=e(C),e=e(v),v<C?(Et(t,V,n,17),Et(e,V,l,17)):(Et(t,V,l,17),Et(e,V,n,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var e=V.length;if(t>>>=0,2147483648<t)return!1;for(var n=1;4>=n;n*=2){var l=e*(1+.2/n);l=Math.min(l,t+100663296);t:{l=(Math.min(2147483648,65536*Math.ceil(Math.max(t,l)/65536))-F.buffer.byteLength+65535)/65536|0;try{F.grow(l),K();var v=1;break t}catch{}v=void 0}if(v)return!0}return!1},E:(t,e)=>{var n=0;return fr().forEach((l,v)=>{var C=e+n;for(v=i[t+4*v>>2]=C,C=0;C<l.length;++C)W[v++]=l.charCodeAt(C);W[v]=0,n+=l.length+1}),0},F:(t,e)=>{var n=fr();i[t>>2]=n.length;var l=0;return n.forEach(v=>l+=v.length+1),i[e>>2]=l,0},e:function(t){try{var e=zt(t);return Be(e),0}catch(n){if(typeof Nt>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},p:function(t,e){try{var n=zt(t);return W[e]=n.tty?2:Pt(n.mode)?3:(n.mode&61440)===40960?7:4,k[e+2>>1]=0,ct[e+8>>3]=BigInt(0),ct[e+16>>3]=BigInt(0),0}catch(l){if(typeof Nt>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},w:function(t,e,n,l){try{t:{var v=zt(t);t=e;for(var C,q=e=0;q<n;q++){var ht=i[t>>2],wt=i[t+4>>2];t+=8;var bt=lr(v,W,ht,wt,C);if(0>bt){var Ot=-1;break t}if(e+=bt,bt<wt)break;typeof C<"u"&&(C+=bt)}Ot=e}return i[l>>2]=Ot,0}catch(Ut){if(typeof Nt>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Pa}},D:function(t,e,n,l){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var v=zt(t);return or(v,e,n),ct[l>>3]=BigInt(v.position),v.ob&&e===0&&n===0&&(v.ob=null),0}catch(C){if(typeof Nt>"u"||C.name!=="ErrnoError")throw C;return C.Pa}},I:function(t){var n;try{var e=zt(t);return(n=e.Ma)!=null&&n.fsync?e.Ma.fsync(e):0}catch(l){if(typeof Nt>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},t:function(t,e,n,l){try{t:{var v=zt(t);t=e;for(var C,q=e=0;q<n;q++){var ht=i[t>>2],wt=i[t+4>>2];t+=8;var bt=ur(v,W,ht,wt,C);if(0>bt){var Ot=-1;break t}if(e+=bt,bt<wt)break;typeof C<"u"&&(C+=bt)}Ot=e}return i[l>>2]=Ot,0}catch(Ut){if(typeof Nt>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Pa}},k:cr},dt;(async function(){var n;function t(l){var v;return dt=l.exports,F=dt.M,K(),Xt=dt.O,ot--,(v=s.monitorRunDependencies)==null||v.call(s,ot),ot==0&&B&&(l=B,B=null,l()),dt}ot++,(n=s.monitorRunDependencies)==null||n.call(s,ot);var e={a:Mr};return s.instantiateWasm?new Promise(l=>{s.instantiateWasm(e,(v,C)=>{t(v),l(v.exports)})}):(lt??(lt=s.locateFile?s.locateFile("sql-wasm.wasm",m):m+"sql-wasm.wasm"),t((await At(e)).instance))})(),s._sqlite3_free=t=>(s._sqlite3_free=dt.P)(t),s._sqlite3_value_text=t=>(s._sqlite3_value_text=dt.Q)(t),s._sqlite3_prepare_v2=(t,e,n,l,v)=>(s._sqlite3_prepare_v2=dt.R)(t,e,n,l,v),s._sqlite3_step=t=>(s._sqlite3_step=dt.S)(t),s._sqlite3_reset=t=>(s._sqlite3_reset=dt.T)(t),s._sqlite3_exec=(t,e,n,l,v)=>(s._sqlite3_exec=dt.U)(t,e,n,l,v),s._sqlite3_finalize=t=>(s._sqlite3_finalize=dt.V)(t),s._sqlite3_column_name=(t,e)=>(s._sqlite3_column_name=dt.W)(t,e),s._sqlite3_column_text=(t,e)=>(s._sqlite3_column_text=dt.X)(t,e),s._sqlite3_column_type=(t,e)=>(s._sqlite3_column_type=dt.Y)(t,e),s._sqlite3_errmsg=t=>(s._sqlite3_errmsg=dt.Z)(t),s._sqlite3_clear_bindings=t=>(s._sqlite3_clear_bindings=dt._)(t),s._sqlite3_value_blob=t=>(s._sqlite3_value_blob=dt.$)(t),s._sqlite3_value_bytes=t=>(s._sqlite3_value_bytes=dt.aa)(t),s._sqlite3_value_double=t=>(s._sqlite3_value_double=dt.ba)(t),s._sqlite3_value_int=t=>(s._sqlite3_value_int=dt.ca)(t),s._sqlite3_value_type=t=>(s._sqlite3_value_type=dt.da)(t),s._sqlite3_result_blob=(t,e,n,l)=>(s._sqlite3_result_blob=dt.ea)(t,e,n,l),s._sqlite3_result_double=(t,e)=>(s._sqlite3_result_double=dt.fa)(t,e),s._sqlite3_result_error=(t,e,n)=>(s._sqlite3_result_error=dt.ga)(t,e,n),s._sqlite3_result_int=(t,e)=>(s._sqlite3_result_int=dt.ha)(t,e),s._sqlite3_result_int64=(t,e)=>(s._sqlite3_result_int64=dt.ia)(t,e),s._sqlite3_result_null=t=>(s._sqlite3_result_null=dt.ja)(t),s._sqlite3_result_text=(t,e,n,l)=>(s._sqlite3_result_text=dt.ka)(t,e,n,l),s._sqlite3_aggregate_context=(t,e)=>(s._sqlite3_aggregate_context=dt.la)(t,e),s._sqlite3_column_count=t=>(s._sqlite3_column_count=dt.ma)(t),s._sqlite3_data_count=t=>(s._sqlite3_data_count=dt.na)(t),s._sqlite3_column_blob=(t,e)=>(s._sqlite3_column_blob=dt.oa)(t,e),s._sqlite3_column_bytes=(t,e)=>(s._sqlite3_column_bytes=dt.pa)(t,e),s._sqlite3_column_double=(t,e)=>(s._sqlite3_column_double=dt.qa)(t,e),s._sqlite3_bind_blob=(t,e,n,l,v)=>(s._sqlite3_bind_blob=dt.ra)(t,e,n,l,v),s._sqlite3_bind_double=(t,e,n)=>(s._sqlite3_bind_double=dt.sa)(t,e,n),s._sqlite3_bind_int=(t,e,n)=>(s._sqlite3_bind_int=dt.ta)(t,e,n),s._sqlite3_bind_text=(t,e,n,l,v)=>(s._sqlite3_bind_text=dt.ua)(t,e,n,l,v),s._sqlite3_bind_parameter_index=(t,e)=>(s._sqlite3_bind_parameter_index=dt.va)(t,e),s._sqlite3_sql=t=>(s._sqlite3_sql=dt.wa)(t),s._sqlite3_normalized_sql=t=>(s._sqlite3_normalized_sql=dt.xa)(t),s._sqlite3_changes=t=>(s._sqlite3_changes=dt.ya)(t),s._sqlite3_close_v2=t=>(s._sqlite3_close_v2=dt.za)(t),s._sqlite3_create_function_v2=(t,e,n,l,v,C,q,ht,wt)=>(s._sqlite3_create_function_v2=dt.Aa)(t,e,n,l,v,C,q,ht,wt),s._sqlite3_update_hook=(t,e,n)=>(s._sqlite3_update_hook=dt.Ba)(t,e,n),s._sqlite3_open=(t,e)=>(s._sqlite3_open=dt.Ca)(t,e);var $e=s._malloc=t=>($e=s._malloc=dt.Da)(t),Ne=s._free=t=>(Ne=s._free=dt.Ea)(t);s._RegisterExtensionFunctions=t=>(s._RegisterExtensionFunctions=dt.Fa)(t);var hr=(t,e)=>(hr=dt.Ga)(t,e),dr=(t,e)=>(dr=dt.Ha)(t,e),_e=t=>(_e=dt.Ia)(t),te=t=>(te=dt.Ja)(t),ge=()=>(ge=dt.Ka)();s.stackSave=()=>ge(),s.stackRestore=t=>_e(t),s.stackAlloc=t=>te(t),s.cwrap=(t,e,n,l)=>{var v=!n||n.every(C=>C==="number"||C==="boolean");return e!=="string"&&v&&!l?s["_"+t]:(...C)=>Fr(t,e,n,C)},s.addFunction=me,s.removeFunction=Jt,s.UTF8ToString=b,s.ALLOC_NORMAL=Se,s.allocate=Ae,s.allocateUTF8OnStack=qe;function Ge(){function t(){var v;if(s.calledRun=!0,!j){if(!s.noFSInit&&!he){var e,n;he=!0,l??(l=s.stdin),e??(e=s.stdout),n??(n=s.stderr),l?Qt("stdin",l):Ue("/dev/tty","/dev/stdin"),e?Qt("stdout",null,e):Ue("/dev/tty","/dev/stdout"),n?Qt("stderr",null,n):Ue("/dev/tty1","/dev/stderr"),ce("/dev/stdin",0),ce("/dev/stdout",1),ce("/dev/stderr",1)}if(dt.N(),Vt=!1,(v=s.onRuntimeInitialized)==null||v.call(s),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var l=s.postRun.shift();kt.unshift(l)}yt(kt)}}if(0<ot)B=Ge;else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)xt();yt(Rt),0<ot?B=Ge:s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),t()},1)):t()}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return Ge(),a}),_)};J.exports=U,J.exports.default=U})(Ar);var wn=Ar.exports;const Tr=Sr(wn),vn="/npconv/assets/sql-wasm-C1U8OeUW.wasm";async function En(){try{return await Tr({locateFile:()=>String(vn)})}catch{try{return await Tr()}catch(J){throw rt("Failed to initialize sql.js: "+(J.message||J.toString()),"err"),J}}}function kn(J){rt("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const st=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];J.run("BEGIN TRANSACTION");try{for(const _ of st)J.run(_);J.run("COMMIT"),rt("Schema created.","schema")}catch(_){try{J.run("ROLLBACK")}catch{}throw rt("Failed to create schema: "+(_.message||_.toString()),"err"),_}}function Tn(J){try{const st=J.exec("PRAGMA foreign_key_list('stream_state')"),_=J.exec("PRAGMA table_info('stream_state')");let U=!1;st&&st.length>0&&st[0].values&&st[0].values.length>0&&(U=!0);let E=!1;if(_&&_.length>0&&_[0].values.length>=2){const o=_[0].values,h=o.map(p=>p[1]),a=o.map(p=>p[5]);h[0]==="progress_time"&&h[1]==="stream_id"&&a[0]===0&&a[1]===1&&(E=!0)}if(!U||!E){rt("Patching stream_state schema to Room-compatible definition...","schema"),J.run("BEGIN TRANSACTION");const o=J.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(o&&o.length>0&&o[0].values.length>0){J.run("ALTER TABLE stream_state RENAME TO stream_state_old"),J.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{J.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(h){rt("Note: could not copy old stream_state rows: "+(h.message||h.toString()),"warn")}J.run("DROP TABLE stream_state_old")}else J.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");J.run("COMMIT"),rt("stream_state schema patched.","schema")}else rt("stream_state schema OK.","schema")}catch(st){rt("Failed to ensure stream_state schema: "+(st.message||st.toString()),"err")}}const Ht=0,Sn={content_country:"US",content_language:"en",theme:"DARK"};function He(){const J=new Date,st=_=>String(_).padStart(2,"0");return`${J.getFullYear()}-${st(J.getMonth()+1)}-${st(J.getDate())}-${st(J.getHours())}-${st(J.getMinutes())}-${st(J.getSeconds())}`}function Xe(J,st,_=null){let U=st;_&&(st.endsWith(".zip")?U=st.replace(".zip",`-${_}.zip`):st.endsWith(".json")&&(U=st.replace(".json",`-${_}.json`)));const E=URL.createObjectURL(J),o=document.createElement("a");o.href=E,o.download=U,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(E)}function Ie(J){throw new Error('Could not dynamically require "'+J+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(J,st){(function(_){J.exports=_()})(function(){return function _(U,E,o){function h(s,R){if(!E[s]){if(!U[s]){var T=typeof Ie=="function"&&Ie;if(!R&&T)return T(s,!0);if(a)return a(s,!0);var S=new Error("Cannot find module '"+s+"'");throw S.code="MODULE_NOT_FOUND",S}var f=E[s]={exports:{}};U[s][0].call(f.exports,function(w){var c=U[s][1][w];return h(c||w)},f,f.exports,_,U,E,o)}return E[s].exports}for(var a=typeof Ie=="function"&&Ie,p=0;p<o.length;p++)h(o[p]);return h}({1:[function(_,U,E){var o=_("./utils"),h=_("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";E.encode=function(p){for(var s,R,T,S,f,w,c,m=[],u=0,g=p.length,y=g,A=o.getTypeOf(p)!=="string";u<p.length;)y=g-u,T=A?(s=p[u++],R=u<g?p[u++]:0,u<g?p[u++]:0):(s=p.charCodeAt(u++),R=u<g?p.charCodeAt(u++):0,u<g?p.charCodeAt(u++):0),S=s>>2,f=(3&s)<<4|R>>4,w=1<y?(15&R)<<2|T>>6:64,c=2<y?63&T:64,m.push(a.charAt(S)+a.charAt(f)+a.charAt(w)+a.charAt(c));return m.join("")},E.decode=function(p){var s,R,T,S,f,w,c=0,m=0,u="data:";if(p.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var g,y=3*(p=p.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(p.charAt(p.length-1)===a.charAt(64)&&y--,p.charAt(p.length-2)===a.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=h.uint8array?new Uint8Array(0|y):new Array(0|y);c<p.length;)s=a.indexOf(p.charAt(c++))<<2|(S=a.indexOf(p.charAt(c++)))>>4,R=(15&S)<<4|(f=a.indexOf(p.charAt(c++)))>>2,T=(3&f)<<6|(w=a.indexOf(p.charAt(c++))),g[m++]=s,f!==64&&(g[m++]=R),w!==64&&(g[m++]=T);return g}},{"./support":30,"./utils":32}],2:[function(_,U,E){var o=_("./external"),h=_("./stream/DataWorker"),a=_("./stream/Crc32Probe"),p=_("./stream/DataLengthProbe");function s(R,T,S,f,w){this.compressedSize=R,this.uncompressedSize=T,this.crc32=S,this.compression=f,this.compressedContent=w}s.prototype={getContentWorker:function(){var R=new h(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new p("data_length")),T=this;return R.on("end",function(){if(this.streamInfo.data_length!==T.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),R},getCompressedWorker:function(){return new h(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(R,T,S){return R.pipe(new a).pipe(new p("uncompressedSize")).pipe(T.compressWorker(S)).pipe(new p("compressedSize")).withStreamInfo("compression",T)},U.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(_,U,E){var o=_("./stream/GenericWorker");E.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},E.DEFLATE=_("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(_,U,E){var o=_("./utils"),h=function(){for(var a,p=[],s=0;s<256;s++){a=s;for(var R=0;R<8;R++)a=1&a?3988292384^a>>>1:a>>>1;p[s]=a}return p}();U.exports=function(a,p){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(s,R,T,S){var f=h,w=S+T;s^=-1;for(var c=S;c<w;c++)s=s>>>8^f[255&(s^R[c])];return-1^s}(0|p,a,a.length,0):function(s,R,T,S){var f=h,w=S+T;s^=-1;for(var c=S;c<w;c++)s=s>>>8^f[255&(s^R.charCodeAt(c))];return-1^s}(0|p,a,a.length,0):0}},{"./utils":32}],5:[function(_,U,E){E.base64=!1,E.binary=!1,E.dir=!1,E.createFolders=!0,E.date=null,E.compression=null,E.compressionOptions=null,E.comment=null,E.unixPermissions=null,E.dosPermissions=null},{}],6:[function(_,U,E){var o=null;o=typeof Promise<"u"?Promise:_("lie"),U.exports={Promise:o}},{lie:37}],7:[function(_,U,E){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",h=_("pako"),a=_("./utils"),p=_("./stream/GenericWorker"),s=o?"uint8array":"array";function R(T,S){p.call(this,"FlateWorker/"+T),this._pako=null,this._pakoAction=T,this._pakoOptions=S,this.meta={}}E.magic="\b\0",a.inherits(R,p),R.prototype.processChunk=function(T){this.meta=T.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(s,T.data),!1)},R.prototype.flush=function(){p.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},R.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},R.prototype._createPako=function(){this._pako=new h[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var T=this;this._pako.onData=function(S){T.push({data:S,meta:T.meta})}},E.compressWorker=function(T){return new R("Deflate",T)},E.uncompressWorker=function(){return new R("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(_,U,E){function o(f,w){var c,m="";for(c=0;c<w;c++)m+=String.fromCharCode(255&f),f>>>=8;return m}function h(f,w,c,m,u,g){var y,A,N=f.file,M=f.compression,F=g!==s.utf8encode,j=a.transformTo("string",g(N.name)),I=a.transformTo("string",s.utf8encode(N.name)),W=N.comment,V=a.transformTo("string",g(W)),k=a.transformTo("string",s.utf8encode(W)),L=I.length!==N.name.length,i=k.length!==W.length,$="",ct="",Y="",pt=N.dir,K=N.date,ot={crc32:0,compressedSize:0,uncompressedSize:0};w&&!c||(ot.crc32=f.crc32,ot.compressedSize=f.compressedSize,ot.uncompressedSize=f.uncompressedSize);var B=0;w&&(B|=8),F||!L&&!i||(B|=2048);var D=0,lt=0;pt&&(D|=16),u==="UNIX"?(lt=798,D|=function(tt,At){var St=tt;return tt||(St=At?16893:33204),(65535&St)<<16}(N.unixPermissions,pt)):(lt=20,D|=function(tt){return 63&(tt||0)}(N.dosPermissions)),y=K.getUTCHours(),y<<=6,y|=K.getUTCMinutes(),y<<=5,y|=K.getUTCSeconds()/2,A=K.getUTCFullYear()-1980,A<<=4,A|=K.getUTCMonth()+1,A<<=5,A|=K.getUTCDate(),L&&(ct=o(1,1)+o(R(j),4)+I,$+="up"+o(ct.length,2)+ct),i&&(Y=o(1,1)+o(R(V),4)+k,$+="uc"+o(Y.length,2)+Y);var nt="";return nt+=`
\0`,nt+=o(B,2),nt+=M.magic,nt+=o(y,2),nt+=o(A,2),nt+=o(ot.crc32,4),nt+=o(ot.compressedSize,4),nt+=o(ot.uncompressedSize,4),nt+=o(j.length,2),nt+=o($.length,2),{fileRecord:T.LOCAL_FILE_HEADER+nt+j+$,dirRecord:T.CENTRAL_FILE_HEADER+o(lt,2)+nt+o(V.length,2)+"\0\0\0\0"+o(D,4)+o(m,4)+j+$+V}}var a=_("../utils"),p=_("../stream/GenericWorker"),s=_("../utf8"),R=_("../crc32"),T=_("../signature");function S(f,w,c,m){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=c,this.encodeFileName=m,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(S,p),S.prototype.push=function(f){var w=f.meta.percent||0,c=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,p.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:c?(w+100*(c-m-1))/c:100}}))},S.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var w=this.streamFiles&&!f.file.dir;if(w){var c=h(f,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},S.prototype.closedSource=function(f){this.accumulate=!1;var w=this.streamFiles&&!f.file.dir,c=h(f,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),w)this.push({data:function(m){return T.DATA_DESCRIPTOR+o(m.crc32,4)+o(m.compressedSize,4)+o(m.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},S.prototype.flush=function(){for(var f=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var c=this.bytesWritten-f,m=function(u,g,y,A,N){var M=a.transformTo("string",N(A));return T.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(u,2)+o(u,2)+o(g,4)+o(y,4)+o(M.length,2)+M}(this.dirRecords.length,c,f,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},S.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},S.prototype.registerPrevious=function(f){this._sources.push(f);var w=this;return f.on("data",function(c){w.processChunk(c)}),f.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),f.on("error",function(c){w.error(c)}),this},S.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},S.prototype.error=function(f){var w=this._sources;if(!p.prototype.error.call(this,f))return!1;for(var c=0;c<w.length;c++)try{w[c].error(f)}catch{}return!0},S.prototype.lock=function(){p.prototype.lock.call(this);for(var f=this._sources,w=0;w<f.length;w++)f[w].lock()},U.exports=S},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(_,U,E){var o=_("../compressions"),h=_("./ZipFileWorker");E.generateWorker=function(a,p,s){var R=new h(p.streamFiles,s,p.platform,p.encodeFileName),T=0;try{a.forEach(function(S,f){T++;var w=function(g,y){var A=g||y,N=o[A];if(!N)throw new Error(A+" is not a valid compression method !");return N}(f.options.compression,p.compression),c=f.options.compressionOptions||p.compressionOptions||{},m=f.dir,u=f.date;f._compressWorker(w,c).withStreamInfo("file",{name:S,dir:m,date:u,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(R)}),R.entriesCount=T}catch(S){R.error(S)}return R}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(_,U,E){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var h=new o;for(var a in this)typeof this[a]!="function"&&(h[a]=this[a]);return h}}(o.prototype=_("./object")).loadAsync=_("./load"),o.support=_("./support"),o.defaults=_("./defaults"),o.version="3.10.1",o.loadAsync=function(h,a){return new o().loadAsync(h,a)},o.external=_("./external"),U.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(_,U,E){var o=_("./utils"),h=_("./external"),a=_("./utf8"),p=_("./zipEntries"),s=_("./stream/Crc32Probe"),R=_("./nodejsUtils");function T(S){return new h.Promise(function(f,w){var c=S.decompressed.getContentWorker().pipe(new s);c.on("error",function(m){w(m)}).on("end",function(){c.streamInfo.crc32!==S.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}U.exports=function(S,f){var w=this;return f=o.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),R.isNode&&R.isStream(S)?h.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",S,!0,f.optimizedBinaryString,f.base64).then(function(c){var m=new p(f);return m.load(c),m}).then(function(c){var m=[h.Promise.resolve(c)],u=c.files;if(f.checkCRC32)for(var g=0;g<u.length;g++)m.push(T(u[g]));return h.Promise.all(m)}).then(function(c){for(var m=c.shift(),u=m.files,g=0;g<u.length;g++){var y=u[g],A=y.fileNameStr,N=o.resolve(y.fileNameStr);w.file(N,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:f.createFolders}),y.dir||(w.file(N).unsafeOriginalName=A)}return m.zipComment.length&&(w.comment=m.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(_,U,E){var o=_("../utils"),h=_("../stream/GenericWorker");function a(p,s){h.call(this,"Nodejs stream input adapter for "+p),this._upstreamEnded=!1,this._bindStream(s)}o.inherits(a,h),a.prototype._bindStream=function(p){var s=this;(this._stream=p).pause(),p.on("data",function(R){s.push({data:R,meta:{percent:0}})}).on("error",function(R){s.isPaused?this.generatedError=R:s.error(R)}).on("end",function(){s.isPaused?s._upstreamEnded=!0:s.end()})},a.prototype.pause=function(){return!!h.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},U.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(_,U,E){var o=_("readable-stream").Readable;function h(a,p,s){o.call(this,p),this._helper=a;var R=this;a.on("data",function(T,S){R.push(T)||R._helper.pause(),s&&s(S)}).on("error",function(T){R.emit("error",T)}).on("end",function(){R.push(null)})}_("../utils").inherits(h,o),h.prototype._read=function(){this._helper.resume()},U.exports=h},{"../utils":32,"readable-stream":16}],14:[function(_,U,E){U.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,h){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,h);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,h)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var h=new Buffer(o);return h.fill(0),h},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(_,U,E){function o(N,M,F){var j,I=a.getTypeOf(M),W=a.extend(F||{},R);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(N=u(N)),W.createFolders&&(j=m(N))&&g.call(this,j,!0);var V=I==="string"&&W.binary===!1&&W.base64===!1;F&&F.binary!==void 0||(W.binary=!V),(M instanceof T&&M.uncompressedSize===0||W.dir||!M||M.length===0)&&(W.base64=!1,W.binary=!0,M="",W.compression="STORE",I="string");var k=null;k=M instanceof T||M instanceof p?M:w.isNode&&w.isStream(M)?new c(N,M):a.prepareContent(N,M,W.binary,W.optimizedBinaryString,W.base64);var L=new S(N,k,W);this.files[N]=L}var h=_("./utf8"),a=_("./utils"),p=_("./stream/GenericWorker"),s=_("./stream/StreamHelper"),R=_("./defaults"),T=_("./compressedObject"),S=_("./zipObject"),f=_("./generate"),w=_("./nodejsUtils"),c=_("./nodejs/NodejsStreamInputAdapter"),m=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var M=N.lastIndexOf("/");return 0<M?N.substring(0,M):""},u=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},g=function(N,M){return M=M!==void 0?M:R.createFolders,N=u(N),this.files[N]||o.call(this,N,null,{dir:!0,createFolders:M}),this.files[N]};function y(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var M,F,j;for(M in this.files)j=this.files[M],(F=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&N(F,j)},filter:function(N){var M=[];return this.forEach(function(F,j){N(F,j)&&M.push(j)}),M},file:function(N,M,F){if(arguments.length!==1)return N=this.root+N,o.call(this,N,M,F),this;if(y(N)){var j=N;return this.filter(function(W,V){return!V.dir&&j.test(W)})}var I=this.files[this.root+N];return I&&!I.dir?I:null},folder:function(N){if(!N)return this;if(y(N))return this.filter(function(I,W){return W.dir&&N.test(I)});var M=this.root+N,F=g.call(this,M),j=this.clone();return j.root=F.name,j},remove:function(N){N=this.root+N;var M=this.files[N];if(M||(N.slice(-1)!=="/"&&(N+="/"),M=this.files[N]),M&&!M.dir)delete this.files[N];else for(var F=this.filter(function(I,W){return W.name.slice(0,N.length)===N}),j=0;j<F.length;j++)delete this.files[F[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var M,F={};try{if((F=a.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:h.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");a.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var j=F.comment||this.comment||"";M=f.generateWorker(this,F,j)}catch(I){(M=new p("error")).error(I)}return new s(M,F.type||"string",F.mimeType)},generateAsync:function(N,M){return this.generateInternalStream(N).accumulate(M)},generateNodeStream:function(N,M){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(M)}};U.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(_,U,E){U.exports=_("stream")},{stream:void 0}],17:[function(_,U,E){var o=_("./DataReader");function h(a){o.call(this,a);for(var p=0;p<this.data.length;p++)a[p]=255&a[p]}_("../utils").inherits(h,o),h.prototype.byteAt=function(a){return this.data[this.zero+a]},h.prototype.lastIndexOfSignature=function(a){for(var p=a.charCodeAt(0),s=a.charCodeAt(1),R=a.charCodeAt(2),T=a.charCodeAt(3),S=this.length-4;0<=S;--S)if(this.data[S]===p&&this.data[S+1]===s&&this.data[S+2]===R&&this.data[S+3]===T)return S-this.zero;return-1},h.prototype.readAndCheckSignature=function(a){var p=a.charCodeAt(0),s=a.charCodeAt(1),R=a.charCodeAt(2),T=a.charCodeAt(3),S=this.readData(4);return p===S[0]&&s===S[1]&&R===S[2]&&T===S[3]},h.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},U.exports=h},{"../utils":32,"./DataReader":18}],18:[function(_,U,E){var o=_("../utils");function h(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}h.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var p,s=0;for(this.checkOffset(a),p=this.index+a-1;p>=this.index;p--)s=(s<<8)+this.byteAt(p);return this.index+=a,s},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},U.exports=h},{"../utils":32}],19:[function(_,U,E){var o=_("./Uint8ArrayReader");function h(a){o.call(this,a)}_("../utils").inherits(h,o),h.prototype.readData=function(a){this.checkOffset(a);var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},U.exports=h},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(_,U,E){var o=_("./DataReader");function h(a){o.call(this,a)}_("../utils").inherits(h,o),h.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},h.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},h.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},h.prototype.readData=function(a){this.checkOffset(a);var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},U.exports=h},{"../utils":32,"./DataReader":18}],21:[function(_,U,E){var o=_("./ArrayReader");function h(a){o.call(this,a)}_("../utils").inherits(h,o),h.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var p=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},U.exports=h},{"../utils":32,"./ArrayReader":17}],22:[function(_,U,E){var o=_("../utils"),h=_("../support"),a=_("./ArrayReader"),p=_("./StringReader"),s=_("./NodeBufferReader"),R=_("./Uint8ArrayReader");U.exports=function(T){var S=o.getTypeOf(T);return o.checkSupport(S),S!=="string"||h.uint8array?S==="nodebuffer"?new s(T):h.uint8array?new R(o.transformTo("uint8array",T)):new a(o.transformTo("array",T)):new p(T)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(_,U,E){E.LOCAL_FILE_HEADER="PK",E.CENTRAL_FILE_HEADER="PK",E.CENTRAL_DIRECTORY_END="PK",E.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",E.ZIP64_CENTRAL_DIRECTORY_END="PK",E.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(_,U,E){var o=_("./GenericWorker"),h=_("../utils");function a(p){o.call(this,"ConvertWorker to "+p),this.destType=p}h.inherits(a,o),a.prototype.processChunk=function(p){this.push({data:h.transformTo(this.destType,p.data),meta:p.meta})},U.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(_,U,E){var o=_("./GenericWorker"),h=_("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}_("../utils").inherits(a,o),a.prototype.processChunk=function(p){this.streamInfo.crc32=h(p.data,this.streamInfo.crc32||0),this.push(p)},U.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(_,U,E){var o=_("../utils"),h=_("./GenericWorker");function a(p){h.call(this,"DataLengthProbe for "+p),this.propName=p,this.withStreamInfo(p,0)}o.inherits(a,h),a.prototype.processChunk=function(p){if(p){var s=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=s+p.data.length}h.prototype.processChunk.call(this,p)},U.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(_,U,E){var o=_("../utils"),h=_("./GenericWorker");function a(p){h.call(this,"DataWorker");var s=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,p.then(function(R){s.dataIsReady=!0,s.data=R,s.max=R&&R.length||0,s.type=o.getTypeOf(R),s.isPaused||s._tickAndRepeat()},function(R){s.error(R)})}o.inherits(a,h),a.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var p=null,s=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,s);break;case"uint8array":p=this.data.subarray(this.index,s);break;case"array":case"nodebuffer":p=this.data.slice(this.index,s)}return this.index=s,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},U.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(_,U,E){function o(h){this.name=h||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(h){this.emit("data",h)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(h){this.emit("error",h)}return!0},error:function(h){return!this.isFinished&&(this.isPaused?this.generatedError=h:(this.isFinished=!0,this.emit("error",h),this.previous&&this.previous.error(h),this.cleanUp()),!0)},on:function(h,a){return this._listeners[h].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(h,a){if(this._listeners[h])for(var p=0;p<this._listeners[h].length;p++)this._listeners[h][p].call(this,a)},pipe:function(h){return h.registerPrevious(this)},registerPrevious:function(h){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=h.streamInfo,this.mergeStreamInfo(),this.previous=h;var a=this;return h.on("data",function(p){a.processChunk(p)}),h.on("end",function(){a.end()}),h.on("error",function(p){a.error(p)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var h=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),h=!0),this.previous&&this.previous.resume(),!h},flush:function(){},processChunk:function(h){this.push(h)},withStreamInfo:function(h,a){return this.extraStreamInfo[h]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var h in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,h)&&(this.streamInfo[h]=this.extraStreamInfo[h])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var h="Worker "+this.name;return this.previous?this.previous+" -> "+h:h}},U.exports=o},{}],29:[function(_,U,E){var o=_("../utils"),h=_("./ConvertWorker"),a=_("./GenericWorker"),p=_("../base64"),s=_("../support"),R=_("../external"),T=null;if(s.nodestream)try{T=_("../nodejs/NodejsStreamOutputAdapter")}catch{}function S(w,c){return new R.Promise(function(m,u){var g=[],y=w._internalType,A=w._outputType,N=w._mimeType;w.on("data",function(M,F){g.push(M),c&&c(F)}).on("error",function(M){g=[],u(M)}).on("end",function(){try{var M=function(F,j,I){switch(F){case"blob":return o.newBlob(o.transformTo("arraybuffer",j),I);case"base64":return p.encode(j);default:return o.transformTo(F,j)}}(A,function(F,j){var I,W=0,V=null,k=0;for(I=0;I<j.length;I++)k+=j[I].length;switch(F){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(V=new Uint8Array(k),I=0;I<j.length;I++)V.set(j[I],W),W+=j[I].length;return V;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+F+"'")}}(y,g),N);m(M)}catch(F){u(F)}g=[]}).resume()})}function f(w,c,m){var u=c;switch(c){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=c,this._mimeType=m,o.checkSupport(u),this._worker=w.pipe(new h(u)),w.lock()}catch(g){this._worker=new a("error"),this._worker.error(g)}}f.prototype={accumulate:function(w){return S(this,w)},on:function(w,c){var m=this;return w==="data"?this._worker.on(w,function(u){c.call(m,u.data,u.meta)}):this._worker.on(w,function(){o.delay(c,arguments,m)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new T(this,{objectMode:this._outputType!=="nodebuffer"},w)}},U.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(_,U,E){if(E.base64=!0,E.array=!0,E.string=!0,E.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",E.nodebuffer=typeof Buffer<"u",E.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")E.blob=!1;else{var o=new ArrayBuffer(0);try{E.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);h.append(o),E.blob=h.getBlob("application/zip").size===0}catch{E.blob=!1}}}try{E.nodestream=!!_("readable-stream").Readable}catch{E.nodestream=!1}},{"readable-stream":16}],31:[function(_,U,E){for(var o=_("./utils"),h=_("./support"),a=_("./nodejsUtils"),p=_("./stream/GenericWorker"),s=new Array(256),R=0;R<256;R++)s[R]=252<=R?6:248<=R?5:240<=R?4:224<=R?3:192<=R?2:1;s[254]=s[254]=1;function T(){p.call(this,"utf-8 decode"),this.leftOver=null}function S(){p.call(this,"utf-8 encode")}E.utf8encode=function(f){return h.nodebuffer?a.newBufferFrom(f,"utf-8"):function(w){var c,m,u,g,y,A=w.length,N=0;for(g=0;g<A;g++)(64512&(m=w.charCodeAt(g)))==55296&&g+1<A&&(64512&(u=w.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(u-56320),g++),N+=m<128?1:m<2048?2:m<65536?3:4;for(c=h.uint8array?new Uint8Array(N):new Array(N),g=y=0;y<N;g++)(64512&(m=w.charCodeAt(g)))==55296&&g+1<A&&(64512&(u=w.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(u-56320),g++),m<128?c[y++]=m:(m<2048?c[y++]=192|m>>>6:(m<65536?c[y++]=224|m>>>12:(c[y++]=240|m>>>18,c[y++]=128|m>>>12&63),c[y++]=128|m>>>6&63),c[y++]=128|63&m);return c}(f)},E.utf8decode=function(f){return h.nodebuffer?o.transformTo("nodebuffer",f).toString("utf-8"):function(w){var c,m,u,g,y=w.length,A=new Array(2*y);for(c=m=0;c<y;)if((u=w[c++])<128)A[m++]=u;else if(4<(g=s[u]))A[m++]=65533,c+=g-1;else{for(u&=g===2?31:g===3?15:7;1<g&&c<y;)u=u<<6|63&w[c++],g--;1<g?A[m++]=65533:u<65536?A[m++]=u:(u-=65536,A[m++]=55296|u>>10&1023,A[m++]=56320|1023&u)}return A.length!==m&&(A.subarray?A=A.subarray(0,m):A.length=m),o.applyFromCharCode(A)}(f=o.transformTo(h.uint8array?"uint8array":"array",f))},o.inherits(T,p),T.prototype.processChunk=function(f){var w=o.transformTo(h.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var c=w;(w=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),w.set(c,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var m=function(g,y){var A;for((y=y||g.length)>g.length&&(y=g.length),A=y-1;0<=A&&(192&g[A])==128;)A--;return A<0||A===0?y:A+s[g[A]]>y?A:y}(w),u=w;m!==w.length&&(h.uint8array?(u=w.subarray(0,m),this.leftOver=w.subarray(m,w.length)):(u=w.slice(0,m),this.leftOver=w.slice(m,w.length))),this.push({data:E.utf8decode(u),meta:f.meta})},T.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:E.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},E.Utf8DecodeWorker=T,o.inherits(S,p),S.prototype.processChunk=function(f){this.push({data:E.utf8encode(f.data),meta:f.meta})},E.Utf8EncodeWorker=S},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(_,U,E){var o=_("./support"),h=_("./base64"),a=_("./nodejsUtils"),p=_("./external");function s(c){return c}function R(c,m){for(var u=0;u<c.length;++u)m[u]=255&c.charCodeAt(u);return m}_("setimmediate"),E.newBlob=function(c,m){E.checkSupport("blob");try{return new Blob([c],{type:m})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(c),u.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var T={stringifyByChunk:function(c,m,u){var g=[],y=0,A=c.length;if(A<=u)return String.fromCharCode.apply(null,c);for(;y<A;)m==="array"||m==="nodebuffer"?g.push(String.fromCharCode.apply(null,c.slice(y,Math.min(y+u,A)))):g.push(String.fromCharCode.apply(null,c.subarray(y,Math.min(y+u,A)))),y+=u;return g.join("")},stringifyByChar:function(c){for(var m="",u=0;u<c.length;u++)m+=String.fromCharCode(c[u]);return m},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function S(c){var m=65536,u=E.getTypeOf(c),g=!0;if(u==="uint8array"?g=T.applyCanBeUsed.uint8array:u==="nodebuffer"&&(g=T.applyCanBeUsed.nodebuffer),g)for(;1<m;)try{return T.stringifyByChunk(c,u,m)}catch{m=Math.floor(m/2)}return T.stringifyByChar(c)}function f(c,m){for(var u=0;u<c.length;u++)m[u]=c[u];return m}E.applyFromCharCode=S;var w={};w.string={string:s,array:function(c){return R(c,new Array(c.length))},arraybuffer:function(c){return w.string.uint8array(c).buffer},uint8array:function(c){return R(c,new Uint8Array(c.length))},nodebuffer:function(c){return R(c,a.allocBuffer(c.length))}},w.array={string:S,array:s,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return a.newBufferFrom(c)}},w.arraybuffer={string:function(c){return S(new Uint8Array(c))},array:function(c){return f(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:s,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return a.newBufferFrom(new Uint8Array(c))}},w.uint8array={string:S,array:function(c){return f(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:s,nodebuffer:function(c){return a.newBufferFrom(c)}},w.nodebuffer={string:S,array:function(c){return f(c,new Array(c.length))},arraybuffer:function(c){return w.nodebuffer.uint8array(c).buffer},uint8array:function(c){return f(c,new Uint8Array(c.length))},nodebuffer:s},E.transformTo=function(c,m){if(m=m||"",!c)return m;E.checkSupport(c);var u=E.getTypeOf(m);return w[u][c](m)},E.resolve=function(c){for(var m=c.split("/"),u=[],g=0;g<m.length;g++){var y=m[g];y==="."||y===""&&g!==0&&g!==m.length-1||(y===".."?u.pop():u.push(y))}return u.join("/")},E.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(c)?"nodebuffer":o.uint8array&&c instanceof Uint8Array?"uint8array":o.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},E.checkSupport=function(c){if(!o[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},E.MAX_VALUE_16BITS=65535,E.MAX_VALUE_32BITS=-1,E.pretty=function(c){var m,u,g="";for(u=0;u<(c||"").length;u++)g+="\\x"+((m=c.charCodeAt(u))<16?"0":"")+m.toString(16).toUpperCase();return g},E.delay=function(c,m,u){setImmediate(function(){c.apply(u||null,m||[])})},E.inherits=function(c,m){function u(){}u.prototype=m.prototype,c.prototype=new u},E.extend=function(){var c,m,u={};for(c=0;c<arguments.length;c++)for(m in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],m)&&u[m]===void 0&&(u[m]=arguments[c][m]);return u},E.prepareContent=function(c,m,u,g,y){return p.Promise.resolve(m).then(function(A){return o.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new p.Promise(function(N,M){var F=new FileReader;F.onload=function(j){N(j.target.result)},F.onerror=function(j){M(j.target.error)},F.readAsArrayBuffer(A)}):A}).then(function(A){var N=E.getTypeOf(A);return N?(N==="arraybuffer"?A=E.transformTo("uint8array",A):N==="string"&&(y?A=h.decode(A):u&&g!==!0&&(A=function(M){return R(M,o.uint8array?new Uint8Array(M.length):new Array(M.length))}(A))),A):p.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(_,U,E){var o=_("./reader/readerFor"),h=_("./utils"),a=_("./signature"),p=_("./zipEntry"),s=_("./support");function R(T){this.files=[],this.loadOptions=T}R.prototype={checkSignature:function(T){if(!this.reader.readAndCheckSignature(T)){this.reader.index-=4;var S=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+h.pretty(S)+", expected "+h.pretty(T)+")")}},isSignature:function(T,S){var f=this.reader.index;this.reader.setIndex(T);var w=this.reader.readString(4)===S;return this.reader.setIndex(f),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var T=this.reader.readData(this.zipCommentLength),S=s.uint8array?"uint8array":"array",f=h.transformTo(S,T);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var T,S,f,w=this.zip64EndOfCentralSize-44;0<w;)T=this.reader.readInt(2),S=this.reader.readInt(4),f=this.reader.readData(S),this.zip64ExtensibleData[T]={id:T,length:S,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var T,S;for(T=0;T<this.files.length;T++)S=this.files[T],this.reader.setIndex(S.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),S.readLocalPart(this.reader),S.handleUTF8(),S.processAttributes()},readCentralDir:function(){var T;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(T=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(T);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var T=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(T<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(T);var S=T;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===h.MAX_VALUE_16BITS||this.diskWithCentralDirStart===h.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===h.MAX_VALUE_16BITS||this.centralDirRecords===h.MAX_VALUE_16BITS||this.centralDirSize===h.MAX_VALUE_32BITS||this.centralDirOffset===h.MAX_VALUE_32BITS){if(this.zip64=!0,(T=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(T),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var w=S-f;if(0<w)this.isSignature(S,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(T){this.reader=o(T)},load:function(T){this.prepareReader(T),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},U.exports=R},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(_,U,E){var o=_("./reader/readerFor"),h=_("./utils"),a=_("./compressedObject"),p=_("./crc32"),s=_("./utf8"),R=_("./compressions"),T=_("./support");function S(f,w){this.options=f,this.loadOptions=w}S.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var w,c;if(f.skip(22),this.fileNameLength=f.readInt(2),c=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(m){for(var u in R)if(Object.prototype.hasOwnProperty.call(R,u)&&R[u].magic===m)return R[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+h.pretty(this.compressionMethod)+" unknown (inner file : "+h.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var w=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(w),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=o(this.extraFields[1].value);this.uncompressedSize===h.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===h.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===h.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===h.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var w,c,m,u=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<u;)w=f.readInt(2),c=f.readInt(2),m=f.readData(c),this.extraFields[w]={id:w,length:c,value:m};f.setIndex(u)},handleUTF8:function(){var f=T.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var c=h.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var u=h.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var w=o(f.value);return w.readInt(1)!==1||p(this.fileName)!==w.readInt(4)?null:s.utf8decode(w.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var w=o(f.value);return w.readInt(1)!==1||p(this.fileComment)!==w.readInt(4)?null:s.utf8decode(w.readData(f.length-5))}return null}},U.exports=S},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(_,U,E){function o(w,c,m){this.name=w,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=c,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var h=_("./stream/StreamHelper"),a=_("./stream/DataWorker"),p=_("./utf8"),s=_("./compressedObject"),R=_("./stream/GenericWorker");o.prototype={internalStream:function(w){var c=null,m="string";try{if(!w)throw new Error("No output type specified.");var u=(m=w.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),c=this._decompressWorker();var g=!this._dataBinary;g&&!u&&(c=c.pipe(new p.Utf8EncodeWorker)),!g&&u&&(c=c.pipe(new p.Utf8DecodeWorker))}catch(y){(c=new R("error")).error(y)}return new h(c,m,"")},async:function(w,c){return this.internalStream(w).accumulate(c)},nodeStream:function(w,c){return this.internalStream(w||"nodebuffer").toNodejsStream(c)},_compressWorker:function(w,c){if(this._data instanceof s&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new p.Utf8EncodeWorker)),s.createWorkerFrom(m,w,c)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof R?this._data:new a(this._data)}};for(var T=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],S=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<T.length;f++)o.prototype[T[f]]=S;U.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(_,U,E){(function(o){var h,a,p=o.MutationObserver||o.WebKitMutationObserver;if(p){var s=0,R=new p(w),T=o.document.createTextNode("");R.observe(T,{characterData:!0}),h=function(){T.data=s=++s%2}}else if(o.setImmediate||o.MessageChannel===void 0)h="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var c=o.document.createElement("script");c.onreadystatechange=function(){w(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},o.document.documentElement.appendChild(c)}:function(){setTimeout(w,0)};else{var S=new o.MessageChannel;S.port1.onmessage=w,h=function(){S.port2.postMessage(0)}}var f=[];function w(){var c,m;a=!0;for(var u=f.length;u;){for(m=f,f=[],c=-1;++c<u;)m[c]();u=f.length}a=!1}U.exports=function(c){f.push(c)!==1||a||h()}}).call(this,typeof xe<"u"?xe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(_,U,E){var o=_("immediate");function h(){}var a={},p=["REJECTED"],s=["FULFILLED"],R=["PENDING"];function T(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=R,this.queue=[],this.outcome=void 0,u!==h&&c(this,u)}function S(u,g,y){this.promise=u,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function f(u,g,y){o(function(){var A;try{A=g(y)}catch(N){return a.reject(u,N)}A===u?a.reject(u,new TypeError("Cannot resolve promise with itself")):a.resolve(u,A)})}function w(u){var g=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof g=="function")return function(){g.apply(u,arguments)}}function c(u,g){var y=!1;function A(F){y||(y=!0,a.reject(u,F))}function N(F){y||(y=!0,a.resolve(u,F))}var M=m(function(){g(N,A)});M.status==="error"&&A(M.value)}function m(u,g){var y={};try{y.value=u(g),y.status="success"}catch(A){y.status="error",y.value=A}return y}(U.exports=T).prototype.finally=function(u){if(typeof u!="function")return this;var g=this.constructor;return this.then(function(y){return g.resolve(u()).then(function(){return y})},function(y){return g.resolve(u()).then(function(){throw y})})},T.prototype.catch=function(u){return this.then(null,u)},T.prototype.then=function(u,g){if(typeof u!="function"&&this.state===s||typeof g!="function"&&this.state===p)return this;var y=new this.constructor(h);return this.state!==R?f(y,this.state===s?u:g,this.outcome):this.queue.push(new S(y,u,g)),y},S.prototype.callFulfilled=function(u){a.resolve(this.promise,u)},S.prototype.otherCallFulfilled=function(u){f(this.promise,this.onFulfilled,u)},S.prototype.callRejected=function(u){a.reject(this.promise,u)},S.prototype.otherCallRejected=function(u){f(this.promise,this.onRejected,u)},a.resolve=function(u,g){var y=m(w,g);if(y.status==="error")return a.reject(u,y.value);var A=y.value;if(A)c(u,A);else{u.state=s,u.outcome=g;for(var N=-1,M=u.queue.length;++N<M;)u.queue[N].callFulfilled(g)}return u},a.reject=function(u,g){u.state=p,u.outcome=g;for(var y=-1,A=u.queue.length;++y<A;)u.queue[y].callRejected(g);return u},T.resolve=function(u){return u instanceof this?u:a.resolve(new this(h),u)},T.reject=function(u){var g=new this(h);return a.reject(g,u)},T.all=function(u){var g=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=u.length,A=!1;if(!y)return this.resolve([]);for(var N=new Array(y),M=0,F=-1,j=new this(h);++F<y;)I(u[F],F);return j;function I(W,V){g.resolve(W).then(function(k){N[V]=k,++M!==y||A||(A=!0,a.resolve(j,N))},function(k){A||(A=!0,a.reject(j,k))})}},T.race=function(u){var g=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=u.length,A=!1;if(!y)return this.resolve([]);for(var N=-1,M=new this(h);++N<y;)F=u[N],g.resolve(F).then(function(j){A||(A=!0,a.resolve(M,j))},function(j){A||(A=!0,a.reject(M,j))});var F;return M}},{immediate:36}],38:[function(_,U,E){var o={};(0,_("./lib/utils/common").assign)(o,_("./lib/deflate"),_("./lib/inflate"),_("./lib/zlib/constants")),U.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(_,U,E){var o=_("./zlib/deflate"),h=_("./utils/common"),a=_("./utils/strings"),p=_("./zlib/messages"),s=_("./zlib/zstream"),R=Object.prototype.toString,T=0,S=-1,f=0,w=8;function c(u){if(!(this instanceof c))return new c(u);this.options=h.assign({level:S,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},u||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var y=o.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(y!==T)throw new Error(p[y]);if(g.header&&o.deflateSetHeader(this.strm,g.header),g.dictionary){var A;if(A=typeof g.dictionary=="string"?a.string2buf(g.dictionary):R.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(y=o.deflateSetDictionary(this.strm,A))!==T)throw new Error(p[y]);this._dict_set=!0}}function m(u,g){var y=new c(g);if(y.push(u,!0),y.err)throw y.msg||p[y.err];return y.result}c.prototype.push=function(u,g){var y,A,N=this.strm,M=this.options.chunkSize;if(this.ended)return!1;A=g===~~g?g:g===!0?4:0,typeof u=="string"?N.input=a.string2buf(u):R.call(u)==="[object ArrayBuffer]"?N.input=new Uint8Array(u):N.input=u,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new h.Buf8(M),N.next_out=0,N.avail_out=M),(y=o.deflate(N,A))!==1&&y!==T)return this.onEnd(y),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(h.shrinkBuf(N.output,N.next_out))):this.onData(h.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&y!==1);return A===4?(y=o.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===T):A!==2||(this.onEnd(T),!(N.avail_out=0))},c.prototype.onData=function(u){this.chunks.push(u)},c.prototype.onEnd=function(u){u===T&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},E.Deflate=c,E.deflate=m,E.deflateRaw=function(u,g){return(g=g||{}).raw=!0,m(u,g)},E.gzip=function(u,g){return(g=g||{}).gzip=!0,m(u,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(_,U,E){var o=_("./zlib/inflate"),h=_("./utils/common"),a=_("./utils/strings"),p=_("./zlib/constants"),s=_("./zlib/messages"),R=_("./zlib/zstream"),T=_("./zlib/gzheader"),S=Object.prototype.toString;function f(c){if(!(this instanceof f))return new f(c);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},c||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||c&&c.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new R,this.strm.avail_out=0;var u=o.inflateInit2(this.strm,m.windowBits);if(u!==p.Z_OK)throw new Error(s[u]);this.header=new T,o.inflateGetHeader(this.strm,this.header)}function w(c,m){var u=new f(m);if(u.push(c,!0),u.err)throw u.msg||s[u.err];return u.result}f.prototype.push=function(c,m){var u,g,y,A,N,M,F=this.strm,j=this.options.chunkSize,I=this.options.dictionary,W=!1;if(this.ended)return!1;g=m===~~m?m:m===!0?p.Z_FINISH:p.Z_NO_FLUSH,typeof c=="string"?F.input=a.binstring2buf(c):S.call(c)==="[object ArrayBuffer]"?F.input=new Uint8Array(c):F.input=c,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new h.Buf8(j),F.next_out=0,F.avail_out=j),(u=o.inflate(F,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&I&&(M=typeof I=="string"?a.string2buf(I):S.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,u=o.inflateSetDictionary(this.strm,M)),u===p.Z_BUF_ERROR&&W===!0&&(u=p.Z_OK,W=!1),u!==p.Z_STREAM_END&&u!==p.Z_OK)return this.onEnd(u),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&u!==p.Z_STREAM_END&&(F.avail_in!==0||g!==p.Z_FINISH&&g!==p.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=a.utf8border(F.output,F.next_out),A=F.next_out-y,N=a.buf2string(F.output,y),F.next_out=A,F.avail_out=j-A,A&&h.arraySet(F.output,F.output,y,A,0),this.onData(N)):this.onData(h.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(W=!0)}while((0<F.avail_in||F.avail_out===0)&&u!==p.Z_STREAM_END);return u===p.Z_STREAM_END&&(g=p.Z_FINISH),g===p.Z_FINISH?(u=o.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===p.Z_OK):g!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(F.avail_out=0))},f.prototype.onData=function(c){this.chunks.push(c)},f.prototype.onEnd=function(c){c===p.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},E.Inflate=f,E.inflate=w,E.inflateRaw=function(c,m){return(m=m||{}).raw=!0,w(c,m)},E.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(_,U,E){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";E.assign=function(p){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var R=s.shift();if(R){if(typeof R!="object")throw new TypeError(R+"must be non-object");for(var T in R)R.hasOwnProperty(T)&&(p[T]=R[T])}}return p},E.shrinkBuf=function(p,s){return p.length===s?p:p.subarray?p.subarray(0,s):(p.length=s,p)};var h={arraySet:function(p,s,R,T,S){if(s.subarray&&p.subarray)p.set(s.subarray(R,R+T),S);else for(var f=0;f<T;f++)p[S+f]=s[R+f]},flattenChunks:function(p){var s,R,T,S,f,w;for(s=T=0,R=p.length;s<R;s++)T+=p[s].length;for(w=new Uint8Array(T),s=S=0,R=p.length;s<R;s++)f=p[s],w.set(f,S),S+=f.length;return w}},a={arraySet:function(p,s,R,T,S){for(var f=0;f<T;f++)p[S+f]=s[R+f]},flattenChunks:function(p){return[].concat.apply([],p)}};E.setTyped=function(p){p?(E.Buf8=Uint8Array,E.Buf16=Uint16Array,E.Buf32=Int32Array,E.assign(E,h)):(E.Buf8=Array,E.Buf16=Array,E.Buf32=Array,E.assign(E,a))},E.setTyped(o)},{}],42:[function(_,U,E){var o=_("./common"),h=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{h=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var p=new o.Buf8(256),s=0;s<256;s++)p[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function R(T,S){if(S<65537&&(T.subarray&&a||!T.subarray&&h))return String.fromCharCode.apply(null,o.shrinkBuf(T,S));for(var f="",w=0;w<S;w++)f+=String.fromCharCode(T[w]);return f}p[254]=p[254]=1,E.string2buf=function(T){var S,f,w,c,m,u=T.length,g=0;for(c=0;c<u;c++)(64512&(f=T.charCodeAt(c)))==55296&&c+1<u&&(64512&(w=T.charCodeAt(c+1)))==56320&&(f=65536+(f-55296<<10)+(w-56320),c++),g+=f<128?1:f<2048?2:f<65536?3:4;for(S=new o.Buf8(g),c=m=0;m<g;c++)(64512&(f=T.charCodeAt(c)))==55296&&c+1<u&&(64512&(w=T.charCodeAt(c+1)))==56320&&(f=65536+(f-55296<<10)+(w-56320),c++),f<128?S[m++]=f:(f<2048?S[m++]=192|f>>>6:(f<65536?S[m++]=224|f>>>12:(S[m++]=240|f>>>18,S[m++]=128|f>>>12&63),S[m++]=128|f>>>6&63),S[m++]=128|63&f);return S},E.buf2binstring=function(T){return R(T,T.length)},E.binstring2buf=function(T){for(var S=new o.Buf8(T.length),f=0,w=S.length;f<w;f++)S[f]=T.charCodeAt(f);return S},E.buf2string=function(T,S){var f,w,c,m,u=S||T.length,g=new Array(2*u);for(f=w=0;f<u;)if((c=T[f++])<128)g[w++]=c;else if(4<(m=p[c]))g[w++]=65533,f+=m-1;else{for(c&=m===2?31:m===3?15:7;1<m&&f<u;)c=c<<6|63&T[f++],m--;1<m?g[w++]=65533:c<65536?g[w++]=c:(c-=65536,g[w++]=55296|c>>10&1023,g[w++]=56320|1023&c)}return R(g,w)},E.utf8border=function(T,S){var f;for((S=S||T.length)>T.length&&(S=T.length),f=S-1;0<=f&&(192&T[f])==128;)f--;return f<0||f===0?S:f+p[T[f]]>S?f:S}},{"./common":41}],43:[function(_,U,E){U.exports=function(o,h,a,p){for(var s=65535&o|0,R=o>>>16&65535|0,T=0;a!==0;){for(a-=T=2e3<a?2e3:a;R=R+(s=s+h[p++]|0)|0,--T;);s%=65521,R%=65521}return s|R<<16|0}},{}],44:[function(_,U,E){U.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(_,U,E){var o=function(){for(var h,a=[],p=0;p<256;p++){h=p;for(var s=0;s<8;s++)h=1&h?3988292384^h>>>1:h>>>1;a[p]=h}return a}();U.exports=function(h,a,p,s){var R=o,T=s+p;h^=-1;for(var S=s;S<T;S++)h=h>>>8^R[255&(h^a[S])];return-1^h}},{}],46:[function(_,U,E){var o,h=_("../utils/common"),a=_("./trees"),p=_("./adler32"),s=_("./crc32"),R=_("./messages"),T=0,S=4,f=0,w=-2,c=-1,m=4,u=2,g=8,y=9,A=286,N=30,M=19,F=2*A+1,j=15,I=3,W=258,V=W+I+1,k=42,L=113,i=1,$=2,ct=3,Y=4;function pt(r,G){return r.msg=R[G],G}function K(r){return(r<<1)-(4<r?9:0)}function ot(r){for(var G=r.length;0<=--G;)r[G]=0}function B(r){var G=r.state,z=G.pending;z>r.avail_out&&(z=r.avail_out),z!==0&&(h.arraySet(r.output,G.pending_buf,G.pending_out,z,r.next_out),r.next_out+=z,G.pending_out+=z,r.total_out+=z,r.avail_out-=z,G.pending-=z,G.pending===0&&(G.pending_out=0))}function D(r,G){a._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,G),r.block_start=r.strstart,B(r.strm)}function lt(r,G){r.pending_buf[r.pending++]=G}function nt(r,G){r.pending_buf[r.pending++]=G>>>8&255,r.pending_buf[r.pending++]=255&G}function tt(r,G){var z,b,d=r.max_chain_length,x=r.strstart,Z=r.prev_length,X=r.nice_match,P=r.strstart>r.w_size-V?r.strstart-(r.w_size-V):0,Q=r.window,at=r.w_mask,et=r.prev,ft=r.strstart+W,Et=Q[x+Z-1],vt=Q[x+Z];r.prev_length>=r.good_match&&(d>>=2),X>r.lookahead&&(X=r.lookahead);do if(Q[(z=G)+Z]===vt&&Q[z+Z-1]===Et&&Q[z]===Q[x]&&Q[++z]===Q[x+1]){x+=2,z++;do;while(Q[++x]===Q[++z]&&Q[++x]===Q[++z]&&Q[++x]===Q[++z]&&Q[++x]===Q[++z]&&Q[++x]===Q[++z]&&Q[++x]===Q[++z]&&Q[++x]===Q[++z]&&Q[++x]===Q[++z]&&x<ft);if(b=W-(ft-x),x=ft-W,Z<b){if(r.match_start=G,X<=(Z=b))break;Et=Q[x+Z-1],vt=Q[x+Z]}}while((G=et[G&at])>P&&--d!=0);return Z<=r.lookahead?Z:r.lookahead}function At(r){var G,z,b,d,x,Z,X,P,Q,at,et=r.w_size;do{if(d=r.window_size-r.lookahead-r.strstart,r.strstart>=et+(et-V)){for(h.arraySet(r.window,r.window,et,et,0),r.match_start-=et,r.strstart-=et,r.block_start-=et,G=z=r.hash_size;b=r.head[--G],r.head[G]=et<=b?b-et:0,--z;);for(G=z=et;b=r.prev[--G],r.prev[G]=et<=b?b-et:0,--z;);d+=et}if(r.strm.avail_in===0)break;if(Z=r.strm,X=r.window,P=r.strstart+r.lookahead,Q=d,at=void 0,at=Z.avail_in,Q<at&&(at=Q),z=at===0?0:(Z.avail_in-=at,h.arraySet(X,Z.input,Z.next_in,at,P),Z.state.wrap===1?Z.adler=p(Z.adler,X,at,P):Z.state.wrap===2&&(Z.adler=s(Z.adler,X,at,P)),Z.next_in+=at,Z.total_in+=at,at),r.lookahead+=z,r.lookahead+r.insert>=I)for(x=r.strstart-r.insert,r.ins_h=r.window[x],r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+I-1])&r.hash_mask,r.prev[x&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=x,x++,r.insert--,!(r.lookahead+r.insert<I)););}while(r.lookahead<V&&r.strm.avail_in!==0)}function St(r,G){for(var z,b;;){if(r.lookahead<V){if(At(r),r.lookahead<V&&G===T)return i;if(r.lookahead===0)break}if(z=0,r.lookahead>=I&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+I-1])&r.hash_mask,z=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),z!==0&&r.strstart-z<=r.w_size-V&&(r.match_length=tt(r,z)),r.match_length>=I)if(b=a._tr_tally(r,r.strstart-r.match_start,r.match_length-I),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=I){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+I-1])&r.hash_mask,z=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else b=a._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(b&&(D(r,!1),r.strm.avail_out===0))return i}return r.insert=r.strstart<I-1?r.strstart:I-1,G===S?(D(r,!0),r.strm.avail_out===0?ct:Y):r.last_lit&&(D(r,!1),r.strm.avail_out===0)?i:$}function yt(r,G){for(var z,b,d;;){if(r.lookahead<V){if(At(r),r.lookahead<V&&G===T)return i;if(r.lookahead===0)break}if(z=0,r.lookahead>=I&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+I-1])&r.hash_mask,z=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=I-1,z!==0&&r.prev_length<r.max_lazy_match&&r.strstart-z<=r.w_size-V&&(r.match_length=tt(r,z),r.match_length<=5&&(r.strategy===1||r.match_length===I&&4096<r.strstart-r.match_start)&&(r.match_length=I-1)),r.prev_length>=I&&r.match_length<=r.prev_length){for(d=r.strstart+r.lookahead-I,b=a._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-I),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=d&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+I-1])&r.hash_mask,z=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=I-1,r.strstart++,b&&(D(r,!1),r.strm.avail_out===0))return i}else if(r.match_available){if((b=a._tr_tally(r,0,r.window[r.strstart-1]))&&D(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return i}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(b=a._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<I-1?r.strstart:I-1,G===S?(D(r,!0),r.strm.avail_out===0?ct:Y):r.last_lit&&(D(r,!1),r.strm.avail_out===0)?i:$}function kt(r,G,z,b,d){this.good_length=r,this.max_lazy=G,this.nice_length=z,this.max_chain=b,this.func=d}function Rt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(2*F),this.dyn_dtree=new h.Buf16(2*(2*N+1)),this.bl_tree=new h.Buf16(2*(2*M+1)),ot(this.dyn_ltree),ot(this.dyn_dtree),ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(j+1),this.heap=new h.Buf16(2*A+1),ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*A+1),ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xt(r){var G;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=u,(G=r.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?k:L,r.adler=G.wrap===2?0:1,G.last_flush=T,a._tr_init(G),f):pt(r,w)}function Ct(r){var G=xt(r);return G===f&&function(z){z.window_size=2*z.w_size,ot(z.head),z.max_lazy_match=o[z.level].max_lazy,z.good_match=o[z.level].good_length,z.nice_match=o[z.level].nice_length,z.max_chain_length=o[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=I-1,z.match_available=0,z.ins_h=0}(r.state),G}function Lt(r,G,z,b,d,x){if(!r)return w;var Z=1;if(G===c&&(G=6),b<0?(Z=0,b=-b):15<b&&(Z=2,b-=16),d<1||y<d||z!==g||b<8||15<b||G<0||9<G||x<0||m<x)return pt(r,w);b===8&&(b=9);var X=new Rt;return(r.state=X).strm=r,X.wrap=Z,X.gzhead=null,X.w_bits=b,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=d+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+I-1)/I),X.window=new h.Buf8(2*X.w_size),X.head=new h.Buf16(X.hash_size),X.prev=new h.Buf16(X.w_size),X.lit_bufsize=1<<d+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new h.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=G,X.strategy=x,X.method=z,Ct(r)}o=[new kt(0,0,0,0,function(r,G){var z=65535;for(z>r.pending_buf_size-5&&(z=r.pending_buf_size-5);;){if(r.lookahead<=1){if(At(r),r.lookahead===0&&G===T)return i;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var b=r.block_start+z;if((r.strstart===0||r.strstart>=b)&&(r.lookahead=r.strstart-b,r.strstart=b,D(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-V&&(D(r,!1),r.strm.avail_out===0))return i}return r.insert=0,G===S?(D(r,!0),r.strm.avail_out===0?ct:Y):(r.strstart>r.block_start&&(D(r,!1),r.strm.avail_out),i)}),new kt(4,4,8,4,St),new kt(4,5,16,8,St),new kt(4,6,32,32,St),new kt(4,4,16,16,yt),new kt(8,16,32,32,yt),new kt(8,16,128,128,yt),new kt(8,32,128,256,yt),new kt(32,128,258,1024,yt),new kt(32,258,258,4096,yt)],E.deflateInit=function(r,G){return Lt(r,G,g,15,8,0)},E.deflateInit2=Lt,E.deflateReset=Ct,E.deflateResetKeep=xt,E.deflateSetHeader=function(r,G){return r&&r.state?r.state.wrap!==2?w:(r.state.gzhead=G,f):w},E.deflate=function(r,G){var z,b,d,x;if(!r||!r.state||5<G||G<0)return r?pt(r,w):w;if(b=r.state,!r.output||!r.input&&r.avail_in!==0||b.status===666&&G!==S)return pt(r,r.avail_out===0?-5:w);if(b.strm=r,z=b.last_flush,b.last_flush=G,b.status===k)if(b.wrap===2)r.adler=0,lt(b,31),lt(b,139),lt(b,8),b.gzhead?(lt(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),lt(b,255&b.gzhead.time),lt(b,b.gzhead.time>>8&255),lt(b,b.gzhead.time>>16&255),lt(b,b.gzhead.time>>24&255),lt(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),lt(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(lt(b,255&b.gzhead.extra.length),lt(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(r.adler=s(r.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(lt(b,0),lt(b,0),lt(b,0),lt(b,0),lt(b,0),lt(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),lt(b,3),b.status=L);else{var Z=g+(b.w_bits-8<<4)<<8;Z|=(2<=b.strategy||b.level<2?0:b.level<6?1:b.level===6?2:3)<<6,b.strstart!==0&&(Z|=32),Z+=31-Z%31,b.status=L,nt(b,Z),b.strstart!==0&&(nt(b,r.adler>>>16),nt(b,65535&r.adler)),r.adler=1}if(b.status===69)if(b.gzhead.extra){for(d=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),B(r),d=b.pending,b.pending!==b.pending_buf_size));)lt(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(b.status===73)if(b.gzhead.name){d=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),B(r),d=b.pending,b.pending===b.pending_buf_size)){x=1;break}x=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,lt(b,x)}while(x!==0);b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),x===0&&(b.gzindex=0,b.status=91)}else b.status=91;if(b.status===91)if(b.gzhead.comment){d=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),B(r),d=b.pending,b.pending===b.pending_buf_size)){x=1;break}x=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,lt(b,x)}while(x!==0);b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),x===0&&(b.status=103)}else b.status=103;if(b.status===103&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&B(r),b.pending+2<=b.pending_buf_size&&(lt(b,255&r.adler),lt(b,r.adler>>8&255),r.adler=0,b.status=L)):b.status=L),b.pending!==0){if(B(r),r.avail_out===0)return b.last_flush=-1,f}else if(r.avail_in===0&&K(G)<=K(z)&&G!==S)return pt(r,-5);if(b.status===666&&r.avail_in!==0)return pt(r,-5);if(r.avail_in!==0||b.lookahead!==0||G!==T&&b.status!==666){var X=b.strategy===2?function(P,Q){for(var at;;){if(P.lookahead===0&&(At(P),P.lookahead===0)){if(Q===T)return i;break}if(P.match_length=0,at=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,at&&(D(P,!1),P.strm.avail_out===0))return i}return P.insert=0,Q===S?(D(P,!0),P.strm.avail_out===0?ct:Y):P.last_lit&&(D(P,!1),P.strm.avail_out===0)?i:$}(b,G):b.strategy===3?function(P,Q){for(var at,et,ft,Et,vt=P.window;;){if(P.lookahead<=W){if(At(P),P.lookahead<=W&&Q===T)return i;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=I&&0<P.strstart&&(et=vt[ft=P.strstart-1])===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]){Et=P.strstart+W;do;while(et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&ft<Et);P.match_length=W-(Et-ft),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=I?(at=a._tr_tally(P,1,P.match_length-I),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(at=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),at&&(D(P,!1),P.strm.avail_out===0))return i}return P.insert=0,Q===S?(D(P,!0),P.strm.avail_out===0?ct:Y):P.last_lit&&(D(P,!1),P.strm.avail_out===0)?i:$}(b,G):o[b.level].func(b,G);if(X!==ct&&X!==Y||(b.status=666),X===i||X===ct)return r.avail_out===0&&(b.last_flush=-1),f;if(X===$&&(G===1?a._tr_align(b):G!==5&&(a._tr_stored_block(b,0,0,!1),G===3&&(ot(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),B(r),r.avail_out===0))return b.last_flush=-1,f}return G!==S?f:b.wrap<=0?1:(b.wrap===2?(lt(b,255&r.adler),lt(b,r.adler>>8&255),lt(b,r.adler>>16&255),lt(b,r.adler>>24&255),lt(b,255&r.total_in),lt(b,r.total_in>>8&255),lt(b,r.total_in>>16&255),lt(b,r.total_in>>24&255)):(nt(b,r.adler>>>16),nt(b,65535&r.adler)),B(r),0<b.wrap&&(b.wrap=-b.wrap),b.pending!==0?f:1)},E.deflateEnd=function(r){var G;return r&&r.state?(G=r.state.status)!==k&&G!==69&&G!==73&&G!==91&&G!==103&&G!==L&&G!==666?pt(r,w):(r.state=null,G===L?pt(r,-3):f):w},E.deflateSetDictionary=function(r,G){var z,b,d,x,Z,X,P,Q,at=G.length;if(!r||!r.state||(x=(z=r.state).wrap)===2||x===1&&z.status!==k||z.lookahead)return w;for(x===1&&(r.adler=p(r.adler,G,at,0)),z.wrap=0,at>=z.w_size&&(x===0&&(ot(z.head),z.strstart=0,z.block_start=0,z.insert=0),Q=new h.Buf8(z.w_size),h.arraySet(Q,G,at-z.w_size,z.w_size,0),G=Q,at=z.w_size),Z=r.avail_in,X=r.next_in,P=r.input,r.avail_in=at,r.next_in=0,r.input=G,At(z);z.lookahead>=I;){for(b=z.strstart,d=z.lookahead-(I-1);z.ins_h=(z.ins_h<<z.hash_shift^z.window[b+I-1])&z.hash_mask,z.prev[b&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=b,b++,--d;);z.strstart=b,z.lookahead=I-1,At(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=I-1,z.match_available=0,r.next_in=X,r.input=P,r.avail_in=Z,z.wrap=x,f},E.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(_,U,E){U.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(_,U,E){U.exports=function(o,h){var a,p,s,R,T,S,f,w,c,m,u,g,y,A,N,M,F,j,I,W,V,k,L,i,$;a=o.state,p=o.next_in,i=o.input,s=p+(o.avail_in-5),R=o.next_out,$=o.output,T=R-(h-o.avail_out),S=R+(o.avail_out-257),f=a.dmax,w=a.wsize,c=a.whave,m=a.wnext,u=a.window,g=a.hold,y=a.bits,A=a.lencode,N=a.distcode,M=(1<<a.lenbits)-1,F=(1<<a.distbits)-1;t:do{y<15&&(g+=i[p++]<<y,y+=8,g+=i[p++]<<y,y+=8),j=A[g&M];e:for(;;){if(g>>>=I=j>>>24,y-=I,(I=j>>>16&255)===0)$[R++]=65535&j;else{if(!(16&I)){if(!(64&I)){j=A[(65535&j)+(g&(1<<I)-1)];continue e}if(32&I){a.mode=12;break t}o.msg="invalid literal/length code",a.mode=30;break t}W=65535&j,(I&=15)&&(y<I&&(g+=i[p++]<<y,y+=8),W+=g&(1<<I)-1,g>>>=I,y-=I),y<15&&(g+=i[p++]<<y,y+=8,g+=i[p++]<<y,y+=8),j=N[g&F];r:for(;;){if(g>>>=I=j>>>24,y-=I,!(16&(I=j>>>16&255))){if(!(64&I)){j=N[(65535&j)+(g&(1<<I)-1)];continue r}o.msg="invalid distance code",a.mode=30;break t}if(V=65535&j,y<(I&=15)&&(g+=i[p++]<<y,(y+=8)<I&&(g+=i[p++]<<y,y+=8)),f<(V+=g&(1<<I)-1)){o.msg="invalid distance too far back",a.mode=30;break t}if(g>>>=I,y-=I,(I=R-T)<V){if(c<(I=V-I)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break t}if(L=u,(k=0)===m){if(k+=w-I,I<W){for(W-=I;$[R++]=u[k++],--I;);k=R-V,L=$}}else if(m<I){if(k+=w+m-I,(I-=m)<W){for(W-=I;$[R++]=u[k++],--I;);if(k=0,m<W){for(W-=I=m;$[R++]=u[k++],--I;);k=R-V,L=$}}}else if(k+=m-I,I<W){for(W-=I;$[R++]=u[k++],--I;);k=R-V,L=$}for(;2<W;)$[R++]=L[k++],$[R++]=L[k++],$[R++]=L[k++],W-=3;W&&($[R++]=L[k++],1<W&&($[R++]=L[k++]))}else{for(k=R-V;$[R++]=$[k++],$[R++]=$[k++],$[R++]=$[k++],2<(W-=3););W&&($[R++]=$[k++],1<W&&($[R++]=$[k++]))}break}}break}}while(p<s&&R<S);p-=W=y>>3,g&=(1<<(y-=W<<3))-1,o.next_in=p,o.next_out=R,o.avail_in=p<s?s-p+5:5-(p-s),o.avail_out=R<S?S-R+257:257-(R-S),a.hold=g,a.bits=y}},{}],49:[function(_,U,E){var o=_("../utils/common"),h=_("./adler32"),a=_("./crc32"),p=_("./inffast"),s=_("./inftrees"),R=1,T=2,S=0,f=-2,w=1,c=852,m=592;function u(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(k){var L;return k&&k.state?(L=k.state,k.total_in=k.total_out=L.total=0,k.msg="",L.wrap&&(k.adler=1&L.wrap),L.mode=w,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new o.Buf32(c),L.distcode=L.distdyn=new o.Buf32(m),L.sane=1,L.back=-1,S):f}function A(k){var L;return k&&k.state?((L=k.state).wsize=0,L.whave=0,L.wnext=0,y(k)):f}function N(k,L){var i,$;return k&&k.state?($=k.state,L<0?(i=0,L=-L):(i=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?f:($.window!==null&&$.wbits!==L&&($.window=null),$.wrap=i,$.wbits=L,A(k))):f}function M(k,L){var i,$;return k?($=new g,(k.state=$).window=null,(i=N(k,L))!==S&&(k.state=null),i):f}var F,j,I=!0;function W(k){if(I){var L;for(F=new o.Buf32(512),j=new o.Buf32(32),L=0;L<144;)k.lens[L++]=8;for(;L<256;)k.lens[L++]=9;for(;L<280;)k.lens[L++]=7;for(;L<288;)k.lens[L++]=8;for(s(R,k.lens,0,288,F,0,k.work,{bits:9}),L=0;L<32;)k.lens[L++]=5;s(T,k.lens,0,32,j,0,k.work,{bits:5}),I=!1}k.lencode=F,k.lenbits=9,k.distcode=j,k.distbits=5}function V(k,L,i,$){var ct,Y=k.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new o.Buf8(Y.wsize)),$>=Y.wsize?(o.arraySet(Y.window,L,i-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):($<(ct=Y.wsize-Y.wnext)&&(ct=$),o.arraySet(Y.window,L,i-$,ct,Y.wnext),($-=ct)?(o.arraySet(Y.window,L,i-$,$,0),Y.wnext=$,Y.whave=Y.wsize):(Y.wnext+=ct,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=ct))),0}E.inflateReset=A,E.inflateReset2=N,E.inflateResetKeep=y,E.inflateInit=function(k){return M(k,15)},E.inflateInit2=M,E.inflate=function(k,L){var i,$,ct,Y,pt,K,ot,B,D,lt,nt,tt,At,St,yt,kt,Rt,xt,Ct,Lt,r,G,z,b,d=0,x=new o.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return f;(i=k.state).mode===12&&(i.mode=13),pt=k.next_out,ct=k.output,ot=k.avail_out,Y=k.next_in,$=k.input,K=k.avail_in,B=i.hold,D=i.bits,lt=K,nt=ot,G=S;t:for(;;)switch(i.mode){case w:if(i.wrap===0){i.mode=13;break}for(;D<16;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(2&i.wrap&&B===35615){x[i.check=0]=255&B,x[1]=B>>>8&255,i.check=a(i.check,x,2,0),D=B=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&B)<<8)+(B>>8))%31){k.msg="incorrect header check",i.mode=30;break}if((15&B)!=8){k.msg="unknown compression method",i.mode=30;break}if(D-=4,r=8+(15&(B>>>=4)),i.wbits===0)i.wbits=r;else if(r>i.wbits){k.msg="invalid window size",i.mode=30;break}i.dmax=1<<r,k.adler=i.check=1,i.mode=512&B?10:12,D=B=0;break;case 2:for(;D<16;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(i.flags=B,(255&i.flags)!=8){k.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){k.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=B>>8&1),512&i.flags&&(x[0]=255&B,x[1]=B>>>8&255,i.check=a(i.check,x,2,0)),D=B=0,i.mode=3;case 3:for(;D<32;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}i.head&&(i.head.time=B),512&i.flags&&(x[0]=255&B,x[1]=B>>>8&255,x[2]=B>>>16&255,x[3]=B>>>24&255,i.check=a(i.check,x,4,0)),D=B=0,i.mode=4;case 4:for(;D<16;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}i.head&&(i.head.xflags=255&B,i.head.os=B>>8),512&i.flags&&(x[0]=255&B,x[1]=B>>>8&255,i.check=a(i.check,x,2,0)),D=B=0,i.mode=5;case 5:if(1024&i.flags){for(;D<16;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}i.length=B,i.head&&(i.head.extra_len=B),512&i.flags&&(x[0]=255&B,x[1]=B>>>8&255,i.check=a(i.check,x,2,0)),D=B=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(K<(tt=i.length)&&(tt=K),tt&&(i.head&&(r=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),o.arraySet(i.head.extra,$,Y,tt,r)),512&i.flags&&(i.check=a(i.check,$,tt,Y)),K-=tt,Y+=tt,i.length-=tt),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(K===0)break t;for(tt=0;r=$[Y+tt++],i.head&&r&&i.length<65536&&(i.head.name+=String.fromCharCode(r)),r&&tt<K;);if(512&i.flags&&(i.check=a(i.check,$,tt,Y)),K-=tt,Y+=tt,r)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(K===0)break t;for(tt=0;r=$[Y+tt++],i.head&&r&&i.length<65536&&(i.head.comment+=String.fromCharCode(r)),r&&tt<K;);if(512&i.flags&&(i.check=a(i.check,$,tt,Y)),K-=tt,Y+=tt,r)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;D<16;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(B!==(65535&i.check)){k.msg="header crc mismatch",i.mode=30;break}D=B=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),k.adler=i.check=0,i.mode=12;break;case 10:for(;D<32;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}k.adler=i.check=u(B),D=B=0,i.mode=11;case 11:if(i.havedict===0)return k.next_out=pt,k.avail_out=ot,k.next_in=Y,k.avail_in=K,i.hold=B,i.bits=D,2;k.adler=i.check=1,i.mode=12;case 12:if(L===5||L===6)break t;case 13:if(i.last){B>>>=7&D,D-=7&D,i.mode=27;break}for(;D<3;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}switch(i.last=1&B,D-=1,3&(B>>>=1)){case 0:i.mode=14;break;case 1:if(W(i),i.mode=20,L!==6)break;B>>>=2,D-=2;break t;case 2:i.mode=17;break;case 3:k.msg="invalid block type",i.mode=30}B>>>=2,D-=2;break;case 14:for(B>>>=7&D,D-=7&D;D<32;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if((65535&B)!=(B>>>16^65535)){k.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&B,D=B=0,i.mode=15,L===6)break t;case 15:i.mode=16;case 16:if(tt=i.length){if(K<tt&&(tt=K),ot<tt&&(tt=ot),tt===0)break t;o.arraySet(ct,$,Y,tt,pt),K-=tt,Y+=tt,ot-=tt,pt+=tt,i.length-=tt;break}i.mode=12;break;case 17:for(;D<14;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(i.nlen=257+(31&B),B>>>=5,D-=5,i.ndist=1+(31&B),B>>>=5,D-=5,i.ncode=4+(15&B),B>>>=4,D-=4,286<i.nlen||30<i.ndist){k.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;D<3;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}i.lens[Z[i.have++]]=7&B,B>>>=3,D-=3}for(;i.have<19;)i.lens[Z[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,z={bits:i.lenbits},G=s(0,i.lens,0,19,i.lencode,0,i.work,z),i.lenbits=z.bits,G){k.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;kt=(d=i.lencode[B&(1<<i.lenbits)-1])>>>16&255,Rt=65535&d,!((yt=d>>>24)<=D);){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(Rt<16)B>>>=yt,D-=yt,i.lens[i.have++]=Rt;else{if(Rt===16){for(b=yt+2;D<b;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(B>>>=yt,D-=yt,i.have===0){k.msg="invalid bit length repeat",i.mode=30;break}r=i.lens[i.have-1],tt=3+(3&B),B>>>=2,D-=2}else if(Rt===17){for(b=yt+3;D<b;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}D-=yt,r=0,tt=3+(7&(B>>>=yt)),B>>>=3,D-=3}else{for(b=yt+7;D<b;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}D-=yt,r=0,tt=11+(127&(B>>>=yt)),B>>>=7,D-=7}if(i.have+tt>i.nlen+i.ndist){k.msg="invalid bit length repeat",i.mode=30;break}for(;tt--;)i.lens[i.have++]=r}}if(i.mode===30)break;if(i.lens[256]===0){k.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,z={bits:i.lenbits},G=s(R,i.lens,0,i.nlen,i.lencode,0,i.work,z),i.lenbits=z.bits,G){k.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,z={bits:i.distbits},G=s(T,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,z),i.distbits=z.bits,G){k.msg="invalid distances set",i.mode=30;break}if(i.mode=20,L===6)break t;case 20:i.mode=21;case 21:if(6<=K&&258<=ot){k.next_out=pt,k.avail_out=ot,k.next_in=Y,k.avail_in=K,i.hold=B,i.bits=D,p(k,nt),pt=k.next_out,ct=k.output,ot=k.avail_out,Y=k.next_in,$=k.input,K=k.avail_in,B=i.hold,D=i.bits,i.mode===12&&(i.back=-1);break}for(i.back=0;kt=(d=i.lencode[B&(1<<i.lenbits)-1])>>>16&255,Rt=65535&d,!((yt=d>>>24)<=D);){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(kt&&!(240&kt)){for(xt=yt,Ct=kt,Lt=Rt;kt=(d=i.lencode[Lt+((B&(1<<xt+Ct)-1)>>xt)])>>>16&255,Rt=65535&d,!(xt+(yt=d>>>24)<=D);){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}B>>>=xt,D-=xt,i.back+=xt}if(B>>>=yt,D-=yt,i.back+=yt,i.length=Rt,kt===0){i.mode=26;break}if(32&kt){i.back=-1,i.mode=12;break}if(64&kt){k.msg="invalid literal/length code",i.mode=30;break}i.extra=15&kt,i.mode=22;case 22:if(i.extra){for(b=i.extra;D<b;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}i.length+=B&(1<<i.extra)-1,B>>>=i.extra,D-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;kt=(d=i.distcode[B&(1<<i.distbits)-1])>>>16&255,Rt=65535&d,!((yt=d>>>24)<=D);){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(!(240&kt)){for(xt=yt,Ct=kt,Lt=Rt;kt=(d=i.distcode[Lt+((B&(1<<xt+Ct)-1)>>xt)])>>>16&255,Rt=65535&d,!(xt+(yt=d>>>24)<=D);){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}B>>>=xt,D-=xt,i.back+=xt}if(B>>>=yt,D-=yt,i.back+=yt,64&kt){k.msg="invalid distance code",i.mode=30;break}i.offset=Rt,i.extra=15&kt,i.mode=24;case 24:if(i.extra){for(b=i.extra;D<b;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}i.offset+=B&(1<<i.extra)-1,B>>>=i.extra,D-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){k.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(ot===0)break t;if(tt=nt-ot,i.offset>tt){if((tt=i.offset-tt)>i.whave&&i.sane){k.msg="invalid distance too far back",i.mode=30;break}At=tt>i.wnext?(tt-=i.wnext,i.wsize-tt):i.wnext-tt,tt>i.length&&(tt=i.length),St=i.window}else St=ct,At=pt-i.offset,tt=i.length;for(ot<tt&&(tt=ot),ot-=tt,i.length-=tt;ct[pt++]=St[At++],--tt;);i.length===0&&(i.mode=21);break;case 26:if(ot===0)break t;ct[pt++]=i.length,ot--,i.mode=21;break;case 27:if(i.wrap){for(;D<32;){if(K===0)break t;K--,B|=$[Y++]<<D,D+=8}if(nt-=ot,k.total_out+=nt,i.total+=nt,nt&&(k.adler=i.check=i.flags?a(i.check,ct,nt,pt-nt):h(i.check,ct,nt,pt-nt)),nt=ot,(i.flags?B:u(B))!==i.check){k.msg="incorrect data check",i.mode=30;break}D=B=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;D<32;){if(K===0)break t;K--,B+=$[Y++]<<D,D+=8}if(B!==(4294967295&i.total)){k.msg="incorrect length check",i.mode=30;break}D=B=0}i.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return f}return k.next_out=pt,k.avail_out=ot,k.next_in=Y,k.avail_in=K,i.hold=B,i.bits=D,(i.wsize||nt!==k.avail_out&&i.mode<30&&(i.mode<27||L!==4))&&V(k,k.output,k.next_out,nt-k.avail_out)?(i.mode=31,-4):(lt-=k.avail_in,nt-=k.avail_out,k.total_in+=lt,k.total_out+=nt,i.total+=nt,i.wrap&&nt&&(k.adler=i.check=i.flags?a(i.check,ct,nt,k.next_out-nt):h(i.check,ct,nt,k.next_out-nt)),k.data_type=i.bits+(i.last?64:0)+(i.mode===12?128:0)+(i.mode===20||i.mode===15?256:0),(lt==0&&nt===0||L===4)&&G===S&&(G=-5),G)},E.inflateEnd=function(k){if(!k||!k.state)return f;var L=k.state;return L.window&&(L.window=null),k.state=null,S},E.inflateGetHeader=function(k,L){var i;return k&&k.state&&2&(i=k.state).wrap?((i.head=L).done=!1,S):f},E.inflateSetDictionary=function(k,L){var i,$=L.length;return k&&k.state?(i=k.state).wrap!==0&&i.mode!==11?f:i.mode===11&&h(1,L,$,0)!==i.check?-3:V(k,L,$,$)?(i.mode=31,-4):(i.havedict=1,S):f},E.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(_,U,E){var o=_("../utils/common"),h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];U.exports=function(R,T,S,f,w,c,m,u){var g,y,A,N,M,F,j,I,W,V=u.bits,k=0,L=0,i=0,$=0,ct=0,Y=0,pt=0,K=0,ot=0,B=0,D=null,lt=0,nt=new o.Buf16(16),tt=new o.Buf16(16),At=null,St=0;for(k=0;k<=15;k++)nt[k]=0;for(L=0;L<f;L++)nt[T[S+L]]++;for(ct=V,$=15;1<=$&&nt[$]===0;$--);if($<ct&&(ct=$),$===0)return w[c++]=20971520,w[c++]=20971520,u.bits=1,0;for(i=1;i<$&&nt[i]===0;i++);for(ct<i&&(ct=i),k=K=1;k<=15;k++)if(K<<=1,(K-=nt[k])<0)return-1;if(0<K&&(R===0||$!==1))return-1;for(tt[1]=0,k=1;k<15;k++)tt[k+1]=tt[k]+nt[k];for(L=0;L<f;L++)T[S+L]!==0&&(m[tt[T[S+L]]++]=L);if(F=R===0?(D=At=m,19):R===1?(D=h,lt-=257,At=a,St-=257,256):(D=p,At=s,-1),k=i,M=c,pt=L=B=0,A=-1,N=(ot=1<<(Y=ct))-1,R===1&&852<ot||R===2&&592<ot)return 1;for(;;){for(j=k-pt,W=m[L]<F?(I=0,m[L]):m[L]>F?(I=At[St+m[L]],D[lt+m[L]]):(I=96,0),g=1<<k-pt,i=y=1<<Y;w[M+(B>>pt)+(y-=g)]=j<<24|I<<16|W|0,y!==0;);for(g=1<<k-1;B&g;)g>>=1;if(g!==0?(B&=g-1,B+=g):B=0,L++,--nt[k]==0){if(k===$)break;k=T[S+m[L]]}if(ct<k&&(B&N)!==A){for(pt===0&&(pt=ct),M+=i,K=1<<(Y=k-pt);Y+pt<$&&!((K-=nt[Y+pt])<=0);)Y++,K<<=1;if(ot+=1<<Y,R===1&&852<ot||R===2&&592<ot)return 1;w[A=B&N]=ct<<24|Y<<16|M-c|0}}return B!==0&&(w[M+B]=k-pt<<24|64<<16|0),u.bits=ct,0}},{"../utils/common":41}],51:[function(_,U,E){U.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(_,U,E){var o=_("../utils/common"),h=0,a=1;function p(d){for(var x=d.length;0<=--x;)d[x]=0}var s=0,R=29,T=256,S=T+1+R,f=30,w=19,c=2*S+1,m=15,u=16,g=7,y=256,A=16,N=17,M=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(S+2));p(V);var k=new Array(2*f);p(k);var L=new Array(512);p(L);var i=new Array(256);p(i);var $=new Array(R);p($);var ct,Y,pt,K=new Array(f);function ot(d,x,Z,X,P){this.static_tree=d,this.extra_bits=x,this.extra_base=Z,this.elems=X,this.max_length=P,this.has_stree=d&&d.length}function B(d,x){this.dyn_tree=d,this.max_code=0,this.stat_desc=x}function D(d){return d<256?L[d]:L[256+(d>>>7)]}function lt(d,x){d.pending_buf[d.pending++]=255&x,d.pending_buf[d.pending++]=x>>>8&255}function nt(d,x,Z){d.bi_valid>u-Z?(d.bi_buf|=x<<d.bi_valid&65535,lt(d,d.bi_buf),d.bi_buf=x>>u-d.bi_valid,d.bi_valid+=Z-u):(d.bi_buf|=x<<d.bi_valid&65535,d.bi_valid+=Z)}function tt(d,x,Z){nt(d,Z[2*x],Z[2*x+1])}function At(d,x){for(var Z=0;Z|=1&d,d>>>=1,Z<<=1,0<--x;);return Z>>>1}function St(d,x,Z){var X,P,Q=new Array(m+1),at=0;for(X=1;X<=m;X++)Q[X]=at=at+Z[X-1]<<1;for(P=0;P<=x;P++){var et=d[2*P+1];et!==0&&(d[2*P]=At(Q[et]++,et))}}function yt(d){var x;for(x=0;x<S;x++)d.dyn_ltree[2*x]=0;for(x=0;x<f;x++)d.dyn_dtree[2*x]=0;for(x=0;x<w;x++)d.bl_tree[2*x]=0;d.dyn_ltree[2*y]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function kt(d){8<d.bi_valid?lt(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function Rt(d,x,Z,X){var P=2*x,Q=2*Z;return d[P]<d[Q]||d[P]===d[Q]&&X[x]<=X[Z]}function xt(d,x,Z){for(var X=d.heap[Z],P=Z<<1;P<=d.heap_len&&(P<d.heap_len&&Rt(x,d.heap[P+1],d.heap[P],d.depth)&&P++,!Rt(x,X,d.heap[P],d.depth));)d.heap[Z]=d.heap[P],Z=P,P<<=1;d.heap[Z]=X}function Ct(d,x,Z){var X,P,Q,at,et=0;if(d.last_lit!==0)for(;X=d.pending_buf[d.d_buf+2*et]<<8|d.pending_buf[d.d_buf+2*et+1],P=d.pending_buf[d.l_buf+et],et++,X===0?tt(d,P,x):(tt(d,(Q=i[P])+T+1,x),(at=F[Q])!==0&&nt(d,P-=$[Q],at),tt(d,Q=D(--X),Z),(at=j[Q])!==0&&nt(d,X-=K[Q],at)),et<d.last_lit;);tt(d,y,x)}function Lt(d,x){var Z,X,P,Q=x.dyn_tree,at=x.stat_desc.static_tree,et=x.stat_desc.has_stree,ft=x.stat_desc.elems,Et=-1;for(d.heap_len=0,d.heap_max=c,Z=0;Z<ft;Z++)Q[2*Z]!==0?(d.heap[++d.heap_len]=Et=Z,d.depth[Z]=0):Q[2*Z+1]=0;for(;d.heap_len<2;)Q[2*(P=d.heap[++d.heap_len]=Et<2?++Et:0)]=1,d.depth[P]=0,d.opt_len--,et&&(d.static_len-=at[2*P+1]);for(x.max_code=Et,Z=d.heap_len>>1;1<=Z;Z--)xt(d,Q,Z);for(P=ft;Z=d.heap[1],d.heap[1]=d.heap[d.heap_len--],xt(d,Q,1),X=d.heap[1],d.heap[--d.heap_max]=Z,d.heap[--d.heap_max]=X,Q[2*P]=Q[2*Z]+Q[2*X],d.depth[P]=(d.depth[Z]>=d.depth[X]?d.depth[Z]:d.depth[X])+1,Q[2*Z+1]=Q[2*X+1]=P,d.heap[1]=P++,xt(d,Q,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(vt,Dt){var Yt,Mt,re,It,_t,le,Bt=Dt.dyn_tree,fe=Dt.max_code,Kt=Dt.stat_desc.static_tree,Oe=Dt.stat_desc.has_stree,Gt=Dt.stat_desc.extra_bits,he=Dt.stat_desc.extra_base,Vt=Dt.stat_desc.max_length,ne=0;for(It=0;It<=m;It++)vt.bl_count[It]=0;for(Bt[2*vt.heap[vt.heap_max]+1]=0,Yt=vt.heap_max+1;Yt<c;Yt++)Vt<(It=Bt[2*Bt[2*(Mt=vt.heap[Yt])+1]+1]+1)&&(It=Vt,ne++),Bt[2*Mt+1]=It,fe<Mt||(vt.bl_count[It]++,_t=0,he<=Mt&&(_t=Gt[Mt-he]),le=Bt[2*Mt],vt.opt_len+=le*(It+_t),Oe&&(vt.static_len+=le*(Kt[2*Mt+1]+_t)));if(ne!==0){do{for(It=Vt-1;vt.bl_count[It]===0;)It--;vt.bl_count[It]--,vt.bl_count[It+1]+=2,vt.bl_count[Vt]--,ne-=2}while(0<ne);for(It=Vt;It!==0;It--)for(Mt=vt.bl_count[It];Mt!==0;)fe<(re=vt.heap[--Yt])||(Bt[2*re+1]!==It&&(vt.opt_len+=(It-Bt[2*re+1])*Bt[2*re],Bt[2*re+1]=It),Mt--)}}(d,x),St(Q,Et,d.bl_count)}function r(d,x,Z){var X,P,Q=-1,at=x[1],et=0,ft=7,Et=4;for(at===0&&(ft=138,Et=3),x[2*(Z+1)+1]=65535,X=0;X<=Z;X++)P=at,at=x[2*(X+1)+1],++et<ft&&P===at||(et<Et?d.bl_tree[2*P]+=et:P!==0?(P!==Q&&d.bl_tree[2*P]++,d.bl_tree[2*A]++):et<=10?d.bl_tree[2*N]++:d.bl_tree[2*M]++,Q=P,Et=(et=0)===at?(ft=138,3):P===at?(ft=6,3):(ft=7,4))}function G(d,x,Z){var X,P,Q=-1,at=x[1],et=0,ft=7,Et=4;for(at===0&&(ft=138,Et=3),X=0;X<=Z;X++)if(P=at,at=x[2*(X+1)+1],!(++et<ft&&P===at)){if(et<Et)for(;tt(d,P,d.bl_tree),--et!=0;);else P!==0?(P!==Q&&(tt(d,P,d.bl_tree),et--),tt(d,A,d.bl_tree),nt(d,et-3,2)):et<=10?(tt(d,N,d.bl_tree),nt(d,et-3,3)):(tt(d,M,d.bl_tree),nt(d,et-11,7));Q=P,Et=(et=0)===at?(ft=138,3):P===at?(ft=6,3):(ft=7,4)}}p(K);var z=!1;function b(d,x,Z,X){nt(d,(s<<1)+(X?1:0),3),function(P,Q,at,et){kt(P),lt(P,at),lt(P,~at),o.arraySet(P.pending_buf,P.window,Q,at,P.pending),P.pending+=at}(d,x,Z)}E._tr_init=function(d){z||(function(){var x,Z,X,P,Q,at=new Array(m+1);for(P=X=0;P<R-1;P++)for($[P]=X,x=0;x<1<<F[P];x++)i[X++]=P;for(i[X-1]=P,P=Q=0;P<16;P++)for(K[P]=Q,x=0;x<1<<j[P];x++)L[Q++]=P;for(Q>>=7;P<f;P++)for(K[P]=Q<<7,x=0;x<1<<j[P]-7;x++)L[256+Q++]=P;for(Z=0;Z<=m;Z++)at[Z]=0;for(x=0;x<=143;)V[2*x+1]=8,x++,at[8]++;for(;x<=255;)V[2*x+1]=9,x++,at[9]++;for(;x<=279;)V[2*x+1]=7,x++,at[7]++;for(;x<=287;)V[2*x+1]=8,x++,at[8]++;for(St(V,S+1,at),x=0;x<f;x++)k[2*x+1]=5,k[2*x]=At(x,5);ct=new ot(V,F,T+1,S,m),Y=new ot(k,j,0,f,m),pt=new ot(new Array(0),I,0,w,g)}(),z=!0),d.l_desc=new B(d.dyn_ltree,ct),d.d_desc=new B(d.dyn_dtree,Y),d.bl_desc=new B(d.bl_tree,pt),d.bi_buf=0,d.bi_valid=0,yt(d)},E._tr_stored_block=b,E._tr_flush_block=function(d,x,Z,X){var P,Q,at=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=function(et){var ft,Et=4093624447;for(ft=0;ft<=31;ft++,Et>>>=1)if(1&Et&&et.dyn_ltree[2*ft]!==0)return h;if(et.dyn_ltree[18]!==0||et.dyn_ltree[20]!==0||et.dyn_ltree[26]!==0)return a;for(ft=32;ft<T;ft++)if(et.dyn_ltree[2*ft]!==0)return a;return h}(d)),Lt(d,d.l_desc),Lt(d,d.d_desc),at=function(et){var ft;for(r(et,et.dyn_ltree,et.l_desc.max_code),r(et,et.dyn_dtree,et.d_desc.max_code),Lt(et,et.bl_desc),ft=w-1;3<=ft&&et.bl_tree[2*W[ft]+1]===0;ft--);return et.opt_len+=3*(ft+1)+5+5+4,ft}(d),P=d.opt_len+3+7>>>3,(Q=d.static_len+3+7>>>3)<=P&&(P=Q)):P=Q=Z+5,Z+4<=P&&x!==-1?b(d,x,Z,X):d.strategy===4||Q===P?(nt(d,2+(X?1:0),3),Ct(d,V,k)):(nt(d,4+(X?1:0),3),function(et,ft,Et,vt){var Dt;for(nt(et,ft-257,5),nt(et,Et-1,5),nt(et,vt-4,4),Dt=0;Dt<vt;Dt++)nt(et,et.bl_tree[2*W[Dt]+1],3);G(et,et.dyn_ltree,ft-1),G(et,et.dyn_dtree,Et-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,at+1),Ct(d,d.dyn_ltree,d.dyn_dtree)),yt(d),X&&kt(d)},E._tr_tally=function(d,x,Z){return d.pending_buf[d.d_buf+2*d.last_lit]=x>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&x,d.pending_buf[d.l_buf+d.last_lit]=255&Z,d.last_lit++,x===0?d.dyn_ltree[2*Z]++:(d.matches++,x--,d.dyn_ltree[2*(i[Z]+T+1)]++,d.dyn_dtree[2*D(x)]++),d.last_lit===d.lit_bufsize-1},E._tr_align=function(d){nt(d,2,3),tt(d,y,V),function(x){x.bi_valid===16?(lt(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(d)}},{"../utils/common":41}],53:[function(_,U,E){U.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(_,U,E){(function(o){(function(h,a){if(!h.setImmediate){var p,s,R,T,S=1,f={},w=!1,c=h.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(h);m=m&&m.setTimeout?m:h,p={}.toString.call(h.process)==="[object process]"?function(A){process.nextTick(function(){g(A)})}:function(){if(h.postMessage&&!h.importScripts){var A=!0,N=h.onmessage;return h.onmessage=function(){A=!1},h.postMessage("","*"),h.onmessage=N,A}}()?(T="setImmediate$"+Math.random()+"$",h.addEventListener?h.addEventListener("message",y,!1):h.attachEvent("onmessage",y),function(A){h.postMessage(T+A,"*")}):h.MessageChannel?((R=new MessageChannel).port1.onmessage=function(A){g(A.data)},function(A){R.port2.postMessage(A)}):c&&"onreadystatechange"in c.createElement("script")?(s=c.documentElement,function(A){var N=c.createElement("script");N.onreadystatechange=function(){g(A),N.onreadystatechange=null,s.removeChild(N),N=null},s.appendChild(N)}):function(A){setTimeout(g,0,A)},m.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var N=new Array(arguments.length-1),M=0;M<N.length;M++)N[M]=arguments[M+1];var F={callback:A,args:N};return f[S]=F,p(S),S++},m.clearImmediate=u}function u(A){delete f[A]}function g(A){if(w)setTimeout(g,0,A);else{var N=f[A];if(N){w=!0;try{(function(M){var F=M.callback,j=M.args;switch(j.length){case 0:F();break;case 1:F(j[0]);break;case 2:F(j[0],j[1]);break;case 3:F(j[0],j[1],j[2]);break;default:F.apply(a,j)}})(N)}finally{u(A),w=!1}}}}function y(A){A.source===h&&typeof A.data=="string"&&A.data.indexOf(T)===0&&g(+A.data.slice(T.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof xe<"u"?xe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Nr);var An=Nr.exports;const Ye=Sr(An);async function Nn(J,st,_,U,E){rt("Starting conversion to NewPipe format...");let o,h=new Ye,a="",p=null,s=null;const R=E||null;let T=!1;if(_==="merge"&&J){rt("Loading existing NewPipe backup...");const u=await J.arrayBuffer(),g=await Ye.loadAsync(u),y=g.file("newpipe.db");if(y){const M=await y.async("uint8array");o=new U.Database(M),rt("Database loaded. Running integrity check...");const F=o.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");F&&F[0]&&F[0].values&&rt(`Existing NewPipe database contains: ${F[0].values.flat().join(", ")} tables.`,"schema");try{Tn(o);try{const j=o.exec("PRAGMA table_info('stream_state')")||[],I=o.exec("PRAGMA foreign_key_list('stream_state')")||[],W=o.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,j.length>0&&(a+=JSON.stringify(j[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,I.length>0&&(a+=JSON.stringify(I[0],null,2)+`
`),a+=`
CREATE statement:
`,W.length>0&&W[0].values&&W[0].values.length>0&&(a+=W[0].values[0][0]+`
`)}catch(j){a+="Failed to collect stream_state debug info: "+(j.message||j.toString())+`
`}}catch(j){rt("Warning: failed to ensure stream_state schema: "+(j.message||j.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const A=g.file("preferences.json");A&&(p=await A.async("string"));const N=g.file("newpipe.settings");N&&(s=await N.async("blob"))}else{rt("Creating new NewPipe database..."),o=new U.Database,kn(o);try{const u=o.exec("PRAGMA table_info('stream_state')")||[],g=o.exec("PRAGMA foreign_key_list('stream_state')")||[],y=o.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,u.length>0&&(a+=JSON.stringify(u[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,g.length>0&&(a+=JSON.stringify(g[0],null,2)+`
`),a+=`
CREATE statement:
`,y.length>0&&y[0].values&&y[0].values.length>0&&(a+=y[0].values[0][0]+`
`)}catch(u){a+="Failed to collect stream_state debug info (new DB): "+(u.message||u.toString())+`
`}}rt("Parsing LibreTube JSON...");const S=await st.text(),f=JSON.parse(S);o.run("BEGIN TRANSACTION");try{rt("Processing Subscriptions..."),_==="merge"&&o.run(`DELETE FROM subscriptions WHERE service_id = ${Ht}`);let u=0;if(f.subscriptions){const g=o.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");f.subscriptions.forEach(y=>{try{const A=y.url||`https://www.youtube.com/channel/${y.channelId}`,N=y.name||"Unknown",M=y.avatar||y.avatarUrl||null;if(!A.includes("youtube.com")&&!A.includes("youtu.be")){rt(`Dropped non-YouTube subscription: ${N} (${A})`,"warn");return}g.run([Ht,A,N,M,0,"",0]),u++}catch(A){rt(`ERROR inserting subscription ${y.name}: ${A.message||A.toString()}`,"err")}}),g.free()}rt(`Inserted ${u} subscriptions.`)}catch(u){throw rt(`FATAL ERROR during Subscriptions phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Playlists...");let u=!1;const g=E||null;_==="merge"&&(g==="only_libretube"?(o.run("DELETE FROM playlist_stream_join"),o.run("DELETE FROM playlists"),o.run("DELETE FROM remote_playlists"),rt("Cleared existing playlists; will import only LibreTube playlists.")):g==="only_newpipe"?(u=!0,rt("Preserving existing NewPipe playlists; skipping import from LibreTube.")):rt(`Merging playlists with behavior: ${g||"default (LibreTube precedence)"}`));let y=0;if(f.localPlaylists&&!u){const A=o.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),N=o.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),M=o.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)");for(const F of f.localPlaylists){const j=F.playlist.name||"Untitled";try{const I=o.exec(`SELECT uid FROM playlists WHERE name = '${j.replace(/'/g,"''")}'`);if(I.length>0)if(g==="merge_lt_precedence"){const L=I[0].values[0][0];try{o.run(`DELETE FROM playlist_stream_join WHERE playlist_id = ${L}`),o.run(`DELETE FROM playlists WHERE uid = ${L}`),rt(`Replaced existing local playlist: ${j}`,"schema")}catch(i){rt(`WARN: failed to replace playlist ${j}: ${i.message||i.toString()}`,"warn")}}else{rt(`Skipping duplicate local playlist: ${j}`,"warn");continue}N.run([j,0,-1,y]);const V=o.exec("SELECT last_insert_rowid()")[0].values[0][0];let k=0;for(const L of F.videos){const i=`https://www.youtube.com/watch?v=${L.videoId}`;if(!L.videoId){rt(`Skipped video in playlist ${j} due to missing videoId.`,"warn");continue}try{const $=L.title||"Unknown",ct=L.uploader||"Unknown",Y=L.duration||0,pt=L.uploadDate?new Date(L.uploadDate).getTime()/1e3:null,K=L.thumbnailUrl||null;A.run([Ht,i,$,"VIDEO_STREAM",Y,ct,pt,K]);const ot=o.exec(`SELECT uid FROM streams WHERE service_id=${Ht} AND url='${i.replace(/'/g,"''")}'`);if(ot.length>0&&ot[0].values.length>0){const B=ot[0].values[0][0],D=k;if(M.run([V,B,k++]),D===0)try{o.run(`UPDATE playlists SET thumbnail_stream_id = ${B} WHERE uid = ${V}`)}catch(lt){rt(`WARN: failed to set playlist thumbnail for ${j}: ${lt.message||lt.toString()}`,"warn")}}else rt(`Warning: Could not find/insert stream for video ${$}`,"warn")}catch($){rt(`ERROR processing video "${L.title}" in playlist "${j}": ${$.message||$.toString()}`,"err")}}y++}catch(I){throw rt(`FATAL ERROR processing playlist "${j}": ${I.message||I.toString()}`,"err"),I}}A.free(),N.free(),M.free()}rt(`Processed ${y} local playlists.`)}catch(u){throw rt(`FATAL ERROR during Local Playlists phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Remote Playlist Bookmarks...");let u=0;const g=o.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)");if(f.playlistBookmarks&&!T){for(const y of f.playlistBookmarks)try{const A=y.url||(y.playlistId?`https://www.youtube.com/playlist?list=${y.playlistId}`:null);if(!A||!A.includes("youtube.com")&&!A.includes("youtu.be")){rt(`Dropped non-YouTube remote playlist: ${y.playlistName||"Untitled"}`,"warn");continue}const N=y.playlistName||y.name||"Untitled",M=y.thumbnailUrl||null,F=y.uploader||"Unknown",j=typeof y.videos=="number"?y.videos:0;try{const I=o.exec(`SELECT uid FROM remote_playlists WHERE url = '${A.replace(/'/g,"''")}' OR name = '${N.replace(/'/g,"''")}'`);if(I&&I.length>0&&I[0].values.length>0){if(R==="merge_np_precedence")continue;if(R==="merge_lt_precedence"){const W=I[0].values[0][0];o.run(`DELETE FROM remote_playlists WHERE uid = ${W}`)}}}catch{}g.run([Ht,N,A,M,F,u++,j])}catch(A){rt(`ERROR inserting remote playlist ${y.playlistName||"Untitled"}: ${A.message||A.toString()}`,"err")}g.free()}rt(`Processed ${u} remote playlist bookmarks.`)}catch(u){throw rt(`FATAL ERROR during Remote Playlists phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Watch History...");let u=0,g=0,y=0;const A=f.history||f.watchHistory||f.watch_history||f.watch_history_items||[],N=new Map;if(f.watchPositions&&Array.isArray(f.watchPositions)){for(const M of f.watchPositions)if(M&&M.videoId){const F=Number(M.position||0);N.set(String(M.videoId),F)}}if(A&&A.length>0){const M=o.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),F=o.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),j=o.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const I of A)try{const W=I.videoId||I.videoIdStr||I.id||I.url&&(I.url.match(/v=([^&]+)/)||[])[1];if(!W)continue;const V=`https://www.youtube.com/watch?v=${W}`,k=I.title||I.name||"Unknown",L=I.uploader||I.uploaderName||"Unknown",i=I.duration||I.length||0,$=I.uploadDate?isNaN(Number(I.uploadDate))?Math.floor(new Date(I.uploadDate).getTime()/1e3):Math.floor(Number(I.uploadDate)):null,ct=I.thumbnailUrl||I.thumbnail||null;let Y=0;const pt=N.get(W),K="9223372036854775807";if(pt!=null)String(pt)===K?Y=0:Y=Math.floor(Number(pt)||0);else{const nt=I.currentTime||I.position||I.progress||0;Y=Math.floor(Number(nt||0)*1e3)}let ot=I.accessDate||I.accessedAt||I.lastWatched||I.timestamp||I.date||I.time,B;if(!ot)B=Date.now();else if(typeof ot=="number")B=ot>1e12?Math.floor(ot):Math.floor(ot*1e3);else{const nt=Date.parse(String(ot));B=isNaN(nt)?Date.now():nt}const D=Number(I.repeatCount||I.watchCount||I.playCount||I.repeat_count||1);M.run([Ht,V,k,"VIDEO_STREAM",i,L,$,ct]);const lt=o.exec(`SELECT uid FROM streams WHERE service_id=${Ht} AND url='${V.replace(/'/g,"''")}'`);if(lt.length>0&&lt[0].values.length>0){const nt=lt[0].values[0][0];try{F.run([Y,nt])}catch(tt){rt(`WARN: failed to write stream_state for ${W}: ${tt.message||tt.toString()}`,"warn")}try{if(_==="merge"){const tt=B-1e3,At=B+1e3,St=o.exec(`SELECT access_date, repeat_count FROM stream_history WHERE stream_id = ${nt} AND access_date BETWEEN ${tt} AND ${At}`);if(St&&St.length>0&&St[0].values.length>0){const yt=Number(St[0].values[0][0]),Rt=(Number(St[0].values[0][1])||0)+D;o.run(`UPDATE stream_history SET repeat_count = ${Rt} WHERE stream_id = ${nt} AND access_date = ${yt}`),y++}else j.run([nt,B,D]),g++}else j.run([nt,B,D]),g++}catch(tt){rt(`WARN: failed to write stream_history for ${W}: ${tt.message||tt.toString()}`,"warn")}u++}}catch(W){rt(`ERROR processing history item: ${W.message||W.toString()}`,"warn")}M.free(),F.free(),j.free()}rt(`Processed ${u} history items (added: ${g}, duplicates merged: ${y}).`)}catch(u){rt(`Error processing history: ${u.message}`,"err")}try{o.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),rt("Inserted room_master_table identity.")}catch(u){rt("Error inserting room_master_table: "+u.message,"warn")}try{rt("Committing transaction..."),o.run("COMMIT")}catch(u){throw rt(`FATAL ERROR on COMMIT: ${u.message||u.toString()}`,"err"),u}rt("Exporting database...");const w=o.export();if(h.file("newpipe.db",w),p?(h.file("preferences.json",p),rt("Preserved existing preferences.json.")):(h.file("preferences.json",JSON.stringify(Sn,null,2)),rt("Created default preferences.json.")),s&&(h.file("newpipe.settings",s),rt("Preserved existing newpipe.settings.")),h.file("stream_state_debug.txt",a||"No stream_state debug information collected."),rt("Attached stream_state_debug.txt to zip for inspection.","schema"),a){const u=a.split(`
`).slice(0,12).join(`
`);rt(`stream_state_debug preview:
`+u,"schema")}const c=await h.generateAsync({type:"blob"}),m=He();Xe(c,"newpipe_converted.zip",m),rt("Done! File downloaded.","info")}async function Rn(J,st,_,U,E){rt("Starting conversion to LibreTube format...");let o={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[]};const h=E||null;let a=!1;if(_==="merge"&&st){rt("Reading target LibreTube file...");const y=await st.text();o=JSON.parse(y),h==="only_newpipe"?(o.subscriptions=[],o.playlistBookmarks=[],o.localPlaylists=[],rt("Cleared target LibreTube playlists; will import only NewPipe playlists.")):h==="only_libretube"?(a=!0,rt("Preserving existing LibreTube playlists; will skip importing NewPipe playlists.")):(o.subscriptions=o.subscriptions||[],o.playlistBookmarks=o.playlistBookmarks||[],o.localPlaylists=o.localPlaylists||[],rt(`Merging playlists with behavior: ${h||"default (NewPipe precedence)"}`))}rt("Reading NewPipe backup...");const p=await J.arrayBuffer(),R=(await Ye.loadAsync(p)).file("newpipe.db");if(!R)throw new Error("NewPipe ZIP must contain newpipe.db");const T=await R.async("uint8array"),S=new U.Database(T);rt("NewPipe database loaded.");try{let y="";const A=S.exec("PRAGMA table_info('stream_state')")||[],N=S.exec("PRAGMA foreign_key_list('stream_state')")||[],M=S.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];y+=`PRAGMA table_info("stream_state"):
`,A.length>0&&(y+=JSON.stringify(A[0],null,2)+`
`),y+=`
PRAGMA foreign_key_list("stream_state"):
`,N.length>0&&(y+=JSON.stringify(N[0],null,2)+`
`),y+=`
CREATE statement:
`,M.length>0&&M[0].values&&M[0].values.length>0&&(y+=M[0].values[0][0]+`
`);const F=new Blob([y||"No stream_state debug info collected."],{type:"text/plain"}),j=He();Xe(F,"stream_state_debug_input.txt",j),rt("Downloaded separate stream_state debug file for input NewPipe DB.","schema")}catch(y){rt("Failed to collect input stream_state debug: "+(y.message||y.toString()),"warn")}rt("Extracting Subscriptions...");const f=S.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${Ht}`);f.length>0&&f[0].values.forEach(A=>{const N=A[0];if(!N||!N.includes("youtube.com")&&!N.includes("youtu.be")){rt(`Dropped non-YouTube subscription URL: ${A[1]}`,"warn");return}let M="";const F=N.match(/channel\/([\w-]+)/),j=N.match(/user\/([\w-]+)/);F?M=F[1]:j&&(M=j[1]),o.subscriptions.push({channelId:M,url:N,name:A[1],avatar:A[2],verified:!1})}),rt(`Extracted ${o.subscriptions.length} YouTube subscriptions.`),rt("Extracting Remote Playlists...");const w=S.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${Ht}`);w.length>0&&!a&&w[0].values.forEach(A=>{const N=A[1];if(!N||!N.includes("youtube.com")&&!N.includes("youtu.be")){rt(`Dropped non-YouTube remote playlist URL: ${A[0]}`,"warn");return}const M=N.match(/[?&]list=([^&]+)/),F=M?M[1]:"";o.playlistBookmarks.push({playlistId:F,playlistName:A[0],thumbnailUrl:A[3],uploader:A[2],uploaderUrl:"",videos:A[4]})}),rt(`Extracted ${o.playlistBookmarks.length} remote playlist bookmarks.`),rt("Extracting Local Playlists...");const c=S.exec("SELECT uid, name FROM playlists");if(c.length>0&&!a)for(const y of c[0].values){const A=y[0],N=y[1],M=[],F=S.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${A} AND s.service_id = ${Ht}
                    ORDER BY j.join_index ASC
                `);if(F.length>0&&F[0].values.forEach(j=>{const I=j[0],W=I.match(/v=([^&]+)/),V=W?W[1]:"";if(!V){rt(`Warning: Skipped stream in playlist "${N}" due to unparseable URL: ${I}`,"warn");return}M.push({id:V,playlistId:A,videoId:V,title:j[1],uploadDate:j[4]?new Date(j[4]*1e3).toISOString().split("T")[0]:"1970-01-01",uploader:j[3],thumbnailUrl:j[5],duration:j[2]})}),M.length>0||N){const j=o.localPlaylists.findIndex(I=>I.playlist&&I.playlist.name===N);if(j>=0)if(h==="merge_np_precedence")o.localPlaylists.splice(j,1);else continue;o.localPlaylists.push({playlist:{id:A,name:N,thumbnailUrl:M.length>0?M[0].thumbnailUrl:""},videos:M})}}rt(`Extracted ${o.localPlaylists.length} local playlists.`);const m=JSON.stringify(o,null,2),u=new Blob([m],{type:"application/json"}),g=He();Xe(u,"libretube_converted.json",g),rt("Done! File downloaded.","info")}let Ke;window.onload=async()=>{rt("Initializing SQL.js...");try{Ke=await En(),rt("SQL.js ready.")}catch(J){rt("Error loading SQL.js: "+(J.message||J.toString()),"err")}Rr(),xn()};function Rr(){const J=document.querySelector('input[name="mode"]:checked'),st=J?J.value:"convert",_=document.getElementById("file-newpipe"),U=document.getElementById("file-libretube"),E=document.getElementById("merge-controls"),o=document.getElementById("convert-controls");!_||!U||!E||!o||(st==="merge"?(E.style.display="",o.style.display="none",_.disabled=!1,U.disabled=!1):(E.style.display="none",o.style.display="",_.disabled=!1,U.disabled=!1))}async function xr(J){var o,h;const st=document.querySelector('input[name="mode"]:checked'),_=st?st.value:"convert",U=(o=document.getElementById("file-newpipe").files)==null?void 0:o[0],E=(h=document.getElementById("file-libretube").files)==null?void 0:h[0];if(_==="merge"&&(!U||!E))return rt("Merge mode requires BOTH files.","err");if(_==="convert"){if(J==="to_newpipe"&&!E)return rt("Missing LibreTube source file.","err");if(J==="to_libretube"&&!U)return rt("Missing NewPipe source file.","err")}try{document.querySelectorAll(".controls button").forEach(s=>s.disabled=!0);const a=document.getElementById("playlist-behavior"),p=a?a.value:void 0;J==="to_newpipe"?await Nn(U,E,_,Ke,p):await Rn(U,E,_,Ke,p)}catch(a){rt(`FATAL ERROR: ${a.message||a.toString()||"An unknown error occurred"}`,"err"),a.stack?rt(`Stack Trace: ${a.stack}`,"err"):rt(`Error Object: ${a.toString()}`,"err"),console.error(a)}finally{document.querySelectorAll(".controls button").forEach(a=>a.disabled=!1)}}window.processBackup=xr;window.updateUI=Rr;window.addEventListener("DOMContentLoaded",()=>{const J=document.getElementById("btn-merge"),st=document.getElementById("merge-direction"),_=document.getElementById("playlist-behavior");J&&st&&_&&(_.value=st.checked?"merge_np_precedence":"merge_lt_precedence",st.addEventListener("change",()=>{st.checked?_.value="merge_np_precedence":_.value="merge_lt_precedence"}),J.addEventListener("click",async()=>{const U=st.checked?"to_libretube":"to_newpipe";await xr(U)}))});function xn(){document.querySelectorAll(".drop-zone").forEach(J=>{const st=J.querySelector('input[type="file"]'),_=J.querySelector(".file-name");st&&(J.addEventListener("click",U=>{U.target!==st&&st.click()}),J.addEventListener("keydown",U=>{(U.key==="Enter"||U.key===" ")&&(U.preventDefault(),st.click())}),J.addEventListener("dragover",U=>{U.preventDefault(),J.classList.add("active")}),J.addEventListener("dragleave",()=>{J.classList.remove("active")}),J.addEventListener("drop",U=>{U.preventDefault(),J.classList.remove("active");const E=U.dataTransfer&&U.dataTransfer.files;if(E&&E.length)try{const o=new DataTransfer;for(let h=0;h<E.length;h++)o.items.add(E[h]);st.files=o.files,st.dispatchEvent(new Event("change",{bubbles:!0}))}catch(o){console.warn("Could not set input.files programmatically",o)}}),st.addEventListener("change",()=>{const U=st.files&&st.files[0];_&&(_.textContent=U?U.name:"")}))})}
//# sourceMappingURL=index-D7zrPi6t.js.map

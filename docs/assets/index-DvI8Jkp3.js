var wn=Object.defineProperty;var vn=(X,tt,d)=>tt in X?wn(X,tt,{enumerable:!0,configurable:!0,writable:!0,value:d}):X[tt]=d;var ee=(X,tt,d)=>vn(X,typeof tt!="symbol"?tt+"":tt,d);(function(){const tt=document.createElement("link").relList;if(tt&&tt.supports&&tt.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))D(E);new MutationObserver(E=>{for(const l of E)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&D(c)}).observe(document,{childList:!0,subtree:!0});function d(E){const l={};return E.integrity&&(l.integrity=E.integrity),E.referrerPolicy&&(l.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?l.credentials="include":E.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function D(E){if(E.ep)return;E.ep=!0;const l=d(E);fetch(E.href,l)}})();function rt(X,tt="info"){const d=document.getElementById("debug-console");if(!d)return;const D=document.createElement("div");D.textContent=`[${new Date().toLocaleTimeString()}] ${X}`,tt==="err"?D.className="log-err":tt==="warn"?D.className="log-warn":tt==="schema"?D.className="log-schema":D.className="log-info",d.appendChild(D),d.scrollTop=d.scrollHeight}var Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rr(X){return X&&X.__esModule&&Object.prototype.hasOwnProperty.call(X,"default")?X.default:X}function En(X){if(X.__esModule)return X;var tt=X.default;if(typeof tt=="function"){var d=function D(){return this instanceof D?Reflect.construct(tt,arguments,this.constructor):tt.apply(this,arguments)};d.prototype=tt.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(X).forEach(function(D){var E=Object.getOwnPropertyDescriptor(X,D);Object.defineProperty(d,D,E.get?E:{enumerable:!0,get:function(){return X[D]}})}),d}var xr={exports:{}};const kn={},Sn=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),Sr=En(Sn);(function(X,tt){var d=void 0,D=function(E){return d||(d=new Promise(function(l,c){var a=typeof E<"u"?E:{},_=a.onAbort;a.onAbort=function(t){c(new Error(t)),_&&_(t)},a.postRun=a.postRun||[],a.postRun.push(function(){l(a)}),X=void 0;var s;s||(s=typeof a<"u"?a:{});var N=typeof window=="object",k=typeof WorkerGlobalScope<"u",T=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";s.onRuntimeInitialized=function(){function t(L,Y){switch(typeof Y){case"boolean":yn(L,Y?1:0);break;case"number":mn(L,Y);break;case"string":_n(L,Y,-1,-1);break;case"object":if(Y===null)wr(L);else if(Y.length!=null){var ct=Re(Y,Ae);gn(L,ct,Y.length,-1),xe(ct)}else Ie(L,"Wrong API use : tried to return a value of an unknown type ("+Y+").",-1);break;default:wr(L)}}function e(L,Y){for(var ct=[],mt=0;mt<L;mt+=1){var gt=Ct(Y+4*mt,"i32"),St=cn(gt);if(St===1||St===2)gt=pn(gt);else if(St===3)gt=hn(gt);else if(St===4){St=gt,gt=fn(St),St=dn(St);for(var $t=new Uint8Array(gt),qt=0;qt<gt;qt+=1)$t[qt]=q[St+qt];gt=$t}else gt=null;ct.push(gt)}return ct}function n(L,Y){this.Qa=L,this.db=Y,this.Oa=1,this.lb=[]}function o(L,Y){if(this.db=Y,Y=ft(L)+1,this.eb=Ze(Y),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Et(L,V,this.eb,Y),this.kb=this.eb,this.Za=this.pb=null}function v(L){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),L!=null){var Y=this.filename,ct="/",mt=Y;if(ct&&(ct=typeof ct=="string"?ct:Pe(ct),mt=Y?O(ct+"/"+Y):ct),Y=ue(!0,!0),mt=Fr(mt,Y),L){if(typeof L=="string"){ct=Array(L.length);for(var gt=0,St=L.length;gt<St;++gt)ct[gt]=L.charCodeAt(gt);L=ct}ke(mt,Y|146),ct=fe(mt,577),cr(ct,L,0,L.length,0),je(ct),ke(mt,Y)}}this.handleError(ht(this.filename,U)),this.db=Ct(U,"i32"),Er(this.db),this.fb={},this.Sa={}}var U=te(4),$=s.cwrap,ht=$("sqlite3_open","number",["string","number"]),wt=$("sqlite3_close_v2","number",["number"]),yt=$("sqlite3_exec","number",["number","string","number","number","number"]),Ot=$("sqlite3_changes","number",["number"]),Ut=$("sqlite3_prepare_v2","number",["number","string","number","number","number"]),mr=$("sqlite3_sql","string",["number"]),Hr=$("sqlite3_normalized_sql","string",["number"]),_r=$("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Zr=$("sqlite3_bind_text","number",["number","number","number","number","number"]),gr=$("sqlite3_bind_blob","number",["number","number","number","number","number"]),Xr=$("sqlite3_bind_double","number",["number","number","number"]),Yr=$("sqlite3_bind_int","number",["number","number","number"]),Kr=$("sqlite3_bind_parameter_index","number",["number","string"]),Vr=$("sqlite3_step","number",["number"]),Qr=$("sqlite3_errmsg","string",["number"]),Jr=$("sqlite3_column_count","number",["number"]),tn=$("sqlite3_data_count","number",["number"]),en=$("sqlite3_column_double","number",["number","number"]),yr=$("sqlite3_column_text","string",["number","number"]),rn=$("sqlite3_column_blob","number",["number","number"]),nn=$("sqlite3_column_bytes","number",["number","number"]),sn=$("sqlite3_column_type","number",["number","number"]),an=$("sqlite3_column_name","string",["number","number"]),on=$("sqlite3_reset","number",["number"]),ln=$("sqlite3_clear_bindings","number",["number"]),un=$("sqlite3_finalize","number",["number"]),br=$("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),cn=$("sqlite3_value_type","number",["number"]),fn=$("sqlite3_value_bytes","number",["number"]),hn=$("sqlite3_value_text","string",["number"]),dn=$("sqlite3_value_blob","number",["number"]),pn=$("sqlite3_value_double","number",["number"]),mn=$("sqlite3_result_double","",["number","number"]),wr=$("sqlite3_result_null","",["number"]),_n=$("sqlite3_result_text","",["number","string","number","number"]),gn=$("sqlite3_result_blob","",["number","number","number","number"]),yn=$("sqlite3_result_int","",["number","number"]),Ie=$("sqlite3_result_error","",["number","string","number"]),vr=$("sqlite3_aggregate_context","number",["number","number"]),Er=$("RegisterExtensionFunctions","number",["number"]),kr=$("sqlite3_update_hook","number",["number","number","number"]);n.prototype.bind=function(L){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(L)?this.Cb(L):L!=null&&typeof L=="object"?this.Db(L):!0},n.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var L=Vr(this.Qa);switch(L){case 100:return!0;case 101:return!1;default:throw this.db.handleError(L)}},n.prototype.wb=function(L){return L==null&&(L=this.Oa,this.Oa+=1),en(this.Qa,L)},n.prototype.Gb=function(L){if(L==null&&(L=this.Oa,this.Oa+=1),L=yr(this.Qa,L),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(L)},n.prototype.Hb=function(L){return L==null&&(L=this.Oa,this.Oa+=1),yr(this.Qa,L)},n.prototype.getBlob=function(L){L==null&&(L=this.Oa,this.Oa+=1);var Y=nn(this.Qa,L);L=rn(this.Qa,L);for(var ct=new Uint8Array(Y),mt=0;mt<Y;mt+=1)ct[mt]=q[L+mt];return ct},n.prototype.get=function(L,Y){Y=Y||{},L!=null&&this.bind(L)&&this.step(),L=[];for(var ct=tn(this.Qa),mt=0;mt<ct;mt+=1)switch(sn(this.Qa,mt)){case 1:var gt=Y.useBigInt?this.Gb(mt):this.wb(mt);L.push(gt);break;case 2:L.push(this.wb(mt));break;case 3:L.push(this.Hb(mt));break;case 4:L.push(this.getBlob(mt));break;default:L.push(null)}return L},n.prototype.getColumnNames=function(){for(var L=[],Y=Jr(this.Qa),ct=0;ct<Y;ct+=1)L.push(an(this.Qa,ct));return L},n.prototype.getAsObject=function(L,Y){L=this.get(L,Y),Y=this.getColumnNames();for(var ct={},mt=0;mt<Y.length;mt+=1)ct[Y[mt]]=L[mt];return ct},n.prototype.getSQL=function(){return mr(this.Qa)},n.prototype.getNormalizedSQL=function(){return Hr(this.Qa)},n.prototype.run=function(L){return L!=null&&this.bind(L),this.step(),this.reset()},n.prototype.sb=function(L,Y){Y==null&&(Y=this.Oa,this.Oa+=1),L=vt(L);var ct=Re(L,Ae);this.lb.push(ct),this.db.handleError(Zr(this.Qa,Y,ct,L.length-1,0))},n.prototype.Bb=function(L,Y){Y==null&&(Y=this.Oa,this.Oa+=1);var ct=Re(L,Ae);this.lb.push(ct),this.db.handleError(gr(this.Qa,Y,ct,L.length,0))},n.prototype.rb=function(L,Y){Y==null&&(Y=this.Oa,this.Oa+=1),this.db.handleError((L===(L|0)?Yr:Xr)(this.Qa,Y,L))},n.prototype.Eb=function(L){L==null&&(L=this.Oa,this.Oa+=1),gr(this.Qa,L,0,0,0)},n.prototype.tb=function(L,Y){switch(Y==null&&(Y=this.Oa,this.Oa+=1),typeof L){case"string":this.sb(L,Y);return;case"number":this.rb(L,Y);return;case"bigint":this.sb(L.toString(),Y);return;case"boolean":this.rb(L+0,Y);return;case"object":if(L===null){this.Eb(Y);return}if(L.length!=null){this.Bb(L,Y);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+L+")."},n.prototype.Db=function(L){var Y=this;return Object.keys(L).forEach(function(ct){var mt=Kr(Y.Qa,ct);mt!==0&&Y.tb(L[ct],mt)}),!0},n.prototype.Cb=function(L){for(var Y=0;Y<L.length;Y+=1)this.tb(L[Y],Y+1);return!0},n.prototype.reset=function(){return this.freemem(),ln(this.Qa)===0&&on(this.Qa)===0},n.prototype.freemem=function(){for(var L;(L=this.lb.pop())!==void 0;)xe(L)},n.prototype.free=function(){this.freemem();var L=un(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,L},o.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var L=ye(),Y=te(4);r(U),r(Y);try{this.db.handleError(_r(this.db.db,this.kb,-1,U,Y)),this.kb=Ct(Y,"i32");var ct=Ct(U,"i32");return ct===0?(this.mb(),{done:!0}):(this.Za=new n(ct,this.db),this.db.fb[ct]=this.Za,{value:this.Za,done:!1})}catch(mt){throw this.pb=b(this.kb),this.mb(),mt}finally{ge(L)}},o.prototype.mb=function(){xe(this.eb),this.eb=null},o.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:b(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(o.prototype[Symbol.iterator]=function(){return this}),v.prototype.run=function(L,Y){if(!this.db)throw"Database closed";if(Y){L=this.prepare(L,Y);try{L.step()}finally{L.free()}}else this.handleError(yt(this.db,L,0,0,U));return this},v.prototype.exec=function(L,Y,ct){if(!this.db)throw"Database closed";var mt=ye(),gt=null;try{var St=Ge(L),$t=te(4);for(L=[];Ct(St,"i8")!==0;){r(U),r($t),this.handleError(_r(this.db,St,-1,U,$t));var qt=Ct(U,"i32");if(St=Ct($t,"i32"),qt!==0){var Ft=null;for(gt=new n(qt,this),Y!=null&&gt.bind(Y);gt.step();)Ft===null&&(Ft={columns:gt.getColumnNames(),values:[]},L.push(Ft)),Ft.values.push(gt.get(null,ct));gt.free()}}return L}catch(Gt){throw gt&&gt.free(),Gt}finally{ge(mt)}},v.prototype.each=function(L,Y,ct,mt,gt){typeof Y=="function"&&(mt=ct,ct=Y,Y=void 0),L=this.prepare(L,Y);try{for(;L.step();)ct(L.getAsObject(null,gt))}finally{L.free()}if(typeof mt=="function")return mt()},v.prototype.prepare=function(L,Y){if(r(U),this.handleError(Ut(this.db,L,-1,U,0)),L=Ct(U,"i32"),L===0)throw"Nothing to prepare";var ct=new n(L,this);return Y!=null&&ct.bind(Y),this.fb[L]=ct},v.prototype.iterateStatements=function(L){return new o(L,this)},v.prototype.export=function(){Object.values(this.fb).forEach(function(Y){Y.free()}),Object.values(this.Sa).forEach(Jt),this.Sa={},this.handleError(wt(this.db));var L=Mr(this.filename);return this.handleError(ht(this.filename,U)),this.db=Ct(U,"i32"),Er(this.db),L},v.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(L){L.free()}),Object.values(this.Sa).forEach(Jt),this.Sa={},this.Ya&&(Jt(this.Ya),this.Ya=void 0),this.handleError(wt(this.db)),sr("/"+this.filename),this.db=null)},v.prototype.handleError=function(L){if(L===0)return null;throw L=Qr(this.db),Error(L)},v.prototype.getRowsModified=function(){return Ot(this.db)},v.prototype.create_function=function(L,Y){Object.prototype.hasOwnProperty.call(this.Sa,L)&&(Jt(this.Sa[L]),delete this.Sa[L]);var ct=_e(function(mt,gt,St){gt=e(gt,St);try{var $t=Y.apply(null,gt)}catch(qt){Ie(mt,qt,-1);return}t(mt,$t)},"viii");return this.Sa[L]=ct,this.handleError(br(this.db,L,Y.length,1,0,ct,0,0,0)),this},v.prototype.create_aggregate=function(L,Y){var ct=Y.init||function(){return null},mt=Y.finalize||function(Ft){return Ft},gt=Y.step;if(!gt)throw"An aggregate function must have a step function in "+L;var St={};Object.hasOwnProperty.call(this.Sa,L)&&(Jt(this.Sa[L]),delete this.Sa[L]),Y=L+"__finalize",Object.hasOwnProperty.call(this.Sa,Y)&&(Jt(this.Sa[Y]),delete this.Sa[Y]);var $t=_e(function(Ft,Gt,Ye){var le=vr(Ft,1);Object.hasOwnProperty.call(St,le)||(St[le]=ct()),Gt=e(Gt,Ye),Gt=[St[le]].concat(Gt);try{St[le]=gt.apply(null,Gt)}catch(bn){delete St[le],Ie(Ft,bn,-1)}},"viii"),qt=_e(function(Ft){var Gt=vr(Ft,1);try{var Ye=mt(St[Gt])}catch(le){delete St[Gt],Ie(Ft,le,-1);return}t(Ft,Ye),delete St[Gt]},"vi");return this.Sa[L]=$t,this.Sa[Y]=qt,this.handleError(br(this.db,L,gt.length-1,1,0,0,$t,qt,0)),this},v.prototype.updateHook=function(L){this.Ya&&(kr(this.db,0,0),Jt(this.Ya),this.Ya=void 0),L&&(this.Ya=_e(function(Y,ct,mt,gt,St){switch(ct){case 18:Y="insert";break;case 23:Y="update";break;case 9:Y="delete";break;default:throw"unknown operationCode in updateHook callback: "+ct}if(mt=mt?F(V,mt):"",gt=gt?F(V,gt):"",St>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";L(Y,mt,gt,Number(St))},"viiiij"),kr(this.db,this.Ya,0))},s.Database=v};var h={...s},w="./this.program",f=(t,e)=>{throw e},g="",u,y;if(T){var S=Sr;g=__dirname+"/",y=t=>(t=pt(t)?new URL(t):t,S.readFileSync(t)),u=async t=>(t=pt(t)?new URL(t):t,S.readFileSync(t,void 0)),!s.thisProgram&&1<process.argv.length&&(w=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),X.exports=s,f=(t,e)=>{throw process.exitCode=t,e}}else(N||k)&&(k?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=g.startsWith("blob:")?"":g.slice(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),k&&(y=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),u=async t=>{if(pt(t))return new Promise((n,o)=>{var v=new XMLHttpRequest;v.open("GET",t,!0),v.responseType="arraybuffer",v.onload=()=>{v.status==200||v.status==0&&v.response?n(v.response):o(v.status)},v.onerror=o,v.send(null)});var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw Error(e.status+" : "+e.url)});var R=s.print||console.log.bind(console),x=s.printErr||console.error.bind(console);Object.assign(s,h),h=null,s.thisProgram&&(w=s.thisProgram);var P=s.wasmBinary,I,j=!1,A,q,V,p,C,i,W,lt,H,pt=t=>t.startsWith("file://");function Q(){var t=I.buffer;s.HEAP8=q=new Int8Array(t),s.HEAP16=p=new Int16Array(t),s.HEAPU8=V=new Uint8Array(t),s.HEAPU16=new Uint16Array(t),s.HEAP32=C=new Int32Array(t),s.HEAPU32=i=new Uint32Array(t),s.HEAPF32=W=new Float32Array(t),s.HEAPF64=H=new Float64Array(t),s.HEAP64=lt=new BigInt64Array(t),s.HEAPU64=new BigUint64Array(t)}var ot=0,B=null;function z(t){var e;throw(e=s.onAbort)==null||e.call(s,t),t="Aborted("+t+")",x(t),j=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var ut;async function it(t){if(!P)try{var e=await u(t);return new Uint8Array(e)}catch{}if(t==ut&&P)t=new Uint8Array(P);else if(y)t=y(t);else throw"both async and sync fetching of the wasm failed";return t}async function J(t,e){try{var n=await it(t);return await WebAssembly.instantiate(n,e)}catch(o){x(`failed to asynchronously prepare wasm: ${o}`),z(o)}}async function Tt(t){var e=ut;if(!P&&typeof WebAssembly.instantiateStreaming=="function"&&!pt(e)&&!T)try{var n=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,t)}catch(o){x(`wasm streaming compile failed: ${o}`),x("falling back to ArrayBuffer instantiation")}return J(e,t)}class Nt{constructor(e){ee(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var bt=t=>{for(;0<t.length;)t.shift()(s)},kt=[],Rt=[],xt=()=>{var t=s.preRun.shift();Rt.unshift(t)};function Ct(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return q[t];case"i8":return q[t];case"i16":return p[t>>1];case"i32":return C[t>>2];case"i64":return lt[t>>3];case"float":return W[t>>2];case"double":return H[t>>3];case"*":return i[t>>2];default:z(`invalid type for getValue: ${e}`)}}var Lt=s.noExitRuntime||!0;function r(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":q[t]=0;break;case"i8":q[t]=0;break;case"i16":p[t>>1]=0;break;case"i32":C[t>>2]=0;break;case"i64":lt[t>>3]=BigInt(0);break;case"float":W[t>>2]=0;break;case"double":H[t>>3]=0;break;case"*":i[t>>2]=0;break;default:z(`invalid type for setValue: ${e}`)}}var G=typeof TextDecoder<"u"?new TextDecoder:void 0,F=(t,e=0,n=NaN)=>{var o=e+n;for(n=e;t[n]&&!(n>=o);)++n;if(16<n-e&&t.buffer&&G)return G.decode(t.subarray(e,n));for(o="";e<n;){var v=t[e++];if(v&128){var U=t[e++]&63;if((v&224)==192)o+=String.fromCharCode((v&31)<<6|U);else{var $=t[e++]&63;v=(v&240)==224?(v&15)<<12|U<<6|$:(v&7)<<18|U<<12|$<<6|t[e++]&63,65536>v?o+=String.fromCharCode(v):(v-=65536,o+=String.fromCharCode(55296|v>>10,56320|v&1023))}}else o+=String.fromCharCode(v)}return o},b=(t,e)=>t?F(V,t,e):"",m=(t,e)=>{for(var n=0,o=t.length-1;0<=o;o--){var v=t[o];v==="."?t.splice(o,1):v===".."?(t.splice(o,1),n++):n&&(t.splice(o,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},O=t=>{var e=t.charAt(0)==="/",n=t.slice(-1)==="/";return(t=m(t.split("/").filter(o=>!!o),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},Z=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.slice(0,-1)),t+e)},K=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],M=()=>{if(T){var t=Sr;return e=>t.randomFillSync(e)}return e=>crypto.getRandomValues(e)},et=t=>{(et=M())(t)},at=(...t)=>{for(var e="",n=!1,o=t.length-1;-1<=o&&!n;o--){if(n=0<=o?t[o]:"/",typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,n=n.charAt(0)==="/"}return e=m(e.split("/").filter(v=>!!v),!n).join("/"),(n?"/":"")+e||"."},nt=[],ft=t=>{for(var e=0,n=0;n<t.length;++n){var o=t.charCodeAt(n);127>=o?e++:2047>=o?e+=2:55296<=o&&57343>=o?(e+=4,++n):e+=3}return e},Et=(t,e,n,o)=>{if(!(0<o))return 0;var v=n;o=n+o-1;for(var U=0;U<t.length;++U){var $=t.charCodeAt(U);if(55296<=$&&57343>=$){var ht=t.charCodeAt(++U);$=65536+(($&1023)<<10)|ht&1023}if(127>=$){if(n>=o)break;e[n++]=$}else{if(2047>=$){if(n+1>=o)break;e[n++]=192|$>>6}else{if(65535>=$){if(n+2>=o)break;e[n++]=224|$>>12}else{if(n+3>=o)break;e[n++]=240|$>>18,e[n++]=128|$>>12&63}e[n++]=128|$>>6&63}e[n++]=128|$&63}}return e[n]=0,n-v},vt=(t,e)=>{var n=Array(ft(t)+1);return t=Et(t,n,0,n.length),e&&(n.length=t),n},Dt=[];function Yt(t,e){Dt[t]={input:[],output:[],cb:e},Fe(t,Mt)}var Mt={open(t){var e=Dt[t.node.rdev];if(!e)throw new st(43);t.tty=e,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,e,n,o){if(!t.tty||!t.tty.cb.xb)throw new st(60);for(var v=0,U=0;U<o;U++){try{var $=t.tty.cb.xb(t.tty)}catch{throw new st(29)}if($===void 0&&v===0)throw new st(6);if($==null)break;v++,e[n+U]=$}return v&&(t.node.atime=Date.now()),v},write(t,e,n,o){if(!t.tty||!t.tty.cb.qb)throw new st(60);try{for(var v=0;v<o;v++)t.tty.cb.qb(t.tty,e[n+v])}catch{throw new st(29)}return o&&(t.node.mtime=t.node.ctime=Date.now()),v}},ne={xb(){t:{if(!nt.length){var t=null;if(T){var e=Buffer.alloc(256),n=0,o=process.stdin.fd;try{n=S.readSync(o,e,0,256)}catch(v){if(v.toString().includes("EOF"))n=0;else throw v}0<n&&(t=e.slice(0,n).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break t}nt=vt(t,!0)}t=nt.shift()}return t},qb(t,e){e===null||e===10?(R(F(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(R(F(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},It={qb(t,e){e===null||e===10?(x(F(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(x(F(t.output)),t.output=[])}},_t={Wa:null,Xa(){return _t.createNode(null,"/",16895,0)},createNode(t,e,n,o){if((n&61440)===24576||(n&61440)===4096)throw new st(63);return _t.Wa||(_t.Wa={dir:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,lookup:_t.La.lookup,hb:_t.La.hb,rename:_t.La.rename,unlink:_t.La.unlink,rmdir:_t.La.rmdir,readdir:_t.La.readdir,symlink:_t.La.symlink},stream:{Va:_t.Ma.Va}},file:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:{Va:_t.Ma.Va,read:_t.Ma.read,write:_t.Ma.write,ib:_t.Ma.ib,jb:_t.Ma.jb}},link:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,readlink:_t.La.readlink},stream:{}},ub:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:Br}}),n=Qe(t,e,n,o),zt(n.mode)?(n.La=_t.Wa.dir.node,n.Ma=_t.Wa.dir.stream,n.Na={}):(n.mode&61440)===32768?(n.La=_t.Wa.file.node,n.Ma=_t.Wa.file.stream,n.Ra=0,n.Na=null):(n.mode&61440)===40960?(n.La=_t.Wa.link.node,n.Ma=_t.Wa.link.stream):(n.mode&61440)===8192&&(n.La=_t.Wa.ub.node,n.Ma=_t.Wa.ub.stream),n.atime=n.mtime=n.ctime=Date.now(),t&&(t.Na[e]=n,t.atime=t.mtime=t.ctime=n.atime),n},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,zt(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.atime),e.mtime=new Date(t.mtime),e.ctime=new Date(t.ctime),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},Ua(t,e){for(var n of["mode","atime","mtime","ctime"])e[n]!=null&&(t[n]=e[n]);e.size!==void 0&&(e=e.size,t.Ra!=e&&(e==0?(t.Na=null,t.Ra=0):(n=t.Na,t.Na=new Uint8Array(e),n&&t.Na.set(n.subarray(0,Math.min(e,t.Ra))),t.Ra=e)))},lookup(){throw _t.vb},hb(t,e,n,o){return _t.createNode(t,e,n,o)},rename(t,e,n){try{var o=se(e,n)}catch{}if(o){if(zt(t.mode))for(var v in o.Na)throw new st(55);Ue(o)}delete t.parent.Na[t.name],e.Na[n]=t,t.name=n,e.ctime=e.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,e){delete t.Na[e],t.ctime=t.mtime=Date.now()},rmdir(t,e){var n=se(t,e),o;for(o in n.Na)throw new st(55);delete t.Na[e],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,e,n){return t=_t.createNode(t,e,41471,0),t.link=n,t},readlink(t){if((t.mode&61440)!==40960)throw new st(28);return t.link}},Ma:{read(t,e,n,o,v){var U=t.node.Na;if(v>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-v,o),8<t&&U.subarray)e.set(U.subarray(v,v+t),n);else for(o=0;o<t;o++)e[n+o]=U[v+o];return t},write(t,e,n,o,v,U){if(e.buffer===q.buffer&&(U=!1),!o)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(U)return t.Na=e.subarray(n,n+o),t.Ra=o;if(t.Ra===0&&v===0)return t.Na=e.slice(n,n+o),t.Ra=o;if(v+o<=t.Ra)return t.Na.set(e.subarray(n,n+o),v),o}U=v+o;var $=t.Na?t.Na.length:0;if($>=U||(U=Math.max(U,$*(1048576>$?2:1.125)>>>0),$!=0&&(U=Math.max(U,256)),$=t.Na,t.Na=new Uint8Array(U),0<t.Ra&&t.Na.set($.subarray(0,t.Ra),0)),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(n,n+o),v);else for(U=0;U<o;U++)t.Na[v+U]=e[n+U];return t.Ra=Math.max(t.Ra,v+o),o},Va(t,e,n){if(n===1?e+=t.position:n===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new st(28);return e},ib(t,e,n,o,v){if((t.node.mode&61440)!==32768)throw new st(43);if(t=t.node.Na,v&2||!t||t.buffer!==q.buffer){v=!0,o=65536*Math.ceil(e/65536);var U=dr(65536,o);if(U&&V.fill(0,U,U+o),o=U,!o)throw new st(48);t&&((0<n||n+e<t.length)&&(t.subarray?t=t.subarray(n,n+e):t=Array.prototype.slice.call(t,n,n+e)),q.set(t,o))}else v=!1,o=t.byteOffset;return{Kb:o,Ab:v}},jb(t,e,n,o){return _t.Ma.write(t,e,0,o,n,!1),0}}},ue=(t,e)=>{var n=0;return t&&(n|=365),e&&(n|=146),n},Bt=null,he={},Kt=[],De=1,Ht=null,de=!1,Vt=!0,ie={},st=class{constructor(t){ee(this,"name","ErrnoError");this.Pa=t}},Pr=class{constructor(){ee(this,"gb",{});ee(this,"node",null)}get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},zr=class{constructor(t,e,n,o){ee(this,"La",{});ee(this,"Ma",{});ee(this,"ab",null);t||(t=this),this.parent=t,this.Xa=t.Xa,this.id=De++,this.name=e,this.mode=n,this.rdev=o,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function jt(t,e={}){if(!t)throw new st(44);e.nb??(e.nb=!0),t.charAt(0)==="/"||(t="//"+t);var n=0;t:for(;40>n;n++){t=t.split("/").filter(ht=>!!ht);for(var o=Bt,v="/",U=0;U<t.length;U++){var $=U===t.length-1;if($&&e.parent)break;if(t[U]!==".")if(t[U]==="..")v=Z(v),o=o.parent;else{v=O(v+"/"+t[U]);try{o=se(o,t[U])}catch(ht){if((ht==null?void 0:ht.Pa)===44&&$&&e.Jb)return{path:v};throw ht}if(!o.ab||$&&!e.nb||(o=o.ab.root),(o.mode&61440)===40960&&(!$||e.$a)){if(!o.La.readlink)throw new st(52);o=o.La.readlink(o),o.charAt(0)==="/"||(o=Z(v)+"/"+o),t=o+"/"+t.slice(U+1).join("/");continue t}}}return{path:v,node:o}}throw new st(32)}function Pe(t){for(var e;;){if(t===t.parent)return t=t.Xa.zb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function ze(t,e){for(var n=0,o=0;o<e.length;o++)n=(n<<5)-n+e.charCodeAt(o)|0;return(t+n>>>0)%Ht.length}function Ue(t){var e=ze(t.parent.id,t.name);if(Ht[e]===t)Ht[e]=t.bb;else for(e=Ht[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function se(t,e){var n=zt(t.mode)?(n=ce(t,"x"))?n:t.La.lookup?0:2:54;if(n)throw new st(n);for(n=Ht[ze(t.id,e)];n;n=n.bb){var o=n.name;if(n.parent.id===t.id&&o===e)return n}return t.La.lookup(t,e)}function Qe(t,e,n,o){return t=new zr(t,e,n,o),e=ze(t.parent.id,t.name),t.bb=Ht[e],Ht[e]=t}function zt(t){return(t&61440)===16384}function Je(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function ce(t,e){if(Vt)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function tr(t,e){if(!zt(t.mode))return 54;try{return se(t,e),20}catch{}return ce(t,"wx")}function er(t,e,n){try{var o=se(t,e)}catch(v){return v.Pa}if(t=ce(t,"wx"))return t;if(n){if(!zt(o.mode))return 54;if(o===o.parent||Pe(o)==="/")return 10}else if(zt(o.mode))return 31;return 0}function we(t){if(!t)throw new st(63);return t}function Pt(t){if(t=Kt[t],!t)throw new st(8);return t}function rr(t,e=-1){if(t=Object.assign(new Pr,t),e==-1)t:{for(e=0;4096>=e;e++)if(!Kt[e])break t;throw new st(33)}return t.fd=e,Kt[e]=t}function Ur(t,e=-1){var n,o;return t=rr(t,e),(o=(n=t.Ma)==null?void 0:n.Rb)==null||o.call(n,t),t}function Be(t,e,n){var o=t==null?void 0:t.Ma.Ua;t=o?t:e,o??(o=e.La.Ua),we(o),o(t,n)}var Br={open(t){var e,n;t.Ma=he[t.node.rdev].Ma,(n=(e=t.Ma).open)==null||n.call(e,t)},Va(){throw new st(70)}};function Fe(t,e){he[t]={Ma:e}}function nr(t,e){var n=e==="/";if(n&&Bt)throw new st(10);if(!n&&e){var o=jt(e,{nb:!1});if(e=o.path,o=o.node,o.ab)throw new st(10);if(!zt(o.mode))throw new st(54)}e={type:t,Wb:{},zb:e,Ib:[]},t=t.Xa(e),t.Xa=e,e.root=t,n?Bt=t:o&&(o.ab=e,o.Xa&&o.Xa.Ib.push(e))}function ve(t,e,n){var o=jt(t,{parent:!0}).node;if(t=K(t),!t)throw new st(28);if(t==="."||t==="..")throw new st(20);var v=tr(o,t);if(v)throw new st(v);if(!o.La.hb)throw new st(63);return o.La.hb(o,t,e,n)}function Fr(t,e=438){return ve(t,e&4095|32768,0)}function Zt(t,e=511){return ve(t,e&1023|16384,0)}function Ee(t,e,n){typeof n>"u"&&(n=e,e=438),ve(t,e|8192,n)}function Me(t,e){if(!at(t))throw new st(44);var n=jt(e,{parent:!0}).node;if(!n)throw new st(44);e=K(e);var o=tr(n,e);if(o)throw new st(o);if(!n.La.symlink)throw new st(63);n.La.symlink(n,e,t)}function ir(t){var e=jt(t,{parent:!0}).node;t=K(t);var n=se(e,t),o=er(e,t,!0);if(o)throw new st(o);if(!e.La.rmdir)throw new st(63);if(n.ab)throw new st(10);e.La.rmdir(e,t),Ue(n)}function sr(t){var e=jt(t,{parent:!0}).node;if(!e)throw new st(44);t=K(t);var n=se(e,t),o=er(e,t,!1);if(o)throw new st(o);if(!e.La.unlink)throw new st(63);if(n.ab)throw new st(10);e.La.unlink(e,t),Ue(n)}function pe(t,e){return t=jt(t,{$a:!e}).node,we(t.La.Ta)(t)}function ar(t,e,n,o){Be(t,e,{mode:n&4095|e.mode&-4096,ctime:Date.now(),Fb:o})}function ke(t,e){t=typeof t=="string"?jt(t,{$a:!0}).node:t,ar(null,t,e)}function or(t,e,n){if(zt(e.mode))throw new st(31);if((e.mode&61440)!==32768)throw new st(28);var o=ce(e,"w");if(o)throw new st(o);Be(t,e,{size:n,timestamp:Date.now()})}function fe(t,e,n=438){if(t==="")throw new st(44);if(typeof e=="string"){var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof o>"u")throw Error(`Unknown file open mode: ${e}`);e=o}if(n=e&64?n&4095|32768:0,typeof t=="object")o=t;else{var v=t.endsWith("/");t=jt(t,{$a:!(e&131072),Jb:!0}),o=t.node,t=t.path}var U=!1;if(e&64)if(o){if(e&128)throw new st(20)}else{if(v)throw new st(31);o=ve(t,n|511,0),U=!0}if(!o)throw new st(44);if((o.mode&61440)===8192&&(e&=-513),e&65536&&!zt(o.mode))throw new st(54);if(!U&&(v=o?(o.mode&61440)===40960?32:zt(o.mode)&&(Je(e)!=="r"||e&576)?31:ce(o,Je(e)):44))throw new st(v);return e&512&&!U&&(v=o,v=typeof v=="string"?jt(v,{$a:!0}).node:v,or(null,v,0)),e&=-131713,v=rr({node:o,path:Pe(o),flags:e,seekable:!0,position:0,Ma:o.Ma,Lb:[],error:!1}),v.Ma.open&&v.Ma.open(v),U&&ke(o,n&511),!s.logReadFiles||e&1||t in ie||(ie[t]=1),v}function je(t){if(t.fd===null)throw new st(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{Kt[t.fd]=null}t.fd=null}function lr(t,e,n){if(t.fd===null)throw new st(8);if(!t.seekable||!t.Ma.Va)throw new st(70);if(n!=0&&n!=1&&n!=2)throw new st(28);t.position=t.Ma.Va(t,e,n),t.Lb=[]}function ur(t,e,n,o,v){if(0>o||0>v)throw new st(28);if(t.fd===null)throw new st(8);if((t.flags&2097155)===1)throw new st(8);if(zt(t.node.mode))throw new st(31);if(!t.Ma.read)throw new st(28);var U=typeof v<"u";if(!U)v=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.read(t,e,n,o,v),U||(t.position+=e),e}function cr(t,e,n,o,v){if(0>o||0>v)throw new st(28);if(t.fd===null)throw new st(8);if(!(t.flags&2097155))throw new st(8);if(zt(t.node.mode))throw new st(31);if(!t.Ma.write)throw new st(28);t.seekable&&t.flags&1024&&lr(t,0,2);var U=typeof v<"u";if(!U)v=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.write(t,e,n,o,v,void 0),U||(t.position+=e),e}function Mr(t){var e,n=fe(t,n||0);t=pe(t).size;var o=new Uint8Array(t);return ur(n,o,0,t,0),e=o,je(n),e}function Qt(t,e,n){t=O("/dev/"+t);var o=ue(!!e,!!n);Qt.yb??(Qt.yb=64);var v=Qt.yb++<<8|0;Fe(v,{open(U){U.seekable=!1},close(){var U;(U=n==null?void 0:n.buffer)!=null&&U.length&&n(10)},read(U,$,ht,wt){for(var yt=0,Ot=0;Ot<wt;Ot++){try{var Ut=e()}catch{throw new st(29)}if(Ut===void 0&&yt===0)throw new st(6);if(Ut==null)break;yt++,$[ht+Ot]=Ut}return yt&&(U.node.atime=Date.now()),yt},write(U,$,ht,wt){for(var yt=0;yt<wt;yt++)try{n($[ht+yt])}catch{throw new st(29)}return wt&&(U.node.mtime=U.node.ctime=Date.now()),yt}}),Ee(t,o,v)}var At={};function ae(t,e,n){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":Pt(t).path,e.length==0){if(!n)throw new st(44);return t}return t+"/"+e}function Se(t,e){C[t>>2]=e.dev,C[t+4>>2]=e.mode,i[t+8>>2]=e.nlink,C[t+12>>2]=e.uid,C[t+16>>2]=e.gid,C[t+20>>2]=e.rdev,lt[t+24>>3]=BigInt(e.size),C[t+32>>2]=4096,C[t+36>>2]=e.blocks;var n=e.atime.getTime(),o=e.mtime.getTime(),v=e.ctime.getTime();return lt[t+40>>3]=BigInt(Math.floor(n/1e3)),i[t+48>>2]=n%1e3*1e6,lt[t+56>>3]=BigInt(Math.floor(o/1e3)),i[t+64>>2]=o%1e3*1e6,lt[t+72>>3]=BigInt(Math.floor(v/1e3)),i[t+80>>2]=v%1e3*1e6,lt[t+88>>3]=BigInt(e.ino),0}var Te=void 0,Ne=()=>{var t=C[+Te>>2];return Te+=4,t},qe=0,jr=[0,31,60,91,121,152,182,213,244,274,305,335],qr=[0,31,59,90,120,151,181,212,243,273,304,334],me={},fr=t=>{var e;A=t,Lt||0<qe||((e=s.onExit)==null||e.call(s,t),j=!0),f(t,new Nt(t))},Wr=t=>{if(!j)try{if(t(),!(Lt||0<qe))try{A=t=A,fr(t)}catch(e){e instanceof Nt||e=="unwind"||f(1,e)}}catch(e){e instanceof Nt||e=="unwind"||f(1,e)}},We={},hr=()=>{if(!$e){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:w||"./this.program"},e;for(e in We)We[e]===void 0?delete t[e]:t[e]=We[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);$e=n}return $e},$e,Ge=t=>{var e=ft(t)+1,n=te(e);return Et(t,V,n,e),n},$r=(t,e,n,o)=>{var v={string:yt=>{var Ot=0;return yt!=null&&yt!==0&&(Ot=Ge(yt)),Ot},array:yt=>{var Ot=te(yt.length);return q.set(yt,Ot),Ot}};t=s["_"+t];var U=[],$=0;if(o)for(var ht=0;ht<o.length;ht++){var wt=v[n[ht]];wt?($===0&&($=ye()),U[ht]=wt(o[ht])):U[ht]=o[ht]}return n=t(...U),n=function(yt){return $!==0&&ge($),e==="string"?yt?F(V,yt):"":e==="boolean"?!!yt:yt}(n)},Ae=0,Re=(t,e)=>(e=e==1?te(t.length):Ze(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),V.set(t,e),e),oe,He=[],Xt,Jt=t=>{oe.delete(Xt.get(t)),Xt.set(t,null),He.push(t)},_e=(t,e)=>{if(!oe){oe=new WeakMap;var n=Xt.length;if(oe)for(var o=0;o<0+n;o++){var v=Xt.get(o);v&&oe.set(v,o)}}if(n=oe.get(t)||0)return n;if(He.length)n=He.pop();else{try{Xt.grow(1)}catch(wt){throw wt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":wt}n=Xt.length-1}try{Xt.set(n,t)}catch(wt){if(!(wt instanceof TypeError))throw wt;if(typeof WebAssembly.Function=="function"){var U=WebAssembly.Function;o={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},v={parameters:[],results:e[0]=="v"?[]:[o[e[0]]]};for(var $=1;$<e.length;++$)v.parameters.push(o[e[$]]);e=new U(v,t)}else{o=[1],v=e.slice(0,1),e=e.slice(1),$={i:127,p:127,j:126,f:125,d:124,e:111},o.push(96);var ht=e.length;128>ht?o.push(ht):o.push(ht%128|128,ht>>7);for(U of e)o.push($[U]);v=="v"?o.push(0):o.push(1,$[v]),e=[0,97,115,109,1,0,0,0,1],U=o.length,128>U?e.push(U):e.push(U%128|128,U>>7),e.push(...o),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}Xt.set(n,e)}return oe.set(t,n),n};Ht=Array(4096),nr(_t,"/"),Zt("/tmp"),Zt("/home"),Zt("/home/web_user"),function(){Zt("/dev"),Fe(259,{read:()=>0,write:(o,v,U,$)=>$,Va:()=>0}),Ee("/dev/null",259),Yt(1280,ne),Yt(1536,It),Ee("/dev/tty",1280),Ee("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,n=()=>(e===0&&(et(t),e=t.byteLength),t[--e]);Qt("random",n),Qt("urandom",n),Zt("/dev/shm"),Zt("/dev/shm/tmp")}(),function(){Zt("/proc");var t=Zt("/proc/self");Zt("/proc/self/fd"),nr({Xa(){var e=Qe(t,"fd",16895,73);return e.Ma={Va:_t.Ma.Va},e.La={lookup(n,o){n=+o;var v=Pt(n);return n={parent:null,Xa:{zb:"fake"},La:{readlink:()=>v.path},id:n+1},n.parent=n},readdir(){return Array.from(Kt.entries()).filter(([,n])=>n).map(([n])=>n.toString())}},e}},"/proc/self/fd")}(),_t.vb=new st(44),_t.vb.stack="<generic error, no stack>";var Gr={a:(t,e,n,o)=>z(`Assertion failed: ${t?F(V,t):""}, at: `+[e?e?F(V,e):"":"unknown filename",n,o?o?F(V,o):"":"unknown function"]),i:function(t,e){try{return t=t?F(V,t):"",ke(t,e),0}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},L:function(t,e,n){try{if(e=e?F(V,e):"",e=ae(t,e),n&-8)return-28;var o=jt(e,{$a:!0}).node;return o?(t="",n&4&&(t+="r"),n&2&&(t+="w"),n&1&&(t+="x"),t&&ce(o,t)?-2:0):-44}catch(v){if(typeof At>"u"||v.name!=="ErrnoError")throw v;return-v.Pa}},j:function(t,e){try{var n=Pt(t);return ar(n,n.node,e,!1),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},h:function(t){try{var e=Pt(t);return Be(e,e.node,{timestamp:Date.now(),Fb:!1}),0}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},b:function(t,e,n){Te=n;try{var o=Pt(t);switch(e){case 0:var v=Ne();if(0>v)break;for(;Kt[v];)v++;return Ur(o,v).fd;case 1:case 2:return 0;case 3:return o.flags;case 4:return v=Ne(),o.flags|=v,0;case 12:return v=Ne(),p[v+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(U){if(typeof At>"u"||U.name!=="ErrnoError")throw U;return-U.Pa}},g:function(t,e){try{var n=Pt(t),o=n.node,v=n.Ma.Ta;t=v?n:o,v??(v=o.La.Ta),we(v);var U=v(t);return Se(e,U)}catch($){if(typeof At>"u"||$.name!=="ErrnoError")throw $;return-$.Pa}},H:function(t,e){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var n=Pt(t);if(0>e||!(n.flags&2097155))throw new st(28);return or(n,n.node,e),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},G:function(t,e){try{if(e===0)return-28;var n=ft("/")+1;return e<n?-68:(Et("/",V,t,e),n)}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},K:function(t,e){try{return t=t?F(V,t):"",Se(e,pe(t,!0))}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},C:function(t,e,n){try{return e=e?F(V,e):"",e=ae(t,e),Zt(e,n),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},J:function(t,e,n,o){try{e=e?F(V,e):"";var v=o&256;return e=ae(t,e,o&4096),Se(n,v?pe(e,!0):pe(e))}catch(U){if(typeof At>"u"||U.name!=="ErrnoError")throw U;return-U.Pa}},x:function(t,e,n,o){Te=o;try{e=e?F(V,e):"",e=ae(t,e);var v=o?Ne():0;return fe(e,n,v).fd}catch(U){if(typeof At>"u"||U.name!=="ErrnoError")throw U;return-U.Pa}},v:function(t,e,n,o){try{if(e=e?F(V,e):"",e=ae(t,e),0>=o)return-28;var v=jt(e).node;if(!v)throw new st(44);if(!v.La.readlink)throw new st(28);var U=v.La.readlink(v),$=Math.min(o,ft(U)),ht=q[n+$];return Et(U,V,n,o+1),q[n+$]=ht,$}catch(wt){if(typeof At>"u"||wt.name!=="ErrnoError")throw wt;return-wt.Pa}},u:function(t){try{return t=t?F(V,t):"",ir(t),0}catch(e){if(typeof At>"u"||e.name!=="ErrnoError")throw e;return-e.Pa}},f:function(t,e){try{return t=t?F(V,t):"",Se(e,pe(t))}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},r:function(t,e,n){try{return e=e?F(V,e):"",e=ae(t,e),n===0?sr(e):n===512?ir(e):z("Invalid flags passed to unlinkat"),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},q:function(t,e,n){try{e=e?F(V,e):"",e=ae(t,e,!0);var o=Date.now(),v,U;if(n){var $=i[n>>2]+4294967296*C[n+4>>2],ht=C[n+8>>2];ht==1073741823?v=o:ht==1073741822?v=null:v=1e3*$+ht/1e6,n+=16,$=i[n>>2]+4294967296*C[n+4>>2],ht=C[n+8>>2],ht==1073741823?U=o:ht==1073741822?U=null:U=1e3*$+ht/1e6}else U=v=o;if((U??v)!==null){t=v;var wt=jt(e,{$a:!0}).node;we(wt.La.Ua)(wt,{atime:t,mtime:U})}return 0}catch(yt){if(typeof At>"u"||yt.name!=="ErrnoError")throw yt;return-yt.Pa}},m:()=>z(""),l:()=>{Lt=!1,qe=0},A:function(t,e){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),C[e>>2]=t.getSeconds(),C[e+4>>2]=t.getMinutes(),C[e+8>>2]=t.getHours(),C[e+12>>2]=t.getDate(),C[e+16>>2]=t.getMonth(),C[e+20>>2]=t.getFullYear()-1900,C[e+24>>2]=t.getDay();var n=t.getFullYear();C[e+28>>2]=(n%4!==0||n%100===0&&n%400!==0?qr:jr)[t.getMonth()]+t.getDate()-1|0,C[e+36>>2]=-(60*t.getTimezoneOffset()),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var o=new Date(t.getFullYear(),0,1).getTimezoneOffset();C[e+32>>2]=(n!=o&&t.getTimezoneOffset()==Math.min(o,n))|0},y:function(t,e,n,o,v,U,$){v=-9007199254740992>v||9007199254740992<v?NaN:Number(v);try{if(isNaN(v))return 61;var ht=Pt(o);if(e&2&&!(n&2)&&(ht.flags&2097155)!==2)throw new st(2);if((ht.flags&2097155)===1)throw new st(2);if(!ht.Ma.ib)throw new st(43);if(!t)throw new st(28);var wt=ht.Ma.ib(ht,t,v,e,n),yt=wt.Kb;return C[U>>2]=wt.Ab,i[$>>2]=yt,0}catch(Ot){if(typeof At>"u"||Ot.name!=="ErrnoError")throw Ot;return-Ot.Pa}},z:function(t,e,n,o,v,U){U=-9007199254740992>U||9007199254740992<U?NaN:Number(U);try{var $=Pt(v);if(n&2){if(n=U,($.node.mode&61440)!==32768)throw new st(43);if(!(o&2)){var ht=V.slice(t,t+e);$.Ma.jb&&$.Ma.jb($,ht,n,e,o)}}}catch(wt){if(typeof At>"u"||wt.name!=="ErrnoError")throw wt;return-wt.Pa}},n:(t,e)=>{if(me[t]&&(clearTimeout(me[t].id),delete me[t]),!e)return 0;var n=setTimeout(()=>{delete me[t],Wr(()=>pr(t,performance.now()))},e);return me[t]={id:n,Xb:e},0},B:(t,e,n,o)=>{var v=new Date().getFullYear(),U=new Date(v,0,1).getTimezoneOffset();v=new Date(v,6,1).getTimezoneOffset(),i[t>>2]=60*Math.max(U,v),C[e>>2]=+(U!=v),e=$=>{var ht=Math.abs($);return`UTC${0<=$?"-":"+"}${String(Math.floor(ht/60)).padStart(2,"0")}${String(ht%60).padStart(2,"0")}`},t=e(U),e=e(v),v<U?(Et(t,V,n,17),Et(e,V,o,17)):(Et(t,V,o,17),Et(e,V,n,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var e=V.length;if(t>>>=0,2147483648<t)return!1;for(var n=1;4>=n;n*=2){var o=e*(1+.2/n);o=Math.min(o,t+100663296);t:{o=(Math.min(2147483648,65536*Math.ceil(Math.max(t,o)/65536))-I.buffer.byteLength+65535)/65536|0;try{I.grow(o),Q();var v=1;break t}catch{}v=void 0}if(v)return!0}return!1},E:(t,e)=>{var n=0;return hr().forEach((o,v)=>{var U=e+n;for(v=i[t+4*v>>2]=U,U=0;U<o.length;++U)q[v++]=o.charCodeAt(U);q[v]=0,n+=o.length+1}),0},F:(t,e)=>{var n=hr();i[t>>2]=n.length;var o=0;return n.forEach(v=>o+=v.length+1),i[e>>2]=o,0},e:function(t){try{var e=Pt(t);return je(e),0}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},p:function(t,e){try{var n=Pt(t);return q[e]=n.tty?2:zt(n.mode)?3:(n.mode&61440)===40960?7:4,p[e+2>>1]=0,lt[e+8>>3]=BigInt(0),lt[e+16>>3]=BigInt(0),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return o.Pa}},w:function(t,e,n,o){try{t:{var v=Pt(t);t=e;for(var U,$=e=0;$<n;$++){var ht=i[t>>2],wt=i[t+4>>2];t+=8;var yt=ur(v,q,ht,wt,U);if(0>yt){var Ot=-1;break t}if(e+=yt,yt<wt)break;typeof U<"u"&&(U+=yt)}Ot=e}return i[o>>2]=Ot,0}catch(Ut){if(typeof At>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Pa}},D:function(t,e,n,o){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var v=Pt(t);return lr(v,e,n),lt[o>>3]=BigInt(v.position),v.ob&&e===0&&n===0&&(v.ob=null),0}catch(U){if(typeof At>"u"||U.name!=="ErrnoError")throw U;return U.Pa}},I:function(t){var n;try{var e=Pt(t);return(n=e.Ma)!=null&&n.fsync?e.Ma.fsync(e):0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return o.Pa}},t:function(t,e,n,o){try{t:{var v=Pt(t);t=e;for(var U,$=e=0;$<n;$++){var ht=i[t>>2],wt=i[t+4>>2];t+=8;var yt=cr(v,q,ht,wt,U);if(0>yt){var Ot=-1;break t}if(e+=yt,yt<wt)break;typeof U<"u"&&(U+=yt)}Ot=e}return i[o>>2]=Ot,0}catch(Ut){if(typeof At>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Pa}},k:fr},dt;(async function(){var n;function t(o){var v;return dt=o.exports,I=dt.M,Q(),Xt=dt.O,ot--,(v=s.monitorRunDependencies)==null||v.call(s,ot),ot==0&&B&&(o=B,B=null,o()),dt}ot++,(n=s.monitorRunDependencies)==null||n.call(s,ot);var e={a:Gr};return s.instantiateWasm?new Promise(o=>{s.instantiateWasm(e,(v,U)=>{t(v),o(v.exports)})}):(ut??(ut=s.locateFile?s.locateFile("sql-wasm.wasm",g):g+"sql-wasm.wasm"),t((await Tt(e)).instance))})(),s._sqlite3_free=t=>(s._sqlite3_free=dt.P)(t),s._sqlite3_value_text=t=>(s._sqlite3_value_text=dt.Q)(t),s._sqlite3_prepare_v2=(t,e,n,o,v)=>(s._sqlite3_prepare_v2=dt.R)(t,e,n,o,v),s._sqlite3_step=t=>(s._sqlite3_step=dt.S)(t),s._sqlite3_reset=t=>(s._sqlite3_reset=dt.T)(t),s._sqlite3_exec=(t,e,n,o,v)=>(s._sqlite3_exec=dt.U)(t,e,n,o,v),s._sqlite3_finalize=t=>(s._sqlite3_finalize=dt.V)(t),s._sqlite3_column_name=(t,e)=>(s._sqlite3_column_name=dt.W)(t,e),s._sqlite3_column_text=(t,e)=>(s._sqlite3_column_text=dt.X)(t,e),s._sqlite3_column_type=(t,e)=>(s._sqlite3_column_type=dt.Y)(t,e),s._sqlite3_errmsg=t=>(s._sqlite3_errmsg=dt.Z)(t),s._sqlite3_clear_bindings=t=>(s._sqlite3_clear_bindings=dt._)(t),s._sqlite3_value_blob=t=>(s._sqlite3_value_blob=dt.$)(t),s._sqlite3_value_bytes=t=>(s._sqlite3_value_bytes=dt.aa)(t),s._sqlite3_value_double=t=>(s._sqlite3_value_double=dt.ba)(t),s._sqlite3_value_int=t=>(s._sqlite3_value_int=dt.ca)(t),s._sqlite3_value_type=t=>(s._sqlite3_value_type=dt.da)(t),s._sqlite3_result_blob=(t,e,n,o)=>(s._sqlite3_result_blob=dt.ea)(t,e,n,o),s._sqlite3_result_double=(t,e)=>(s._sqlite3_result_double=dt.fa)(t,e),s._sqlite3_result_error=(t,e,n)=>(s._sqlite3_result_error=dt.ga)(t,e,n),s._sqlite3_result_int=(t,e)=>(s._sqlite3_result_int=dt.ha)(t,e),s._sqlite3_result_int64=(t,e)=>(s._sqlite3_result_int64=dt.ia)(t,e),s._sqlite3_result_null=t=>(s._sqlite3_result_null=dt.ja)(t),s._sqlite3_result_text=(t,e,n,o)=>(s._sqlite3_result_text=dt.ka)(t,e,n,o),s._sqlite3_aggregate_context=(t,e)=>(s._sqlite3_aggregate_context=dt.la)(t,e),s._sqlite3_column_count=t=>(s._sqlite3_column_count=dt.ma)(t),s._sqlite3_data_count=t=>(s._sqlite3_data_count=dt.na)(t),s._sqlite3_column_blob=(t,e)=>(s._sqlite3_column_blob=dt.oa)(t,e),s._sqlite3_column_bytes=(t,e)=>(s._sqlite3_column_bytes=dt.pa)(t,e),s._sqlite3_column_double=(t,e)=>(s._sqlite3_column_double=dt.qa)(t,e),s._sqlite3_bind_blob=(t,e,n,o,v)=>(s._sqlite3_bind_blob=dt.ra)(t,e,n,o,v),s._sqlite3_bind_double=(t,e,n)=>(s._sqlite3_bind_double=dt.sa)(t,e,n),s._sqlite3_bind_int=(t,e,n)=>(s._sqlite3_bind_int=dt.ta)(t,e,n),s._sqlite3_bind_text=(t,e,n,o,v)=>(s._sqlite3_bind_text=dt.ua)(t,e,n,o,v),s._sqlite3_bind_parameter_index=(t,e)=>(s._sqlite3_bind_parameter_index=dt.va)(t,e),s._sqlite3_sql=t=>(s._sqlite3_sql=dt.wa)(t),s._sqlite3_normalized_sql=t=>(s._sqlite3_normalized_sql=dt.xa)(t),s._sqlite3_changes=t=>(s._sqlite3_changes=dt.ya)(t),s._sqlite3_close_v2=t=>(s._sqlite3_close_v2=dt.za)(t),s._sqlite3_create_function_v2=(t,e,n,o,v,U,$,ht,wt)=>(s._sqlite3_create_function_v2=dt.Aa)(t,e,n,o,v,U,$,ht,wt),s._sqlite3_update_hook=(t,e,n)=>(s._sqlite3_update_hook=dt.Ba)(t,e,n),s._sqlite3_open=(t,e)=>(s._sqlite3_open=dt.Ca)(t,e);var Ze=s._malloc=t=>(Ze=s._malloc=dt.Da)(t),xe=s._free=t=>(xe=s._free=dt.Ea)(t);s._RegisterExtensionFunctions=t=>(s._RegisterExtensionFunctions=dt.Fa)(t);var dr=(t,e)=>(dr=dt.Ga)(t,e),pr=(t,e)=>(pr=dt.Ha)(t,e),ge=t=>(ge=dt.Ia)(t),te=t=>(te=dt.Ja)(t),ye=()=>(ye=dt.Ka)();s.stackSave=()=>ye(),s.stackRestore=t=>ge(t),s.stackAlloc=t=>te(t),s.cwrap=(t,e,n,o)=>{var v=!n||n.every(U=>U==="number"||U==="boolean");return e!=="string"&&v&&!o?s["_"+t]:(...U)=>$r(t,e,n,U)},s.addFunction=_e,s.removeFunction=Jt,s.UTF8ToString=b,s.ALLOC_NORMAL=Ae,s.allocate=Re,s.allocateUTF8OnStack=Ge;function Xe(){function t(){var v;if(s.calledRun=!0,!j){if(!s.noFSInit&&!de){var e,n;de=!0,o??(o=s.stdin),e??(e=s.stdout),n??(n=s.stderr),o?Qt("stdin",o):Me("/dev/tty","/dev/stdin"),e?Qt("stdout",null,e):Me("/dev/tty","/dev/stdout"),n?Qt("stderr",null,n):Me("/dev/tty1","/dev/stderr"),fe("/dev/stdin",0),fe("/dev/stdout",1),fe("/dev/stderr",1)}if(dt.N(),Vt=!1,(v=s.onRuntimeInitialized)==null||v.call(s),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var o=s.postRun.shift();kt.unshift(o)}bt(kt)}}if(0<ot)B=Xe;else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)xt();bt(Rt),0<ot?B=Xe:s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),t()},1)):t()}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return Xe(),a}),d)};X.exports=D,X.exports.default=D})(xr);var Tn=xr.exports;const Tr=Rr(Tn),Nn="/npconv/assets/sql-wasm-C1U8OeUW.wasm";async function An(){try{return await Tr({locateFile:()=>String(Nn)})}catch{try{return await Tr()}catch(X){throw rt("Failed to initialize sql.js: "+(X.message||X.toString()),"err"),X}}}function Rn(X){rt("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const tt=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];X.run("BEGIN TRANSACTION");try{for(const d of tt)X.run(d);X.run("COMMIT"),rt("Schema created.","schema")}catch(d){try{X.run("ROLLBACK")}catch{}throw rt("Failed to create schema: "+(d.message||d.toString()),"err"),d}}function xn(X){try{const tt=X.exec("PRAGMA foreign_key_list('stream_state')"),d=X.exec("PRAGMA table_info('stream_state')");let D=!1;tt&&tt.length>0&&tt[0].values&&tt[0].values.length>0&&(D=!0);let E=!1;if(d&&d.length>0&&d[0].values.length>=2){const l=d[0].values,c=l.map(_=>_[1]),a=l.map(_=>_[5]);c[0]==="progress_time"&&c[1]==="stream_id"&&a[0]===0&&a[1]===1&&(E=!0)}if(!D||!E){rt("Patching stream_state schema to Room-compatible definition...","schema"),X.run("BEGIN TRANSACTION");const l=X.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(l&&l.length>0&&l[0].values.length>0){X.run("ALTER TABLE stream_state RENAME TO stream_state_old"),X.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{X.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(c){rt("Note: could not copy old stream_state rows: "+(c.message||c.toString()),"warn")}X.run("DROP TABLE stream_state_old")}else X.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");X.run("COMMIT"),rt("stream_state schema patched.","schema")}else rt("stream_state schema OK.","schema")}catch(tt){rt("Failed to ensure stream_state schema: "+(tt.message||tt.toString()),"err")}}function Ce(X){throw new Error('Could not dynamically require "'+X+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ir={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(X,tt){(function(d){X.exports=d()})(function(){return function d(D,E,l){function c(s,N){if(!E[s]){if(!D[s]){var k=typeof Ce=="function"&&Ce;if(!N&&k)return k(s,!0);if(a)return a(s,!0);var T=new Error("Cannot find module '"+s+"'");throw T.code="MODULE_NOT_FOUND",T}var h=E[s]={exports:{}};D[s][0].call(h.exports,function(w){var f=D[s][1][w];return c(f||w)},h,h.exports,d,D,E,l)}return E[s].exports}for(var a=typeof Ce=="function"&&Ce,_=0;_<l.length;_++)c(l[_]);return c}({1:[function(d,D,E){var l=d("./utils"),c=d("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";E.encode=function(_){for(var s,N,k,T,h,w,f,g=[],u=0,y=_.length,S=y,R=l.getTypeOf(_)!=="string";u<_.length;)S=y-u,k=R?(s=_[u++],N=u<y?_[u++]:0,u<y?_[u++]:0):(s=_.charCodeAt(u++),N=u<y?_.charCodeAt(u++):0,u<y?_.charCodeAt(u++):0),T=s>>2,h=(3&s)<<4|N>>4,w=1<S?(15&N)<<2|k>>6:64,f=2<S?63&k:64,g.push(a.charAt(T)+a.charAt(h)+a.charAt(w)+a.charAt(f));return g.join("")},E.decode=function(_){var s,N,k,T,h,w,f=0,g=0,u="data:";if(_.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var y,S=3*(_=_.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(_.charAt(_.length-1)===a.charAt(64)&&S--,_.charAt(_.length-2)===a.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=c.uint8array?new Uint8Array(0|S):new Array(0|S);f<_.length;)s=a.indexOf(_.charAt(f++))<<2|(T=a.indexOf(_.charAt(f++)))>>4,N=(15&T)<<4|(h=a.indexOf(_.charAt(f++)))>>2,k=(3&h)<<6|(w=a.indexOf(_.charAt(f++))),y[g++]=s,h!==64&&(y[g++]=N),w!==64&&(y[g++]=k);return y}},{"./support":30,"./utils":32}],2:[function(d,D,E){var l=d("./external"),c=d("./stream/DataWorker"),a=d("./stream/Crc32Probe"),_=d("./stream/DataLengthProbe");function s(N,k,T,h,w){this.compressedSize=N,this.uncompressedSize=k,this.crc32=T,this.compression=h,this.compressedContent=w}s.prototype={getContentWorker:function(){var N=new c(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new _("data_length")),k=this;return N.on("end",function(){if(this.streamInfo.data_length!==k.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),N},getCompressedWorker:function(){return new c(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(N,k,T){return N.pipe(new a).pipe(new _("uncompressedSize")).pipe(k.compressWorker(T)).pipe(new _("compressedSize")).withStreamInfo("compression",k)},D.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(d,D,E){var l=d("./stream/GenericWorker");E.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},E.DEFLATE=d("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(d,D,E){var l=d("./utils"),c=function(){for(var a,_=[],s=0;s<256;s++){a=s;for(var N=0;N<8;N++)a=1&a?3988292384^a>>>1:a>>>1;_[s]=a}return _}();D.exports=function(a,_){return a!==void 0&&a.length?l.getTypeOf(a)!=="string"?function(s,N,k,T){var h=c,w=T+k;s^=-1;for(var f=T;f<w;f++)s=s>>>8^h[255&(s^N[f])];return-1^s}(0|_,a,a.length,0):function(s,N,k,T){var h=c,w=T+k;s^=-1;for(var f=T;f<w;f++)s=s>>>8^h[255&(s^N.charCodeAt(f))];return-1^s}(0|_,a,a.length,0):0}},{"./utils":32}],5:[function(d,D,E){E.base64=!1,E.binary=!1,E.dir=!1,E.createFolders=!0,E.date=null,E.compression=null,E.compressionOptions=null,E.comment=null,E.unixPermissions=null,E.dosPermissions=null},{}],6:[function(d,D,E){var l=null;l=typeof Promise<"u"?Promise:d("lie"),D.exports={Promise:l}},{lie:37}],7:[function(d,D,E){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=d("pako"),a=d("./utils"),_=d("./stream/GenericWorker"),s=l?"uint8array":"array";function N(k,T){_.call(this,"FlateWorker/"+k),this._pako=null,this._pakoAction=k,this._pakoOptions=T,this.meta={}}E.magic="\b\0",a.inherits(N,_),N.prototype.processChunk=function(k){this.meta=k.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(s,k.data),!1)},N.prototype.flush=function(){_.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},N.prototype.cleanUp=function(){_.prototype.cleanUp.call(this),this._pako=null},N.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var k=this;this._pako.onData=function(T){k.push({data:T,meta:k.meta})}},E.compressWorker=function(k){return new N("Deflate",k)},E.uncompressWorker=function(){return new N("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(d,D,E){function l(h,w){var f,g="";for(f=0;f<w;f++)g+=String.fromCharCode(255&h),h>>>=8;return g}function c(h,w,f,g,u,y){var S,R,x=h.file,P=h.compression,I=y!==s.utf8encode,j=a.transformTo("string",y(x.name)),A=a.transformTo("string",s.utf8encode(x.name)),q=x.comment,V=a.transformTo("string",y(q)),p=a.transformTo("string",s.utf8encode(q)),C=A.length!==x.name.length,i=p.length!==q.length,W="",lt="",H="",pt=x.dir,Q=x.date,ot={crc32:0,compressedSize:0,uncompressedSize:0};w&&!f||(ot.crc32=h.crc32,ot.compressedSize=h.compressedSize,ot.uncompressedSize=h.uncompressedSize);var B=0;w&&(B|=8),I||!C&&!i||(B|=2048);var z=0,ut=0;pt&&(z|=16),u==="UNIX"?(ut=798,z|=function(J,Tt){var Nt=J;return J||(Nt=Tt?16893:33204),(65535&Nt)<<16}(x.unixPermissions,pt)):(ut=20,z|=function(J){return 63&(J||0)}(x.dosPermissions)),S=Q.getUTCHours(),S<<=6,S|=Q.getUTCMinutes(),S<<=5,S|=Q.getUTCSeconds()/2,R=Q.getUTCFullYear()-1980,R<<=4,R|=Q.getUTCMonth()+1,R<<=5,R|=Q.getUTCDate(),C&&(lt=l(1,1)+l(N(j),4)+A,W+="up"+l(lt.length,2)+lt),i&&(H=l(1,1)+l(N(V),4)+p,W+="uc"+l(H.length,2)+H);var it="";return it+=`
\0`,it+=l(B,2),it+=P.magic,it+=l(S,2),it+=l(R,2),it+=l(ot.crc32,4),it+=l(ot.compressedSize,4),it+=l(ot.uncompressedSize,4),it+=l(j.length,2),it+=l(W.length,2),{fileRecord:k.LOCAL_FILE_HEADER+it+j+W,dirRecord:k.CENTRAL_FILE_HEADER+l(ut,2)+it+l(V.length,2)+"\0\0\0\0"+l(z,4)+l(g,4)+j+W+V}}var a=d("../utils"),_=d("../stream/GenericWorker"),s=d("../utf8"),N=d("../crc32"),k=d("../signature");function T(h,w,f,g){_.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=f,this.encodeFileName=g,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(T,_),T.prototype.push=function(h){var w=h.meta.percent||0,f=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,_.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:f?(w+100*(f-g-1))/f:100}}))},T.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var w=this.streamFiles&&!h.file.dir;if(w){var f=c(h,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},T.prototype.closedSource=function(h){this.accumulate=!1;var w=this.streamFiles&&!h.file.dir,f=c(h,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),w)this.push({data:function(g){return k.DATA_DESCRIPTOR+l(g.crc32,4)+l(g.compressedSize,4)+l(g.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},T.prototype.flush=function(){for(var h=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var f=this.bytesWritten-h,g=function(u,y,S,R,x){var P=a.transformTo("string",x(R));return k.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(u,2)+l(u,2)+l(y,4)+l(S,4)+l(P.length,2)+P}(this.dirRecords.length,f,h,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},T.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},T.prototype.registerPrevious=function(h){this._sources.push(h);var w=this;return h.on("data",function(f){w.processChunk(f)}),h.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),h.on("error",function(f){w.error(f)}),this},T.prototype.resume=function(){return!!_.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},T.prototype.error=function(h){var w=this._sources;if(!_.prototype.error.call(this,h))return!1;for(var f=0;f<w.length;f++)try{w[f].error(h)}catch{}return!0},T.prototype.lock=function(){_.prototype.lock.call(this);for(var h=this._sources,w=0;w<h.length;w++)h[w].lock()},D.exports=T},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(d,D,E){var l=d("../compressions"),c=d("./ZipFileWorker");E.generateWorker=function(a,_,s){var N=new c(_.streamFiles,s,_.platform,_.encodeFileName),k=0;try{a.forEach(function(T,h){k++;var w=function(y,S){var R=y||S,x=l[R];if(!x)throw new Error(R+" is not a valid compression method !");return x}(h.options.compression,_.compression),f=h.options.compressionOptions||_.compressionOptions||{},g=h.dir,u=h.date;h._compressWorker(w,f).withStreamInfo("file",{name:T,dir:g,date:u,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(N)}),N.entriesCount=k}catch(T){N.error(T)}return N}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(d,D,E){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new l;for(var a in this)typeof this[a]!="function"&&(c[a]=this[a]);return c}}(l.prototype=d("./object")).loadAsync=d("./load"),l.support=d("./support"),l.defaults=d("./defaults"),l.version="3.10.1",l.loadAsync=function(c,a){return new l().loadAsync(c,a)},l.external=d("./external"),D.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(d,D,E){var l=d("./utils"),c=d("./external"),a=d("./utf8"),_=d("./zipEntries"),s=d("./stream/Crc32Probe"),N=d("./nodejsUtils");function k(T){return new c.Promise(function(h,w){var f=T.decompressed.getContentWorker().pipe(new s);f.on("error",function(g){w(g)}).on("end",function(){f.streamInfo.crc32!==T.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}D.exports=function(T,h){var w=this;return h=l.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),N.isNode&&N.isStream(T)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",T,!0,h.optimizedBinaryString,h.base64).then(function(f){var g=new _(h);return g.load(f),g}).then(function(f){var g=[c.Promise.resolve(f)],u=f.files;if(h.checkCRC32)for(var y=0;y<u.length;y++)g.push(k(u[y]));return c.Promise.all(g)}).then(function(f){for(var g=f.shift(),u=g.files,y=0;y<u.length;y++){var S=u[y],R=S.fileNameStr,x=l.resolve(S.fileNameStr);w.file(x,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:h.createFolders}),S.dir||(w.file(x).unsafeOriginalName=R)}return g.zipComment.length&&(w.comment=g.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(d,D,E){var l=d("../utils"),c=d("../stream/GenericWorker");function a(_,s){c.call(this,"Nodejs stream input adapter for "+_),this._upstreamEnded=!1,this._bindStream(s)}l.inherits(a,c),a.prototype._bindStream=function(_){var s=this;(this._stream=_).pause(),_.on("data",function(N){s.push({data:N,meta:{percent:0}})}).on("error",function(N){s.isPaused?this.generatedError=N:s.error(N)}).on("end",function(){s.isPaused?s._upstreamEnded=!0:s.end()})},a.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},D.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(d,D,E){var l=d("readable-stream").Readable;function c(a,_,s){l.call(this,_),this._helper=a;var N=this;a.on("data",function(k,T){N.push(k)||N._helper.pause(),s&&s(T)}).on("error",function(k){N.emit("error",k)}).on("end",function(){N.push(null)})}d("../utils").inherits(c,l),c.prototype._read=function(){this._helper.resume()},D.exports=c},{"../utils":32,"readable-stream":16}],14:[function(d,D,E){D.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,c);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,c)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var c=new Buffer(l);return c.fill(0),c},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(d,D,E){function l(x,P,I){var j,A=a.getTypeOf(P),q=a.extend(I||{},N);q.date=q.date||new Date,q.compression!==null&&(q.compression=q.compression.toUpperCase()),typeof q.unixPermissions=="string"&&(q.unixPermissions=parseInt(q.unixPermissions,8)),q.unixPermissions&&16384&q.unixPermissions&&(q.dir=!0),q.dosPermissions&&16&q.dosPermissions&&(q.dir=!0),q.dir&&(x=u(x)),q.createFolders&&(j=g(x))&&y.call(this,j,!0);var V=A==="string"&&q.binary===!1&&q.base64===!1;I&&I.binary!==void 0||(q.binary=!V),(P instanceof k&&P.uncompressedSize===0||q.dir||!P||P.length===0)&&(q.base64=!1,q.binary=!0,P="",q.compression="STORE",A="string");var p=null;p=P instanceof k||P instanceof _?P:w.isNode&&w.isStream(P)?new f(x,P):a.prepareContent(x,P,q.binary,q.optimizedBinaryString,q.base64);var C=new T(x,p,q);this.files[x]=C}var c=d("./utf8"),a=d("./utils"),_=d("./stream/GenericWorker"),s=d("./stream/StreamHelper"),N=d("./defaults"),k=d("./compressedObject"),T=d("./zipObject"),h=d("./generate"),w=d("./nodejsUtils"),f=d("./nodejs/NodejsStreamInputAdapter"),g=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var P=x.lastIndexOf("/");return 0<P?x.substring(0,P):""},u=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},y=function(x,P){return P=P!==void 0?P:N.createFolders,x=u(x),this.files[x]||l.call(this,x,null,{dir:!0,createFolders:P}),this.files[x]};function S(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var P,I,j;for(P in this.files)j=this.files[P],(I=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&x(I,j)},filter:function(x){var P=[];return this.forEach(function(I,j){x(I,j)&&P.push(j)}),P},file:function(x,P,I){if(arguments.length!==1)return x=this.root+x,l.call(this,x,P,I),this;if(S(x)){var j=x;return this.filter(function(q,V){return!V.dir&&j.test(q)})}var A=this.files[this.root+x];return A&&!A.dir?A:null},folder:function(x){if(!x)return this;if(S(x))return this.filter(function(A,q){return q.dir&&x.test(A)});var P=this.root+x,I=y.call(this,P),j=this.clone();return j.root=I.name,j},remove:function(x){x=this.root+x;var P=this.files[x];if(P||(x.slice(-1)!=="/"&&(x+="/"),P=this.files[x]),P&&!P.dir)delete this.files[x];else for(var I=this.filter(function(A,q){return q.name.slice(0,x.length)===x}),j=0;j<I.length;j++)delete this.files[I[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var P,I={};try{if((I=a.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");a.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var j=I.comment||this.comment||"";P=h.generateWorker(this,I,j)}catch(A){(P=new _("error")).error(A)}return new s(P,I.type||"string",I.mimeType)},generateAsync:function(x,P){return this.generateInternalStream(x).accumulate(P)},generateNodeStream:function(x,P){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(P)}};D.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(d,D,E){D.exports=d("stream")},{stream:void 0}],17:[function(d,D,E){var l=d("./DataReader");function c(a){l.call(this,a);for(var _=0;_<this.data.length;_++)a[_]=255&a[_]}d("../utils").inherits(c,l),c.prototype.byteAt=function(a){return this.data[this.zero+a]},c.prototype.lastIndexOfSignature=function(a){for(var _=a.charCodeAt(0),s=a.charCodeAt(1),N=a.charCodeAt(2),k=a.charCodeAt(3),T=this.length-4;0<=T;--T)if(this.data[T]===_&&this.data[T+1]===s&&this.data[T+2]===N&&this.data[T+3]===k)return T-this.zero;return-1},c.prototype.readAndCheckSignature=function(a){var _=a.charCodeAt(0),s=a.charCodeAt(1),N=a.charCodeAt(2),k=a.charCodeAt(3),T=this.readData(4);return _===T[0]&&s===T[1]&&N===T[2]&&k===T[3]},c.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var _=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,_},D.exports=c},{"../utils":32,"./DataReader":18}],18:[function(d,D,E){var l=d("../utils");function c(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var _,s=0;for(this.checkOffset(a),_=this.index+a-1;_>=this.index;_--)s=(s<<8)+this.byteAt(_);return this.index+=a,s},readString:function(a){return l.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},D.exports=c},{"../utils":32}],19:[function(d,D,E){var l=d("./Uint8ArrayReader");function c(a){l.call(this,a)}d("../utils").inherits(c,l),c.prototype.readData=function(a){this.checkOffset(a);var _=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,_},D.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(d,D,E){var l=d("./DataReader");function c(a){l.call(this,a)}d("../utils").inherits(c,l),c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},c.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},c.prototype.readData=function(a){this.checkOffset(a);var _=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,_},D.exports=c},{"../utils":32,"./DataReader":18}],21:[function(d,D,E){var l=d("./ArrayReader");function c(a){l.call(this,a)}d("../utils").inherits(c,l),c.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var _=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,_},D.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(d,D,E){var l=d("../utils"),c=d("../support"),a=d("./ArrayReader"),_=d("./StringReader"),s=d("./NodeBufferReader"),N=d("./Uint8ArrayReader");D.exports=function(k){var T=l.getTypeOf(k);return l.checkSupport(T),T!=="string"||c.uint8array?T==="nodebuffer"?new s(k):c.uint8array?new N(l.transformTo("uint8array",k)):new a(l.transformTo("array",k)):new _(k)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(d,D,E){E.LOCAL_FILE_HEADER="PK",E.CENTRAL_FILE_HEADER="PK",E.CENTRAL_DIRECTORY_END="PK",E.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",E.ZIP64_CENTRAL_DIRECTORY_END="PK",E.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(d,D,E){var l=d("./GenericWorker"),c=d("../utils");function a(_){l.call(this,"ConvertWorker to "+_),this.destType=_}c.inherits(a,l),a.prototype.processChunk=function(_){this.push({data:c.transformTo(this.destType,_.data),meta:_.meta})},D.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(d,D,E){var l=d("./GenericWorker"),c=d("../crc32");function a(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}d("../utils").inherits(a,l),a.prototype.processChunk=function(_){this.streamInfo.crc32=c(_.data,this.streamInfo.crc32||0),this.push(_)},D.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(d,D,E){var l=d("../utils"),c=d("./GenericWorker");function a(_){c.call(this,"DataLengthProbe for "+_),this.propName=_,this.withStreamInfo(_,0)}l.inherits(a,c),a.prototype.processChunk=function(_){if(_){var s=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=s+_.data.length}c.prototype.processChunk.call(this,_)},D.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(d,D,E){var l=d("../utils"),c=d("./GenericWorker");function a(_){c.call(this,"DataWorker");var s=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,_.then(function(N){s.dataIsReady=!0,s.data=N,s.max=N&&N.length||0,s.type=l.getTypeOf(N),s.isPaused||s._tickAndRepeat()},function(N){s.error(N)})}l.inherits(a,c),a.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var _=null,s=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":_=this.data.substring(this.index,s);break;case"uint8array":_=this.data.subarray(this.index,s);break;case"array":case"nodebuffer":_=this.data.slice(this.index,s)}return this.index=s,this.push({data:_,meta:{percent:this.max?this.index/this.max*100:0}})},D.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(d,D,E){function l(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,a){return this._listeners[c].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,a){if(this._listeners[c])for(var _=0;_<this._listeners[c].length;_++)this._listeners[c][_].call(this,a)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var a=this;return c.on("data",function(_){a.processChunk(_)}),c.on("end",function(){a.end()}),c.on("error",function(_){a.error(_)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,a){return this.extraStreamInfo[c]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},D.exports=l},{}],29:[function(d,D,E){var l=d("../utils"),c=d("./ConvertWorker"),a=d("./GenericWorker"),_=d("../base64"),s=d("../support"),N=d("../external"),k=null;if(s.nodestream)try{k=d("../nodejs/NodejsStreamOutputAdapter")}catch{}function T(w,f){return new N.Promise(function(g,u){var y=[],S=w._internalType,R=w._outputType,x=w._mimeType;w.on("data",function(P,I){y.push(P),f&&f(I)}).on("error",function(P){y=[],u(P)}).on("end",function(){try{var P=function(I,j,A){switch(I){case"blob":return l.newBlob(l.transformTo("arraybuffer",j),A);case"base64":return _.encode(j);default:return l.transformTo(I,j)}}(R,function(I,j){var A,q=0,V=null,p=0;for(A=0;A<j.length;A++)p+=j[A].length;switch(I){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(V=new Uint8Array(p),A=0;A<j.length;A++)V.set(j[A],q),q+=j[A].length;return V;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+I+"'")}}(S,y),x);g(P)}catch(I){u(I)}y=[]}).resume()})}function h(w,f,g){var u=f;switch(f){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=f,this._mimeType=g,l.checkSupport(u),this._worker=w.pipe(new c(u)),w.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}h.prototype={accumulate:function(w){return T(this,w)},on:function(w,f){var g=this;return w==="data"?this._worker.on(w,function(u){f.call(g,u.data,u.meta)}):this._worker.on(w,function(){l.delay(f,arguments,g)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new k(this,{objectMode:this._outputType!=="nodebuffer"},w)}},D.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(d,D,E){if(E.base64=!0,E.array=!0,E.string=!0,E.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",E.nodebuffer=typeof Buffer<"u",E.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")E.blob=!1;else{var l=new ArrayBuffer(0);try{E.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(l),E.blob=c.getBlob("application/zip").size===0}catch{E.blob=!1}}}try{E.nodestream=!!d("readable-stream").Readable}catch{E.nodestream=!1}},{"readable-stream":16}],31:[function(d,D,E){for(var l=d("./utils"),c=d("./support"),a=d("./nodejsUtils"),_=d("./stream/GenericWorker"),s=new Array(256),N=0;N<256;N++)s[N]=252<=N?6:248<=N?5:240<=N?4:224<=N?3:192<=N?2:1;s[254]=s[254]=1;function k(){_.call(this,"utf-8 decode"),this.leftOver=null}function T(){_.call(this,"utf-8 encode")}E.utf8encode=function(h){return c.nodebuffer?a.newBufferFrom(h,"utf-8"):function(w){var f,g,u,y,S,R=w.length,x=0;for(y=0;y<R;y++)(64512&(g=w.charCodeAt(y)))==55296&&y+1<R&&(64512&(u=w.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(u-56320),y++),x+=g<128?1:g<2048?2:g<65536?3:4;for(f=c.uint8array?new Uint8Array(x):new Array(x),y=S=0;S<x;y++)(64512&(g=w.charCodeAt(y)))==55296&&y+1<R&&(64512&(u=w.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(u-56320),y++),g<128?f[S++]=g:(g<2048?f[S++]=192|g>>>6:(g<65536?f[S++]=224|g>>>12:(f[S++]=240|g>>>18,f[S++]=128|g>>>12&63),f[S++]=128|g>>>6&63),f[S++]=128|63&g);return f}(h)},E.utf8decode=function(h){return c.nodebuffer?l.transformTo("nodebuffer",h).toString("utf-8"):function(w){var f,g,u,y,S=w.length,R=new Array(2*S);for(f=g=0;f<S;)if((u=w[f++])<128)R[g++]=u;else if(4<(y=s[u]))R[g++]=65533,f+=y-1;else{for(u&=y===2?31:y===3?15:7;1<y&&f<S;)u=u<<6|63&w[f++],y--;1<y?R[g++]=65533:u<65536?R[g++]=u:(u-=65536,R[g++]=55296|u>>10&1023,R[g++]=56320|1023&u)}return R.length!==g&&(R.subarray?R=R.subarray(0,g):R.length=g),l.applyFromCharCode(R)}(h=l.transformTo(c.uint8array?"uint8array":"array",h))},l.inherits(k,_),k.prototype.processChunk=function(h){var w=l.transformTo(c.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var f=w;(w=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),w.set(f,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var g=function(y,S){var R;for((S=S||y.length)>y.length&&(S=y.length),R=S-1;0<=R&&(192&y[R])==128;)R--;return R<0||R===0?S:R+s[y[R]]>S?R:S}(w),u=w;g!==w.length&&(c.uint8array?(u=w.subarray(0,g),this.leftOver=w.subarray(g,w.length)):(u=w.slice(0,g),this.leftOver=w.slice(g,w.length))),this.push({data:E.utf8decode(u),meta:h.meta})},k.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:E.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},E.Utf8DecodeWorker=k,l.inherits(T,_),T.prototype.processChunk=function(h){this.push({data:E.utf8encode(h.data),meta:h.meta})},E.Utf8EncodeWorker=T},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(d,D,E){var l=d("./support"),c=d("./base64"),a=d("./nodejsUtils"),_=d("./external");function s(f){return f}function N(f,g){for(var u=0;u<f.length;++u)g[u]=255&f.charCodeAt(u);return g}d("setimmediate"),E.newBlob=function(f,g){E.checkSupport("blob");try{return new Blob([f],{type:g})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(f),u.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var k={stringifyByChunk:function(f,g,u){var y=[],S=0,R=f.length;if(R<=u)return String.fromCharCode.apply(null,f);for(;S<R;)g==="array"||g==="nodebuffer"?y.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+u,R)))):y.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+u,R)))),S+=u;return y.join("")},stringifyByChar:function(f){for(var g="",u=0;u<f.length;u++)g+=String.fromCharCode(f[u]);return g},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function T(f){var g=65536,u=E.getTypeOf(f),y=!0;if(u==="uint8array"?y=k.applyCanBeUsed.uint8array:u==="nodebuffer"&&(y=k.applyCanBeUsed.nodebuffer),y)for(;1<g;)try{return k.stringifyByChunk(f,u,g)}catch{g=Math.floor(g/2)}return k.stringifyByChar(f)}function h(f,g){for(var u=0;u<f.length;u++)g[u]=f[u];return g}E.applyFromCharCode=T;var w={};w.string={string:s,array:function(f){return N(f,new Array(f.length))},arraybuffer:function(f){return w.string.uint8array(f).buffer},uint8array:function(f){return N(f,new Uint8Array(f.length))},nodebuffer:function(f){return N(f,a.allocBuffer(f.length))}},w.array={string:T,array:s,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(f)}},w.arraybuffer={string:function(f){return T(new Uint8Array(f))},array:function(f){return h(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:s,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(new Uint8Array(f))}},w.uint8array={string:T,array:function(f){return h(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:s,nodebuffer:function(f){return a.newBufferFrom(f)}},w.nodebuffer={string:T,array:function(f){return h(f,new Array(f.length))},arraybuffer:function(f){return w.nodebuffer.uint8array(f).buffer},uint8array:function(f){return h(f,new Uint8Array(f.length))},nodebuffer:s},E.transformTo=function(f,g){if(g=g||"",!f)return g;E.checkSupport(f);var u=E.getTypeOf(g);return w[u][f](g)},E.resolve=function(f){for(var g=f.split("/"),u=[],y=0;y<g.length;y++){var S=g[y];S==="."||S===""&&y!==0&&y!==g.length-1||(S===".."?u.pop():u.push(S))}return u.join("/")},E.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":l.nodebuffer&&a.isBuffer(f)?"nodebuffer":l.uint8array&&f instanceof Uint8Array?"uint8array":l.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},E.checkSupport=function(f){if(!l[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},E.MAX_VALUE_16BITS=65535,E.MAX_VALUE_32BITS=-1,E.pretty=function(f){var g,u,y="";for(u=0;u<(f||"").length;u++)y+="\\x"+((g=f.charCodeAt(u))<16?"0":"")+g.toString(16).toUpperCase();return y},E.delay=function(f,g,u){setImmediate(function(){f.apply(u||null,g||[])})},E.inherits=function(f,g){function u(){}u.prototype=g.prototype,f.prototype=new u},E.extend=function(){var f,g,u={};for(f=0;f<arguments.length;f++)for(g in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],g)&&u[g]===void 0&&(u[g]=arguments[f][g]);return u},E.prepareContent=function(f,g,u,y,S){return _.Promise.resolve(g).then(function(R){return l.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new _.Promise(function(x,P){var I=new FileReader;I.onload=function(j){x(j.target.result)},I.onerror=function(j){P(j.target.error)},I.readAsArrayBuffer(R)}):R}).then(function(R){var x=E.getTypeOf(R);return x?(x==="arraybuffer"?R=E.transformTo("uint8array",R):x==="string"&&(S?R=c.decode(R):u&&y!==!0&&(R=function(P){return N(P,l.uint8array?new Uint8Array(P.length):new Array(P.length))}(R))),R):_.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(d,D,E){var l=d("./reader/readerFor"),c=d("./utils"),a=d("./signature"),_=d("./zipEntry"),s=d("./support");function N(k){this.files=[],this.loadOptions=k}N.prototype={checkSignature:function(k){if(!this.reader.readAndCheckSignature(k)){this.reader.index-=4;var T=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(T)+", expected "+c.pretty(k)+")")}},isSignature:function(k,T){var h=this.reader.index;this.reader.setIndex(k);var w=this.reader.readString(4)===T;return this.reader.setIndex(h),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var k=this.reader.readData(this.zipCommentLength),T=s.uint8array?"uint8array":"array",h=c.transformTo(T,k);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var k,T,h,w=this.zip64EndOfCentralSize-44;0<w;)k=this.reader.readInt(2),T=this.reader.readInt(4),h=this.reader.readData(T),this.zip64ExtensibleData[k]={id:k,length:T,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var k,T;for(k=0;k<this.files.length;k++)T=this.files[k],this.reader.setIndex(T.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),T.readLocalPart(this.reader),T.handleUTF8(),T.processAttributes()},readCentralDir:function(){var k;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(k=new _({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(k);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var k=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(k<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(k);var T=k;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(k=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(k),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var w=T-h;if(0<w)this.isSignature(T,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(k){this.reader=l(k)},load:function(k){this.prepareReader(k),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},D.exports=N},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(d,D,E){var l=d("./reader/readerFor"),c=d("./utils"),a=d("./compressedObject"),_=d("./crc32"),s=d("./utf8"),N=d("./compressions"),k=d("./support");function T(h,w){this.options=h,this.loadOptions=w}T.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var w,f;if(h.skip(22),this.fileNameLength=h.readInt(2),f=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(g){for(var u in N)if(Object.prototype.hasOwnProperty.call(N,u)&&N[u].magic===g)return N[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var w=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(w),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=l(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var w,f,g,u=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<u;)w=h.readInt(2),f=h.readInt(2),g=h.readData(f),this.extraFields[w]={id:w,length:f,value:g};h.setIndex(u)},handleUTF8:function(){var h=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var f=c.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var u=c.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var w=l(h.value);return w.readInt(1)!==1||_(this.fileName)!==w.readInt(4)?null:s.utf8decode(w.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var w=l(h.value);return w.readInt(1)!==1||_(this.fileComment)!==w.readInt(4)?null:s.utf8decode(w.readData(h.length-5))}return null}},D.exports=T},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(d,D,E){function l(w,f,g){this.name=w,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=f,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var c=d("./stream/StreamHelper"),a=d("./stream/DataWorker"),_=d("./utf8"),s=d("./compressedObject"),N=d("./stream/GenericWorker");l.prototype={internalStream:function(w){var f=null,g="string";try{if(!w)throw new Error("No output type specified.");var u=(g=w.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),f=this._decompressWorker();var y=!this._dataBinary;y&&!u&&(f=f.pipe(new _.Utf8EncodeWorker)),!y&&u&&(f=f.pipe(new _.Utf8DecodeWorker))}catch(S){(f=new N("error")).error(S)}return new c(f,g,"")},async:function(w,f){return this.internalStream(w).accumulate(f)},nodeStream:function(w,f){return this.internalStream(w||"nodebuffer").toNodejsStream(f)},_compressWorker:function(w,f){if(this._data instanceof s&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new _.Utf8EncodeWorker)),s.createWorkerFrom(g,w,f)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof N?this._data:new a(this._data)}};for(var k=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],T=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<k.length;h++)l.prototype[k[h]]=T;D.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(d,D,E){(function(l){var c,a,_=l.MutationObserver||l.WebKitMutationObserver;if(_){var s=0,N=new _(w),k=l.document.createTextNode("");N.observe(k,{characterData:!0}),c=function(){k.data=s=++s%2}}else if(l.setImmediate||l.MessageChannel===void 0)c="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var f=l.document.createElement("script");f.onreadystatechange=function(){w(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},l.document.documentElement.appendChild(f)}:function(){setTimeout(w,0)};else{var T=new l.MessageChannel;T.port1.onmessage=w,c=function(){T.port2.postMessage(0)}}var h=[];function w(){var f,g;a=!0;for(var u=h.length;u;){for(g=h,h=[],f=-1;++f<u;)g[f]();u=h.length}a=!1}D.exports=function(f){h.push(f)!==1||a||c()}}).call(this,typeof Oe<"u"?Oe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(d,D,E){var l=d("immediate");function c(){}var a={},_=["REJECTED"],s=["FULFILLED"],N=["PENDING"];function k(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,u!==c&&f(this,u)}function T(u,y,S){this.promise=u,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function h(u,y,S){l(function(){var R;try{R=y(S)}catch(x){return a.reject(u,x)}R===u?a.reject(u,new TypeError("Cannot resolve promise with itself")):a.resolve(u,R)})}function w(u){var y=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof y=="function")return function(){y.apply(u,arguments)}}function f(u,y){var S=!1;function R(I){S||(S=!0,a.reject(u,I))}function x(I){S||(S=!0,a.resolve(u,I))}var P=g(function(){y(x,R)});P.status==="error"&&R(P.value)}function g(u,y){var S={};try{S.value=u(y),S.status="success"}catch(R){S.status="error",S.value=R}return S}(D.exports=k).prototype.finally=function(u){if(typeof u!="function")return this;var y=this.constructor;return this.then(function(S){return y.resolve(u()).then(function(){return S})},function(S){return y.resolve(u()).then(function(){throw S})})},k.prototype.catch=function(u){return this.then(null,u)},k.prototype.then=function(u,y){if(typeof u!="function"&&this.state===s||typeof y!="function"&&this.state===_)return this;var S=new this.constructor(c);return this.state!==N?h(S,this.state===s?u:y,this.outcome):this.queue.push(new T(S,u,y)),S},T.prototype.callFulfilled=function(u){a.resolve(this.promise,u)},T.prototype.otherCallFulfilled=function(u){h(this.promise,this.onFulfilled,u)},T.prototype.callRejected=function(u){a.reject(this.promise,u)},T.prototype.otherCallRejected=function(u){h(this.promise,this.onRejected,u)},a.resolve=function(u,y){var S=g(w,y);if(S.status==="error")return a.reject(u,S.value);var R=S.value;if(R)f(u,R);else{u.state=s,u.outcome=y;for(var x=-1,P=u.queue.length;++x<P;)u.queue[x].callFulfilled(y)}return u},a.reject=function(u,y){u.state=_,u.outcome=y;for(var S=-1,R=u.queue.length;++S<R;)u.queue[S].callRejected(y);return u},k.resolve=function(u){return u instanceof this?u:a.resolve(new this(c),u)},k.reject=function(u){var y=new this(c);return a.reject(y,u)},k.all=function(u){var y=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=u.length,R=!1;if(!S)return this.resolve([]);for(var x=new Array(S),P=0,I=-1,j=new this(c);++I<S;)A(u[I],I);return j;function A(q,V){y.resolve(q).then(function(p){x[V]=p,++P!==S||R||(R=!0,a.resolve(j,x))},function(p){R||(R=!0,a.reject(j,p))})}},k.race=function(u){var y=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=u.length,R=!1;if(!S)return this.resolve([]);for(var x=-1,P=new this(c);++x<S;)I=u[x],y.resolve(I).then(function(j){R||(R=!0,a.resolve(P,j))},function(j){R||(R=!0,a.reject(P,j))});var I;return P}},{immediate:36}],38:[function(d,D,E){var l={};(0,d("./lib/utils/common").assign)(l,d("./lib/deflate"),d("./lib/inflate"),d("./lib/zlib/constants")),D.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(d,D,E){var l=d("./zlib/deflate"),c=d("./utils/common"),a=d("./utils/strings"),_=d("./zlib/messages"),s=d("./zlib/zstream"),N=Object.prototype.toString,k=0,T=-1,h=0,w=8;function f(u){if(!(this instanceof f))return new f(u);this.options=c.assign({level:T,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},u||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var S=l.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(S!==k)throw new Error(_[S]);if(y.header&&l.deflateSetHeader(this.strm,y.header),y.dictionary){var R;if(R=typeof y.dictionary=="string"?a.string2buf(y.dictionary):N.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(S=l.deflateSetDictionary(this.strm,R))!==k)throw new Error(_[S]);this._dict_set=!0}}function g(u,y){var S=new f(y);if(S.push(u,!0),S.err)throw S.msg||_[S.err];return S.result}f.prototype.push=function(u,y){var S,R,x=this.strm,P=this.options.chunkSize;if(this.ended)return!1;R=y===~~y?y:y===!0?4:0,typeof u=="string"?x.input=a.string2buf(u):N.call(u)==="[object ArrayBuffer]"?x.input=new Uint8Array(u):x.input=u,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new c.Buf8(P),x.next_out=0,x.avail_out=P),(S=l.deflate(x,R))!==1&&S!==k)return this.onEnd(S),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(c.shrinkBuf(x.output,x.next_out))):this.onData(c.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&S!==1);return R===4?(S=l.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===k):R!==2||(this.onEnd(k),!(x.avail_out=0))},f.prototype.onData=function(u){this.chunks.push(u)},f.prototype.onEnd=function(u){u===k&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},E.Deflate=f,E.deflate=g,E.deflateRaw=function(u,y){return(y=y||{}).raw=!0,g(u,y)},E.gzip=function(u,y){return(y=y||{}).gzip=!0,g(u,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(d,D,E){var l=d("./zlib/inflate"),c=d("./utils/common"),a=d("./utils/strings"),_=d("./zlib/constants"),s=d("./zlib/messages"),N=d("./zlib/zstream"),k=d("./zlib/gzheader"),T=Object.prototype.toString;function h(f){if(!(this instanceof h))return new h(f);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},f||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||f&&f.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new N,this.strm.avail_out=0;var u=l.inflateInit2(this.strm,g.windowBits);if(u!==_.Z_OK)throw new Error(s[u]);this.header=new k,l.inflateGetHeader(this.strm,this.header)}function w(f,g){var u=new h(g);if(u.push(f,!0),u.err)throw u.msg||s[u.err];return u.result}h.prototype.push=function(f,g){var u,y,S,R,x,P,I=this.strm,j=this.options.chunkSize,A=this.options.dictionary,q=!1;if(this.ended)return!1;y=g===~~g?g:g===!0?_.Z_FINISH:_.Z_NO_FLUSH,typeof f=="string"?I.input=a.binstring2buf(f):T.call(f)==="[object ArrayBuffer]"?I.input=new Uint8Array(f):I.input=f,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new c.Buf8(j),I.next_out=0,I.avail_out=j),(u=l.inflate(I,_.Z_NO_FLUSH))===_.Z_NEED_DICT&&A&&(P=typeof A=="string"?a.string2buf(A):T.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,u=l.inflateSetDictionary(this.strm,P)),u===_.Z_BUF_ERROR&&q===!0&&(u=_.Z_OK,q=!1),u!==_.Z_STREAM_END&&u!==_.Z_OK)return this.onEnd(u),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&u!==_.Z_STREAM_END&&(I.avail_in!==0||y!==_.Z_FINISH&&y!==_.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=a.utf8border(I.output,I.next_out),R=I.next_out-S,x=a.buf2string(I.output,S),I.next_out=R,I.avail_out=j-R,R&&c.arraySet(I.output,I.output,S,R,0),this.onData(x)):this.onData(c.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(q=!0)}while((0<I.avail_in||I.avail_out===0)&&u!==_.Z_STREAM_END);return u===_.Z_STREAM_END&&(y=_.Z_FINISH),y===_.Z_FINISH?(u=l.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===_.Z_OK):y!==_.Z_SYNC_FLUSH||(this.onEnd(_.Z_OK),!(I.avail_out=0))},h.prototype.onData=function(f){this.chunks.push(f)},h.prototype.onEnd=function(f){f===_.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},E.Inflate=h,E.inflate=w,E.inflateRaw=function(f,g){return(g=g||{}).raw=!0,w(f,g)},E.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(d,D,E){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";E.assign=function(_){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var N=s.shift();if(N){if(typeof N!="object")throw new TypeError(N+"must be non-object");for(var k in N)N.hasOwnProperty(k)&&(_[k]=N[k])}}return _},E.shrinkBuf=function(_,s){return _.length===s?_:_.subarray?_.subarray(0,s):(_.length=s,_)};var c={arraySet:function(_,s,N,k,T){if(s.subarray&&_.subarray)_.set(s.subarray(N,N+k),T);else for(var h=0;h<k;h++)_[T+h]=s[N+h]},flattenChunks:function(_){var s,N,k,T,h,w;for(s=k=0,N=_.length;s<N;s++)k+=_[s].length;for(w=new Uint8Array(k),s=T=0,N=_.length;s<N;s++)h=_[s],w.set(h,T),T+=h.length;return w}},a={arraySet:function(_,s,N,k,T){for(var h=0;h<k;h++)_[T+h]=s[N+h]},flattenChunks:function(_){return[].concat.apply([],_)}};E.setTyped=function(_){_?(E.Buf8=Uint8Array,E.Buf16=Uint16Array,E.Buf32=Int32Array,E.assign(E,c)):(E.Buf8=Array,E.Buf16=Array,E.Buf32=Array,E.assign(E,a))},E.setTyped(l)},{}],42:[function(d,D,E){var l=d("./common"),c=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var _=new l.Buf8(256),s=0;s<256;s++)_[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function N(k,T){if(T<65537&&(k.subarray&&a||!k.subarray&&c))return String.fromCharCode.apply(null,l.shrinkBuf(k,T));for(var h="",w=0;w<T;w++)h+=String.fromCharCode(k[w]);return h}_[254]=_[254]=1,E.string2buf=function(k){var T,h,w,f,g,u=k.length,y=0;for(f=0;f<u;f++)(64512&(h=k.charCodeAt(f)))==55296&&f+1<u&&(64512&(w=k.charCodeAt(f+1)))==56320&&(h=65536+(h-55296<<10)+(w-56320),f++),y+=h<128?1:h<2048?2:h<65536?3:4;for(T=new l.Buf8(y),f=g=0;g<y;f++)(64512&(h=k.charCodeAt(f)))==55296&&f+1<u&&(64512&(w=k.charCodeAt(f+1)))==56320&&(h=65536+(h-55296<<10)+(w-56320),f++),h<128?T[g++]=h:(h<2048?T[g++]=192|h>>>6:(h<65536?T[g++]=224|h>>>12:(T[g++]=240|h>>>18,T[g++]=128|h>>>12&63),T[g++]=128|h>>>6&63),T[g++]=128|63&h);return T},E.buf2binstring=function(k){return N(k,k.length)},E.binstring2buf=function(k){for(var T=new l.Buf8(k.length),h=0,w=T.length;h<w;h++)T[h]=k.charCodeAt(h);return T},E.buf2string=function(k,T){var h,w,f,g,u=T||k.length,y=new Array(2*u);for(h=w=0;h<u;)if((f=k[h++])<128)y[w++]=f;else if(4<(g=_[f]))y[w++]=65533,h+=g-1;else{for(f&=g===2?31:g===3?15:7;1<g&&h<u;)f=f<<6|63&k[h++],g--;1<g?y[w++]=65533:f<65536?y[w++]=f:(f-=65536,y[w++]=55296|f>>10&1023,y[w++]=56320|1023&f)}return N(y,w)},E.utf8border=function(k,T){var h;for((T=T||k.length)>k.length&&(T=k.length),h=T-1;0<=h&&(192&k[h])==128;)h--;return h<0||h===0?T:h+_[k[h]]>T?h:T}},{"./common":41}],43:[function(d,D,E){D.exports=function(l,c,a,_){for(var s=65535&l|0,N=l>>>16&65535|0,k=0;a!==0;){for(a-=k=2e3<a?2e3:a;N=N+(s=s+c[_++]|0)|0,--k;);s%=65521,N%=65521}return s|N<<16|0}},{}],44:[function(d,D,E){D.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(d,D,E){var l=function(){for(var c,a=[],_=0;_<256;_++){c=_;for(var s=0;s<8;s++)c=1&c?3988292384^c>>>1:c>>>1;a[_]=c}return a}();D.exports=function(c,a,_,s){var N=l,k=s+_;c^=-1;for(var T=s;T<k;T++)c=c>>>8^N[255&(c^a[T])];return-1^c}},{}],46:[function(d,D,E){var l,c=d("../utils/common"),a=d("./trees"),_=d("./adler32"),s=d("./crc32"),N=d("./messages"),k=0,T=4,h=0,w=-2,f=-1,g=4,u=2,y=8,S=9,R=286,x=30,P=19,I=2*R+1,j=15,A=3,q=258,V=q+A+1,p=42,C=113,i=1,W=2,lt=3,H=4;function pt(r,G){return r.msg=N[G],G}function Q(r){return(r<<1)-(4<r?9:0)}function ot(r){for(var G=r.length;0<=--G;)r[G]=0}function B(r){var G=r.state,F=G.pending;F>r.avail_out&&(F=r.avail_out),F!==0&&(c.arraySet(r.output,G.pending_buf,G.pending_out,F,r.next_out),r.next_out+=F,G.pending_out+=F,r.total_out+=F,r.avail_out-=F,G.pending-=F,G.pending===0&&(G.pending_out=0))}function z(r,G){a._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,G),r.block_start=r.strstart,B(r.strm)}function ut(r,G){r.pending_buf[r.pending++]=G}function it(r,G){r.pending_buf[r.pending++]=G>>>8&255,r.pending_buf[r.pending++]=255&G}function J(r,G){var F,b,m=r.max_chain_length,O=r.strstart,Z=r.prev_length,K=r.nice_match,M=r.strstart>r.w_size-V?r.strstart-(r.w_size-V):0,et=r.window,at=r.w_mask,nt=r.prev,ft=r.strstart+q,Et=et[O+Z-1],vt=et[O+Z];r.prev_length>=r.good_match&&(m>>=2),K>r.lookahead&&(K=r.lookahead);do if(et[(F=G)+Z]===vt&&et[F+Z-1]===Et&&et[F]===et[O]&&et[++F]===et[O+1]){O+=2,F++;do;while(et[++O]===et[++F]&&et[++O]===et[++F]&&et[++O]===et[++F]&&et[++O]===et[++F]&&et[++O]===et[++F]&&et[++O]===et[++F]&&et[++O]===et[++F]&&et[++O]===et[++F]&&O<ft);if(b=q-(ft-O),O=ft-q,Z<b){if(r.match_start=G,K<=(Z=b))break;Et=et[O+Z-1],vt=et[O+Z]}}while((G=nt[G&at])>M&&--m!=0);return Z<=r.lookahead?Z:r.lookahead}function Tt(r){var G,F,b,m,O,Z,K,M,et,at,nt=r.w_size;do{if(m=r.window_size-r.lookahead-r.strstart,r.strstart>=nt+(nt-V)){for(c.arraySet(r.window,r.window,nt,nt,0),r.match_start-=nt,r.strstart-=nt,r.block_start-=nt,G=F=r.hash_size;b=r.head[--G],r.head[G]=nt<=b?b-nt:0,--F;);for(G=F=nt;b=r.prev[--G],r.prev[G]=nt<=b?b-nt:0,--F;);m+=nt}if(r.strm.avail_in===0)break;if(Z=r.strm,K=r.window,M=r.strstart+r.lookahead,et=m,at=void 0,at=Z.avail_in,et<at&&(at=et),F=at===0?0:(Z.avail_in-=at,c.arraySet(K,Z.input,Z.next_in,at,M),Z.state.wrap===1?Z.adler=_(Z.adler,K,at,M):Z.state.wrap===2&&(Z.adler=s(Z.adler,K,at,M)),Z.next_in+=at,Z.total_in+=at,at),r.lookahead+=F,r.lookahead+r.insert>=A)for(O=r.strstart-r.insert,r.ins_h=r.window[O],r.ins_h=(r.ins_h<<r.hash_shift^r.window[O+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[O+A-1])&r.hash_mask,r.prev[O&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=O,O++,r.insert--,!(r.lookahead+r.insert<A)););}while(r.lookahead<V&&r.strm.avail_in!==0)}function Nt(r,G){for(var F,b;;){if(r.lookahead<V){if(Tt(r),r.lookahead<V&&G===k)return i;if(r.lookahead===0)break}if(F=0,r.lookahead>=A&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+A-1])&r.hash_mask,F=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),F!==0&&r.strstart-F<=r.w_size-V&&(r.match_length=J(r,F)),r.match_length>=A)if(b=a._tr_tally(r,r.strstart-r.match_start,r.match_length-A),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=A){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+A-1])&r.hash_mask,F=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else b=a._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(b&&(z(r,!1),r.strm.avail_out===0))return i}return r.insert=r.strstart<A-1?r.strstart:A-1,G===T?(z(r,!0),r.strm.avail_out===0?lt:H):r.last_lit&&(z(r,!1),r.strm.avail_out===0)?i:W}function bt(r,G){for(var F,b,m;;){if(r.lookahead<V){if(Tt(r),r.lookahead<V&&G===k)return i;if(r.lookahead===0)break}if(F=0,r.lookahead>=A&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+A-1])&r.hash_mask,F=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=A-1,F!==0&&r.prev_length<r.max_lazy_match&&r.strstart-F<=r.w_size-V&&(r.match_length=J(r,F),r.match_length<=5&&(r.strategy===1||r.match_length===A&&4096<r.strstart-r.match_start)&&(r.match_length=A-1)),r.prev_length>=A&&r.match_length<=r.prev_length){for(m=r.strstart+r.lookahead-A,b=a._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-A),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=m&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+A-1])&r.hash_mask,F=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=A-1,r.strstart++,b&&(z(r,!1),r.strm.avail_out===0))return i}else if(r.match_available){if((b=a._tr_tally(r,0,r.window[r.strstart-1]))&&z(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return i}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(b=a._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<A-1?r.strstart:A-1,G===T?(z(r,!0),r.strm.avail_out===0?lt:H):r.last_lit&&(z(r,!1),r.strm.avail_out===0)?i:W}function kt(r,G,F,b,m){this.good_length=r,this.max_lazy=G,this.nice_length=F,this.max_chain=b,this.func=m}function Rt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*I),this.dyn_dtree=new c.Buf16(2*(2*x+1)),this.bl_tree=new c.Buf16(2*(2*P+1)),ot(this.dyn_ltree),ot(this.dyn_dtree),ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(j+1),this.heap=new c.Buf16(2*R+1),ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*R+1),ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xt(r){var G;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=u,(G=r.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?p:C,r.adler=G.wrap===2?0:1,G.last_flush=k,a._tr_init(G),h):pt(r,w)}function Ct(r){var G=xt(r);return G===h&&function(F){F.window_size=2*F.w_size,ot(F.head),F.max_lazy_match=l[F.level].max_lazy,F.good_match=l[F.level].good_length,F.nice_match=l[F.level].nice_length,F.max_chain_length=l[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=A-1,F.match_available=0,F.ins_h=0}(r.state),G}function Lt(r,G,F,b,m,O){if(!r)return w;var Z=1;if(G===f&&(G=6),b<0?(Z=0,b=-b):15<b&&(Z=2,b-=16),m<1||S<m||F!==y||b<8||15<b||G<0||9<G||O<0||g<O)return pt(r,w);b===8&&(b=9);var K=new Rt;return(r.state=K).strm=r,K.wrap=Z,K.gzhead=null,K.w_bits=b,K.w_size=1<<K.w_bits,K.w_mask=K.w_size-1,K.hash_bits=m+7,K.hash_size=1<<K.hash_bits,K.hash_mask=K.hash_size-1,K.hash_shift=~~((K.hash_bits+A-1)/A),K.window=new c.Buf8(2*K.w_size),K.head=new c.Buf16(K.hash_size),K.prev=new c.Buf16(K.w_size),K.lit_bufsize=1<<m+6,K.pending_buf_size=4*K.lit_bufsize,K.pending_buf=new c.Buf8(K.pending_buf_size),K.d_buf=1*K.lit_bufsize,K.l_buf=3*K.lit_bufsize,K.level=G,K.strategy=O,K.method=F,Ct(r)}l=[new kt(0,0,0,0,function(r,G){var F=65535;for(F>r.pending_buf_size-5&&(F=r.pending_buf_size-5);;){if(r.lookahead<=1){if(Tt(r),r.lookahead===0&&G===k)return i;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var b=r.block_start+F;if((r.strstart===0||r.strstart>=b)&&(r.lookahead=r.strstart-b,r.strstart=b,z(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-V&&(z(r,!1),r.strm.avail_out===0))return i}return r.insert=0,G===T?(z(r,!0),r.strm.avail_out===0?lt:H):(r.strstart>r.block_start&&(z(r,!1),r.strm.avail_out),i)}),new kt(4,4,8,4,Nt),new kt(4,5,16,8,Nt),new kt(4,6,32,32,Nt),new kt(4,4,16,16,bt),new kt(8,16,32,32,bt),new kt(8,16,128,128,bt),new kt(8,32,128,256,bt),new kt(32,128,258,1024,bt),new kt(32,258,258,4096,bt)],E.deflateInit=function(r,G){return Lt(r,G,y,15,8,0)},E.deflateInit2=Lt,E.deflateReset=Ct,E.deflateResetKeep=xt,E.deflateSetHeader=function(r,G){return r&&r.state?r.state.wrap!==2?w:(r.state.gzhead=G,h):w},E.deflate=function(r,G){var F,b,m,O;if(!r||!r.state||5<G||G<0)return r?pt(r,w):w;if(b=r.state,!r.output||!r.input&&r.avail_in!==0||b.status===666&&G!==T)return pt(r,r.avail_out===0?-5:w);if(b.strm=r,F=b.last_flush,b.last_flush=G,b.status===p)if(b.wrap===2)r.adler=0,ut(b,31),ut(b,139),ut(b,8),b.gzhead?(ut(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),ut(b,255&b.gzhead.time),ut(b,b.gzhead.time>>8&255),ut(b,b.gzhead.time>>16&255),ut(b,b.gzhead.time>>24&255),ut(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),ut(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(ut(b,255&b.gzhead.extra.length),ut(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(r.adler=s(r.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(ut(b,0),ut(b,0),ut(b,0),ut(b,0),ut(b,0),ut(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),ut(b,3),b.status=C);else{var Z=y+(b.w_bits-8<<4)<<8;Z|=(2<=b.strategy||b.level<2?0:b.level<6?1:b.level===6?2:3)<<6,b.strstart!==0&&(Z|=32),Z+=31-Z%31,b.status=C,it(b,Z),b.strstart!==0&&(it(b,r.adler>>>16),it(b,65535&r.adler)),r.adler=1}if(b.status===69)if(b.gzhead.extra){for(m=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>m&&(r.adler=s(r.adler,b.pending_buf,b.pending-m,m)),B(r),m=b.pending,b.pending!==b.pending_buf_size));)ut(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>m&&(r.adler=s(r.adler,b.pending_buf,b.pending-m,m)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(b.status===73)if(b.gzhead.name){m=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>m&&(r.adler=s(r.adler,b.pending_buf,b.pending-m,m)),B(r),m=b.pending,b.pending===b.pending_buf_size)){O=1;break}O=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,ut(b,O)}while(O!==0);b.gzhead.hcrc&&b.pending>m&&(r.adler=s(r.adler,b.pending_buf,b.pending-m,m)),O===0&&(b.gzindex=0,b.status=91)}else b.status=91;if(b.status===91)if(b.gzhead.comment){m=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>m&&(r.adler=s(r.adler,b.pending_buf,b.pending-m,m)),B(r),m=b.pending,b.pending===b.pending_buf_size)){O=1;break}O=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,ut(b,O)}while(O!==0);b.gzhead.hcrc&&b.pending>m&&(r.adler=s(r.adler,b.pending_buf,b.pending-m,m)),O===0&&(b.status=103)}else b.status=103;if(b.status===103&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&B(r),b.pending+2<=b.pending_buf_size&&(ut(b,255&r.adler),ut(b,r.adler>>8&255),r.adler=0,b.status=C)):b.status=C),b.pending!==0){if(B(r),r.avail_out===0)return b.last_flush=-1,h}else if(r.avail_in===0&&Q(G)<=Q(F)&&G!==T)return pt(r,-5);if(b.status===666&&r.avail_in!==0)return pt(r,-5);if(r.avail_in!==0||b.lookahead!==0||G!==k&&b.status!==666){var K=b.strategy===2?function(M,et){for(var at;;){if(M.lookahead===0&&(Tt(M),M.lookahead===0)){if(et===k)return i;break}if(M.match_length=0,at=a._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,at&&(z(M,!1),M.strm.avail_out===0))return i}return M.insert=0,et===T?(z(M,!0),M.strm.avail_out===0?lt:H):M.last_lit&&(z(M,!1),M.strm.avail_out===0)?i:W}(b,G):b.strategy===3?function(M,et){for(var at,nt,ft,Et,vt=M.window;;){if(M.lookahead<=q){if(Tt(M),M.lookahead<=q&&et===k)return i;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=A&&0<M.strstart&&(nt=vt[ft=M.strstart-1])===vt[++ft]&&nt===vt[++ft]&&nt===vt[++ft]){Et=M.strstart+q;do;while(nt===vt[++ft]&&nt===vt[++ft]&&nt===vt[++ft]&&nt===vt[++ft]&&nt===vt[++ft]&&nt===vt[++ft]&&nt===vt[++ft]&&nt===vt[++ft]&&ft<Et);M.match_length=q-(Et-ft),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=A?(at=a._tr_tally(M,1,M.match_length-A),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(at=a._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),at&&(z(M,!1),M.strm.avail_out===0))return i}return M.insert=0,et===T?(z(M,!0),M.strm.avail_out===0?lt:H):M.last_lit&&(z(M,!1),M.strm.avail_out===0)?i:W}(b,G):l[b.level].func(b,G);if(K!==lt&&K!==H||(b.status=666),K===i||K===lt)return r.avail_out===0&&(b.last_flush=-1),h;if(K===W&&(G===1?a._tr_align(b):G!==5&&(a._tr_stored_block(b,0,0,!1),G===3&&(ot(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),B(r),r.avail_out===0))return b.last_flush=-1,h}return G!==T?h:b.wrap<=0?1:(b.wrap===2?(ut(b,255&r.adler),ut(b,r.adler>>8&255),ut(b,r.adler>>16&255),ut(b,r.adler>>24&255),ut(b,255&r.total_in),ut(b,r.total_in>>8&255),ut(b,r.total_in>>16&255),ut(b,r.total_in>>24&255)):(it(b,r.adler>>>16),it(b,65535&r.adler)),B(r),0<b.wrap&&(b.wrap=-b.wrap),b.pending!==0?h:1)},E.deflateEnd=function(r){var G;return r&&r.state?(G=r.state.status)!==p&&G!==69&&G!==73&&G!==91&&G!==103&&G!==C&&G!==666?pt(r,w):(r.state=null,G===C?pt(r,-3):h):w},E.deflateSetDictionary=function(r,G){var F,b,m,O,Z,K,M,et,at=G.length;if(!r||!r.state||(O=(F=r.state).wrap)===2||O===1&&F.status!==p||F.lookahead)return w;for(O===1&&(r.adler=_(r.adler,G,at,0)),F.wrap=0,at>=F.w_size&&(O===0&&(ot(F.head),F.strstart=0,F.block_start=0,F.insert=0),et=new c.Buf8(F.w_size),c.arraySet(et,G,at-F.w_size,F.w_size,0),G=et,at=F.w_size),Z=r.avail_in,K=r.next_in,M=r.input,r.avail_in=at,r.next_in=0,r.input=G,Tt(F);F.lookahead>=A;){for(b=F.strstart,m=F.lookahead-(A-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[b+A-1])&F.hash_mask,F.prev[b&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=b,b++,--m;);F.strstart=b,F.lookahead=A-1,Tt(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=A-1,F.match_available=0,r.next_in=K,r.input=M,r.avail_in=Z,F.wrap=O,h},E.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(d,D,E){D.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(d,D,E){D.exports=function(l,c){var a,_,s,N,k,T,h,w,f,g,u,y,S,R,x,P,I,j,A,q,V,p,C,i,W;a=l.state,_=l.next_in,i=l.input,s=_+(l.avail_in-5),N=l.next_out,W=l.output,k=N-(c-l.avail_out),T=N+(l.avail_out-257),h=a.dmax,w=a.wsize,f=a.whave,g=a.wnext,u=a.window,y=a.hold,S=a.bits,R=a.lencode,x=a.distcode,P=(1<<a.lenbits)-1,I=(1<<a.distbits)-1;t:do{S<15&&(y+=i[_++]<<S,S+=8,y+=i[_++]<<S,S+=8),j=R[y&P];e:for(;;){if(y>>>=A=j>>>24,S-=A,(A=j>>>16&255)===0)W[N++]=65535&j;else{if(!(16&A)){if(!(64&A)){j=R[(65535&j)+(y&(1<<A)-1)];continue e}if(32&A){a.mode=12;break t}l.msg="invalid literal/length code",a.mode=30;break t}q=65535&j,(A&=15)&&(S<A&&(y+=i[_++]<<S,S+=8),q+=y&(1<<A)-1,y>>>=A,S-=A),S<15&&(y+=i[_++]<<S,S+=8,y+=i[_++]<<S,S+=8),j=x[y&I];r:for(;;){if(y>>>=A=j>>>24,S-=A,!(16&(A=j>>>16&255))){if(!(64&A)){j=x[(65535&j)+(y&(1<<A)-1)];continue r}l.msg="invalid distance code",a.mode=30;break t}if(V=65535&j,S<(A&=15)&&(y+=i[_++]<<S,(S+=8)<A&&(y+=i[_++]<<S,S+=8)),h<(V+=y&(1<<A)-1)){l.msg="invalid distance too far back",a.mode=30;break t}if(y>>>=A,S-=A,(A=N-k)<V){if(f<(A=V-A)&&a.sane){l.msg="invalid distance too far back",a.mode=30;break t}if(C=u,(p=0)===g){if(p+=w-A,A<q){for(q-=A;W[N++]=u[p++],--A;);p=N-V,C=W}}else if(g<A){if(p+=w+g-A,(A-=g)<q){for(q-=A;W[N++]=u[p++],--A;);if(p=0,g<q){for(q-=A=g;W[N++]=u[p++],--A;);p=N-V,C=W}}}else if(p+=g-A,A<q){for(q-=A;W[N++]=u[p++],--A;);p=N-V,C=W}for(;2<q;)W[N++]=C[p++],W[N++]=C[p++],W[N++]=C[p++],q-=3;q&&(W[N++]=C[p++],1<q&&(W[N++]=C[p++]))}else{for(p=N-V;W[N++]=W[p++],W[N++]=W[p++],W[N++]=W[p++],2<(q-=3););q&&(W[N++]=W[p++],1<q&&(W[N++]=W[p++]))}break}}break}}while(_<s&&N<T);_-=q=S>>3,y&=(1<<(S-=q<<3))-1,l.next_in=_,l.next_out=N,l.avail_in=_<s?s-_+5:5-(_-s),l.avail_out=N<T?T-N+257:257-(N-T),a.hold=y,a.bits=S}},{}],49:[function(d,D,E){var l=d("../utils/common"),c=d("./adler32"),a=d("./crc32"),_=d("./inffast"),s=d("./inftrees"),N=1,k=2,T=0,h=-2,w=1,f=852,g=592;function u(p){return(p>>>24&255)+(p>>>8&65280)+((65280&p)<<8)+((255&p)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(p){var C;return p&&p.state?(C=p.state,p.total_in=p.total_out=C.total=0,p.msg="",C.wrap&&(p.adler=1&C.wrap),C.mode=w,C.last=0,C.havedict=0,C.dmax=32768,C.head=null,C.hold=0,C.bits=0,C.lencode=C.lendyn=new l.Buf32(f),C.distcode=C.distdyn=new l.Buf32(g),C.sane=1,C.back=-1,T):h}function R(p){var C;return p&&p.state?((C=p.state).wsize=0,C.whave=0,C.wnext=0,S(p)):h}function x(p,C){var i,W;return p&&p.state?(W=p.state,C<0?(i=0,C=-C):(i=1+(C>>4),C<48&&(C&=15)),C&&(C<8||15<C)?h:(W.window!==null&&W.wbits!==C&&(W.window=null),W.wrap=i,W.wbits=C,R(p))):h}function P(p,C){var i,W;return p?(W=new y,(p.state=W).window=null,(i=x(p,C))!==T&&(p.state=null),i):h}var I,j,A=!0;function q(p){if(A){var C;for(I=new l.Buf32(512),j=new l.Buf32(32),C=0;C<144;)p.lens[C++]=8;for(;C<256;)p.lens[C++]=9;for(;C<280;)p.lens[C++]=7;for(;C<288;)p.lens[C++]=8;for(s(N,p.lens,0,288,I,0,p.work,{bits:9}),C=0;C<32;)p.lens[C++]=5;s(k,p.lens,0,32,j,0,p.work,{bits:5}),A=!1}p.lencode=I,p.lenbits=9,p.distcode=j,p.distbits=5}function V(p,C,i,W){var lt,H=p.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new l.Buf8(H.wsize)),W>=H.wsize?(l.arraySet(H.window,C,i-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(W<(lt=H.wsize-H.wnext)&&(lt=W),l.arraySet(H.window,C,i-W,lt,H.wnext),(W-=lt)?(l.arraySet(H.window,C,i-W,W,0),H.wnext=W,H.whave=H.wsize):(H.wnext+=lt,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=lt))),0}E.inflateReset=R,E.inflateReset2=x,E.inflateResetKeep=S,E.inflateInit=function(p){return P(p,15)},E.inflateInit2=P,E.inflate=function(p,C){var i,W,lt,H,pt,Q,ot,B,z,ut,it,J,Tt,Nt,bt,kt,Rt,xt,Ct,Lt,r,G,F,b,m=0,O=new l.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!p||!p.state||!p.output||!p.input&&p.avail_in!==0)return h;(i=p.state).mode===12&&(i.mode=13),pt=p.next_out,lt=p.output,ot=p.avail_out,H=p.next_in,W=p.input,Q=p.avail_in,B=i.hold,z=i.bits,ut=Q,it=ot,G=T;t:for(;;)switch(i.mode){case w:if(i.wrap===0){i.mode=13;break}for(;z<16;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(2&i.wrap&&B===35615){O[i.check=0]=255&B,O[1]=B>>>8&255,i.check=a(i.check,O,2,0),z=B=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&B)<<8)+(B>>8))%31){p.msg="incorrect header check",i.mode=30;break}if((15&B)!=8){p.msg="unknown compression method",i.mode=30;break}if(z-=4,r=8+(15&(B>>>=4)),i.wbits===0)i.wbits=r;else if(r>i.wbits){p.msg="invalid window size",i.mode=30;break}i.dmax=1<<r,p.adler=i.check=1,i.mode=512&B?10:12,z=B=0;break;case 2:for(;z<16;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(i.flags=B,(255&i.flags)!=8){p.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){p.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=B>>8&1),512&i.flags&&(O[0]=255&B,O[1]=B>>>8&255,i.check=a(i.check,O,2,0)),z=B=0,i.mode=3;case 3:for(;z<32;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}i.head&&(i.head.time=B),512&i.flags&&(O[0]=255&B,O[1]=B>>>8&255,O[2]=B>>>16&255,O[3]=B>>>24&255,i.check=a(i.check,O,4,0)),z=B=0,i.mode=4;case 4:for(;z<16;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}i.head&&(i.head.xflags=255&B,i.head.os=B>>8),512&i.flags&&(O[0]=255&B,O[1]=B>>>8&255,i.check=a(i.check,O,2,0)),z=B=0,i.mode=5;case 5:if(1024&i.flags){for(;z<16;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}i.length=B,i.head&&(i.head.extra_len=B),512&i.flags&&(O[0]=255&B,O[1]=B>>>8&255,i.check=a(i.check,O,2,0)),z=B=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(Q<(J=i.length)&&(J=Q),J&&(i.head&&(r=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),l.arraySet(i.head.extra,W,H,J,r)),512&i.flags&&(i.check=a(i.check,W,J,H)),Q-=J,H+=J,i.length-=J),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(Q===0)break t;for(J=0;r=W[H+J++],i.head&&r&&i.length<65536&&(i.head.name+=String.fromCharCode(r)),r&&J<Q;);if(512&i.flags&&(i.check=a(i.check,W,J,H)),Q-=J,H+=J,r)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(Q===0)break t;for(J=0;r=W[H+J++],i.head&&r&&i.length<65536&&(i.head.comment+=String.fromCharCode(r)),r&&J<Q;);if(512&i.flags&&(i.check=a(i.check,W,J,H)),Q-=J,H+=J,r)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;z<16;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(B!==(65535&i.check)){p.msg="header crc mismatch",i.mode=30;break}z=B=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),p.adler=i.check=0,i.mode=12;break;case 10:for(;z<32;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}p.adler=i.check=u(B),z=B=0,i.mode=11;case 11:if(i.havedict===0)return p.next_out=pt,p.avail_out=ot,p.next_in=H,p.avail_in=Q,i.hold=B,i.bits=z,2;p.adler=i.check=1,i.mode=12;case 12:if(C===5||C===6)break t;case 13:if(i.last){B>>>=7&z,z-=7&z,i.mode=27;break}for(;z<3;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}switch(i.last=1&B,z-=1,3&(B>>>=1)){case 0:i.mode=14;break;case 1:if(q(i),i.mode=20,C!==6)break;B>>>=2,z-=2;break t;case 2:i.mode=17;break;case 3:p.msg="invalid block type",i.mode=30}B>>>=2,z-=2;break;case 14:for(B>>>=7&z,z-=7&z;z<32;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if((65535&B)!=(B>>>16^65535)){p.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&B,z=B=0,i.mode=15,C===6)break t;case 15:i.mode=16;case 16:if(J=i.length){if(Q<J&&(J=Q),ot<J&&(J=ot),J===0)break t;l.arraySet(lt,W,H,J,pt),Q-=J,H+=J,ot-=J,pt+=J,i.length-=J;break}i.mode=12;break;case 17:for(;z<14;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(i.nlen=257+(31&B),B>>>=5,z-=5,i.ndist=1+(31&B),B>>>=5,z-=5,i.ncode=4+(15&B),B>>>=4,z-=4,286<i.nlen||30<i.ndist){p.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;z<3;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}i.lens[Z[i.have++]]=7&B,B>>>=3,z-=3}for(;i.have<19;)i.lens[Z[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,F={bits:i.lenbits},G=s(0,i.lens,0,19,i.lencode,0,i.work,F),i.lenbits=F.bits,G){p.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;kt=(m=i.lencode[B&(1<<i.lenbits)-1])>>>16&255,Rt=65535&m,!((bt=m>>>24)<=z);){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(Rt<16)B>>>=bt,z-=bt,i.lens[i.have++]=Rt;else{if(Rt===16){for(b=bt+2;z<b;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(B>>>=bt,z-=bt,i.have===0){p.msg="invalid bit length repeat",i.mode=30;break}r=i.lens[i.have-1],J=3+(3&B),B>>>=2,z-=2}else if(Rt===17){for(b=bt+3;z<b;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}z-=bt,r=0,J=3+(7&(B>>>=bt)),B>>>=3,z-=3}else{for(b=bt+7;z<b;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}z-=bt,r=0,J=11+(127&(B>>>=bt)),B>>>=7,z-=7}if(i.have+J>i.nlen+i.ndist){p.msg="invalid bit length repeat",i.mode=30;break}for(;J--;)i.lens[i.have++]=r}}if(i.mode===30)break;if(i.lens[256]===0){p.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,F={bits:i.lenbits},G=s(N,i.lens,0,i.nlen,i.lencode,0,i.work,F),i.lenbits=F.bits,G){p.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,F={bits:i.distbits},G=s(k,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,F),i.distbits=F.bits,G){p.msg="invalid distances set",i.mode=30;break}if(i.mode=20,C===6)break t;case 20:i.mode=21;case 21:if(6<=Q&&258<=ot){p.next_out=pt,p.avail_out=ot,p.next_in=H,p.avail_in=Q,i.hold=B,i.bits=z,_(p,it),pt=p.next_out,lt=p.output,ot=p.avail_out,H=p.next_in,W=p.input,Q=p.avail_in,B=i.hold,z=i.bits,i.mode===12&&(i.back=-1);break}for(i.back=0;kt=(m=i.lencode[B&(1<<i.lenbits)-1])>>>16&255,Rt=65535&m,!((bt=m>>>24)<=z);){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(kt&&!(240&kt)){for(xt=bt,Ct=kt,Lt=Rt;kt=(m=i.lencode[Lt+((B&(1<<xt+Ct)-1)>>xt)])>>>16&255,Rt=65535&m,!(xt+(bt=m>>>24)<=z);){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}B>>>=xt,z-=xt,i.back+=xt}if(B>>>=bt,z-=bt,i.back+=bt,i.length=Rt,kt===0){i.mode=26;break}if(32&kt){i.back=-1,i.mode=12;break}if(64&kt){p.msg="invalid literal/length code",i.mode=30;break}i.extra=15&kt,i.mode=22;case 22:if(i.extra){for(b=i.extra;z<b;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}i.length+=B&(1<<i.extra)-1,B>>>=i.extra,z-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;kt=(m=i.distcode[B&(1<<i.distbits)-1])>>>16&255,Rt=65535&m,!((bt=m>>>24)<=z);){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(!(240&kt)){for(xt=bt,Ct=kt,Lt=Rt;kt=(m=i.distcode[Lt+((B&(1<<xt+Ct)-1)>>xt)])>>>16&255,Rt=65535&m,!(xt+(bt=m>>>24)<=z);){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}B>>>=xt,z-=xt,i.back+=xt}if(B>>>=bt,z-=bt,i.back+=bt,64&kt){p.msg="invalid distance code",i.mode=30;break}i.offset=Rt,i.extra=15&kt,i.mode=24;case 24:if(i.extra){for(b=i.extra;z<b;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}i.offset+=B&(1<<i.extra)-1,B>>>=i.extra,z-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){p.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(ot===0)break t;if(J=it-ot,i.offset>J){if((J=i.offset-J)>i.whave&&i.sane){p.msg="invalid distance too far back",i.mode=30;break}Tt=J>i.wnext?(J-=i.wnext,i.wsize-J):i.wnext-J,J>i.length&&(J=i.length),Nt=i.window}else Nt=lt,Tt=pt-i.offset,J=i.length;for(ot<J&&(J=ot),ot-=J,i.length-=J;lt[pt++]=Nt[Tt++],--J;);i.length===0&&(i.mode=21);break;case 26:if(ot===0)break t;lt[pt++]=i.length,ot--,i.mode=21;break;case 27:if(i.wrap){for(;z<32;){if(Q===0)break t;Q--,B|=W[H++]<<z,z+=8}if(it-=ot,p.total_out+=it,i.total+=it,it&&(p.adler=i.check=i.flags?a(i.check,lt,it,pt-it):c(i.check,lt,it,pt-it)),it=ot,(i.flags?B:u(B))!==i.check){p.msg="incorrect data check",i.mode=30;break}z=B=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;z<32;){if(Q===0)break t;Q--,B+=W[H++]<<z,z+=8}if(B!==(4294967295&i.total)){p.msg="incorrect length check",i.mode=30;break}z=B=0}i.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return h}return p.next_out=pt,p.avail_out=ot,p.next_in=H,p.avail_in=Q,i.hold=B,i.bits=z,(i.wsize||it!==p.avail_out&&i.mode<30&&(i.mode<27||C!==4))&&V(p,p.output,p.next_out,it-p.avail_out)?(i.mode=31,-4):(ut-=p.avail_in,it-=p.avail_out,p.total_in+=ut,p.total_out+=it,i.total+=it,i.wrap&&it&&(p.adler=i.check=i.flags?a(i.check,lt,it,p.next_out-it):c(i.check,lt,it,p.next_out-it)),p.data_type=i.bits+(i.last?64:0)+(i.mode===12?128:0)+(i.mode===20||i.mode===15?256:0),(ut==0&&it===0||C===4)&&G===T&&(G=-5),G)},E.inflateEnd=function(p){if(!p||!p.state)return h;var C=p.state;return C.window&&(C.window=null),p.state=null,T},E.inflateGetHeader=function(p,C){var i;return p&&p.state&&2&(i=p.state).wrap?((i.head=C).done=!1,T):h},E.inflateSetDictionary=function(p,C){var i,W=C.length;return p&&p.state?(i=p.state).wrap!==0&&i.mode!==11?h:i.mode===11&&c(1,C,W,0)!==i.check?-3:V(p,C,W,W)?(i.mode=31,-4):(i.havedict=1,T):h},E.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(d,D,E){var l=d("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];D.exports=function(N,k,T,h,w,f,g,u){var y,S,R,x,P,I,j,A,q,V=u.bits,p=0,C=0,i=0,W=0,lt=0,H=0,pt=0,Q=0,ot=0,B=0,z=null,ut=0,it=new l.Buf16(16),J=new l.Buf16(16),Tt=null,Nt=0;for(p=0;p<=15;p++)it[p]=0;for(C=0;C<h;C++)it[k[T+C]]++;for(lt=V,W=15;1<=W&&it[W]===0;W--);if(W<lt&&(lt=W),W===0)return w[f++]=20971520,w[f++]=20971520,u.bits=1,0;for(i=1;i<W&&it[i]===0;i++);for(lt<i&&(lt=i),p=Q=1;p<=15;p++)if(Q<<=1,(Q-=it[p])<0)return-1;if(0<Q&&(N===0||W!==1))return-1;for(J[1]=0,p=1;p<15;p++)J[p+1]=J[p]+it[p];for(C=0;C<h;C++)k[T+C]!==0&&(g[J[k[T+C]]++]=C);if(I=N===0?(z=Tt=g,19):N===1?(z=c,ut-=257,Tt=a,Nt-=257,256):(z=_,Tt=s,-1),p=i,P=f,pt=C=B=0,R=-1,x=(ot=1<<(H=lt))-1,N===1&&852<ot||N===2&&592<ot)return 1;for(;;){for(j=p-pt,q=g[C]<I?(A=0,g[C]):g[C]>I?(A=Tt[Nt+g[C]],z[ut+g[C]]):(A=96,0),y=1<<p-pt,i=S=1<<H;w[P+(B>>pt)+(S-=y)]=j<<24|A<<16|q|0,S!==0;);for(y=1<<p-1;B&y;)y>>=1;if(y!==0?(B&=y-1,B+=y):B=0,C++,--it[p]==0){if(p===W)break;p=k[T+g[C]]}if(lt<p&&(B&x)!==R){for(pt===0&&(pt=lt),P+=i,Q=1<<(H=p-pt);H+pt<W&&!((Q-=it[H+pt])<=0);)H++,Q<<=1;if(ot+=1<<H,N===1&&852<ot||N===2&&592<ot)return 1;w[R=B&x]=lt<<24|H<<16|P-f|0}}return B!==0&&(w[P+B]=p-pt<<24|64<<16|0),u.bits=lt,0}},{"../utils/common":41}],51:[function(d,D,E){D.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(d,D,E){var l=d("../utils/common"),c=0,a=1;function _(m){for(var O=m.length;0<=--O;)m[O]=0}var s=0,N=29,k=256,T=k+1+N,h=30,w=19,f=2*T+1,g=15,u=16,y=7,S=256,R=16,x=17,P=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(T+2));_(V);var p=new Array(2*h);_(p);var C=new Array(512);_(C);var i=new Array(256);_(i);var W=new Array(N);_(W);var lt,H,pt,Q=new Array(h);function ot(m,O,Z,K,M){this.static_tree=m,this.extra_bits=O,this.extra_base=Z,this.elems=K,this.max_length=M,this.has_stree=m&&m.length}function B(m,O){this.dyn_tree=m,this.max_code=0,this.stat_desc=O}function z(m){return m<256?C[m]:C[256+(m>>>7)]}function ut(m,O){m.pending_buf[m.pending++]=255&O,m.pending_buf[m.pending++]=O>>>8&255}function it(m,O,Z){m.bi_valid>u-Z?(m.bi_buf|=O<<m.bi_valid&65535,ut(m,m.bi_buf),m.bi_buf=O>>u-m.bi_valid,m.bi_valid+=Z-u):(m.bi_buf|=O<<m.bi_valid&65535,m.bi_valid+=Z)}function J(m,O,Z){it(m,Z[2*O],Z[2*O+1])}function Tt(m,O){for(var Z=0;Z|=1&m,m>>>=1,Z<<=1,0<--O;);return Z>>>1}function Nt(m,O,Z){var K,M,et=new Array(g+1),at=0;for(K=1;K<=g;K++)et[K]=at=at+Z[K-1]<<1;for(M=0;M<=O;M++){var nt=m[2*M+1];nt!==0&&(m[2*M]=Tt(et[nt]++,nt))}}function bt(m){var O;for(O=0;O<T;O++)m.dyn_ltree[2*O]=0;for(O=0;O<h;O++)m.dyn_dtree[2*O]=0;for(O=0;O<w;O++)m.bl_tree[2*O]=0;m.dyn_ltree[2*S]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function kt(m){8<m.bi_valid?ut(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function Rt(m,O,Z,K){var M=2*O,et=2*Z;return m[M]<m[et]||m[M]===m[et]&&K[O]<=K[Z]}function xt(m,O,Z){for(var K=m.heap[Z],M=Z<<1;M<=m.heap_len&&(M<m.heap_len&&Rt(O,m.heap[M+1],m.heap[M],m.depth)&&M++,!Rt(O,K,m.heap[M],m.depth));)m.heap[Z]=m.heap[M],Z=M,M<<=1;m.heap[Z]=K}function Ct(m,O,Z){var K,M,et,at,nt=0;if(m.last_lit!==0)for(;K=m.pending_buf[m.d_buf+2*nt]<<8|m.pending_buf[m.d_buf+2*nt+1],M=m.pending_buf[m.l_buf+nt],nt++,K===0?J(m,M,O):(J(m,(et=i[M])+k+1,O),(at=I[et])!==0&&it(m,M-=W[et],at),J(m,et=z(--K),Z),(at=j[et])!==0&&it(m,K-=Q[et],at)),nt<m.last_lit;);J(m,S,O)}function Lt(m,O){var Z,K,M,et=O.dyn_tree,at=O.stat_desc.static_tree,nt=O.stat_desc.has_stree,ft=O.stat_desc.elems,Et=-1;for(m.heap_len=0,m.heap_max=f,Z=0;Z<ft;Z++)et[2*Z]!==0?(m.heap[++m.heap_len]=Et=Z,m.depth[Z]=0):et[2*Z+1]=0;for(;m.heap_len<2;)et[2*(M=m.heap[++m.heap_len]=Et<2?++Et:0)]=1,m.depth[M]=0,m.opt_len--,nt&&(m.static_len-=at[2*M+1]);for(O.max_code=Et,Z=m.heap_len>>1;1<=Z;Z--)xt(m,et,Z);for(M=ft;Z=m.heap[1],m.heap[1]=m.heap[m.heap_len--],xt(m,et,1),K=m.heap[1],m.heap[--m.heap_max]=Z,m.heap[--m.heap_max]=K,et[2*M]=et[2*Z]+et[2*K],m.depth[M]=(m.depth[Z]>=m.depth[K]?m.depth[Z]:m.depth[K])+1,et[2*Z+1]=et[2*K+1]=M,m.heap[1]=M++,xt(m,et,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(vt,Dt){var Yt,Mt,ne,It,_t,ue,Bt=Dt.dyn_tree,he=Dt.max_code,Kt=Dt.stat_desc.static_tree,De=Dt.stat_desc.has_stree,Ht=Dt.stat_desc.extra_bits,de=Dt.stat_desc.extra_base,Vt=Dt.stat_desc.max_length,ie=0;for(It=0;It<=g;It++)vt.bl_count[It]=0;for(Bt[2*vt.heap[vt.heap_max]+1]=0,Yt=vt.heap_max+1;Yt<f;Yt++)Vt<(It=Bt[2*Bt[2*(Mt=vt.heap[Yt])+1]+1]+1)&&(It=Vt,ie++),Bt[2*Mt+1]=It,he<Mt||(vt.bl_count[It]++,_t=0,de<=Mt&&(_t=Ht[Mt-de]),ue=Bt[2*Mt],vt.opt_len+=ue*(It+_t),De&&(vt.static_len+=ue*(Kt[2*Mt+1]+_t)));if(ie!==0){do{for(It=Vt-1;vt.bl_count[It]===0;)It--;vt.bl_count[It]--,vt.bl_count[It+1]+=2,vt.bl_count[Vt]--,ie-=2}while(0<ie);for(It=Vt;It!==0;It--)for(Mt=vt.bl_count[It];Mt!==0;)he<(ne=vt.heap[--Yt])||(Bt[2*ne+1]!==It&&(vt.opt_len+=(It-Bt[2*ne+1])*Bt[2*ne],Bt[2*ne+1]=It),Mt--)}}(m,O),Nt(et,Et,m.bl_count)}function r(m,O,Z){var K,M,et=-1,at=O[1],nt=0,ft=7,Et=4;for(at===0&&(ft=138,Et=3),O[2*(Z+1)+1]=65535,K=0;K<=Z;K++)M=at,at=O[2*(K+1)+1],++nt<ft&&M===at||(nt<Et?m.bl_tree[2*M]+=nt:M!==0?(M!==et&&m.bl_tree[2*M]++,m.bl_tree[2*R]++):nt<=10?m.bl_tree[2*x]++:m.bl_tree[2*P]++,et=M,Et=(nt=0)===at?(ft=138,3):M===at?(ft=6,3):(ft=7,4))}function G(m,O,Z){var K,M,et=-1,at=O[1],nt=0,ft=7,Et=4;for(at===0&&(ft=138,Et=3),K=0;K<=Z;K++)if(M=at,at=O[2*(K+1)+1],!(++nt<ft&&M===at)){if(nt<Et)for(;J(m,M,m.bl_tree),--nt!=0;);else M!==0?(M!==et&&(J(m,M,m.bl_tree),nt--),J(m,R,m.bl_tree),it(m,nt-3,2)):nt<=10?(J(m,x,m.bl_tree),it(m,nt-3,3)):(J(m,P,m.bl_tree),it(m,nt-11,7));et=M,Et=(nt=0)===at?(ft=138,3):M===at?(ft=6,3):(ft=7,4)}}_(Q);var F=!1;function b(m,O,Z,K){it(m,(s<<1)+(K?1:0),3),function(M,et,at,nt){kt(M),ut(M,at),ut(M,~at),l.arraySet(M.pending_buf,M.window,et,at,M.pending),M.pending+=at}(m,O,Z)}E._tr_init=function(m){F||(function(){var O,Z,K,M,et,at=new Array(g+1);for(M=K=0;M<N-1;M++)for(W[M]=K,O=0;O<1<<I[M];O++)i[K++]=M;for(i[K-1]=M,M=et=0;M<16;M++)for(Q[M]=et,O=0;O<1<<j[M];O++)C[et++]=M;for(et>>=7;M<h;M++)for(Q[M]=et<<7,O=0;O<1<<j[M]-7;O++)C[256+et++]=M;for(Z=0;Z<=g;Z++)at[Z]=0;for(O=0;O<=143;)V[2*O+1]=8,O++,at[8]++;for(;O<=255;)V[2*O+1]=9,O++,at[9]++;for(;O<=279;)V[2*O+1]=7,O++,at[7]++;for(;O<=287;)V[2*O+1]=8,O++,at[8]++;for(Nt(V,T+1,at),O=0;O<h;O++)p[2*O+1]=5,p[2*O]=Tt(O,5);lt=new ot(V,I,k+1,T,g),H=new ot(p,j,0,h,g),pt=new ot(new Array(0),A,0,w,y)}(),F=!0),m.l_desc=new B(m.dyn_ltree,lt),m.d_desc=new B(m.dyn_dtree,H),m.bl_desc=new B(m.bl_tree,pt),m.bi_buf=0,m.bi_valid=0,bt(m)},E._tr_stored_block=b,E._tr_flush_block=function(m,O,Z,K){var M,et,at=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(nt){var ft,Et=4093624447;for(ft=0;ft<=31;ft++,Et>>>=1)if(1&Et&&nt.dyn_ltree[2*ft]!==0)return c;if(nt.dyn_ltree[18]!==0||nt.dyn_ltree[20]!==0||nt.dyn_ltree[26]!==0)return a;for(ft=32;ft<k;ft++)if(nt.dyn_ltree[2*ft]!==0)return a;return c}(m)),Lt(m,m.l_desc),Lt(m,m.d_desc),at=function(nt){var ft;for(r(nt,nt.dyn_ltree,nt.l_desc.max_code),r(nt,nt.dyn_dtree,nt.d_desc.max_code),Lt(nt,nt.bl_desc),ft=w-1;3<=ft&&nt.bl_tree[2*q[ft]+1]===0;ft--);return nt.opt_len+=3*(ft+1)+5+5+4,ft}(m),M=m.opt_len+3+7>>>3,(et=m.static_len+3+7>>>3)<=M&&(M=et)):M=et=Z+5,Z+4<=M&&O!==-1?b(m,O,Z,K):m.strategy===4||et===M?(it(m,2+(K?1:0),3),Ct(m,V,p)):(it(m,4+(K?1:0),3),function(nt,ft,Et,vt){var Dt;for(it(nt,ft-257,5),it(nt,Et-1,5),it(nt,vt-4,4),Dt=0;Dt<vt;Dt++)it(nt,nt.bl_tree[2*q[Dt]+1],3);G(nt,nt.dyn_ltree,ft-1),G(nt,nt.dyn_dtree,Et-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,at+1),Ct(m,m.dyn_ltree,m.dyn_dtree)),bt(m),K&&kt(m)},E._tr_tally=function(m,O,Z){return m.pending_buf[m.d_buf+2*m.last_lit]=O>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&O,m.pending_buf[m.l_buf+m.last_lit]=255&Z,m.last_lit++,O===0?m.dyn_ltree[2*Z]++:(m.matches++,O--,m.dyn_ltree[2*(i[Z]+k+1)]++,m.dyn_dtree[2*z(O)]++),m.last_lit===m.lit_bufsize-1},E._tr_align=function(m){it(m,2,3),J(m,S,V),function(O){O.bi_valid===16?(ut(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):8<=O.bi_valid&&(O.pending_buf[O.pending++]=255&O.bi_buf,O.bi_buf>>=8,O.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(d,D,E){D.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(d,D,E){(function(l){(function(c,a){if(!c.setImmediate){var _,s,N,k,T=1,h={},w=!1,f=c.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(c);g=g&&g.setTimeout?g:c,_={}.toString.call(c.process)==="[object process]"?function(R){process.nextTick(function(){y(R)})}:function(){if(c.postMessage&&!c.importScripts){var R=!0,x=c.onmessage;return c.onmessage=function(){R=!1},c.postMessage("","*"),c.onmessage=x,R}}()?(k="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",S,!1):c.attachEvent("onmessage",S),function(R){c.postMessage(k+R,"*")}):c.MessageChannel?((N=new MessageChannel).port1.onmessage=function(R){y(R.data)},function(R){N.port2.postMessage(R)}):f&&"onreadystatechange"in f.createElement("script")?(s=f.documentElement,function(R){var x=f.createElement("script");x.onreadystatechange=function(){y(R),x.onreadystatechange=null,s.removeChild(x),x=null},s.appendChild(x)}):function(R){setTimeout(y,0,R)},g.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var x=new Array(arguments.length-1),P=0;P<x.length;P++)x[P]=arguments[P+1];var I={callback:R,args:x};return h[T]=I,_(T),T++},g.clearImmediate=u}function u(R){delete h[R]}function y(R){if(w)setTimeout(y,0,R);else{var x=h[R];if(x){w=!0;try{(function(P){var I=P.callback,j=P.args;switch(j.length){case 0:I();break;case 1:I(j[0]);break;case 2:I(j[0],j[1]);break;case 3:I(j[0],j[1],j[2]);break;default:I.apply(a,j)}})(x)}finally{u(R),w=!1}}}}function S(R){R.source===c&&typeof R.data=="string"&&R.data.indexOf(k)===0&&y(+R.data.slice(k.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof Oe<"u"?Oe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ir);var In=Ir.exports;const Ke=Rr(In),Wt=0,On={content_country:"US",content_language:"en",theme:"DARK"};function Or(){const X=new Date,tt=d=>String(d).padStart(2,"0");return`${X.getFullYear()}-${tt(X.getMonth()+1)}-${tt(X.getDate())}-${tt(X.getHours())}-${tt(X.getMinutes())}-${tt(X.getSeconds())}`}function Cr(X,tt,d=null){let D=tt;d&&(tt.endsWith(".zip")?D=tt.replace(".zip",`-${d}.zip`):tt.endsWith(".json")&&(D=tt.replace(".json",`-${d}.json`)));const E=URL.createObjectURL(X),l=document.createElement("a");l.href=E,l.download=D,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(E)}function be(X){if(!X)return"";const tt=String(X);let d=tt.match(/[?&]v=([^&]+)/);return d&&d[1]||(d=tt.match(/youtu\.be\/([^?&/]+)/),d&&d[1])||(d=tt.match(/\/shorts\/([^?&/]+)/),d&&d[1])||(d=tt.match(/\/embed\/([^?&/]+)/),d&&d[1])?d[1]:""}const Le=Number.MAX_SAFE_INTEGER;function re(X){const tt=Number(X||0);return!Number.isFinite(tt)||isNaN(tt)?0:tt>Le?Le:tt<-Le?-Le:Math.trunc(tt)}function Nr(X){if(!X&&X!==0)return"1970-01-01";const tt=String(X).trim();if(/^\d{4}-\d{2}-\d{2}/.test(tt))return tt.split("T")[0];const d=Number(tt);if(!Number.isFinite(d))return"1970-01-01";const D=Math.abs(d);if(D>=1e7&&D<=99999999){const E=String(Math.trunc(d)),l=E.slice(0,4),c=E.slice(4,6),a=E.slice(6,8);return`${l}-${c}-${a}`}return D>1e12?new Date(d).toISOString().split("T")[0]:D>=1e9?new Date(d*1e3).toISOString().split("T")[0]:new Date(d).toISOString().split("T")[0]}function Ar(X){if(X==null)return 0;if(typeof X=="number")return X>1e12?Math.floor(X):Math.floor(X*1e3);const tt=String(X).trim();if(!tt)return 0;const d=Date.parse(tt);if(!isNaN(d))return d;const D=Number(tt);return Number.isFinite(D)?D>1e12?Math.floor(D):Math.floor(D*1e3):0}async function Cn(X,tt,d,D,E){rt("Starting conversion to NewPipe format...");let l,c=new Ke,a="",_=null,s=null;const N=E||null;let k=!1;if(d==="merge"&&X){rt("Loading existing NewPipe backup...");const u=await X.arrayBuffer(),y=await Ke.loadAsync(u),S=y.file("newpipe.db");if(S){const P=await S.async("uint8array");l=new D.Database(P),rt("Database loaded. Running integrity check...");const I=l.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");I&&I[0]&&I[0].values&&rt(`Existing NewPipe database contains: ${I[0].values.flat().join(", ")} tables.`,"schema");try{xn(l);try{const j=l.exec("PRAGMA table_info('stream_state')")||[],A=l.exec("PRAGMA foreign_key_list('stream_state')")||[],q=l.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,j.length>0&&(a+=JSON.stringify(j[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,A.length>0&&(a+=JSON.stringify(A[0],null,2)+`
`),a+=`
CREATE statement:
`,q.length>0&&q[0].values&&q[0].values.length>0&&(a+=q[0].values[0][0]+`
`)}catch(j){a+="Failed to collect stream_state debug info: "+(j.message||j.toString())+`
`}}catch(j){rt("Warning: failed to ensure stream_state schema: "+(j.message||j.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const R=y.file("preferences.json");R&&(_=await R.async("string"));const x=y.file("newpipe.settings");x&&(s=await x.async("blob"))}else{rt("Creating new NewPipe database..."),l=new D.Database,Rn(l);try{const u=l.exec("PRAGMA table_info('stream_state')")||[],y=l.exec("PRAGMA foreign_key_list('stream_state')")||[],S=l.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,u.length>0&&(a+=JSON.stringify(u[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,y.length>0&&(a+=JSON.stringify(y[0],null,2)+`
`),a+=`
CREATE statement:
`,S.length>0&&S[0].values&&S[0].values.length>0&&(a+=S[0].values[0][0]+`
`)}catch(u){a+="Failed to collect stream_state debug info (new DB): "+(u.message||u.toString())+`
`}}rt("Parsing LibreTube JSON...");const T=await tt.text(),h=JSON.parse(T);l.run("BEGIN TRANSACTION");try{rt("Processing Subscriptions..."),d==="merge"&&l.run(`DELETE FROM subscriptions WHERE service_id = ${Wt}`);let u=0;if(h.subscriptions){const y=l.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");h.subscriptions.forEach(S=>{try{const R=S.url||`https://www.youtube.com/channel/${S.channelId}`,x=S.name||"Unknown",P=S.avatar||S.avatarUrl||null;if(!R.includes("youtube.com")&&!R.includes("youtu.be")){rt(`Dropped non-YouTube subscription: ${x} (${R})`,"warn");return}y.run([Wt,R,x,P,0,"",0]),u++}catch(R){rt(`ERROR inserting subscription ${S.name}: ${R.message||R.toString()}`,"err")}}),y.free()}rt(`Inserted ${u} subscriptions.`)}catch(u){throw rt(`FATAL ERROR during Subscriptions phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Playlists..."),d==="merge"&&(N==="only_libretube"?(l.run("DELETE FROM playlist_stream_join"),l.run("DELETE FROM playlists"),l.run("DELETE FROM remote_playlists"),rt("Cleared existing playlists; will import only LibreTube playlists.")):N==="only_newpipe"?(k=!0,rt("Preserving existing NewPipe playlists; skipping import from LibreTube.")):rt(`Merging playlists with behavior: ${N||"default (LibreTube precedence)"}`));let u=0;if(h.localPlaylists&&!k){const y=l.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),S=l.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),R=l.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)"),x=h.localPlaylists;for(const P of x){const I=P.playlist.name||"Untitled";try{const j=l.exec(`SELECT uid FROM playlists WHERE name = '${I.replace(/'/g,"''")}'`);if(j.length>0)if(N==="merge_lt_precedence"){const p=j[0].values[0][0];try{l.run(`DELETE FROM playlist_stream_join WHERE playlist_id = ${p}`),l.run(`DELETE FROM playlists WHERE uid = ${p}`),rt(`Replaced existing local playlist: ${I}`,"schema")}catch(C){rt(`WARN: failed to replace playlist ${I}: ${C.message||C.toString()}`,"warn")}}else{rt(`Skipping duplicate local playlist: ${I}`,"warn");continue}S.run([I,0,-1,u]);const q=l.exec("SELECT last_insert_rowid()")[0].values[0][0];let V=0;for(const p of P.videos){const C=p.videoId||(p.url?be(p.url):null);if(!C){rt(`Skipped video in playlist ${I} due to missing videoId.`,"warn");continue}const i=`https://www.youtube.com/watch?v=${C}`;try{const W=p.title||"Unknown",lt=p.uploader||"Unknown",H=p.duration||0,pt=p.uploadDate?new Date(p.uploadDate).getTime()/1e3:null,Q=p.thumbnailUrl||null;y.run([Wt,i,W,"VIDEO_STREAM",H,lt,pt,Q]);const ot=l.exec(`SELECT uid FROM streams WHERE service_id=${Wt} AND url='${i.replace(/'/g,"''")}'`);if(ot.length>0&&ot[0].values.length>0){const B=ot[0].values[0][0],z=V;if(R.run([q,B,V++]),z===0)try{l.run(`UPDATE playlists SET thumbnail_stream_id = ${B} WHERE uid = ${q}`)}catch(ut){rt(`WARN: failed to set playlist thumbnail for ${I}: ${ut.message||ut.toString()}`,"warn")}}else rt(`Warning: Could not find/insert stream for video ${W}`,"warn")}catch(W){rt(`ERROR processing video "${p.title}" in playlist "${I}": ${W.message||W.toString()}`,"err")}}u++}catch(j){throw rt(`FATAL ERROR processing playlist "${I}": ${j.message||j.toString()}`,"err"),j}}y.free(),S.free(),R.free()}rt(`Processed ${u} local playlists.`)}catch(u){throw rt(`FATAL ERROR during Local Playlists phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Remote Playlist Bookmarks...");let u=0;const y=l.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)");if(h.playlistBookmarks&&!k){const S=h.playlistBookmarks;for(const R of S)try{const x=R.url||(R.playlistId?`https://www.youtube.com/playlist?list=${R.playlistId}`:null);if(!x||!x.includes("youtube.com")&&!x.includes("youtu.be")){rt(`Dropped non-YouTube remote playlist: ${R.playlistName||"Untitled"}`,"warn");continue}const P=R.playlistName||R.name||"Untitled",I=R.thumbnailUrl||null,j=R.uploader||"Unknown",A=typeof R.videos=="number"?R.videos:0;try{const q=l.exec(`SELECT uid FROM remote_playlists WHERE url = '${x.replace(/'/g,"''")}' OR name = '${P.replace(/'/g,"''")}'`);if(q&&q.length>0&&q[0].values.length>0){if(N==="merge_np_precedence")continue;if(N==="merge_lt_precedence"){const V=q[0].values[0][0];l.run(`DELETE FROM remote_playlists WHERE uid = ${V}`)}}}catch{}y.run([Wt,P,x,I,j,u++,A])}catch(x){rt(`ERROR inserting remote playlist ${R.playlistName||"Untitled"}: ${x.message||x.toString()}`,"err")}y.free()}rt(`Processed ${u} remote playlist bookmarks.`)}catch(u){throw rt(`FATAL ERROR during Remote Playlists phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Watch History...");let u=0,y=0,S=0;const R=h.history||h.watchHistory||h.watch_history||h.watch_history_items||[],x=new Map;if(h.watchPositions&&Array.isArray(h.watchPositions)){const P=h.watchPositions;for(const I of P)if(I&&I.videoId){const j=Number(I.position||0);x.set(String(I.videoId),j)}}if(R&&R.length>0){const P=l.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),I=l.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),j=l.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const A of R)try{const q=A.videoId||A.videoIdStr||A.id||(A.url?be(A.url):"")||"";if(!q)continue;const V=`https://www.youtube.com/watch?v=${q}`,p=A.title||A.name||"Unknown",C=A.uploader||A.uploaderName||"Unknown",i=A.duration||A.length||0,W=A.uploadDate?isNaN(Number(A.uploadDate))?Math.floor(new Date(A.uploadDate).getTime()/1e3):Math.floor(Number(A.uploadDate)):null,lt=A.thumbnailUrl||A.thumbnail||null;let H=0;const pt=x.get(q),Q="9223372036854775807";if(pt!=null)String(pt)===Q?H=0:H=Math.floor(Number(pt)||0);else{const it=A.currentTime||A.position||A.progress||0;H=Math.floor(Number(it||0)*1e3)}let ot=A.accessDate||A.accessedAt||A.lastWatched||A.timestamp||A.date||A.time,B;if(!ot)B=Date.now();else if(typeof ot=="number")B=ot>1e12?Math.floor(ot):Math.floor(ot*1e3);else{const it=Date.parse(String(ot));B=isNaN(it)?Date.now():it}const z=Number(A.repeatCount||A.watchCount||A.playCount||A.repeat_count||1);P.run([Wt,V,p,"VIDEO_STREAM",i,C,W,lt]);const ut=l.exec(`SELECT uid FROM streams WHERE service_id=${Wt} AND url='${V.replace(/'/g,"''")}'`);if(ut.length>0&&ut[0].values.length>0){const it=ut[0].values[0][0];try{I.run([H,it])}catch(J){rt(`WARN: failed to write stream_state for ${q}: ${J.message||J.toString()}`,"warn")}try{if(d==="merge"){const J=B-1e3,Tt=B+1e3,Nt=l.exec(`SELECT access_date, repeat_count FROM stream_history WHERE stream_id = ${it} AND access_date BETWEEN ${J} AND ${Tt}`);if(Nt&&Nt.length>0&&Nt[0].values.length>0){const bt=Number(Nt[0].values[0][0]),Rt=(Number(Nt[0].values[0][1])||0)+z;l.run(`UPDATE stream_history SET repeat_count = ${Rt} WHERE stream_id = ${it} AND access_date = ${bt}`),S++}else j.run([it,B,z]),y++}else j.run([it,B,z]),y++}catch(J){rt(`WARN: failed to write stream_history for ${q}: ${J.message||J.toString()}`,"warn")}u++}}catch(q){rt(`ERROR processing history item: ${q.message||q.toString()}`,"warn")}P.free(),I.free(),j.free()}rt(`Processed ${u} history items (added: ${y}, duplicates merged: ${S}).`)}catch(u){rt(`Error processing history: ${u.message}`,"err")}try{l.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),rt("Inserted room_master_table identity.")}catch(u){rt("Error inserting room_master_table: "+u.message,"warn")}try{rt("Committing transaction..."),l.run("COMMIT")}catch(u){throw rt(`FATAL ERROR on COMMIT: ${u.message||u.toString()}`,"err"),u}rt("Exporting database...");const w=l.export();if(c.file("newpipe.db",w),_?(c.file("preferences.json",_),rt("Preserved existing preferences.json.")):(c.file("preferences.json",JSON.stringify(On,null,2)),rt("Created default preferences.json.")),s&&(c.file("newpipe.settings",s),rt("Preserved existing newpipe.settings.")),c.file("stream_state_debug.txt",a||"No stream_state debug information collected."),rt("Attached stream_state_debug.txt to zip for inspection.","schema"),a){const u=a.split(`
`).slice(0,12).join(`
`);rt(`stream_state_debug preview:
`+u,"schema")}const f=await c.generateAsync({type:"blob"}),g=Or();Cr(f,"newpipe_converted.zip",g),rt("Done! File downloaded.","info")}async function Ln(X,tt,d,D,E,l){rt("Starting conversion to LibreTube format...");let c={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[],watchPositions:[]};const a=E||null;let _=!1,s;if(d==="merge"&&tt){rt("Reading target LibreTube file...");const P=await tt.text(),I=JSON.parse(P);c=I,s={playlistBookmarks:Array.isArray(I.playlistBookmarks)?JSON.parse(JSON.stringify(I.playlistBookmarks)):I.playlistBookmarks,localPlaylists:Array.isArray(I.localPlaylists)?JSON.parse(JSON.stringify(I.localPlaylists)):I.localPlaylists,otherPlaylistKeys:{}},Object.keys(I).forEach(j=>{if(j!=="playlistBookmarks"&&j!=="localPlaylists"&&/playlist/i.test(j))try{s.otherPlaylistKeys||(s.otherPlaylistKeys={}),s.otherPlaylistKeys[j]=JSON.parse(JSON.stringify(I[j]))}catch{s.otherPlaylistKeys||(s.otherPlaylistKeys={}),s.otherPlaylistKeys[j]=I[j]}}),a==="only_newpipe"?(c.subscriptions=[],c.playlistBookmarks=[],c.localPlaylists=[],rt("Cleared target LibreTube playlists; will import only NewPipe playlists.")):a==="only_libretube"?(_=!0,rt("Preserving existing LibreTube playlists; will skip importing NewPipe playlists.")):(c.subscriptions=c.subscriptions||[],c.playlistBookmarks=c.playlistBookmarks||[],c.localPlaylists=c.localPlaylists||[],rt(`Merging playlists with behavior: ${a||"default (NewPipe precedence)"}`))}rt("Reading NewPipe backup...");const N=await X.arrayBuffer(),T=(await Ke.loadAsync(N)).file("newpipe.db");if(!T)throw new Error("NewPipe ZIP must contain newpipe.db");const h=await T.async("uint8array"),w=new D.Database(h);rt("NewPipe database loaded.");try{let P="";const I=w.exec("PRAGMA table_info('stream_state')")||[],j=w.exec("PRAGMA foreign_key_list('stream_state')")||[],A=w.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];P+=`PRAGMA table_info("stream_state"):
`,I.length>0&&(P+=JSON.stringify(I[0],null,2)+`
`),P+=`
PRAGMA foreign_key_list("stream_state"):
`,j.length>0&&(P+=JSON.stringify(j[0],null,2)+`
`),P+=`
CREATE statement:
`,A.length>0&&A[0].values&&A[0].values.length>0&&(P+=A[0].values[0][0]+`
`),rt(`Stream state debug (input NewPipe DB):
`+(P||"No stream_state debug info collected."),"schema")}catch(P){rt("Failed to collect input stream_state debug: "+(P.message||P.toString()),"warn")}rt("Extracting Subscriptions...");const f=w.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${Wt}`);f.length>0&&f[0].values.forEach(I=>{const j=String(I[0]);if(!j||!j.includes("youtube.com")&&!j.includes("youtu.be")){rt(`Dropped non-YouTube subscription URL: ${I[1]}`,"warn");return}let A="";const q=j.match(/channel\/([\w-]+)/),V=j.match(/user\/([\w-]+)/);q?A=q[1]:V&&(A=V[1]),c.subscriptions.push({channelId:A,url:j,name:String(I[1]),avatar:I[2]?String(I[2]):void 0,verified:!1})}),rt(`Extracted ${c.subscriptions.length} YouTube subscriptions.`),rt("Extracting Remote Playlists...");const g=w.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${Wt}`);g.length>0&&!_&&g[0].values.forEach(I=>{const j=String(I[1]);if(!j||!j.includes("youtube.com")&&!j.includes("youtu.be")){rt(`Dropped non-YouTube remote playlist URL: ${I[0]}`,"warn");return}const A=j.match(/[?&]list=([^&]+)/),q=A?A[1]:"";c.playlistBookmarks.push({playlistId:q,playlistName:String(I[0]),thumbnailUrl:I[3]?String(I[3]):void 0,uploader:I[2]?String(I[2]):void 0,uploaderUrl:"",videos:re(I[4])})}),rt(`Extracted ${c.playlistBookmarks.length} remote playlist bookmarks.`),rt("Extracting Local Playlists...");const u=w.exec("SELECT uid, name FROM playlists");if(u.length>0&&!_)for(const P of u[0].values){const I=Number(P[0]),j=String(P[1]),A=[];let q=0;const V=w.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${I} AND s.service_id = ${Wt}
                    ORDER BY j.join_index ASC
                `);if(V.length>0&&V[0].values.forEach(p=>{const C=String(p[0]),i=be(C);if(!i){rt(`Warning: Skipped stream in playlist "${j}" due to unparseable URL: ${C}`,"warn");return}A.push({id:q++,playlistId:re(I),videoId:i,title:String(p[1]),uploadDate:Nr(p[4]),uploader:String(p[3]),thumbnailUrl:p[5]?String(p[5]):void 0,duration:re(p[2])})}),A.length>0||j){const p=c.localPlaylists.findIndex(C=>C.playlist&&C.playlist.name===j);if(p>=0)if(a==="merge_np_precedence")c.localPlaylists.splice(p,1);else continue;c.localPlaylists.push({playlist:{id:re(I),name:j,thumbnailUrl:A.length>0?A[0].thumbnailUrl:""},videos:A})}}if(rt(`Extracted ${c.localPlaylists.length} local playlists.`),d==="merge"&&E==="only_libretube"&&s)try{c.playlistBookmarks=s.playlistBookmarks,c.localPlaylists=s.localPlaylists,Object.keys(s.otherPlaylistKeys||{}).forEach(P=>{c[P]=s.otherPlaylistKeys[P]}),rt("Restored original LibreTube playlist data (only_libretube).")}catch(P){rt("Failed to restore preserved LibreTube playlists: "+(P.message||P.toString()),"warn")}if(c&&Array.isArray(c.watchPositions)&&(c.watchPositions=c.watchPositions.map(P=>P&&P.position!==void 0&&P.position!==null?{...P,position:re(P.position)}:P)),(l===void 0?!0:!!l)&&X)try{const P=w.exec(`SELECT s.url, s.title, s.duration, s.uploader, s.uploader_url, s.thumbnail_url, s.upload_date, sh.access_date, sh.repeat_count FROM stream_history sh JOIN streams s ON sh.stream_id = s.uid WHERE s.service_id = ${Wt}`)||[],I=w.exec(`SELECT s.url, ss.progress_time FROM stream_state ss JOIN streams s ON ss.stream_id = s.uid WHERE s.service_id = ${Wt}`)||[];c.watchHistory=c.watchHistory||[],c.watchPositions=c.watchPositions||[];const j=new Map;for(const A of c.watchPositions)A&&A.videoId&&j.set(String(A.videoId),re(A.position));if(I.length>0){const A=I[0].values;for(const q of A){const V=String(q[0]),p=q[1]||0,C=Number(p),i=be(V);if(!i)continue;const W=j.get(i)||0,lt=re(C);lt>W&&j.set(i,lt)}}if(c.watchPositions=Array.from(j.entries()).map(([A,q])=>({videoId:A,position:q})),P.length>0){const A=P[0].values,q=Array.isArray(c.watchHistory)?c.watchHistory.map(p=>({...p,accessDate:Ar(p&&(p.accessDate||p.accessedAt||p.lastWatched||p.timestamp||p.date||p.time)||0)})):[],V=new Map;for(const p of q)p&&p.videoId&&V.set(String(p.videoId),p);for(const p of A){const C=String(p[0]),i=p[1]?String(p[1]):"",W=re(p[2]),lt=p[3]?String(p[3]):"",H=p[4]?String(p[4]):"",pt=p[5]?String(p[5]):"",Q=p[6],ot=p[7],B=be(C);if(!B)continue;let z="";try{const J=String(H).match(/channel\/([\w-]+)/),Tt=String(H).match(/user\/([\w-]+)/);J?z=J[1]:Tt?z=Tt[1]:/^[UC][A-Za-z0-9_-]{20,}$/.test(H)&&(z=H)}catch{z=""}const ut=Nr(Q);if(V.has(B))continue;const it=Ar(ot);q.push({videoId:B,title:i,uploadDate:ut,uploader:lt,uploaderUrl:z,uploaderAvatar:"",thumbnailUrl:pt,duration:W,accessDate:it})}q.sort((p,C)=>Number(C&&C.accessDate?C.accessDate:0)-Number(p&&p.accessDate?p.accessDate:0)),c.watchHistory=q}}catch(P){rt("Failed to import watch history from NewPipe DB: "+(P.message||P.toString()),"warn")}const S=JSON.stringify(c,null,2),R=new Blob([S],{type:"application/json"}),x=Or();Cr(R,"libretube_converted.json",x),rt("Done! File downloaded.","info")}let Ve;window.onload=async()=>{rt("Initializing SQL.js...");try{Ve=await An(),rt("SQL.js ready.")}catch(X){rt("Error loading SQL.js: "+(X.message||X.toString()),"err")}Lr(),Dn()};function Lr(){const X=document.querySelector('input[name="mode"]:checked'),tt=X?X.value:"convert",d=document.getElementById("file-newpipe"),D=document.getElementById("file-libretube"),E=document.getElementById("merge-controls"),l=document.getElementById("convert-controls");!d||!D||!E||!l||(tt==="merge"?(E.style.display="",l.style.display="none",d.disabled=!1,D.disabled=!1):(E.style.display="none",l.style.display="",d.disabled=!1,D.disabled=!1))}async function Dr(X){var l,c;const tt=document.querySelector('input[name="mode"]:checked'),d=tt?tt.value:"convert",D=(l=document.getElementById("file-newpipe").files)==null?void 0:l[0],E=(c=document.getElementById("file-libretube").files)==null?void 0:c[0];if(d==="merge"&&(!D||!E))return rt("Merge mode requires BOTH files.","err");if(d==="convert"){if(X==="to_newpipe"&&!E)return rt("Missing LibreTube source file.","err");if(X==="to_libretube"&&!D)return rt("Missing NewPipe source file.","err")}try{document.querySelectorAll(".controls button").forEach(k=>k.disabled=!0);const a=document.getElementById("playlist-behavior"),_=a?a.value:void 0,s=document.getElementById("include-watch-history"),N=s?s.checked:!0;X==="to_newpipe"?await Cn(D,E,d,Ve,_):await Ln(D,E,d,Ve,_,N)}catch(a){rt(`FATAL ERROR: ${a.message||a.toString()||"An unknown error occurred"}`,"err"),a.stack?rt(`Stack Trace: ${a.stack}`,"err"):rt(`Error Object: ${a.toString()}`,"err"),console.error(a)}finally{document.querySelectorAll(".controls button").forEach(a=>a.disabled=!1)}}window.processBackup=Dr;window.updateUI=Lr;window.addEventListener("DOMContentLoaded",()=>{const X=document.getElementById("btn-merge"),tt=document.getElementById("merge-direction"),d=document.getElementById("playlist-behavior");X&&tt&&d&&(d.value=tt.checked?"merge_np_precedence":"merge_lt_precedence",tt.addEventListener("change",()=>{tt.checked?d.value="merge_np_precedence":d.value="merge_lt_precedence"}),X.addEventListener("click",async()=>{const D=tt.checked?"to_libretube":"to_newpipe";await Dr(D)}))});function Dn(){document.querySelectorAll(".drop-zone").forEach(X=>{const tt=X.querySelector('input[type="file"]'),d=X.querySelector(".file-name");tt&&(X.addEventListener("click",D=>{D.target!==tt&&tt.click()}),X.addEventListener("keydown",D=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),tt.click())}),X.addEventListener("dragover",D=>{D.preventDefault(),X.classList.add("active")}),X.addEventListener("dragleave",()=>{X.classList.remove("active")}),X.addEventListener("drop",D=>{D.preventDefault(),X.classList.remove("active");const E=D.dataTransfer&&D.dataTransfer.files;if(E&&E.length)try{const l=new DataTransfer;for(let c=0;c<E.length;c++)l.items.add(E[c]);tt.files=l.files,tt.dispatchEvent(new Event("change",{bubbles:!0}))}catch(l){console.warn("Could not set input.files programmatically",l)}}),tt.addEventListener("change",()=>{const D=tt.files&&tt.files[0];d&&(d.textContent=D?D.name:"")}))})}
//# sourceMappingURL=index-DvI8Jkp3.js.map

var Si=Object.defineProperty;var ki=(n,f,r)=>f in n?Si(n,f,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[f]=r;var he=(n,f,r)=>ki(n,typeof f!="symbol"?f+"":f,r);(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))b(h);new MutationObserver(h=>{for(const s of h)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&b(c)}).observe(document,{childList:!0,subtree:!0});function r(h){const s={};return h.integrity&&(s.integrity=h.integrity),h.referrerPolicy&&(s.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?s.credentials="include":h.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function b(h){if(h.ep)return;h.ep=!0;const s=r(h);fetch(h.href,s)}})();const Ti=!1,Ni=(n,f)=>n===f,Ai=Symbol("solid-track"),or={equals:Ni};let wn=Nn;const ge=1,lr=2,vn={owned:null,cleanups:null,context:null,owner:null};var Mt=null;let Cr=null,xi=null,zt=null,$t=null,se=null,fr=0;function ir(n,f){const r=zt,b=Mt,h=n.length===0,s=f===void 0?b:f,c=h?vn:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=h?n:()=>n(()=>_e(()=>$e(c)));Mt=c,zt=null;try{return je(a,!0)}finally{zt=r,Mt=b}}function Ot(n,f){f=f?Object.assign({},or,f):or;const r={value:n,observers:null,observerSlots:null,comparator:f.equals||void 0},b=h=>(typeof h=="function"&&(h=h(r.value)),Tn(r,h));return[kn.bind(r),b]}function Pt(n,f,r){const b=Lr(n,f,!1,ge);Be(b)}function En(n,f,r){wn=Oi;const b=Lr(n,f,!1,ge);b.user=!0,se?se.push(b):Be(b)}function sr(n,f,r){r=r?Object.assign({},or,r):or;const b=Lr(n,f,!0,0);return b.observers=null,b.observerSlots=null,b.comparator=r.equals||void 0,Be(b),kn.bind(b)}function _e(n){if(zt===null)return n();const f=zt;zt=null;try{return n()}finally{zt=f}}function Sn(n){return Mt===null||(Mt.cleanups===null?Mt.cleanups=[n]:Mt.cleanups.push(n)),n}function Ci(){return Mt}function kn(){if(this.sources&&this.state)if(this.state===ge)Be(this);else{const n=$t;$t=null,je(()=>cr(this),!1),$t=n}if(zt){const n=this.observers?this.observers.length:0;zt.sources?(zt.sources.push(this),zt.sourceSlots.push(n)):(zt.sources=[this],zt.sourceSlots=[n]),this.observers?(this.observers.push(zt),this.observerSlots.push(zt.sources.length-1)):(this.observers=[zt],this.observerSlots=[zt.sources.length-1])}return this.value}function Tn(n,f,r){let b=n.value;return(!n.comparator||!n.comparator(b,f))&&(n.value=f,n.observers&&n.observers.length&&je(()=>{for(let h=0;h<n.observers.length;h+=1){const s=n.observers[h],c=Cr&&Cr.running;c&&Cr.disposed.has(s),(c?!s.tState:!s.state)&&(s.pure?$t.push(s):se.push(s),s.observers&&An(s)),c||(s.state=ge)}if($t.length>1e6)throw $t=[],new Error},!1)),f}function Be(n){if(!n.fn)return;$e(n);const f=fr;Ri(n,n.value,f)}function Ri(n,f,r){let b;const h=Mt,s=zt;zt=Mt=n;try{b=n.fn(f)}catch(c){return n.pure&&(n.state=ge,n.owned&&n.owned.forEach($e),n.owned=null),n.updatedAt=r+1,xn(c)}finally{zt=s,Mt=h}(!n.updatedAt||n.updatedAt<=r)&&(n.updatedAt!=null&&"observers"in n?Tn(n,b):n.value=b,n.updatedAt=r)}function Lr(n,f,r,b=ge,h){const s={fn:n,state:b,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:f,owner:Mt,context:Mt?Mt.context:null,pure:r};return Mt===null||Mt!==vn&&(Mt.owned?Mt.owned.push(s):Mt.owned=[s]),s}function ur(n){if(n.state===0)return;if(n.state===lr)return cr(n);if(n.suspense&&_e(n.suspense.inFallback))return n.suspense.effects.push(n);const f=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<fr);)n.state&&f.push(n);for(let r=f.length-1;r>=0;r--)if(n=f[r],n.state===ge)Be(n);else if(n.state===lr){const b=$t;$t=null,je(()=>cr(n,f[0]),!1),$t=b}}function je(n,f){if($t)return n();let r=!1;f||($t=[]),se?r=!0:se=[],fr++;try{const b=n();return Ii(r),b}catch(b){r||(se=null),$t=null,xn(b)}}function Ii(n){if($t&&(Nn($t),$t=null),n)return;const f=se;se=null,f.length&&je(()=>wn(f),!1)}function Nn(n){for(let f=0;f<n.length;f++)ur(n[f])}function Oi(n){let f,r=0;for(f=0;f<n.length;f++){const b=n[f];b.user?n[r++]=b:ur(b)}for(f=0;f<r;f++)ur(n[f])}function cr(n,f){n.state=0;for(let r=0;r<n.sources.length;r+=1){const b=n.sources[r];if(b.sources){const h=b.state;h===ge?b!==f&&(!b.updatedAt||b.updatedAt<fr)&&ur(b):h===lr&&cr(b,f)}}}function An(n){for(let f=0;f<n.observers.length;f+=1){const r=n.observers[f];r.state||(r.state=lr,r.pure?$t.push(r):se.push(r),r.observers&&An(r))}}function $e(n){let f;if(n.sources)for(;n.sources.length;){const r=n.sources.pop(),b=n.sourceSlots.pop(),h=r.observers;if(h&&h.length){const s=h.pop(),c=r.observerSlots.pop();b<h.length&&(s.sourceSlots[c]=b,h[b]=s,r.observerSlots[b]=c)}}if(n.tOwned){for(f=n.tOwned.length-1;f>=0;f--)$e(n.tOwned[f]);delete n.tOwned}if(n.owned){for(f=n.owned.length-1;f>=0;f--)$e(n.owned[f]);n.owned=null}if(n.cleanups){for(f=n.cleanups.length-1;f>=0;f--)n.cleanups[f]();n.cleanups=null}n.state=0}function Di(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function xn(n,f=Mt){throw Di(n)}const Li=Symbol("fallback");function cn(n){for(let f=0;f<n.length;f++)n[f]()}function Fi(n,f,r={}){let b=[],h=[],s=[],c=0,a=f.length>1?[]:null;return Sn(()=>cn(s)),()=>{let g=n()||[],i=g.length,T,y;return g[Ai],_e(()=>{let d,E,m,w,p,k,C,R,A;if(i===0)c!==0&&(cn(s),s=[],b=[],h=[],c=0,a&&(a=[])),r.fallback&&(b=[Li],h[0]=ir(F=>(s[0]=F,r.fallback())),c=1);else if(c===0){for(h=new Array(i),y=0;y<i;y++)b[y]=g[y],h[y]=ir(v);c=i}else{for(m=new Array(i),w=new Array(i),a&&(p=new Array(i)),k=0,C=Math.min(c,i);k<C&&b[k]===g[k];k++);for(C=c-1,R=i-1;C>=k&&R>=k&&b[C]===g[R];C--,R--)m[R]=h[C],w[R]=s[C],a&&(p[R]=a[C]);for(d=new Map,E=new Array(R+1),y=R;y>=k;y--)A=g[y],T=d.get(A),E[y]=T===void 0?-1:T,d.set(A,y);for(T=k;T<=C;T++)A=b[T],y=d.get(A),y!==void 0&&y!==-1?(m[y]=h[T],w[y]=s[T],a&&(p[y]=a[T]),y=E[y],d.set(A,y)):s[T]();for(y=k;y<i;y++)y in m?(h[y]=m[y],s[y]=w[y],a&&(a[y]=p[y],a[y](y))):h[y]=ir(v);h=h.slice(0,c=i),b=g.slice(0)}return h});function v(d){if(s[y]=d,a){const[E,m]=Ot(y);return a[y]=m,f(g[y],E)}return f(g[y])}}}function Ft(n,f){return _e(()=>n(f||{}))}const Pi=n=>`Stale read from <${n}>.`;function Me(n){const f="fallback"in n&&{fallback:()=>n.fallback};return sr(Fi(()=>n.each,n.children,f||void 0))}function ke(n){const f=n.keyed,r=sr(()=>n.when,void 0,void 0),b=f?r:sr(r,void 0,{equals:(h,s)=>!h==!s});return sr(()=>{const h=b();if(h){const s=n.children;return typeof s=="function"&&s.length>0?_e(()=>s(f?h:()=>{if(!_e(b))throw Pi("Show");return r()})):s}return n.fallback},void 0,void 0)}function zi(n,f,r){let b=r.length,h=f.length,s=b,c=0,a=0,g=f[h-1].nextSibling,i=null;for(;c<h||a<s;){if(f[c]===r[a]){c++,a++;continue}for(;f[h-1]===r[s-1];)h--,s--;if(h===c){const T=s<b?a?r[a-1].nextSibling:r[s-a]:g;for(;a<s;)n.insertBefore(r[a++],T)}else if(s===a)for(;c<h;)(!i||!i.has(f[c]))&&f[c].remove(),c++;else if(f[c]===r[s-1]&&r[a]===f[h-1]){const T=f[--h].nextSibling;n.insertBefore(r[a++],f[c++].nextSibling),n.insertBefore(r[--s],T),f[h]=r[s]}else{if(!i){i=new Map;let y=a;for(;y<s;)i.set(r[y],y++)}const T=i.get(f[c]);if(T!=null)if(a<T&&T<s){let y=c,v=1,d;for(;++y<h&&y<s&&!((d=i.get(f[y]))==null||d!==T+v);)v++;if(v>T-a){const E=f[c];for(;a<T;)n.insertBefore(r[a++],E)}else n.replaceChild(r[a++],f[c++])}else c++;else f[c++].remove()}}}const dn="_$DX_DELEGATE";function Mi(n,f,r,b={}){let h;return ir(s=>{h=s,f===document?n():Ct(f,n(),f.firstChild?null:void 0,r)},b.owner),()=>{h(),f.textContent=""}}function Ut(n,f,r,b){let h;const s=()=>{const a=b?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=n,r?a.content.firstChild.firstChild:b?a.firstChild:a.content.firstChild},c=f?()=>_e(()=>document.importNode(h||(h=s()),!0)):()=>(h||(h=s())).cloneNode(!0);return c.cloneNode=c,c}function We(n,f=window.document){const r=f[dn]||(f[dn]=new Set);for(let b=0,h=n.length;b<h;b++){const s=n[b];r.has(s)||(r.add(s),f.addEventListener(s,$i))}}function me(n,f,r){r==null?n.removeAttribute(f):n.setAttribute(f,r)}function Cn(n,f,r,b){Array.isArray(r)?(n[`$$${f}`]=r[0],n[`$$${f}Data`]=r[1]):n[`$$${f}`]=r}function Ui(n,f,r){r!=null?n.style.setProperty(f,r):n.style.removeProperty(f)}function Fr(n,f,r){return _e(()=>n(f,r))}function Ct(n,f,r,b){if(r!==void 0&&!b&&(b=[]),typeof f!="function")return dr(n,f,b,r);Pt(h=>dr(n,f(),h,r),b)}function $i(n){let f=n.target;const r=`$$${n.type}`,b=n.target,h=n.currentTarget,s=g=>Object.defineProperty(n,"target",{configurable:!0,value:g}),c=()=>{const g=f[r];if(g&&!f.disabled){const i=f[`${r}Data`];if(i!==void 0?g.call(f,i,n):g.call(f,n),n.cancelBubble)return}return f.host&&typeof f.host!="string"&&!f.host._$host&&f.contains(n.target)&&s(f.host),!0},a=()=>{for(;c()&&(f=f._$host||f.parentNode||f.host););};if(Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return f||document}}),n.composedPath){const g=n.composedPath();s(g[0]);for(let i=0;i<g.length-2&&(f=g[i],!!c());i++){if(f._$host){f=f._$host,a();break}if(f.parentNode===h)break}}else a();s(b)}function dr(n,f,r,b,h){for(;typeof r=="function";)r=r();if(f===r)return r;const s=typeof f,c=b!==void 0;if(n=c&&r[0]&&r[0].parentNode||n,s==="string"||s==="number"){if(s==="number"&&(f=f.toString(),f===r))return r;if(c){let a=r[0];a&&a.nodeType===3?a.data!==f&&(a.data=f):a=document.createTextNode(f),r=xe(n,r,b,a)}else r!==""&&typeof r=="string"?r=n.firstChild.data=f:r=n.textContent=f}else if(f==null||s==="boolean")r=xe(n,r,b);else{if(s==="function")return Pt(()=>{let a=f();for(;typeof a=="function";)a=a();r=dr(n,a,r,b)}),()=>r;if(Array.isArray(f)){const a=[],g=r&&Array.isArray(r);if(Rr(a,f,r,h))return Pt(()=>r=dr(n,a,r,b,!0)),()=>r;if(a.length===0){if(r=xe(n,r,b),c)return r}else g?r.length===0?fn(n,a,b):zi(n,r,a):(r&&xe(n),fn(n,a));r=a}else if(f.nodeType){if(Array.isArray(r)){if(c)return r=xe(n,r,b,f);xe(n,r,null,f)}else r==null||r===""||!n.firstChild?n.appendChild(f):n.replaceChild(f,n.firstChild);r=f}}return r}function Rr(n,f,r,b){let h=!1;for(let s=0,c=f.length;s<c;s++){let a=f[s],g=r&&r[n.length],i;if(!(a==null||a===!0||a===!1))if((i=typeof a)=="object"&&a.nodeType)n.push(a);else if(Array.isArray(a))h=Rr(n,a,g)||h;else if(i==="function")if(b){for(;typeof a=="function";)a=a();h=Rr(n,Array.isArray(a)?a:[a],Array.isArray(g)?g:[g])||h}else n.push(a),h=!0;else{const T=String(a);g&&g.nodeType===3&&g.data===T?n.push(g):n.push(document.createTextNode(T))}}return h}function fn(n,f,r=null){for(let b=0,h=f.length;b<h;b++)n.insertBefore(f[b],r)}function xe(n,f,r,b){if(r===void 0)return n.textContent="";const h=b||document.createTextNode("");if(f.length){let s=!1;for(let c=f.length-1;c>=0;c--){const a=f[c];if(h!==a){const g=a.parentNode===n;!s&&!c?g?n.replaceChild(h,a):n.insertBefore(h,r):g&&a.remove()}else s=!0}}else n.insertBefore(h,r);return[h]}function Bi(n){return f=>{customElements.define(n,f)}}function ae(n={type:String}){return function(f,r){const b=f.constructor;b.observedAttributes||(b.observedAttributes=[]);const h=n.attribute||r.toLowerCase();b.observedAttributes.includes(h)||b.observedAttributes.push(h);const s=Symbol(r);Object.defineProperty(f,r,{get(){return this[s]},set(c){const a=this[s];n.type===Boolean?this[s]=c===""||c==="true"||c===!0:this[s]=c,this.requestUpdate&&this.requestUpdate(r,a,this[s])},enumerable:!0,configurable:!0})}}function ji(){return function(n,f){const r=Symbol(f);Object.defineProperty(n,f,{get(){return this[r]},set(b){const h=this[r];this[r]=b,this.requestUpdate&&this.requestUpdate(f,h,b)},enumerable:!0,configurable:!0})}}function Wi(n){if(!n||typeof n!="object"||!("date"in n)||!("count"in n))return!1;const f=n,r=new Date(f.date);return!(isNaN(r.getTime())||typeof f.count!="number"||f.count<0)}const ze={default:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],green:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],red:["#ebedf0","#ffcdd2","#ef5350","#e53935","#b71c1c"],blue:["#ebedf0","#bbdefb","#64b5f6","#1e88e5","#0d47a1"],yellow:["#ebedf0","#fff9c4","#ffee58","#fdd835","#f57f17"],purple:["#ebedf0","#e1bee7","#ab47bc","#8e24aa","#4a148c"]},qi=n=>n in ze&&n!=="default",Hi=`
  <style>
    :host {
      display: inline-block;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
    }

    /* Dark mode styles */
    :host([dark-mode]) {
      color: #c9d1d9;
      background-color: transparent;
    }

    .container {
      display: inline-grid;
      grid-template-rows: auto 1fr;
    }

    .months {
      display: flex;
      padding-left: 32px;
      font-size: 12px;
      color: #767676;
      height: 20px;
    }

    :host([dark-mode]) .months {
      color: #8b949e;
    }

    .months-spacer {
      width: 30px;
    }

    .months-container {
      display: flex;
      justify-content: space-between;
      flex: 1;
    }

    .months span {
      padding: 0 4px;
    }

    .grid-wrapper {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 4px;
    }

    .weekdays {
      display: grid;
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
      text-align: right;
      padding-left: 6px;
      padding-right: 2px;
      font-size: 12px;
      color: #767676;
      margin-top: -1px;
      height: calc(7 * 10px + 6 * 2px);
    }

    :host([dark-mode]) .weekdays {
      color: #8b949e;
    }

    .weekdays div {
      height: 10px;
      line-height: 10px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(var(--grid-columns), 1fr);
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
    }

    .cell {
      width: 10px;
      height: 10px;
      border-radius: 2px;
    }
  </style>
`,Gi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],hn={mondayStart:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],sundayStart:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},Ce={light:"#ebedf0",dark:"#161b22"},ar=n=>`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}`;class Zi{createMonthLabels(f,r){const b=[],h=new Date(f);for(h.setDate(1);h<=r;)b.push(Gi[h.getMonth()]),h.setMonth(h.getMonth()+1);return`
            <div class="months-container">
                ${b.map(s=>`<span>${s}</span>`).join("")}
            </div>
        `}createWeekLabels(f,r=[0,1,2,3,4,5,6]){return`
            <div class="weekdays">
                ${(f?hn.mondayStart:hn.sundayStart).map((b,h)=>`<div>${r.includes(h)?b:""}</div>`).join(`
`)}
            </div>
        `}getWeeksBetweenDates(f,r){const b=Math.abs(r.getTime()-f.getTime());return Math.ceil(b/6048e5)}defaultTitleFormatter(f,r,b){const h=r===1?"activity":"activities";return`${f.toDateString()}: ${r} ${h}`}createGridCells(f,r,b,h,s,c,a,g){let i="";const T=c?5:7,y=new Date(b),v=new Date(r);v.setHours(0,0,0,0);let d=c?5-b.getDay():7-b.getDay();a&&(d+=1),y.setDate(y.getDate()+d);const E=new Date(r),m=a?(r.getDay()||7)-1:r.getDay();m!==0&&E.setDate(r.getDate()-m);const w=this.getWeeksBetweenDates(y,r);for(let p=0;p<T;p++){const k=p>4;if(!(c&&k))for(let C=0;C<w;C++){const R=new Date(E);R.setDate(R.getDate()+p+C*7),R.setHours(0,0,0,0);const A=ar(R),F=f[A];if(R<v)i+=`
                        <div class="cell" 
                            style="background-color: transparent">
                        </div>`;else if(R<=b)if(F){const D=g?g(R,F.count,F.id):this.defaultTitleFormatter(R,F.count,F.id);i+=`
                            <div class="cell" 
                                style="background-color: ${h[F.level]||s}"
                                title="${D}"
                                data-date="${A}"
                                data-count="${F.count}"
            					${F.id?`cell-id="${F.id}"`:""}>
                            </div>`}else{const D=g?g(R,0):this.defaultTitleFormatter(R,0);i+=`
                            <div class="cell" 
                                style="background-color: ${s}"
                                title="${D}"
                                data-date="${A}"
                                data-count="0">
                            </div>`}else R<=y&&(i+=`
                        <div class="cell" 
                            style="background-color: transparent">
                        </div>`)}}return i}render(f,r,b,h){const s=new Date(b);let c=h.skipWeekends?5-b.getDay():7-b.getDay();h.startWeekOnMonday&&(c+=1),s.setDate(s.getDate()+c);const a=this.getWeeksBetweenDates(s,r),g=this.createMonthLabels(r,b),i=this.createWeekLabels(h.startWeekOnMonday,h.startWeekOnMonday?[0,2,4]:[1,3,5]),T=this.createGridCells(f,r,b,h.colors,h.emptyColor,h.skipWeekends,h.startWeekOnMonday,h.titleFormatter);return{html:`
            <div class="container">
                <div class="months">${g}</div>
                <div class="grid-wrapper">
                    ${i}
                    <div class="grid">
                        ${T}
                    </div>
                </div>
            </div>
        `,numOfWeeks:a}}}function Yi(n){return new CustomEvent("cell-click",{detail:n,bubbles:!0,composed:!0})}var Xi=Object.defineProperty,Ki=Object.getOwnPropertyDescriptor,ee=(n,f,r,b)=>{for(var h=b>1?void 0:b?Ki(f,r):f,s=n.length-1,c;s>=0;s--)(c=n[s])&&(h=(b?c(f,r,h):c(h))||h);return b&&h&&Xi(f,r,h),h};let Qt=class extends HTMLElement{constructor(){super(),this.gridRenderer=new Zi,this._data=[],this._colors=ze.default,this._colorTheme=null,this._darkMode=!1,this._emptyColor=this._darkMode?Ce.dark:Ce.light,this._skipWeekends=!1,this._startWeekOnMonday=!1,this._endDate=new Date,this._titleFormatter=null,this.cells={},this.attachShadow({mode:"open"}),this._startDate=null}set data(n){this.validateActivityData(n)&&(this._data=n,this.updateGrid())}get data(){return this._data}set colors(n){if(!n||!Array.isArray(n)||n.length===0){console.warn("Invalid or empty colors array provided. Using default theme."),this._colors=ze.default,this.updateGrid();return}const f=n.filter(r=>!this.validateColor(r));if(f.length>0){console.warn(`Invalid colors found when trying to set color theme: ${f.join(", ")}. Using default theme.`),this._colors=ze.default,this.updateGrid();return}this._colorTheme||(this._colors=n,this.updateGrid())}get colors(){return this._colorTheme?ze[this._colorTheme]:this._colors}set colorTheme(n){n?qi(n)?this._colorTheme=n:(console.warn(`Invalid color theme "${n}". Using default theme.`),this._colorTheme=null):this._colorTheme=null,this.updateGrid()}get colorTheme(){return this._colorTheme||""}set darkMode(n){this._darkMode=n,this.emptyColor=n?Ce.dark:Ce.light,this.updateGrid()}get darkMode(){return this._darkMode}set emptyColor(n){if(n===null||!this.validateColor(n)){this._emptyColor=this._darkMode?Ce.dark:Ce.light;return}this._emptyColor=n,this.updateGrid()}get emptyColor(){return this._emptyColor}set skipWeekends(n){this._skipWeekends=n,n&&(this.startWeekOnMonday=!0),this.updateGrid()}get skipWeekends(){return this._skipWeekends}set startWeekOnMonday(n){this._startWeekOnMonday=this.skipWeekends?!0:n,this.updateGrid()}get startWeekOnMonday(){return this._startWeekOnMonday}set endDate(n){const f=n?new Date(n):new Date;isNaN(f.getTime())?(console.warn("Invalid end-date provided. Using current date instead."),this._endDate=new Date):this._endDate=f,this.updateGrid()}get endDate(){return ar(this._endDate)}set startDate(n){const f=n?new Date(n):null;f&&!isNaN(f.getTime())?f>this._endDate?(console.warn("Start date cannot be after end date. Using one year before end date instead."),this._startDate=this.createDefaultStartDate()):this._startDate=f:this._startDate||(console.warn("Invalid start-date provided. Using one year before end date instead."),this._startDate=this.createDefaultStartDate()),this.isConnected&&this.updateGrid()}get startDate(){return this._startDate?ar(this._startDate):ar(this.createDefaultStartDate())}set titleFormatter(n){this._titleFormatter=n,this.updateGrid()}get titleFormatter(){return this._titleFormatter}connectedCallback(){this._startDate||(this._startDate=this.createDefaultStartDate()),this.updateGrid()}attributeChangedCallback(n,f,r){const b=n.replace(/-([a-z])/g,h=>h[1].toUpperCase());if(this[b]!==void 0){const h=this[b];if(typeof h=="boolean")this[b]=r!==null;else if(typeof h=="number")this[b]=Number(r);else if(Array.isArray(h))try{this[b]=JSON.parse(r||"[]")}catch(s){console.warn(`Invalid array value for ${n}:`,s)}else this[b]=r}}static get observedAttributes(){return["start-week-on-monday","skip-weekends","data","colors","color-theme","empty-color","max-level","end-date","start-date","dark-mode"]}createDefaultStartDate(){const n=new Date(this._endDate);n.setFullYear(n.getFullYear()-1);const f=this.startWeekOnMonday?(n.getDay()||7)-1:n.getDay();return f!==0&&n.setDate(n.getDate()-f),n}generateGridCells(){const n={};return this.data.forEach(f=>{n[f.date]={date:new Date(f.date),count:f.count,level:this.calculateLevel(f.count),ignore:!1,id:f.id}}),n}validateActivityData(n){if(!n||!Array.isArray(n))return console.warn("Invalid activity data: must be an array. Using empty array instead."),this._data=[],!1;const f=n.filter(r=>!Wi(r));return f.length>0&&console.warn("Invalid items found in activity data. They will be filtered out:",f),!0}validateColor(n){return CSS.supports("color",n)}calculateLevel(n){if(n===0)return 0;const f=this.colors.length-1,r=Math.max(...this.data.map(b=>b.count));return Math.ceil(n/r*f)}updateGrid(){if(!this.shadowRoot)return;this.cells=this.generateGridCells(),this._startDate||(this._startDate=this.createDefaultStartDate());const{html:n,numOfWeeks:f}=this.gridRenderer.render(this.cells,this._startDate,this._endDate,{colors:this.colors,emptyColor:this.emptyColor,skipWeekends:this.skipWeekends,startWeekOnMonday:this.startWeekOnMonday,titleFormatter:this.titleFormatter});this.style.setProperty("--grid-columns",f.toString()),this.shadowRoot.innerHTML=`${Hi}${n}`,this.attachEventListeners()}attachEventListeners(){this.shadowRoot&&this.shadowRoot.querySelectorAll(".cell[data-date]").forEach(n=>{n.addEventListener("click",f=>{const r=n.getAttribute("data-date"),b=parseInt(n.getAttribute("data-count")||"0",10),h=n.getAttribute("cell-id")||void 0;r&&this.dispatchEvent(Yi({date:r,count:b,id:h}))})})}};ee([ae({type:Array})],Qt.prototype,"data",1);ee([ae({type:Array})],Qt.prototype,"colors",1);ee([ae({type:String,attribute:"color-theme"})],Qt.prototype,"colorTheme",1);ee([ae({type:Boolean,attribute:"dark-mode"})],Qt.prototype,"darkMode",1);ee([ae({type:String,attribute:"empty-color"})],Qt.prototype,"emptyColor",1);ee([ae({type:Boolean})],Qt.prototype,"skipWeekends",1);ee([ae({type:Boolean})],Qt.prototype,"startWeekOnMonday",1);ee([ae({type:String,attribute:"end-date"})],Qt.prototype,"endDate",1);ee([ae({type:String,attribute:"start-date"})],Qt.prototype,"startDate",1);ee([ji()],Qt.prototype,"cells",2);Qt=ee([Bi("activity-grid")],Qt);var Vi=Ut('<div class=mode-selector><div class=mode-switch role=tablist aria-label="Mode selector"><input type=radio id=mode-merge name=mode value=merge><label for=mode-merge class=mode-pill>NewPipe ⇌ LibreTube: Merge</label><input type=radio id=mode-convert name=mode value=convert><label for=mode-convert class=mode-pill>NewPipe ⇌ LibreTube: Convert</label><input type=radio id=mode-stt name=mode value=stt><label for=mode-stt class=mode-pill>SimpleTimeTracker → uHabits');const Qi=n=>(()=>{var f=Vi(),r=f.firstChild,b=r.firstChild,h=b.nextSibling,s=h.nextSibling,c=s.nextSibling,a=c.nextSibling;return b.addEventListener("change",()=>n.setMode("merge")),s.addEventListener("change",()=>n.setMode("convert")),a.addEventListener("change",()=>n.setMode("stt")),Pt(()=>b.checked=n.mode()==="merge"),Pt(()=>s.checked=n.mode()==="convert"),Pt(()=>a.checked=n.mode()==="stt"),f})();function Ji(){const[n,f]=Ot("");return{logs:n,append(r,b="info"){const h=new Date().toLocaleTimeString(),c=`<div class="${b==="err"?"log-err":b==="warn"?"log-warn":b==="schema"?"log-schema":"log-info"}">[${h}] ${r}</div>`;f(a=>a+c)}}}const Ir=Ji();function V(n,f="info"){Ir.append(n,f)}var ts=Ut('<div class=drop-zone role=button tabindex=0><button class="clear-file remove-button"aria-label="Clear file"><svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 24 24"><path fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M18 6L6 18M6 6l12 12"></path></svg></button><h4 class=zone-title></h4><p><small class="hint zone-hint"></small></p><input type=file><div class=file-name aria-live=polite>');const pn=n=>{const[f,r]=Ot("");let b;const h=()=>n.configs[n.mode()],s=v=>{const d=v==null?void 0:v[0];if(d){const E=h().accept.split(",").map(p=>p.trim().toLowerCase()),m=d.name.toLowerCase();if(!E.some(p=>m.endsWith(p))){V(`Invalid file type. Expected: ${E.join(", ")}`,"err"),b&&(b.value=""),r(""),n.onFileChange(null);return}}r(d?d.name:""),n.onFileChange(d||null)},c=v=>{v.target===b||v.target.closest(".clear-file")||b==null||b.click()},a=v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),b==null||b.click())},g=v=>{v.preventDefault(),v.currentTarget.classList.add("active")},i=v=>{v.currentTarget.classList.remove("active")},T=v=>{var E;v.preventDefault(),v.currentTarget.classList.remove("active");const d=(E=v.dataTransfer)==null?void 0:E.files;if(d&&d.length&&b)try{const m=new DataTransfer;for(let w=0;w<d.length;w++)m.items.add(d[w]);b.files=m.files,s(m.files)}catch(m){console.warn("Could not set input.files programmatically",m)}},y=v=>{v.stopPropagation(),b&&(b.value=""),r(""),n.onFileChange(null)};return(()=>{var v=ts(),d=v.firstChild,E=d.nextSibling,m=E.nextSibling,w=m.firstChild,p=m.nextSibling,k=p.nextSibling;v.addEventListener("drop",T),v.addEventListener("dragleave",i),v.addEventListener("dragover",g),v.$$keydown=a,v.$$click=c,d.$$click=y,Ct(E,()=>h().title),p.addEventListener("change",R=>s(R.currentTarget.files));var C=b;return typeof C=="function"?Fr(C,p):b=p,Ct(k,f),Pt(R=>{var A=n.id,F=`Select ${h().title}`,D=f()?"flex":"none",M=h().hint,O=h().accept;return A!==R.e&&me(v,"id",R.e=A),F!==R.t&&me(v,"aria-label",R.t=F),D!==R.a&&Ui(d,"display",R.a=D),M!==R.o&&(w.innerHTML=R.o=M),O!==R.i&&me(p,"accept",R.i=O),R},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v})()};We(["click","keydown"]);var es=Ut('<section id=action-newpipe-libretube-merge class=controls-block><h3>NewPipe ⇌ LibreTube: Merge</h3><div class=merge-options><label for=playlist-behavior>Playlists handling:</label><select id=playlist-behavior><option value=merge_np_precedence>Merge playlists (NewPipe precedence)</option><option value=merge_lt_precedence>Merge playlists (LibreTube precedence)</option><option value=only_newpipe>Only NewPipe playlists</option><option value=only_libretube>Only LibreTube playlists</option></select></div><div class=direction-toggle><span class=dir-label>NewPipe</span><label class=two-way><input type=checkbox id=merge-direction aria-label="Merge direction"><span class=slider aria-hidden=true><svg class=toggle-arrow xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"aria-hidden=true><path fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 13a1 1 0 0 0-1-1H5.061a1 1 0 0 1-.75-1.811l6.836-6.835a1.207 1.207 0 0 1 1.707 0l6.835 6.835a1 1 0 0 1-.75 1.811H16a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1z"></path></svg></span></label><span class=dir-label>LibreTube</span></div><div class=controls><button id=btn-merge>Merge');const rs=n=>{const[f,r]=Ot("to_newpipe"),[b,h]=Ot("merge_lt_precedence"),s=a=>{const g=a.currentTarget.checked?"to_libretube":"to_newpipe";r(g),h(g==="to_libretube"?"merge_np_precedence":"merge_lt_precedence")},c=()=>{n.onMerge(f(),b())};return(()=>{var a=es(),g=a.firstChild,i=g.nextSibling,T=i.firstChild,y=T.nextSibling,v=i.nextSibling,d=v.firstChild,E=d.nextSibling,m=E.firstChild,w=v.nextSibling,p=w.firstChild;return y.addEventListener("change",k=>h(k.currentTarget.value)),m.addEventListener("change",s),p.$$click=c,Pt(()=>y.value=b()),Pt(()=>m.checked=f()==="to_libretube"),a})()};We(["click"]);var ns=Ut("<section id=action-newpipe-libretube-convert class=controls-block><h3>NewPipe ⇌ LibreTube: Convert</h3><div class=controls><button id=btn-to-newpipe>Target: NewPipe</button><button id=btn-to-libretube>Target: LibreTube");const is=n=>(()=>{var f=ns(),r=f.firstChild,b=r.nextSibling,h=b.firstChild,s=h.nextSibling;return h.$$click=()=>n.onConvert("to_newpipe"),s.$$click=()=>n.onConvert("to_libretube"),f})();We(["click"]);var ss=Ut("<option disabled style=color:#888>─── Archived ───"),as=Ut('<div class=activity-grid-container><div class=grid-year-nav><button class=year-prev title="Previous year">◀</button><span class=grid-year-display></span><button class=year-next title="Next year">▶</button></div><activity-grid start-week-on-monday class=habit-preview-grid dark-mode color-theme=purple>',!0,!1,!1),os=Ut('<div class=mapping-item><div class=mapping-selects><select class=stt-activity-select><option value>Select STT activity...</option></select><span class=mapping-arrow>▶</span><select class=uhabits-habit-select><option value>Select uHabits habit...</option></select><button class="remove-button remove-mapping"aria-label="Remove mapping"><svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 24 24"><path fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M18 6L6 18M6 6l12 12"></path></svg></button></div><div class=mapping-options><label class=option-item><span class=option-label>Min duration:</span><input type=number class=min-duration-input min=0 step=1 title="Minimum duration in minutes"><span class=option-unit>min</span></label><label class="option-item option-checkbox"title="Copy STT activity comments to repetition notes"><input type=checkbox class=copy-stt-comments-checkbox><span class=option-label>Copy comments'),ls=Ut("<option> <!> (id: <!>)"),us=Ut("<option> (id: <!>)"),cs=Ut("<option style=font-style:italic;opacity:0.7> (id: <!>)");const ds=n=>{const[f,r]=Ot(""),[b,h]=Ot(""),[s,c]=Ot(5),[a,g]=Ot(!1),[i,T]=Ot(new Date().getFullYear()),[y,v]=Ot(!1),[d,E]=Ot(!1),[m,w]=Ot([]);let p;const k=H=>{r(H.currentTarget.value),A(),n.onUpdate()},C=H=>{h(H.currentTarget.value),A(),n.onUpdate()},R=H=>{c(parseInt(H.currentTarget.value)||0),A(),n.onUpdate()},A=()=>{const H=parseInt(f()),S=parseInt(b());if(!H||!S||!n.sttData||!n.uhabitsData){v(!1);return}v(!0);const L=new Set,u=[];for(const Y of n.uhabitsData.repetitions)if(Y.habit_id===S&&Y.value>0){const ot=new Date(Y.timestamp).toISOString().split("T")[0];L.add(ot),u.push({date:ot,count:2})}const lt=n.sttData.records.filter(Y=>Y.end_timestamp-Y.start_timestamp>=s()*60*1e3).filter(Y=>Y.type_id===H),X=new Map;for(const Y of lt){const ot=new Date(Y.start_timestamp);ot.setHours(0,0,0,0);const U=ot.toISOString().split("T")[0];X.has(U)||X.set(U,[]),X.get(U).push(Y)}const ct=[];for(const[Y]of X)L.has(Y)||ct.push({date:Y,count:1});if(w([...u,...ct]),!d()&&(u.length>0||ct.length>0)){const Y=[...u.map(z=>z.date),...ct.map(z=>z.date)];Y.sort();const ot=Y[Y.length-1],U=new Date(ot).getFullYear();T(U),E(!0)}};En(()=>{if(p&&y()&&m().length>0){const H=i(),S=new Date(H,0,1),L=new Date(H,11,31);p.data=m(),p.startDate=S.toISOString().split("T")[0],p.endDate=L.toISOString().split("T")[0]}});const F=()=>{T(i()-1)},D=()=>{T(i()+1)},M=()=>{const H=parseInt(f()),S=parseInt(b());return!H||!S?null:{sttTypeId:H,uhabitsHabitId:S,minDuration:s(),copySttComments:a()}};n.getMapping=M;const O=()=>{if(!n.sttData)return[];const H=[];return n.sttData.recordTypes.forEach((S,L)=>{H.push({id:L,type:S})}),H},$=()=>{if(!n.uhabitsData)return{active:[],archived:[]};const H=[],S=[];return n.uhabitsData.booleanHabits.forEach((L,u)=>{L.archived?S.push({id:u,habit:L}):H.push({id:u,habit:L})}),{active:H,archived:S}};return(()=>{var H=os(),S=H.firstChild,L=S.firstChild;L.firstChild;var u=L.nextSibling,G=u.nextSibling;G.firstChild;var lt=G.nextSibling,X=S.nextSibling,ct=X.firstChild,Y=ct.firstChild,ot=Y.nextSibling,U=ct.nextSibling,z=U.firstChild;return L.addEventListener("change",k),Ct(L,Ft(Me,{get each(){return O()},children:nt=>(()=>{var J=ls(),Q=J.firstChild,bt=Q.nextSibling,Tt=bt.nextSibling,_t=Tt.nextSibling;return _t.nextSibling,Ct(J,()=>nt.type.emoji,Q),Ct(J,()=>nt.type.name,bt),Ct(J,()=>nt.id,_t),Pt(()=>J.value=nt.id.toString()),J})()}),null),G.addEventListener("change",C),Ct(G,Ft(Me,{get each(){return $().active},children:nt=>(()=>{var J=us(),Q=J.firstChild,bt=Q.nextSibling;return bt.nextSibling,Ct(J,()=>nt.habit.name,Q),Ct(J,()=>nt.id,bt),Pt(()=>J.value=nt.id.toString()),J})()}),null),Ct(G,Ft(ke,{get when(){return $().archived.length>0},get children(){return[ss(),Ft(Me,{get each(){return $().archived},children:nt=>(()=>{var J=cs(),Q=J.firstChild,bt=Q.nextSibling;return bt.nextSibling,Ct(J,()=>nt.habit.name,Q),Ct(J,()=>nt.id,bt),Pt(()=>J.value=nt.id.toString()),J})()})]}}),null),Cn(lt,"click",n.onRemove),ot.addEventListener("change",R),z.addEventListener("change",nt=>g(nt.currentTarget.checked)),Ct(H,Ft(ke,{get when(){return y()},get children(){var nt=as(),J=nt.firstChild,Q=J.firstChild,bt=Q.nextSibling,Tt=bt.nextSibling,_t=J.nextSibling;Q.$$click=F,Ct(bt,i),Tt.$$click=D;var vt=p;return typeof vt=="function"?Fr(vt,_t):p=_t,_t._$owner=Ci(),Pt(At=>{var xt=n.mappingId,Rt=n.mappingId;return xt!==At.e&&me(Q,"data-mapping-id",At.e=xt),Rt!==At.t&&me(Tt,"data-mapping-id",At.t=Rt),At},{e:void 0,t:void 0}),nt}}),null),Pt(nt=>{var J=n.mappingId,Q=n.mappingId,bt=n.mappingId;return J!==nt.e&&me(H,"data-mapping-id",nt.e=J),Q!==nt.t&&me(L,"data-mapping-id",nt.t=Q),bt!==nt.a&&me(G,"data-mapping-id",nt.a=bt),nt},{e:void 0,t:void 0,a:void 0}),Pt(()=>L.value=f()),Pt(()=>G.value=b()),Pt(()=>ot.value=s()),Pt(()=>z.checked=a()),H})()};We(["click"]);async function Rn(n){V("Parsing STT backup file...","info");const f=await n.text(),r=new Map,b=[],h=new Map,s=new Map,c=f.split(`
`);let a=0;for(const g of c){const i=g.trim();if(!i)continue;const T=i.split("	");if(T.length===0)continue;a++;const y=T[0];if(y==="recordType"){const v={id:parseInt(T[1],10),name:T[2]||"",emoji:T[3]||"",color:parseInt(T[4],10)||0,category_id:parseInt(T[5],10)||0};isNaN(v.id)||r.set(v.id,v)}else if(y==="record"){let v=parseInt(T[4],10);if(isNaN(v)){const E=T[4];E&&E.endsWith("f")&&(v=parseInt(E.slice(0,-1),10))}const d={id:parseInt(T[1],10),type_id:parseInt(T[2],10),start_timestamp:parseInt(T[3],10),end_timestamp:v,comment:T.slice(5).join("	")||void 0};if(isNaN(d.id)||isNaN(d.type_id)||isNaN(d.start_timestamp)||isNaN(d.end_timestamp)){V(`Skipping invalid record: ${T.join("	")}`,"warn");continue}b.push(d)}else if(y==="category"){const v={id:parseInt(T[1],10),name:T[2]||"",color:parseInt(T[3],10)||0};isNaN(v.id)||h.set(v.id,v)}else if(y==="recordTag"){const v={id:parseInt(T[1],10),name:T[3]||"",emoji:T[7]||"",color:parseInt(T[4],10)||0,type_id:parseInt(T[5],10)||0};isNaN(v.id)||s.set(v.id,v)}}return V(`Parsed ${r.size} record types, ${b.length} records (${a} rows total)`,"info"),{recordTypes:r,records:b,categories:h,recordTags:s}}function In(n,f){if(f<=0)return n;const r=f*60*1e3;return n.filter(b=>b.end_timestamp-b.start_timestamp>=r)}function On(n){const f=new Map;for(const r of n){const h=new Date(r.start_timestamp).toISOString().split("T")[0];f.has(h)||f.set(h,[]),f.get(h).push(r)}return f}function Dn(n,f){return n.filter(r=>r.type_id===f)}var fs=Ut("<section id=action-stt-uhabits-fill class=controls-block><h3>SimpleTimeTracker ⇌ uHabits: Fill</h3><div id=conversion-mappings><h4>Activity Mappings</h4><div id=mapping-list></div><button id=add-mapping type=button>+ Add Mapping</button></div><div class=controls><button id=btn-convert-stt>Fill"),hs=Ut("<div id=conversion-summary class=summary-box><h4>Conversion Summary</h4><ul><li> new repetitions will be added"),ps=Ut("<li>");const ms=n=>{const[f,r]=Ot([]),[b,h]=Ot(0);setTimeout(()=>s(),0);const s=()=>{const y=b();h(y+1),r([...f(),{id:y,ref:null}])},c=y=>{r(f().filter(v=>v.id!==y))},a=()=>{},g=(y,v,d)=>{const E=n.sttStore.sttData(),m=n.sttStore.uhabitsData();if(!E||!m)return 0;const w=In(E.records,d),p=Dn(w,y),k=On(p),C=new Set;for(const A of m.repetitions)A.habit_id===v&&A.value>0&&C.add(new Date(A.timestamp).toISOString().split("T")[0]);let R=0;for(const A of k.keys())C.has(A)||R++;return R},i=()=>{var w,p;const y=n.sttStore.sttData(),v=n.sttStore.uhabitsData();if(!y||!v)return null;let d=0,E=0;const m=[];for(const k of f()){const C=(p=(w=k.ref)==null?void 0:w.getMapping)==null?void 0:p.call(w);if(!C)continue;const{sttTypeId:R,uhabitsHabitId:A,minDuration:F}=C;if(R&&A){d++;const D=y.recordTypes.get(R),M=v.booleanHabits.get(A);if(D&&M){const O=g(R,A,F);E+=O,m.push(`"${D.emoji} ${D.name}" → "${M.name}": ${O} new days`)}}}return d>0?{totalNewDays:E,mappingDetails:m}:null},T=()=>n.sttStore.sttData()&&n.sttStore.uhabitsData()&&n.sttStore.sttFile()&&n.sttStore.uhabitsFile()&&f().length>0;return(()=>{var y=fs(),v=y.firstChild,d=v.nextSibling,E=d.firstChild,m=E.nextSibling,w=m.nextSibling,p=d.nextSibling,k=p.firstChild;return Ct(m,Ft(Me,{get each(){return f()},children:C=>Ft(ds,{ref:R=>C.ref=R,get mappingId(){return C.id},get sttData(){return n.sttStore.sttData()},get uhabitsData(){return n.sttStore.uhabitsData()},onRemove:()=>c(C.id),onUpdate:a})})),w.$$click=s,Ct(y,Ft(ke,{get when(){return i()},children:C=>(()=>{var R=hs(),A=R.firstChild,F=A.nextSibling,D=F.firstChild,M=D.firstChild;return Ct(D,()=>C().totalNewDays,M),Ct(F,Ft(Me,{get each(){return C().mappingDetails},children:O=>(()=>{var $=ps();return Ct($,O),$})()}),null),R})()}),p),Cn(k,"click",n.onConvert),Pt(()=>k.disabled=n.disabled||!T()),y})()};We(["click"]);var _s=Ut("<h3>Debug Log"),gs=Ut("<div id=debug-console>");function bs(){let n;return En(()=>{Ir.logs(),n&&(n.scrollTop=n.scrollHeight)}),[_s(),(()=>{var f=gs(),r=n;return typeof r=="function"?Fr(r,f):n=f,Pt(()=>f.innerHTML=Ir.logs()),f})()]}var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ln(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ys(n){if(n.__esModule)return n;var f=n.default;if(typeof f=="function"){var r=function b(){return this instanceof b?Reflect.construct(f,arguments,this.constructor):f.apply(this,arguments)};r.prototype=f.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(b){var h=Object.getOwnPropertyDescriptor(n,b);Object.defineProperty(r,b,h.get?h:{enumerable:!0,get:function(){return n[b]}})}),r}function rr(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,f){(function(r){n.exports=r()})(function(){return function r(b,h,s){function c(i,T){if(!h[i]){if(!b[i]){var y=typeof rr=="function"&&rr;if(!T&&y)return y(i,!0);if(a)return a(i,!0);var v=new Error("Cannot find module '"+i+"'");throw v.code="MODULE_NOT_FOUND",v}var d=h[i]={exports:{}};b[i][0].call(d.exports,function(E){var m=b[i][1][E];return c(m||E)},d,d.exports,r,b,h,s)}return h[i].exports}for(var a=typeof rr=="function"&&rr,g=0;g<s.length;g++)c(s[g]);return c}({1:[function(r,b,h){var s=r("./utils"),c=r("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(g){for(var i,T,y,v,d,E,m,w=[],p=0,k=g.length,C=k,R=s.getTypeOf(g)!=="string";p<g.length;)C=k-p,y=R?(i=g[p++],T=p<k?g[p++]:0,p<k?g[p++]:0):(i=g.charCodeAt(p++),T=p<k?g.charCodeAt(p++):0,p<k?g.charCodeAt(p++):0),v=i>>2,d=(3&i)<<4|T>>4,E=1<C?(15&T)<<2|y>>6:64,m=2<C?63&y:64,w.push(a.charAt(v)+a.charAt(d)+a.charAt(E)+a.charAt(m));return w.join("")},h.decode=function(g){var i,T,y,v,d,E,m=0,w=0,p="data:";if(g.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var k,C=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===a.charAt(64)&&C--,g.charAt(g.length-2)===a.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=c.uint8array?new Uint8Array(0|C):new Array(0|C);m<g.length;)i=a.indexOf(g.charAt(m++))<<2|(v=a.indexOf(g.charAt(m++)))>>4,T=(15&v)<<4|(d=a.indexOf(g.charAt(m++)))>>2,y=(3&d)<<6|(E=a.indexOf(g.charAt(m++))),k[w++]=i,d!==64&&(k[w++]=T),E!==64&&(k[w++]=y);return k}},{"./support":30,"./utils":32}],2:[function(r,b,h){var s=r("./external"),c=r("./stream/DataWorker"),a=r("./stream/Crc32Probe"),g=r("./stream/DataLengthProbe");function i(T,y,v,d,E){this.compressedSize=T,this.uncompressedSize=y,this.crc32=v,this.compression=d,this.compressedContent=E}i.prototype={getContentWorker:function(){var T=new c(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),y=this;return T.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new c(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},i.createWorkerFrom=function(T,y,v){return T.pipe(new a).pipe(new g("uncompressedSize")).pipe(y.compressWorker(v)).pipe(new g("compressedSize")).withStreamInfo("compression",y)},b.exports=i},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,b,h){var s=r("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},h.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,b,h){var s=r("./utils"),c=function(){for(var a,g=[],i=0;i<256;i++){a=i;for(var T=0;T<8;T++)a=1&a?3988292384^a>>>1:a>>>1;g[i]=a}return g}();b.exports=function(a,g){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(i,T,y,v){var d=c,E=v+y;i^=-1;for(var m=v;m<E;m++)i=i>>>8^d[255&(i^T[m])];return-1^i}(0|g,a,a.length,0):function(i,T,y,v){var d=c,E=v+y;i^=-1;for(var m=v;m<E;m++)i=i>>>8^d[255&(i^T.charCodeAt(m))];return-1^i}(0|g,a,a.length,0):0}},{"./utils":32}],5:[function(r,b,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(r,b,h){var s=null;s=typeof Promise<"u"?Promise:r("lie"),b.exports={Promise:s}},{lie:37}],7:[function(r,b,h){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=r("pako"),a=r("./utils"),g=r("./stream/GenericWorker"),i=s?"uint8array":"array";function T(y,v){g.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=v,this.meta={}}h.magic="\b\0",a.inherits(T,g),T.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(i,y.data),!1)},T.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(v){y.push({data:v,meta:y.meta})}},h.compressWorker=function(y){return new T("Deflate",y)},h.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,b,h){function s(d,E){var m,w="";for(m=0;m<E;m++)w+=String.fromCharCode(255&d),d>>>=8;return w}function c(d,E,m,w,p,k){var C,R,A=d.file,F=d.compression,D=k!==i.utf8encode,M=a.transformTo("string",k(A.name)),O=a.transformTo("string",i.utf8encode(A.name)),$=A.comment,H=a.transformTo("string",k($)),S=a.transformTo("string",i.utf8encode($)),L=O.length!==A.name.length,u=S.length!==$.length,G="",lt="",X="",ct=A.dir,Y=A.date,ot={crc32:0,compressedSize:0,uncompressedSize:0};E&&!m||(ot.crc32=d.crc32,ot.compressedSize=d.compressedSize,ot.uncompressedSize=d.uncompressedSize);var U=0;E&&(U|=8),D||!L&&!u||(U|=2048);var z=0,nt=0;ct&&(z|=16),p==="UNIX"?(nt=798,z|=function(Q,bt){var Tt=Q;return Q||(Tt=bt?16893:33204),(65535&Tt)<<16}(A.unixPermissions,ct)):(nt=20,z|=function(Q){return 63&(Q||0)}(A.dosPermissions)),C=Y.getUTCHours(),C<<=6,C|=Y.getUTCMinutes(),C<<=5,C|=Y.getUTCSeconds()/2,R=Y.getUTCFullYear()-1980,R<<=4,R|=Y.getUTCMonth()+1,R<<=5,R|=Y.getUTCDate(),L&&(lt=s(1,1)+s(T(M),4)+O,G+="up"+s(lt.length,2)+lt),u&&(X=s(1,1)+s(T(H),4)+S,G+="uc"+s(X.length,2)+X);var J="";return J+=`
\0`,J+=s(U,2),J+=F.magic,J+=s(C,2),J+=s(R,2),J+=s(ot.crc32,4),J+=s(ot.compressedSize,4),J+=s(ot.uncompressedSize,4),J+=s(M.length,2),J+=s(G.length,2),{fileRecord:y.LOCAL_FILE_HEADER+J+M+G,dirRecord:y.CENTRAL_FILE_HEADER+s(nt,2)+J+s(H.length,2)+"\0\0\0\0"+s(z,4)+s(w,4)+M+G+H}}var a=r("../utils"),g=r("../stream/GenericWorker"),i=r("../utf8"),T=r("../crc32"),y=r("../signature");function v(d,E,m,w){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=m,this.encodeFileName=w,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(v,g),v.prototype.push=function(d){var E=d.meta.percent||0,m=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,g.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:m?(E+100*(m-w-1))/m:100}}))},v.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var E=this.streamFiles&&!d.file.dir;if(E){var m=c(d,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(d){this.accumulate=!1;var E=this.streamFiles&&!d.file.dir,m=c(d,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),E)this.push({data:function(w){return y.DATA_DESCRIPTOR+s(w.crc32,4)+s(w.compressedSize,4)+s(w.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var d=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var m=this.bytesWritten-d,w=function(p,k,C,R,A){var F=a.transformTo("string",A(R));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(p,2)+s(p,2)+s(k,4)+s(C,4)+s(F.length,2)+F}(this.dirRecords.length,m,d,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(d){this._sources.push(d);var E=this;return d.on("data",function(m){E.processChunk(m)}),d.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),d.on("error",function(m){E.error(m)}),this},v.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(d){var E=this._sources;if(!g.prototype.error.call(this,d))return!1;for(var m=0;m<E.length;m++)try{E[m].error(d)}catch{}return!0},v.prototype.lock=function(){g.prototype.lock.call(this);for(var d=this._sources,E=0;E<d.length;E++)d[E].lock()},b.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,b,h){var s=r("../compressions"),c=r("./ZipFileWorker");h.generateWorker=function(a,g,i){var T=new c(g.streamFiles,i,g.platform,g.encodeFileName),y=0;try{a.forEach(function(v,d){y++;var E=function(k,C){var R=k||C,A=s[R];if(!A)throw new Error(R+" is not a valid compression method !");return A}(d.options.compression,g.compression),m=d.options.compressionOptions||g.compressionOptions||{},w=d.dir,p=d.date;d._compressWorker(E,m).withStreamInfo("file",{name:v,dir:w,date:p,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(T)}),T.entriesCount=y}catch(v){T.error(v)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,b,h){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new s;for(var a in this)typeof this[a]!="function"&&(c[a]=this[a]);return c}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(c,a){return new s().loadAsync(c,a)},s.external=r("./external"),b.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,b,h){var s=r("./utils"),c=r("./external"),a=r("./utf8"),g=r("./zipEntries"),i=r("./stream/Crc32Probe"),T=r("./nodejsUtils");function y(v){return new c.Promise(function(d,E){var m=v.decompressed.getContentWorker().pipe(new i);m.on("error",function(w){E(w)}).on("end",function(){m.streamInfo.crc32!==v.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}b.exports=function(v,d){var E=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),T.isNode&&T.isStream(v)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",v,!0,d.optimizedBinaryString,d.base64).then(function(m){var w=new g(d);return w.load(m),w}).then(function(m){var w=[c.Promise.resolve(m)],p=m.files;if(d.checkCRC32)for(var k=0;k<p.length;k++)w.push(y(p[k]));return c.Promise.all(w)}).then(function(m){for(var w=m.shift(),p=w.files,k=0;k<p.length;k++){var C=p[k],R=C.fileNameStr,A=s.resolve(C.fileNameStr);E.file(A,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:d.createFolders}),C.dir||(E.file(A).unsafeOriginalName=R)}return w.zipComment.length&&(E.comment=w.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,b,h){var s=r("../utils"),c=r("../stream/GenericWorker");function a(g,i){c.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(i)}s.inherits(a,c),a.prototype._bindStream=function(g){var i=this;(this._stream=g).pause(),g.on("data",function(T){i.push({data:T,meta:{percent:0}})}).on("error",function(T){i.isPaused?this.generatedError=T:i.error(T)}).on("end",function(){i.isPaused?i._upstreamEnded=!0:i.end()})},a.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},b.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,b,h){var s=r("readable-stream").Readable;function c(a,g,i){s.call(this,g),this._helper=a;var T=this;a.on("data",function(y,v){T.push(y)||T._helper.pause(),i&&i(v)}).on("error",function(y){T.emit("error",y)}).on("end",function(){T.push(null)})}r("../utils").inherits(c,s),c.prototype._read=function(){this._helper.resume()},b.exports=c},{"../utils":32,"readable-stream":16}],14:[function(r,b,h){b.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,c);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,c)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var c=new Buffer(s);return c.fill(0),c},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,b,h){function s(A,F,D){var M,O=a.getTypeOf(F),$=a.extend(D||{},T);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(A=p(A)),$.createFolders&&(M=w(A))&&k.call(this,M,!0);var H=O==="string"&&$.binary===!1&&$.base64===!1;D&&D.binary!==void 0||($.binary=!H),(F instanceof y&&F.uncompressedSize===0||$.dir||!F||F.length===0)&&($.base64=!1,$.binary=!0,F="",$.compression="STORE",O="string");var S=null;S=F instanceof y||F instanceof g?F:E.isNode&&E.isStream(F)?new m(A,F):a.prepareContent(A,F,$.binary,$.optimizedBinaryString,$.base64);var L=new v(A,S,$);this.files[A]=L}var c=r("./utf8"),a=r("./utils"),g=r("./stream/GenericWorker"),i=r("./stream/StreamHelper"),T=r("./defaults"),y=r("./compressedObject"),v=r("./zipObject"),d=r("./generate"),E=r("./nodejsUtils"),m=r("./nodejs/NodejsStreamInputAdapter"),w=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var F=A.lastIndexOf("/");return 0<F?A.substring(0,F):""},p=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},k=function(A,F){return F=F!==void 0?F:T.createFolders,A=p(A),this.files[A]||s.call(this,A,null,{dir:!0,createFolders:F}),this.files[A]};function C(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var F,D,M;for(F in this.files)M=this.files[F],(D=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&A(D,M)},filter:function(A){var F=[];return this.forEach(function(D,M){A(D,M)&&F.push(M)}),F},file:function(A,F,D){if(arguments.length!==1)return A=this.root+A,s.call(this,A,F,D),this;if(C(A)){var M=A;return this.filter(function($,H){return!H.dir&&M.test($)})}var O=this.files[this.root+A];return O&&!O.dir?O:null},folder:function(A){if(!A)return this;if(C(A))return this.filter(function(O,$){return $.dir&&A.test(O)});var F=this.root+A,D=k.call(this,F),M=this.clone();return M.root=D.name,M},remove:function(A){A=this.root+A;var F=this.files[A];if(F||(A.slice(-1)!=="/"&&(A+="/"),F=this.files[A]),F&&!F.dir)delete this.files[A];else for(var D=this.filter(function(O,$){return $.name.slice(0,A.length)===A}),M=0;M<D.length;M++)delete this.files[D[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var F,D={};try{if((D=a.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");a.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var M=D.comment||this.comment||"";F=d.generateWorker(this,D,M)}catch(O){(F=new g("error")).error(O)}return new i(F,D.type||"string",D.mimeType)},generateAsync:function(A,F){return this.generateInternalStream(A).accumulate(F)},generateNodeStream:function(A,F){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(F)}};b.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,b,h){b.exports=r("stream")},{stream:void 0}],17:[function(r,b,h){var s=r("./DataReader");function c(a){s.call(this,a);for(var g=0;g<this.data.length;g++)a[g]=255&a[g]}r("../utils").inherits(c,s),c.prototype.byteAt=function(a){return this.data[this.zero+a]},c.prototype.lastIndexOfSignature=function(a){for(var g=a.charCodeAt(0),i=a.charCodeAt(1),T=a.charCodeAt(2),y=a.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===g&&this.data[v+1]===i&&this.data[v+2]===T&&this.data[v+3]===y)return v-this.zero;return-1},c.prototype.readAndCheckSignature=function(a){var g=a.charCodeAt(0),i=a.charCodeAt(1),T=a.charCodeAt(2),y=a.charCodeAt(3),v=this.readData(4);return g===v[0]&&i===v[1]&&T===v[2]&&y===v[3]},c.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,g},b.exports=c},{"../utils":32,"./DataReader":18}],18:[function(r,b,h){var s=r("../utils");function c(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var g,i=0;for(this.checkOffset(a),g=this.index+a-1;g>=this.index;g--)i=(i<<8)+this.byteAt(g);return this.index+=a,i},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},b.exports=c},{"../utils":32}],19:[function(r,b,h){var s=r("./Uint8ArrayReader");function c(a){s.call(this,a)}r("../utils").inherits(c,s),c.prototype.readData=function(a){this.checkOffset(a);var g=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,g},b.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,b,h){var s=r("./DataReader");function c(a){s.call(this,a)}r("../utils").inherits(c,s),c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},c.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},c.prototype.readData=function(a){this.checkOffset(a);var g=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,g},b.exports=c},{"../utils":32,"./DataReader":18}],21:[function(r,b,h){var s=r("./ArrayReader");function c(a){s.call(this,a)}r("../utils").inherits(c,s),c.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,g},b.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(r,b,h){var s=r("../utils"),c=r("../support"),a=r("./ArrayReader"),g=r("./StringReader"),i=r("./NodeBufferReader"),T=r("./Uint8ArrayReader");b.exports=function(y){var v=s.getTypeOf(y);return s.checkSupport(v),v!=="string"||c.uint8array?v==="nodebuffer"?new i(y):c.uint8array?new T(s.transformTo("uint8array",y)):new a(s.transformTo("array",y)):new g(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,b,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,b,h){var s=r("./GenericWorker"),c=r("../utils");function a(g){s.call(this,"ConvertWorker to "+g),this.destType=g}c.inherits(a,s),a.prototype.processChunk=function(g){this.push({data:c.transformTo(this.destType,g.data),meta:g.meta})},b.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(r,b,h){var s=r("./GenericWorker"),c=r("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(a,s),a.prototype.processChunk=function(g){this.streamInfo.crc32=c(g.data,this.streamInfo.crc32||0),this.push(g)},b.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,b,h){var s=r("../utils"),c=r("./GenericWorker");function a(g){c.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}s.inherits(a,c),a.prototype.processChunk=function(g){if(g){var i=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=i+g.data.length}c.prototype.processChunk.call(this,g)},b.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(r,b,h){var s=r("../utils"),c=r("./GenericWorker");function a(g){c.call(this,"DataWorker");var i=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(T){i.dataIsReady=!0,i.data=T,i.max=T&&T.length||0,i.type=s.getTypeOf(T),i.isPaused||i._tickAndRepeat()},function(T){i.error(T)})}s.inherits(a,c),a.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,i=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,i);break;case"uint8array":g=this.data.subarray(this.index,i);break;case"array":case"nodebuffer":g=this.data.slice(this.index,i)}return this.index=i,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(r,b,h){function s(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,a){return this._listeners[c].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,a){if(this._listeners[c])for(var g=0;g<this._listeners[c].length;g++)this._listeners[c][g].call(this,a)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var a=this;return c.on("data",function(g){a.processChunk(g)}),c.on("end",function(){a.end()}),c.on("error",function(g){a.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,a){return this.extraStreamInfo[c]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},b.exports=s},{}],29:[function(r,b,h){var s=r("../utils"),c=r("./ConvertWorker"),a=r("./GenericWorker"),g=r("../base64"),i=r("../support"),T=r("../external"),y=null;if(i.nodestream)try{y=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(E,m){return new T.Promise(function(w,p){var k=[],C=E._internalType,R=E._outputType,A=E._mimeType;E.on("data",function(F,D){k.push(F),m&&m(D)}).on("error",function(F){k=[],p(F)}).on("end",function(){try{var F=function(D,M,O){switch(D){case"blob":return s.newBlob(s.transformTo("arraybuffer",M),O);case"base64":return g.encode(M);default:return s.transformTo(D,M)}}(R,function(D,M){var O,$=0,H=null,S=0;for(O=0;O<M.length;O++)S+=M[O].length;switch(D){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(H=new Uint8Array(S),O=0;O<M.length;O++)H.set(M[O],$),$+=M[O].length;return H;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+D+"'")}}(C,k),A);w(F)}catch(D){p(D)}k=[]}).resume()})}function d(E,m,w){var p=m;switch(m){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=m,this._mimeType=w,s.checkSupport(p),this._worker=E.pipe(new c(p)),E.lock()}catch(k){this._worker=new a("error"),this._worker.error(k)}}d.prototype={accumulate:function(E){return v(this,E)},on:function(E,m){var w=this;return E==="data"?this._worker.on(E,function(p){m.call(w,p.data,p.meta)}):this._worker.on(E,function(){s.delay(m,arguments,w)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},E)}},b.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,b,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var s=new ArrayBuffer(0);try{h.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(s),h.blob=c.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!r("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(r,b,h){for(var s=r("./utils"),c=r("./support"),a=r("./nodejsUtils"),g=r("./stream/GenericWorker"),i=new Array(256),T=0;T<256;T++)i[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;i[254]=i[254]=1;function y(){g.call(this,"utf-8 decode"),this.leftOver=null}function v(){g.call(this,"utf-8 encode")}h.utf8encode=function(d){return c.nodebuffer?a.newBufferFrom(d,"utf-8"):function(E){var m,w,p,k,C,R=E.length,A=0;for(k=0;k<R;k++)(64512&(w=E.charCodeAt(k)))==55296&&k+1<R&&(64512&(p=E.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(p-56320),k++),A+=w<128?1:w<2048?2:w<65536?3:4;for(m=c.uint8array?new Uint8Array(A):new Array(A),k=C=0;C<A;k++)(64512&(w=E.charCodeAt(k)))==55296&&k+1<R&&(64512&(p=E.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(p-56320),k++),w<128?m[C++]=w:(w<2048?m[C++]=192|w>>>6:(w<65536?m[C++]=224|w>>>12:(m[C++]=240|w>>>18,m[C++]=128|w>>>12&63),m[C++]=128|w>>>6&63),m[C++]=128|63&w);return m}(d)},h.utf8decode=function(d){return c.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):function(E){var m,w,p,k,C=E.length,R=new Array(2*C);for(m=w=0;m<C;)if((p=E[m++])<128)R[w++]=p;else if(4<(k=i[p]))R[w++]=65533,m+=k-1;else{for(p&=k===2?31:k===3?15:7;1<k&&m<C;)p=p<<6|63&E[m++],k--;1<k?R[w++]=65533:p<65536?R[w++]=p:(p-=65536,R[w++]=55296|p>>10&1023,R[w++]=56320|1023&p)}return R.length!==w&&(R.subarray?R=R.subarray(0,w):R.length=w),s.applyFromCharCode(R)}(d=s.transformTo(c.uint8array?"uint8array":"array",d))},s.inherits(y,g),y.prototype.processChunk=function(d){var E=s.transformTo(c.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var m=E;(E=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),E.set(m,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var w=function(k,C){var R;for((C=C||k.length)>k.length&&(C=k.length),R=C-1;0<=R&&(192&k[R])==128;)R--;return R<0||R===0?C:R+i[k[R]]>C?R:C}(E),p=E;w!==E.length&&(c.uint8array?(p=E.subarray(0,w),this.leftOver=E.subarray(w,E.length)):(p=E.slice(0,w),this.leftOver=E.slice(w,E.length))),this.push({data:h.utf8decode(p),meta:d.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=y,s.inherits(v,g),v.prototype.processChunk=function(d){this.push({data:h.utf8encode(d.data),meta:d.meta})},h.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,b,h){var s=r("./support"),c=r("./base64"),a=r("./nodejsUtils"),g=r("./external");function i(m){return m}function T(m,w){for(var p=0;p<m.length;++p)w[p]=255&m.charCodeAt(p);return w}r("setimmediate"),h.newBlob=function(m,w){h.checkSupport("blob");try{return new Blob([m],{type:w})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(m),p.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(m,w,p){var k=[],C=0,R=m.length;if(R<=p)return String.fromCharCode.apply(null,m);for(;C<R;)w==="array"||w==="nodebuffer"?k.push(String.fromCharCode.apply(null,m.slice(C,Math.min(C+p,R)))):k.push(String.fromCharCode.apply(null,m.subarray(C,Math.min(C+p,R)))),C+=p;return k.join("")},stringifyByChar:function(m){for(var w="",p=0;p<m.length;p++)w+=String.fromCharCode(m[p]);return w},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function v(m){var w=65536,p=h.getTypeOf(m),k=!0;if(p==="uint8array"?k=y.applyCanBeUsed.uint8array:p==="nodebuffer"&&(k=y.applyCanBeUsed.nodebuffer),k)for(;1<w;)try{return y.stringifyByChunk(m,p,w)}catch{w=Math.floor(w/2)}return y.stringifyByChar(m)}function d(m,w){for(var p=0;p<m.length;p++)w[p]=m[p];return w}h.applyFromCharCode=v;var E={};E.string={string:i,array:function(m){return T(m,new Array(m.length))},arraybuffer:function(m){return E.string.uint8array(m).buffer},uint8array:function(m){return T(m,new Uint8Array(m.length))},nodebuffer:function(m){return T(m,a.allocBuffer(m.length))}},E.array={string:v,array:i,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},E.arraybuffer={string:function(m){return v(new Uint8Array(m))},array:function(m){return d(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:i,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},E.uint8array={string:v,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:i,nodebuffer:function(m){return a.newBufferFrom(m)}},E.nodebuffer={string:v,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return E.nodebuffer.uint8array(m).buffer},uint8array:function(m){return d(m,new Uint8Array(m.length))},nodebuffer:i},h.transformTo=function(m,w){if(w=w||"",!m)return w;h.checkSupport(m);var p=h.getTypeOf(w);return E[p][m](w)},h.resolve=function(m){for(var w=m.split("/"),p=[],k=0;k<w.length;k++){var C=w[k];C==="."||C===""&&k!==0&&k!==w.length-1||(C===".."?p.pop():p.push(C))}return p.join("/")},h.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(m){var w,p,k="";for(p=0;p<(m||"").length;p++)k+="\\x"+((w=m.charCodeAt(p))<16?"0":"")+w.toString(16).toUpperCase();return k},h.delay=function(m,w,p){setImmediate(function(){m.apply(p||null,w||[])})},h.inherits=function(m,w){function p(){}p.prototype=w.prototype,m.prototype=new p},h.extend=function(){var m,w,p={};for(m=0;m<arguments.length;m++)for(w in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],w)&&p[w]===void 0&&(p[w]=arguments[m][w]);return p},h.prepareContent=function(m,w,p,k,C){return g.Promise.resolve(w).then(function(R){return s.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new g.Promise(function(A,F){var D=new FileReader;D.onload=function(M){A(M.target.result)},D.onerror=function(M){F(M.target.error)},D.readAsArrayBuffer(R)}):R}).then(function(R){var A=h.getTypeOf(R);return A?(A==="arraybuffer"?R=h.transformTo("uint8array",R):A==="string"&&(C?R=c.decode(R):p&&k!==!0&&(R=function(F){return T(F,s.uint8array?new Uint8Array(F.length):new Array(F.length))}(R))),R):g.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,b,h){var s=r("./reader/readerFor"),c=r("./utils"),a=r("./signature"),g=r("./zipEntry"),i=r("./support");function T(y){this.files=[],this.loadOptions=y}T.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(v)+", expected "+c.pretty(y)+")")}},isSignature:function(y,v){var d=this.reader.index;this.reader.setIndex(y);var E=this.reader.readString(4)===v;return this.reader.setIndex(d),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),v=i.uint8array?"uint8array":"array",d=c.transformTo(v,y);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,v,d,E=this.zip64EndOfCentralSize-44;0<E;)y=this.reader.readInt(2),v=this.reader.readInt(4),d=this.reader.readData(v),this.zip64ExtensibleData[y]={id:y,length:v,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,v;for(y=0;y<this.files.length;y++)v=this.files[y],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(y=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var v=y;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var E=v-d;if(0<E)this.isSignature(v,a.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(y){this.reader=s(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,b,h){var s=r("./reader/readerFor"),c=r("./utils"),a=r("./compressedObject"),g=r("./crc32"),i=r("./utf8"),T=r("./compressions"),y=r("./support");function v(d,E){this.options=d,this.loadOptions=E}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var E,m;if(d.skip(22),this.fileNameLength=d.readInt(2),m=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=function(w){for(var p in T)if(Object.prototype.hasOwnProperty.call(T,p)&&T[p].magic===w)return T[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,E,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var E=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(E),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var E,m,w,p=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<p;)E=d.readInt(2),m=d.readInt(2),w=d.readData(m),this.extraFields[E]={id:E,length:m,value:w};d.setIndex(p)},handleUTF8:function(){var d=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=i.utf8decode(this.fileName),this.fileCommentStr=i.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var m=c.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var p=c.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var E=s(d.value);return E.readInt(1)!==1||g(this.fileName)!==E.readInt(4)?null:i.utf8decode(E.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var E=s(d.value);return E.readInt(1)!==1||g(this.fileComment)!==E.readInt(4)?null:i.utf8decode(E.readData(d.length-5))}return null}},b.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,b,h){function s(E,m,w){this.name=E,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=m,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var c=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),g=r("./utf8"),i=r("./compressedObject"),T=r("./stream/GenericWorker");s.prototype={internalStream:function(E){var m=null,w="string";try{if(!E)throw new Error("No output type specified.");var p=(w=E.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),m=this._decompressWorker();var k=!this._dataBinary;k&&!p&&(m=m.pipe(new g.Utf8EncodeWorker)),!k&&p&&(m=m.pipe(new g.Utf8DecodeWorker))}catch(C){(m=new T("error")).error(C)}return new c(m,w,"")},async:function(E,m){return this.internalStream(E).accumulate(m)},nodeStream:function(E,m){return this.internalStream(E||"nodebuffer").toNodejsStream(m)},_compressWorker:function(E,m){if(this._data instanceof i&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new g.Utf8EncodeWorker)),i.createWorkerFrom(w,E,m)},_decompressWorker:function(){return this._data instanceof i?this._data.getContentWorker():this._data instanceof T?this._data:new a(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<y.length;d++)s.prototype[y[d]]=v;b.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,b,h){(function(s){var c,a,g=s.MutationObserver||s.WebKitMutationObserver;if(g){var i=0,T=new g(E),y=s.document.createTextNode("");T.observe(y,{characterData:!0}),c=function(){y.data=i=++i%2}}else if(s.setImmediate||s.MessageChannel===void 0)c="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){E(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(E,0)};else{var v=new s.MessageChannel;v.port1.onmessage=E,c=function(){v.port2.postMessage(0)}}var d=[];function E(){var m,w;a=!0;for(var p=d.length;p;){for(w=d,d=[],m=-1;++m<p;)w[m]();p=d.length}a=!1}b.exports=function(m){d.push(m)!==1||a||c()}}).call(this,typeof er<"u"?er:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,b,h){var s=r("immediate");function c(){}var a={},g=["REJECTED"],i=["FULFILLED"],T=["PENDING"];function y(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,p!==c&&m(this,p)}function v(p,k,C){this.promise=p,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function d(p,k,C){s(function(){var R;try{R=k(C)}catch(A){return a.reject(p,A)}R===p?a.reject(p,new TypeError("Cannot resolve promise with itself")):a.resolve(p,R)})}function E(p){var k=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof k=="function")return function(){k.apply(p,arguments)}}function m(p,k){var C=!1;function R(D){C||(C=!0,a.reject(p,D))}function A(D){C||(C=!0,a.resolve(p,D))}var F=w(function(){k(A,R)});F.status==="error"&&R(F.value)}function w(p,k){var C={};try{C.value=p(k),C.status="success"}catch(R){C.status="error",C.value=R}return C}(b.exports=y).prototype.finally=function(p){if(typeof p!="function")return this;var k=this.constructor;return this.then(function(C){return k.resolve(p()).then(function(){return C})},function(C){return k.resolve(p()).then(function(){throw C})})},y.prototype.catch=function(p){return this.then(null,p)},y.prototype.then=function(p,k){if(typeof p!="function"&&this.state===i||typeof k!="function"&&this.state===g)return this;var C=new this.constructor(c);return this.state!==T?d(C,this.state===i?p:k,this.outcome):this.queue.push(new v(C,p,k)),C},v.prototype.callFulfilled=function(p){a.resolve(this.promise,p)},v.prototype.otherCallFulfilled=function(p){d(this.promise,this.onFulfilled,p)},v.prototype.callRejected=function(p){a.reject(this.promise,p)},v.prototype.otherCallRejected=function(p){d(this.promise,this.onRejected,p)},a.resolve=function(p,k){var C=w(E,k);if(C.status==="error")return a.reject(p,C.value);var R=C.value;if(R)m(p,R);else{p.state=i,p.outcome=k;for(var A=-1,F=p.queue.length;++A<F;)p.queue[A].callFulfilled(k)}return p},a.reject=function(p,k){p.state=g,p.outcome=k;for(var C=-1,R=p.queue.length;++C<R;)p.queue[C].callRejected(k);return p},y.resolve=function(p){return p instanceof this?p:a.resolve(new this(c),p)},y.reject=function(p){var k=new this(c);return a.reject(k,p)},y.all=function(p){var k=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=p.length,R=!1;if(!C)return this.resolve([]);for(var A=new Array(C),F=0,D=-1,M=new this(c);++D<C;)O(p[D],D);return M;function O($,H){k.resolve($).then(function(S){A[H]=S,++F!==C||R||(R=!0,a.resolve(M,A))},function(S){R||(R=!0,a.reject(M,S))})}},y.race=function(p){var k=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=p.length,R=!1;if(!C)return this.resolve([]);for(var A=-1,F=new this(c);++A<C;)D=p[A],k.resolve(D).then(function(M){R||(R=!0,a.resolve(F,M))},function(M){R||(R=!0,a.reject(F,M))});var D;return F}},{immediate:36}],38:[function(r,b,h){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),b.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,b,h){var s=r("./zlib/deflate"),c=r("./utils/common"),a=r("./utils/strings"),g=r("./zlib/messages"),i=r("./zlib/zstream"),T=Object.prototype.toString,y=0,v=-1,d=0,E=8;function m(p){if(!(this instanceof m))return new m(p);this.options=c.assign({level:v,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},p||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var C=s.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(C!==y)throw new Error(g[C]);if(k.header&&s.deflateSetHeader(this.strm,k.header),k.dictionary){var R;if(R=typeof k.dictionary=="string"?a.string2buf(k.dictionary):T.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(C=s.deflateSetDictionary(this.strm,R))!==y)throw new Error(g[C]);this._dict_set=!0}}function w(p,k){var C=new m(k);if(C.push(p,!0),C.err)throw C.msg||g[C.err];return C.result}m.prototype.push=function(p,k){var C,R,A=this.strm,F=this.options.chunkSize;if(this.ended)return!1;R=k===~~k?k:k===!0?4:0,typeof p=="string"?A.input=a.string2buf(p):T.call(p)==="[object ArrayBuffer]"?A.input=new Uint8Array(p):A.input=p,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new c.Buf8(F),A.next_out=0,A.avail_out=F),(C=s.deflate(A,R))!==1&&C!==y)return this.onEnd(C),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(c.shrinkBuf(A.output,A.next_out))):this.onData(c.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&C!==1);return R===4?(C=s.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===y):R!==2||(this.onEnd(y),!(A.avail_out=0))},m.prototype.onData=function(p){this.chunks.push(p)},m.prototype.onEnd=function(p){p===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},h.Deflate=m,h.deflate=w,h.deflateRaw=function(p,k){return(k=k||{}).raw=!0,w(p,k)},h.gzip=function(p,k){return(k=k||{}).gzip=!0,w(p,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,b,h){var s=r("./zlib/inflate"),c=r("./utils/common"),a=r("./utils/strings"),g=r("./zlib/constants"),i=r("./zlib/messages"),T=r("./zlib/zstream"),y=r("./zlib/gzheader"),v=Object.prototype.toString;function d(m){if(!(this instanceof d))return new d(m);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},m||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||m&&m.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var p=s.inflateInit2(this.strm,w.windowBits);if(p!==g.Z_OK)throw new Error(i[p]);this.header=new y,s.inflateGetHeader(this.strm,this.header)}function E(m,w){var p=new d(w);if(p.push(m,!0),p.err)throw p.msg||i[p.err];return p.result}d.prototype.push=function(m,w){var p,k,C,R,A,F,D=this.strm,M=this.options.chunkSize,O=this.options.dictionary,$=!1;if(this.ended)return!1;k=w===~~w?w:w===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof m=="string"?D.input=a.binstring2buf(m):v.call(m)==="[object ArrayBuffer]"?D.input=new Uint8Array(m):D.input=m,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new c.Buf8(M),D.next_out=0,D.avail_out=M),(p=s.inflate(D,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&O&&(F=typeof O=="string"?a.string2buf(O):v.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,p=s.inflateSetDictionary(this.strm,F)),p===g.Z_BUF_ERROR&&$===!0&&(p=g.Z_OK,$=!1),p!==g.Z_STREAM_END&&p!==g.Z_OK)return this.onEnd(p),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&p!==g.Z_STREAM_END&&(D.avail_in!==0||k!==g.Z_FINISH&&k!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=a.utf8border(D.output,D.next_out),R=D.next_out-C,A=a.buf2string(D.output,C),D.next_out=R,D.avail_out=M-R,R&&c.arraySet(D.output,D.output,C,R,0),this.onData(A)):this.onData(c.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&($=!0)}while((0<D.avail_in||D.avail_out===0)&&p!==g.Z_STREAM_END);return p===g.Z_STREAM_END&&(k=g.Z_FINISH),k===g.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===g.Z_OK):k!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(D.avail_out=0))},d.prototype.onData=function(m){this.chunks.push(m)},d.prototype.onEnd=function(m){m===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},h.Inflate=d,h.inflate=E,h.inflateRaw=function(m,w){return(w=w||{}).raw=!0,E(m,w)},h.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,b,h){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(g){for(var i=Array.prototype.slice.call(arguments,1);i.length;){var T=i.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var y in T)T.hasOwnProperty(y)&&(g[y]=T[y])}}return g},h.shrinkBuf=function(g,i){return g.length===i?g:g.subarray?g.subarray(0,i):(g.length=i,g)};var c={arraySet:function(g,i,T,y,v){if(i.subarray&&g.subarray)g.set(i.subarray(T,T+y),v);else for(var d=0;d<y;d++)g[v+d]=i[T+d]},flattenChunks:function(g){var i,T,y,v,d,E;for(i=y=0,T=g.length;i<T;i++)y+=g[i].length;for(E=new Uint8Array(y),i=v=0,T=g.length;i<T;i++)d=g[i],E.set(d,v),v+=d.length;return E}},a={arraySet:function(g,i,T,y,v){for(var d=0;d<y;d++)g[v+d]=i[T+d]},flattenChunks:function(g){return[].concat.apply([],g)}};h.setTyped=function(g){g?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,c)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,a))},h.setTyped(s)},{}],42:[function(r,b,h){var s=r("./common"),c=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var g=new s.Buf8(256),i=0;i<256;i++)g[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function T(y,v){if(v<65537&&(y.subarray&&a||!y.subarray&&c))return String.fromCharCode.apply(null,s.shrinkBuf(y,v));for(var d="",E=0;E<v;E++)d+=String.fromCharCode(y[E]);return d}g[254]=g[254]=1,h.string2buf=function(y){var v,d,E,m,w,p=y.length,k=0;for(m=0;m<p;m++)(64512&(d=y.charCodeAt(m)))==55296&&m+1<p&&(64512&(E=y.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(E-56320),m++),k+=d<128?1:d<2048?2:d<65536?3:4;for(v=new s.Buf8(k),m=w=0;w<k;m++)(64512&(d=y.charCodeAt(m)))==55296&&m+1<p&&(64512&(E=y.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(E-56320),m++),d<128?v[w++]=d:(d<2048?v[w++]=192|d>>>6:(d<65536?v[w++]=224|d>>>12:(v[w++]=240|d>>>18,v[w++]=128|d>>>12&63),v[w++]=128|d>>>6&63),v[w++]=128|63&d);return v},h.buf2binstring=function(y){return T(y,y.length)},h.binstring2buf=function(y){for(var v=new s.Buf8(y.length),d=0,E=v.length;d<E;d++)v[d]=y.charCodeAt(d);return v},h.buf2string=function(y,v){var d,E,m,w,p=v||y.length,k=new Array(2*p);for(d=E=0;d<p;)if((m=y[d++])<128)k[E++]=m;else if(4<(w=g[m]))k[E++]=65533,d+=w-1;else{for(m&=w===2?31:w===3?15:7;1<w&&d<p;)m=m<<6|63&y[d++],w--;1<w?k[E++]=65533:m<65536?k[E++]=m:(m-=65536,k[E++]=55296|m>>10&1023,k[E++]=56320|1023&m)}return T(k,E)},h.utf8border=function(y,v){var d;for((v=v||y.length)>y.length&&(v=y.length),d=v-1;0<=d&&(192&y[d])==128;)d--;return d<0||d===0?v:d+g[y[d]]>v?d:v}},{"./common":41}],43:[function(r,b,h){b.exports=function(s,c,a,g){for(var i=65535&s|0,T=s>>>16&65535|0,y=0;a!==0;){for(a-=y=2e3<a?2e3:a;T=T+(i=i+c[g++]|0)|0,--y;);i%=65521,T%=65521}return i|T<<16|0}},{}],44:[function(r,b,h){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,b,h){var s=function(){for(var c,a=[],g=0;g<256;g++){c=g;for(var i=0;i<8;i++)c=1&c?3988292384^c>>>1:c>>>1;a[g]=c}return a}();b.exports=function(c,a,g,i){var T=s,y=i+g;c^=-1;for(var v=i;v<y;v++)c=c>>>8^T[255&(c^a[v])];return-1^c}},{}],46:[function(r,b,h){var s,c=r("../utils/common"),a=r("./trees"),g=r("./adler32"),i=r("./crc32"),T=r("./messages"),y=0,v=4,d=0,E=-2,m=-1,w=4,p=2,k=8,C=9,R=286,A=30,F=19,D=2*R+1,M=15,O=3,$=258,H=$+O+1,S=42,L=113,u=1,G=2,lt=3,X=4;function ct(o,K){return o.msg=T[K],K}function Y(o){return(o<<1)-(4<o?9:0)}function ot(o){for(var K=o.length;0<=--K;)o[K]=0}function U(o){var K=o.state,W=K.pending;W>o.avail_out&&(W=o.avail_out),W!==0&&(c.arraySet(o.output,K.pending_buf,K.pending_out,W,o.next_out),o.next_out+=W,K.pending_out+=W,o.total_out+=W,o.avail_out-=W,K.pending-=W,K.pending===0&&(K.pending_out=0))}function z(o,K){a._tr_flush_block(o,0<=o.block_start?o.block_start:-1,o.strstart-o.block_start,K),o.block_start=o.strstart,U(o.strm)}function nt(o,K){o.pending_buf[o.pending++]=K}function J(o,K){o.pending_buf[o.pending++]=K>>>8&255,o.pending_buf[o.pending++]=255&K}function Q(o,K){var W,x,N=o.max_chain_length,P=o.strstart,tt=o.prev_length,rt=o.nice_match,q=o.strstart>o.w_size-H?o.strstart-(o.w_size-H):0,it=o.window,ut=o.w_mask,st=o.prev,ft=o.strstart+$,kt=it[P+tt-1],St=it[P+tt];o.prev_length>=o.good_match&&(N>>=2),rt>o.lookahead&&(rt=o.lookahead);do if(it[(W=K)+tt]===St&&it[W+tt-1]===kt&&it[W]===it[P]&&it[++W]===it[P+1]){P+=2,W++;do;while(it[++P]===it[++W]&&it[++P]===it[++W]&&it[++P]===it[++W]&&it[++P]===it[++W]&&it[++P]===it[++W]&&it[++P]===it[++W]&&it[++P]===it[++W]&&it[++P]===it[++W]&&P<ft);if(x=$-(ft-P),P=ft-$,tt<x){if(o.match_start=K,rt<=(tt=x))break;kt=it[P+tt-1],St=it[P+tt]}}while((K=st[K&ut])>q&&--N!=0);return tt<=o.lookahead?tt:o.lookahead}function bt(o){var K,W,x,N,P,tt,rt,q,it,ut,st=o.w_size;do{if(N=o.window_size-o.lookahead-o.strstart,o.strstart>=st+(st-H)){for(c.arraySet(o.window,o.window,st,st,0),o.match_start-=st,o.strstart-=st,o.block_start-=st,K=W=o.hash_size;x=o.head[--K],o.head[K]=st<=x?x-st:0,--W;);for(K=W=st;x=o.prev[--K],o.prev[K]=st<=x?x-st:0,--W;);N+=st}if(o.strm.avail_in===0)break;if(tt=o.strm,rt=o.window,q=o.strstart+o.lookahead,it=N,ut=void 0,ut=tt.avail_in,it<ut&&(ut=it),W=ut===0?0:(tt.avail_in-=ut,c.arraySet(rt,tt.input,tt.next_in,ut,q),tt.state.wrap===1?tt.adler=g(tt.adler,rt,ut,q):tt.state.wrap===2&&(tt.adler=i(tt.adler,rt,ut,q)),tt.next_in+=ut,tt.total_in+=ut,ut),o.lookahead+=W,o.lookahead+o.insert>=O)for(P=o.strstart-o.insert,o.ins_h=o.window[P],o.ins_h=(o.ins_h<<o.hash_shift^o.window[P+1])&o.hash_mask;o.insert&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[P+O-1])&o.hash_mask,o.prev[P&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=P,P++,o.insert--,!(o.lookahead+o.insert<O)););}while(o.lookahead<H&&o.strm.avail_in!==0)}function Tt(o,K){for(var W,x;;){if(o.lookahead<H){if(bt(o),o.lookahead<H&&K===y)return u;if(o.lookahead===0)break}if(W=0,o.lookahead>=O&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+O-1])&o.hash_mask,W=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),W!==0&&o.strstart-W<=o.w_size-H&&(o.match_length=Q(o,W)),o.match_length>=O)if(x=a._tr_tally(o,o.strstart-o.match_start,o.match_length-O),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=O){for(o.match_length--;o.strstart++,o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+O-1])&o.hash_mask,W=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart,--o.match_length!=0;);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+1])&o.hash_mask;else x=a._tr_tally(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(x&&(z(o,!1),o.strm.avail_out===0))return u}return o.insert=o.strstart<O-1?o.strstart:O-1,K===v?(z(o,!0),o.strm.avail_out===0?lt:X):o.last_lit&&(z(o,!1),o.strm.avail_out===0)?u:G}function _t(o,K){for(var W,x,N;;){if(o.lookahead<H){if(bt(o),o.lookahead<H&&K===y)return u;if(o.lookahead===0)break}if(W=0,o.lookahead>=O&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+O-1])&o.hash_mask,W=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=O-1,W!==0&&o.prev_length<o.max_lazy_match&&o.strstart-W<=o.w_size-H&&(o.match_length=Q(o,W),o.match_length<=5&&(o.strategy===1||o.match_length===O&&4096<o.strstart-o.match_start)&&(o.match_length=O-1)),o.prev_length>=O&&o.match_length<=o.prev_length){for(N=o.strstart+o.lookahead-O,x=a._tr_tally(o,o.strstart-1-o.prev_match,o.prev_length-O),o.lookahead-=o.prev_length-1,o.prev_length-=2;++o.strstart<=N&&(o.ins_h=(o.ins_h<<o.hash_shift^o.window[o.strstart+O-1])&o.hash_mask,W=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),--o.prev_length!=0;);if(o.match_available=0,o.match_length=O-1,o.strstart++,x&&(z(o,!1),o.strm.avail_out===0))return u}else if(o.match_available){if((x=a._tr_tally(o,0,o.window[o.strstart-1]))&&z(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return u}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(x=a._tr_tally(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<O-1?o.strstart:O-1,K===v?(z(o,!0),o.strm.avail_out===0?lt:X):o.last_lit&&(z(o,!1),o.strm.avail_out===0)?u:G}function vt(o,K,W,x,N){this.good_length=o,this.max_lazy=K,this.nice_length=W,this.max_chain=x,this.func=N}function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*D),this.dyn_dtree=new c.Buf16(2*(2*A+1)),this.bl_tree=new c.Buf16(2*(2*F+1)),ot(this.dyn_ltree),ot(this.dyn_dtree),ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(M+1),this.heap=new c.Buf16(2*R+1),ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*R+1),ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xt(o){var K;return o&&o.state?(o.total_in=o.total_out=0,o.data_type=p,(K=o.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?S:L,o.adler=K.wrap===2?0:1,K.last_flush=y,a._tr_init(K),d):ct(o,E)}function Rt(o){var K=xt(o);return K===d&&function(W){W.window_size=2*W.w_size,ot(W.head),W.max_lazy_match=s[W.level].max_lazy,W.good_match=s[W.level].good_length,W.nice_match=s[W.level].nice_length,W.max_chain_length=s[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=O-1,W.match_available=0,W.ins_h=0}(o.state),K}function Bt(o,K,W,x,N,P){if(!o)return E;var tt=1;if(K===m&&(K=6),x<0?(tt=0,x=-x):15<x&&(tt=2,x-=16),N<1||C<N||W!==k||x<8||15<x||K<0||9<K||P<0||w<P)return ct(o,E);x===8&&(x=9);var rt=new At;return(o.state=rt).strm=o,rt.wrap=tt,rt.gzhead=null,rt.w_bits=x,rt.w_size=1<<rt.w_bits,rt.w_mask=rt.w_size-1,rt.hash_bits=N+7,rt.hash_size=1<<rt.hash_bits,rt.hash_mask=rt.hash_size-1,rt.hash_shift=~~((rt.hash_bits+O-1)/O),rt.window=new c.Buf8(2*rt.w_size),rt.head=new c.Buf16(rt.hash_size),rt.prev=new c.Buf16(rt.w_size),rt.lit_bufsize=1<<N+6,rt.pending_buf_size=4*rt.lit_bufsize,rt.pending_buf=new c.Buf8(rt.pending_buf_size),rt.d_buf=1*rt.lit_bufsize,rt.l_buf=3*rt.lit_bufsize,rt.level=K,rt.strategy=P,rt.method=W,Rt(o)}s=[new vt(0,0,0,0,function(o,K){var W=65535;for(W>o.pending_buf_size-5&&(W=o.pending_buf_size-5);;){if(o.lookahead<=1){if(bt(o),o.lookahead===0&&K===y)return u;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;var x=o.block_start+W;if((o.strstart===0||o.strstart>=x)&&(o.lookahead=o.strstart-x,o.strstart=x,z(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-H&&(z(o,!1),o.strm.avail_out===0))return u}return o.insert=0,K===v?(z(o,!0),o.strm.avail_out===0?lt:X):(o.strstart>o.block_start&&(z(o,!1),o.strm.avail_out),u)}),new vt(4,4,8,4,Tt),new vt(4,5,16,8,Tt),new vt(4,6,32,32,Tt),new vt(4,4,16,16,_t),new vt(8,16,32,32,_t),new vt(8,16,128,128,_t),new vt(8,32,128,256,_t),new vt(32,128,258,1024,_t),new vt(32,258,258,4096,_t)],h.deflateInit=function(o,K){return Bt(o,K,k,15,8,0)},h.deflateInit2=Bt,h.deflateReset=Rt,h.deflateResetKeep=xt,h.deflateSetHeader=function(o,K){return o&&o.state?o.state.wrap!==2?E:(o.state.gzhead=K,d):E},h.deflate=function(o,K){var W,x,N,P;if(!o||!o.state||5<K||K<0)return o?ct(o,E):E;if(x=o.state,!o.output||!o.input&&o.avail_in!==0||x.status===666&&K!==v)return ct(o,o.avail_out===0?-5:E);if(x.strm=o,W=x.last_flush,x.last_flush=K,x.status===S)if(x.wrap===2)o.adler=0,nt(x,31),nt(x,139),nt(x,8),x.gzhead?(nt(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),nt(x,255&x.gzhead.time),nt(x,x.gzhead.time>>8&255),nt(x,x.gzhead.time>>16&255),nt(x,x.gzhead.time>>24&255),nt(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),nt(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(nt(x,255&x.gzhead.extra.length),nt(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(o.adler=i(o.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(nt(x,0),nt(x,0),nt(x,0),nt(x,0),nt(x,0),nt(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),nt(x,3),x.status=L);else{var tt=k+(x.w_bits-8<<4)<<8;tt|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(tt|=32),tt+=31-tt%31,x.status=L,J(x,tt),x.strstart!==0&&(J(x,o.adler>>>16),J(x,65535&o.adler)),o.adler=1}if(x.status===69)if(x.gzhead.extra){for(N=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>N&&(o.adler=i(o.adler,x.pending_buf,x.pending-N,N)),U(o),N=x.pending,x.pending!==x.pending_buf_size));)nt(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>N&&(o.adler=i(o.adler,x.pending_buf,x.pending-N,N)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){N=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>N&&(o.adler=i(o.adler,x.pending_buf,x.pending-N,N)),U(o),N=x.pending,x.pending===x.pending_buf_size)){P=1;break}P=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,nt(x,P)}while(P!==0);x.gzhead.hcrc&&x.pending>N&&(o.adler=i(o.adler,x.pending_buf,x.pending-N,N)),P===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){N=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>N&&(o.adler=i(o.adler,x.pending_buf,x.pending-N,N)),U(o),N=x.pending,x.pending===x.pending_buf_size)){P=1;break}P=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,nt(x,P)}while(P!==0);x.gzhead.hcrc&&x.pending>N&&(o.adler=i(o.adler,x.pending_buf,x.pending-N,N)),P===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&U(o),x.pending+2<=x.pending_buf_size&&(nt(x,255&o.adler),nt(x,o.adler>>8&255),o.adler=0,x.status=L)):x.status=L),x.pending!==0){if(U(o),o.avail_out===0)return x.last_flush=-1,d}else if(o.avail_in===0&&Y(K)<=Y(W)&&K!==v)return ct(o,-5);if(x.status===666&&o.avail_in!==0)return ct(o,-5);if(o.avail_in!==0||x.lookahead!==0||K!==y&&x.status!==666){var rt=x.strategy===2?function(q,it){for(var ut;;){if(q.lookahead===0&&(bt(q),q.lookahead===0)){if(it===y)return u;break}if(q.match_length=0,ut=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,ut&&(z(q,!1),q.strm.avail_out===0))return u}return q.insert=0,it===v?(z(q,!0),q.strm.avail_out===0?lt:X):q.last_lit&&(z(q,!1),q.strm.avail_out===0)?u:G}(x,K):x.strategy===3?function(q,it){for(var ut,st,ft,kt,St=q.window;;){if(q.lookahead<=$){if(bt(q),q.lookahead<=$&&it===y)return u;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=O&&0<q.strstart&&(st=St[ft=q.strstart-1])===St[++ft]&&st===St[++ft]&&st===St[++ft]){kt=q.strstart+$;do;while(st===St[++ft]&&st===St[++ft]&&st===St[++ft]&&st===St[++ft]&&st===St[++ft]&&st===St[++ft]&&st===St[++ft]&&st===St[++ft]&&ft<kt);q.match_length=$-(kt-ft),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=O?(ut=a._tr_tally(q,1,q.match_length-O),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(ut=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),ut&&(z(q,!1),q.strm.avail_out===0))return u}return q.insert=0,it===v?(z(q,!0),q.strm.avail_out===0?lt:X):q.last_lit&&(z(q,!1),q.strm.avail_out===0)?u:G}(x,K):s[x.level].func(x,K);if(rt!==lt&&rt!==X||(x.status=666),rt===u||rt===lt)return o.avail_out===0&&(x.last_flush=-1),d;if(rt===G&&(K===1?a._tr_align(x):K!==5&&(a._tr_stored_block(x,0,0,!1),K===3&&(ot(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),U(o),o.avail_out===0))return x.last_flush=-1,d}return K!==v?d:x.wrap<=0?1:(x.wrap===2?(nt(x,255&o.adler),nt(x,o.adler>>8&255),nt(x,o.adler>>16&255),nt(x,o.adler>>24&255),nt(x,255&o.total_in),nt(x,o.total_in>>8&255),nt(x,o.total_in>>16&255),nt(x,o.total_in>>24&255)):(J(x,o.adler>>>16),J(x,65535&o.adler)),U(o),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?d:1)},h.deflateEnd=function(o){var K;return o&&o.state?(K=o.state.status)!==S&&K!==69&&K!==73&&K!==91&&K!==103&&K!==L&&K!==666?ct(o,E):(o.state=null,K===L?ct(o,-3):d):E},h.deflateSetDictionary=function(o,K){var W,x,N,P,tt,rt,q,it,ut=K.length;if(!o||!o.state||(P=(W=o.state).wrap)===2||P===1&&W.status!==S||W.lookahead)return E;for(P===1&&(o.adler=g(o.adler,K,ut,0)),W.wrap=0,ut>=W.w_size&&(P===0&&(ot(W.head),W.strstart=0,W.block_start=0,W.insert=0),it=new c.Buf8(W.w_size),c.arraySet(it,K,ut-W.w_size,W.w_size,0),K=it,ut=W.w_size),tt=o.avail_in,rt=o.next_in,q=o.input,o.avail_in=ut,o.next_in=0,o.input=K,bt(W);W.lookahead>=O;){for(x=W.strstart,N=W.lookahead-(O-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[x+O-1])&W.hash_mask,W.prev[x&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=x,x++,--N;);W.strstart=x,W.lookahead=O-1,bt(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=O-1,W.match_available=0,o.next_in=rt,o.input=q,o.avail_in=tt,W.wrap=P,d},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,b,h){b.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,b,h){b.exports=function(s,c){var a,g,i,T,y,v,d,E,m,w,p,k,C,R,A,F,D,M,O,$,H,S,L,u,G;a=s.state,g=s.next_in,u=s.input,i=g+(s.avail_in-5),T=s.next_out,G=s.output,y=T-(c-s.avail_out),v=T+(s.avail_out-257),d=a.dmax,E=a.wsize,m=a.whave,w=a.wnext,p=a.window,k=a.hold,C=a.bits,R=a.lencode,A=a.distcode,F=(1<<a.lenbits)-1,D=(1<<a.distbits)-1;t:do{C<15&&(k+=u[g++]<<C,C+=8,k+=u[g++]<<C,C+=8),M=R[k&F];e:for(;;){if(k>>>=O=M>>>24,C-=O,(O=M>>>16&255)===0)G[T++]=65535&M;else{if(!(16&O)){if(!(64&O)){M=R[(65535&M)+(k&(1<<O)-1)];continue e}if(32&O){a.mode=12;break t}s.msg="invalid literal/length code",a.mode=30;break t}$=65535&M,(O&=15)&&(C<O&&(k+=u[g++]<<C,C+=8),$+=k&(1<<O)-1,k>>>=O,C-=O),C<15&&(k+=u[g++]<<C,C+=8,k+=u[g++]<<C,C+=8),M=A[k&D];r:for(;;){if(k>>>=O=M>>>24,C-=O,!(16&(O=M>>>16&255))){if(!(64&O)){M=A[(65535&M)+(k&(1<<O)-1)];continue r}s.msg="invalid distance code",a.mode=30;break t}if(H=65535&M,C<(O&=15)&&(k+=u[g++]<<C,(C+=8)<O&&(k+=u[g++]<<C,C+=8)),d<(H+=k&(1<<O)-1)){s.msg="invalid distance too far back",a.mode=30;break t}if(k>>>=O,C-=O,(O=T-y)<H){if(m<(O=H-O)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break t}if(L=p,(S=0)===w){if(S+=E-O,O<$){for($-=O;G[T++]=p[S++],--O;);S=T-H,L=G}}else if(w<O){if(S+=E+w-O,(O-=w)<$){for($-=O;G[T++]=p[S++],--O;);if(S=0,w<$){for($-=O=w;G[T++]=p[S++],--O;);S=T-H,L=G}}}else if(S+=w-O,O<$){for($-=O;G[T++]=p[S++],--O;);S=T-H,L=G}for(;2<$;)G[T++]=L[S++],G[T++]=L[S++],G[T++]=L[S++],$-=3;$&&(G[T++]=L[S++],1<$&&(G[T++]=L[S++]))}else{for(S=T-H;G[T++]=G[S++],G[T++]=G[S++],G[T++]=G[S++],2<($-=3););$&&(G[T++]=G[S++],1<$&&(G[T++]=G[S++]))}break}}break}}while(g<i&&T<v);g-=$=C>>3,k&=(1<<(C-=$<<3))-1,s.next_in=g,s.next_out=T,s.avail_in=g<i?i-g+5:5-(g-i),s.avail_out=T<v?v-T+257:257-(T-v),a.hold=k,a.bits=C}},{}],49:[function(r,b,h){var s=r("../utils/common"),c=r("./adler32"),a=r("./crc32"),g=r("./inffast"),i=r("./inftrees"),T=1,y=2,v=0,d=-2,E=1,m=852,w=592;function p(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(S){var L;return S&&S.state?(L=S.state,S.total_in=S.total_out=L.total=0,S.msg="",L.wrap&&(S.adler=1&L.wrap),L.mode=E,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new s.Buf32(m),L.distcode=L.distdyn=new s.Buf32(w),L.sane=1,L.back=-1,v):d}function R(S){var L;return S&&S.state?((L=S.state).wsize=0,L.whave=0,L.wnext=0,C(S)):d}function A(S,L){var u,G;return S&&S.state?(G=S.state,L<0?(u=0,L=-L):(u=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?d:(G.window!==null&&G.wbits!==L&&(G.window=null),G.wrap=u,G.wbits=L,R(S))):d}function F(S,L){var u,G;return S?(G=new k,(S.state=G).window=null,(u=A(S,L))!==v&&(S.state=null),u):d}var D,M,O=!0;function $(S){if(O){var L;for(D=new s.Buf32(512),M=new s.Buf32(32),L=0;L<144;)S.lens[L++]=8;for(;L<256;)S.lens[L++]=9;for(;L<280;)S.lens[L++]=7;for(;L<288;)S.lens[L++]=8;for(i(T,S.lens,0,288,D,0,S.work,{bits:9}),L=0;L<32;)S.lens[L++]=5;i(y,S.lens,0,32,M,0,S.work,{bits:5}),O=!1}S.lencode=D,S.lenbits=9,S.distcode=M,S.distbits=5}function H(S,L,u,G){var lt,X=S.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new s.Buf8(X.wsize)),G>=X.wsize?(s.arraySet(X.window,L,u-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(G<(lt=X.wsize-X.wnext)&&(lt=G),s.arraySet(X.window,L,u-G,lt,X.wnext),(G-=lt)?(s.arraySet(X.window,L,u-G,G,0),X.wnext=G,X.whave=X.wsize):(X.wnext+=lt,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=lt))),0}h.inflateReset=R,h.inflateReset2=A,h.inflateResetKeep=C,h.inflateInit=function(S){return F(S,15)},h.inflateInit2=F,h.inflate=function(S,L){var u,G,lt,X,ct,Y,ot,U,z,nt,J,Q,bt,Tt,_t,vt,At,xt,Rt,Bt,o,K,W,x,N=0,P=new s.Buf8(4),tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return d;(u=S.state).mode===12&&(u.mode=13),ct=S.next_out,lt=S.output,ot=S.avail_out,X=S.next_in,G=S.input,Y=S.avail_in,U=u.hold,z=u.bits,nt=Y,J=ot,K=v;t:for(;;)switch(u.mode){case E:if(u.wrap===0){u.mode=13;break}for(;z<16;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(2&u.wrap&&U===35615){P[u.check=0]=255&U,P[1]=U>>>8&255,u.check=a(u.check,P,2,0),z=U=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&U)<<8)+(U>>8))%31){S.msg="incorrect header check",u.mode=30;break}if((15&U)!=8){S.msg="unknown compression method",u.mode=30;break}if(z-=4,o=8+(15&(U>>>=4)),u.wbits===0)u.wbits=o;else if(o>u.wbits){S.msg="invalid window size",u.mode=30;break}u.dmax=1<<o,S.adler=u.check=1,u.mode=512&U?10:12,z=U=0;break;case 2:for(;z<16;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(u.flags=U,(255&u.flags)!=8){S.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){S.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=U>>8&1),512&u.flags&&(P[0]=255&U,P[1]=U>>>8&255,u.check=a(u.check,P,2,0)),z=U=0,u.mode=3;case 3:for(;z<32;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}u.head&&(u.head.time=U),512&u.flags&&(P[0]=255&U,P[1]=U>>>8&255,P[2]=U>>>16&255,P[3]=U>>>24&255,u.check=a(u.check,P,4,0)),z=U=0,u.mode=4;case 4:for(;z<16;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}u.head&&(u.head.xflags=255&U,u.head.os=U>>8),512&u.flags&&(P[0]=255&U,P[1]=U>>>8&255,u.check=a(u.check,P,2,0)),z=U=0,u.mode=5;case 5:if(1024&u.flags){for(;z<16;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}u.length=U,u.head&&(u.head.extra_len=U),512&u.flags&&(P[0]=255&U,P[1]=U>>>8&255,u.check=a(u.check,P,2,0)),z=U=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&(Y<(Q=u.length)&&(Q=Y),Q&&(u.head&&(o=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Array(u.head.extra_len)),s.arraySet(u.head.extra,G,X,Q,o)),512&u.flags&&(u.check=a(u.check,G,Q,X)),Y-=Q,X+=Q,u.length-=Q),u.length))break t;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(Y===0)break t;for(Q=0;o=G[X+Q++],u.head&&o&&u.length<65536&&(u.head.name+=String.fromCharCode(o)),o&&Q<Y;);if(512&u.flags&&(u.check=a(u.check,G,Q,X)),Y-=Q,X+=Q,o)break t}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(Y===0)break t;for(Q=0;o=G[X+Q++],u.head&&o&&u.length<65536&&(u.head.comment+=String.fromCharCode(o)),o&&Q<Y;);if(512&u.flags&&(u.check=a(u.check,G,Q,X)),Y-=Q,X+=Q,o)break t}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;z<16;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(U!==(65535&u.check)){S.msg="header crc mismatch",u.mode=30;break}z=U=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),S.adler=u.check=0,u.mode=12;break;case 10:for(;z<32;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}S.adler=u.check=p(U),z=U=0,u.mode=11;case 11:if(u.havedict===0)return S.next_out=ct,S.avail_out=ot,S.next_in=X,S.avail_in=Y,u.hold=U,u.bits=z,2;S.adler=u.check=1,u.mode=12;case 12:if(L===5||L===6)break t;case 13:if(u.last){U>>>=7&z,z-=7&z,u.mode=27;break}for(;z<3;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}switch(u.last=1&U,z-=1,3&(U>>>=1)){case 0:u.mode=14;break;case 1:if($(u),u.mode=20,L!==6)break;U>>>=2,z-=2;break t;case 2:u.mode=17;break;case 3:S.msg="invalid block type",u.mode=30}U>>>=2,z-=2;break;case 14:for(U>>>=7&z,z-=7&z;z<32;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if((65535&U)!=(U>>>16^65535)){S.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&U,z=U=0,u.mode=15,L===6)break t;case 15:u.mode=16;case 16:if(Q=u.length){if(Y<Q&&(Q=Y),ot<Q&&(Q=ot),Q===0)break t;s.arraySet(lt,G,X,Q,ct),Y-=Q,X+=Q,ot-=Q,ct+=Q,u.length-=Q;break}u.mode=12;break;case 17:for(;z<14;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(u.nlen=257+(31&U),U>>>=5,z-=5,u.ndist=1+(31&U),U>>>=5,z-=5,u.ncode=4+(15&U),U>>>=4,z-=4,286<u.nlen||30<u.ndist){S.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;z<3;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}u.lens[tt[u.have++]]=7&U,U>>>=3,z-=3}for(;u.have<19;)u.lens[tt[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,W={bits:u.lenbits},K=i(0,u.lens,0,19,u.lencode,0,u.work,W),u.lenbits=W.bits,K){S.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;vt=(N=u.lencode[U&(1<<u.lenbits)-1])>>>16&255,At=65535&N,!((_t=N>>>24)<=z);){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(At<16)U>>>=_t,z-=_t,u.lens[u.have++]=At;else{if(At===16){for(x=_t+2;z<x;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(U>>>=_t,z-=_t,u.have===0){S.msg="invalid bit length repeat",u.mode=30;break}o=u.lens[u.have-1],Q=3+(3&U),U>>>=2,z-=2}else if(At===17){for(x=_t+3;z<x;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}z-=_t,o=0,Q=3+(7&(U>>>=_t)),U>>>=3,z-=3}else{for(x=_t+7;z<x;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}z-=_t,o=0,Q=11+(127&(U>>>=_t)),U>>>=7,z-=7}if(u.have+Q>u.nlen+u.ndist){S.msg="invalid bit length repeat",u.mode=30;break}for(;Q--;)u.lens[u.have++]=o}}if(u.mode===30)break;if(u.lens[256]===0){S.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,W={bits:u.lenbits},K=i(T,u.lens,0,u.nlen,u.lencode,0,u.work,W),u.lenbits=W.bits,K){S.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,W={bits:u.distbits},K=i(y,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,W),u.distbits=W.bits,K){S.msg="invalid distances set",u.mode=30;break}if(u.mode=20,L===6)break t;case 20:u.mode=21;case 21:if(6<=Y&&258<=ot){S.next_out=ct,S.avail_out=ot,S.next_in=X,S.avail_in=Y,u.hold=U,u.bits=z,g(S,J),ct=S.next_out,lt=S.output,ot=S.avail_out,X=S.next_in,G=S.input,Y=S.avail_in,U=u.hold,z=u.bits,u.mode===12&&(u.back=-1);break}for(u.back=0;vt=(N=u.lencode[U&(1<<u.lenbits)-1])>>>16&255,At=65535&N,!((_t=N>>>24)<=z);){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(vt&&!(240&vt)){for(xt=_t,Rt=vt,Bt=At;vt=(N=u.lencode[Bt+((U&(1<<xt+Rt)-1)>>xt)])>>>16&255,At=65535&N,!(xt+(_t=N>>>24)<=z);){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}U>>>=xt,z-=xt,u.back+=xt}if(U>>>=_t,z-=_t,u.back+=_t,u.length=At,vt===0){u.mode=26;break}if(32&vt){u.back=-1,u.mode=12;break}if(64&vt){S.msg="invalid literal/length code",u.mode=30;break}u.extra=15&vt,u.mode=22;case 22:if(u.extra){for(x=u.extra;z<x;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}u.length+=U&(1<<u.extra)-1,U>>>=u.extra,z-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;vt=(N=u.distcode[U&(1<<u.distbits)-1])>>>16&255,At=65535&N,!((_t=N>>>24)<=z);){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(!(240&vt)){for(xt=_t,Rt=vt,Bt=At;vt=(N=u.distcode[Bt+((U&(1<<xt+Rt)-1)>>xt)])>>>16&255,At=65535&N,!(xt+(_t=N>>>24)<=z);){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}U>>>=xt,z-=xt,u.back+=xt}if(U>>>=_t,z-=_t,u.back+=_t,64&vt){S.msg="invalid distance code",u.mode=30;break}u.offset=At,u.extra=15&vt,u.mode=24;case 24:if(u.extra){for(x=u.extra;z<x;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}u.offset+=U&(1<<u.extra)-1,U>>>=u.extra,z-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){S.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(ot===0)break t;if(Q=J-ot,u.offset>Q){if((Q=u.offset-Q)>u.whave&&u.sane){S.msg="invalid distance too far back",u.mode=30;break}bt=Q>u.wnext?(Q-=u.wnext,u.wsize-Q):u.wnext-Q,Q>u.length&&(Q=u.length),Tt=u.window}else Tt=lt,bt=ct-u.offset,Q=u.length;for(ot<Q&&(Q=ot),ot-=Q,u.length-=Q;lt[ct++]=Tt[bt++],--Q;);u.length===0&&(u.mode=21);break;case 26:if(ot===0)break t;lt[ct++]=u.length,ot--,u.mode=21;break;case 27:if(u.wrap){for(;z<32;){if(Y===0)break t;Y--,U|=G[X++]<<z,z+=8}if(J-=ot,S.total_out+=J,u.total+=J,J&&(S.adler=u.check=u.flags?a(u.check,lt,J,ct-J):c(u.check,lt,J,ct-J)),J=ot,(u.flags?U:p(U))!==u.check){S.msg="incorrect data check",u.mode=30;break}z=U=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;z<32;){if(Y===0)break t;Y--,U+=G[X++]<<z,z+=8}if(U!==(4294967295&u.total)){S.msg="incorrect length check",u.mode=30;break}z=U=0}u.mode=29;case 29:K=1;break t;case 30:K=-3;break t;case 31:return-4;case 32:default:return d}return S.next_out=ct,S.avail_out=ot,S.next_in=X,S.avail_in=Y,u.hold=U,u.bits=z,(u.wsize||J!==S.avail_out&&u.mode<30&&(u.mode<27||L!==4))&&H(S,S.output,S.next_out,J-S.avail_out)?(u.mode=31,-4):(nt-=S.avail_in,J-=S.avail_out,S.total_in+=nt,S.total_out+=J,u.total+=J,u.wrap&&J&&(S.adler=u.check=u.flags?a(u.check,lt,J,S.next_out-J):c(u.check,lt,J,S.next_out-J)),S.data_type=u.bits+(u.last?64:0)+(u.mode===12?128:0)+(u.mode===20||u.mode===15?256:0),(nt==0&&J===0||L===4)&&K===v&&(K=-5),K)},h.inflateEnd=function(S){if(!S||!S.state)return d;var L=S.state;return L.window&&(L.window=null),S.state=null,v},h.inflateGetHeader=function(S,L){var u;return S&&S.state&&2&(u=S.state).wrap?((u.head=L).done=!1,v):d},h.inflateSetDictionary=function(S,L){var u,G=L.length;return S&&S.state?(u=S.state).wrap!==0&&u.mode!==11?d:u.mode===11&&c(1,L,G,0)!==u.check?-3:H(S,L,G,G)?(u.mode=31,-4):(u.havedict=1,v):d},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,b,h){var s=r("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],i=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(T,y,v,d,E,m,w,p){var k,C,R,A,F,D,M,O,$,H=p.bits,S=0,L=0,u=0,G=0,lt=0,X=0,ct=0,Y=0,ot=0,U=0,z=null,nt=0,J=new s.Buf16(16),Q=new s.Buf16(16),bt=null,Tt=0;for(S=0;S<=15;S++)J[S]=0;for(L=0;L<d;L++)J[y[v+L]]++;for(lt=H,G=15;1<=G&&J[G]===0;G--);if(G<lt&&(lt=G),G===0)return E[m++]=20971520,E[m++]=20971520,p.bits=1,0;for(u=1;u<G&&J[u]===0;u++);for(lt<u&&(lt=u),S=Y=1;S<=15;S++)if(Y<<=1,(Y-=J[S])<0)return-1;if(0<Y&&(T===0||G!==1))return-1;for(Q[1]=0,S=1;S<15;S++)Q[S+1]=Q[S]+J[S];for(L=0;L<d;L++)y[v+L]!==0&&(w[Q[y[v+L]]++]=L);if(D=T===0?(z=bt=w,19):T===1?(z=c,nt-=257,bt=a,Tt-=257,256):(z=g,bt=i,-1),S=u,F=m,ct=L=U=0,R=-1,A=(ot=1<<(X=lt))-1,T===1&&852<ot||T===2&&592<ot)return 1;for(;;){for(M=S-ct,$=w[L]<D?(O=0,w[L]):w[L]>D?(O=bt[Tt+w[L]],z[nt+w[L]]):(O=96,0),k=1<<S-ct,u=C=1<<X;E[F+(U>>ct)+(C-=k)]=M<<24|O<<16|$|0,C!==0;);for(k=1<<S-1;U&k;)k>>=1;if(k!==0?(U&=k-1,U+=k):U=0,L++,--J[S]==0){if(S===G)break;S=y[v+w[L]]}if(lt<S&&(U&A)!==R){for(ct===0&&(ct=lt),F+=u,Y=1<<(X=S-ct);X+ct<G&&!((Y-=J[X+ct])<=0);)X++,Y<<=1;if(ot+=1<<X,T===1&&852<ot||T===2&&592<ot)return 1;E[R=U&A]=lt<<24|X<<16|F-m|0}}return U!==0&&(E[F+U]=S-ct<<24|64<<16|0),p.bits=lt,0}},{"../utils/common":41}],51:[function(r,b,h){b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,b,h){var s=r("../utils/common"),c=0,a=1;function g(N){for(var P=N.length;0<=--P;)N[P]=0}var i=0,T=29,y=256,v=y+1+T,d=30,E=19,m=2*v+1,w=15,p=16,k=7,C=256,R=16,A=17,F=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(v+2));g(H);var S=new Array(2*d);g(S);var L=new Array(512);g(L);var u=new Array(256);g(u);var G=new Array(T);g(G);var lt,X,ct,Y=new Array(d);function ot(N,P,tt,rt,q){this.static_tree=N,this.extra_bits=P,this.extra_base=tt,this.elems=rt,this.max_length=q,this.has_stree=N&&N.length}function U(N,P){this.dyn_tree=N,this.max_code=0,this.stat_desc=P}function z(N){return N<256?L[N]:L[256+(N>>>7)]}function nt(N,P){N.pending_buf[N.pending++]=255&P,N.pending_buf[N.pending++]=P>>>8&255}function J(N,P,tt){N.bi_valid>p-tt?(N.bi_buf|=P<<N.bi_valid&65535,nt(N,N.bi_buf),N.bi_buf=P>>p-N.bi_valid,N.bi_valid+=tt-p):(N.bi_buf|=P<<N.bi_valid&65535,N.bi_valid+=tt)}function Q(N,P,tt){J(N,tt[2*P],tt[2*P+1])}function bt(N,P){for(var tt=0;tt|=1&N,N>>>=1,tt<<=1,0<--P;);return tt>>>1}function Tt(N,P,tt){var rt,q,it=new Array(w+1),ut=0;for(rt=1;rt<=w;rt++)it[rt]=ut=ut+tt[rt-1]<<1;for(q=0;q<=P;q++){var st=N[2*q+1];st!==0&&(N[2*q]=bt(it[st]++,st))}}function _t(N){var P;for(P=0;P<v;P++)N.dyn_ltree[2*P]=0;for(P=0;P<d;P++)N.dyn_dtree[2*P]=0;for(P=0;P<E;P++)N.bl_tree[2*P]=0;N.dyn_ltree[2*C]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function vt(N){8<N.bi_valid?nt(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function At(N,P,tt,rt){var q=2*P,it=2*tt;return N[q]<N[it]||N[q]===N[it]&&rt[P]<=rt[tt]}function xt(N,P,tt){for(var rt=N.heap[tt],q=tt<<1;q<=N.heap_len&&(q<N.heap_len&&At(P,N.heap[q+1],N.heap[q],N.depth)&&q++,!At(P,rt,N.heap[q],N.depth));)N.heap[tt]=N.heap[q],tt=q,q<<=1;N.heap[tt]=rt}function Rt(N,P,tt){var rt,q,it,ut,st=0;if(N.last_lit!==0)for(;rt=N.pending_buf[N.d_buf+2*st]<<8|N.pending_buf[N.d_buf+2*st+1],q=N.pending_buf[N.l_buf+st],st++,rt===0?Q(N,q,P):(Q(N,(it=u[q])+y+1,P),(ut=D[it])!==0&&J(N,q-=G[it],ut),Q(N,it=z(--rt),tt),(ut=M[it])!==0&&J(N,rt-=Y[it],ut)),st<N.last_lit;);Q(N,C,P)}function Bt(N,P){var tt,rt,q,it=P.dyn_tree,ut=P.stat_desc.static_tree,st=P.stat_desc.has_stree,ft=P.stat_desc.elems,kt=-1;for(N.heap_len=0,N.heap_max=m,tt=0;tt<ft;tt++)it[2*tt]!==0?(N.heap[++N.heap_len]=kt=tt,N.depth[tt]=0):it[2*tt+1]=0;for(;N.heap_len<2;)it[2*(q=N.heap[++N.heap_len]=kt<2?++kt:0)]=1,N.depth[q]=0,N.opt_len--,st&&(N.static_len-=ut[2*q+1]);for(P.max_code=kt,tt=N.heap_len>>1;1<=tt;tt--)xt(N,it,tt);for(q=ft;tt=N.heap[1],N.heap[1]=N.heap[N.heap_len--],xt(N,it,1),rt=N.heap[1],N.heap[--N.heap_max]=tt,N.heap[--N.heap_max]=rt,it[2*q]=it[2*tt]+it[2*rt],N.depth[q]=(N.depth[tt]>=N.depth[rt]?N.depth[tt]:N.depth[rt])+1,it[2*tt+1]=it[2*rt+1]=q,N.heap[1]=q++,xt(N,it,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],function(St,jt){var oe,Yt,be,Dt,gt,Te,Gt=jt.dyn_tree,Re=jt.max_code,le=jt.stat_desc.static_tree,hr=jt.stat_desc.has_stree,re=jt.stat_desc.extra_bits,Ie=jt.stat_desc.extra_base,ue=jt.stat_desc.max_length,ye=0;for(Dt=0;Dt<=w;Dt++)St.bl_count[Dt]=0;for(Gt[2*St.heap[St.heap_max]+1]=0,oe=St.heap_max+1;oe<m;oe++)ue<(Dt=Gt[2*Gt[2*(Yt=St.heap[oe])+1]+1]+1)&&(Dt=ue,ye++),Gt[2*Yt+1]=Dt,Re<Yt||(St.bl_count[Dt]++,gt=0,Ie<=Yt&&(gt=re[Yt-Ie]),Te=Gt[2*Yt],St.opt_len+=Te*(Dt+gt),hr&&(St.static_len+=Te*(le[2*Yt+1]+gt)));if(ye!==0){do{for(Dt=ue-1;St.bl_count[Dt]===0;)Dt--;St.bl_count[Dt]--,St.bl_count[Dt+1]+=2,St.bl_count[ue]--,ye-=2}while(0<ye);for(Dt=ue;Dt!==0;Dt--)for(Yt=St.bl_count[Dt];Yt!==0;)Re<(be=St.heap[--oe])||(Gt[2*be+1]!==Dt&&(St.opt_len+=(Dt-Gt[2*be+1])*Gt[2*be],Gt[2*be+1]=Dt),Yt--)}}(N,P),Tt(it,kt,N.bl_count)}function o(N,P,tt){var rt,q,it=-1,ut=P[1],st=0,ft=7,kt=4;for(ut===0&&(ft=138,kt=3),P[2*(tt+1)+1]=65535,rt=0;rt<=tt;rt++)q=ut,ut=P[2*(rt+1)+1],++st<ft&&q===ut||(st<kt?N.bl_tree[2*q]+=st:q!==0?(q!==it&&N.bl_tree[2*q]++,N.bl_tree[2*R]++):st<=10?N.bl_tree[2*A]++:N.bl_tree[2*F]++,it=q,kt=(st=0)===ut?(ft=138,3):q===ut?(ft=6,3):(ft=7,4))}function K(N,P,tt){var rt,q,it=-1,ut=P[1],st=0,ft=7,kt=4;for(ut===0&&(ft=138,kt=3),rt=0;rt<=tt;rt++)if(q=ut,ut=P[2*(rt+1)+1],!(++st<ft&&q===ut)){if(st<kt)for(;Q(N,q,N.bl_tree),--st!=0;);else q!==0?(q!==it&&(Q(N,q,N.bl_tree),st--),Q(N,R,N.bl_tree),J(N,st-3,2)):st<=10?(Q(N,A,N.bl_tree),J(N,st-3,3)):(Q(N,F,N.bl_tree),J(N,st-11,7));it=q,kt=(st=0)===ut?(ft=138,3):q===ut?(ft=6,3):(ft=7,4)}}g(Y);var W=!1;function x(N,P,tt,rt){J(N,(i<<1)+(rt?1:0),3),function(q,it,ut,st){vt(q),nt(q,ut),nt(q,~ut),s.arraySet(q.pending_buf,q.window,it,ut,q.pending),q.pending+=ut}(N,P,tt)}h._tr_init=function(N){W||(function(){var P,tt,rt,q,it,ut=new Array(w+1);for(q=rt=0;q<T-1;q++)for(G[q]=rt,P=0;P<1<<D[q];P++)u[rt++]=q;for(u[rt-1]=q,q=it=0;q<16;q++)for(Y[q]=it,P=0;P<1<<M[q];P++)L[it++]=q;for(it>>=7;q<d;q++)for(Y[q]=it<<7,P=0;P<1<<M[q]-7;P++)L[256+it++]=q;for(tt=0;tt<=w;tt++)ut[tt]=0;for(P=0;P<=143;)H[2*P+1]=8,P++,ut[8]++;for(;P<=255;)H[2*P+1]=9,P++,ut[9]++;for(;P<=279;)H[2*P+1]=7,P++,ut[7]++;for(;P<=287;)H[2*P+1]=8,P++,ut[8]++;for(Tt(H,v+1,ut),P=0;P<d;P++)S[2*P+1]=5,S[2*P]=bt(P,5);lt=new ot(H,D,y+1,v,w),X=new ot(S,M,0,d,w),ct=new ot(new Array(0),O,0,E,k)}(),W=!0),N.l_desc=new U(N.dyn_ltree,lt),N.d_desc=new U(N.dyn_dtree,X),N.bl_desc=new U(N.bl_tree,ct),N.bi_buf=0,N.bi_valid=0,_t(N)},h._tr_stored_block=x,h._tr_flush_block=function(N,P,tt,rt){var q,it,ut=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=function(st){var ft,kt=4093624447;for(ft=0;ft<=31;ft++,kt>>>=1)if(1&kt&&st.dyn_ltree[2*ft]!==0)return c;if(st.dyn_ltree[18]!==0||st.dyn_ltree[20]!==0||st.dyn_ltree[26]!==0)return a;for(ft=32;ft<y;ft++)if(st.dyn_ltree[2*ft]!==0)return a;return c}(N)),Bt(N,N.l_desc),Bt(N,N.d_desc),ut=function(st){var ft;for(o(st,st.dyn_ltree,st.l_desc.max_code),o(st,st.dyn_dtree,st.d_desc.max_code),Bt(st,st.bl_desc),ft=E-1;3<=ft&&st.bl_tree[2*$[ft]+1]===0;ft--);return st.opt_len+=3*(ft+1)+5+5+4,ft}(N),q=N.opt_len+3+7>>>3,(it=N.static_len+3+7>>>3)<=q&&(q=it)):q=it=tt+5,tt+4<=q&&P!==-1?x(N,P,tt,rt):N.strategy===4||it===q?(J(N,2+(rt?1:0),3),Rt(N,H,S)):(J(N,4+(rt?1:0),3),function(st,ft,kt,St){var jt;for(J(st,ft-257,5),J(st,kt-1,5),J(st,St-4,4),jt=0;jt<St;jt++)J(st,st.bl_tree[2*$[jt]+1],3);K(st,st.dyn_ltree,ft-1),K(st,st.dyn_dtree,kt-1)}(N,N.l_desc.max_code+1,N.d_desc.max_code+1,ut+1),Rt(N,N.dyn_ltree,N.dyn_dtree)),_t(N),rt&&vt(N)},h._tr_tally=function(N,P,tt){return N.pending_buf[N.d_buf+2*N.last_lit]=P>>>8&255,N.pending_buf[N.d_buf+2*N.last_lit+1]=255&P,N.pending_buf[N.l_buf+N.last_lit]=255&tt,N.last_lit++,P===0?N.dyn_ltree[2*tt]++:(N.matches++,P--,N.dyn_ltree[2*(u[tt]+y+1)]++,N.dyn_dtree[2*z(P)]++),N.last_lit===N.lit_bufsize-1},h._tr_align=function(N){J(N,2,3),Q(N,C,H),function(P){P.bi_valid===16?(nt(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)}(N)}},{"../utils/common":41}],53:[function(r,b,h){b.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,b,h){(function(s){(function(c,a){if(!c.setImmediate){var g,i,T,y,v=1,d={},E=!1,m=c.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(c);w=w&&w.setTimeout?w:c,g={}.toString.call(c.process)==="[object process]"?function(R){process.nextTick(function(){k(R)})}:function(){if(c.postMessage&&!c.importScripts){var R=!0,A=c.onmessage;return c.onmessage=function(){R=!1},c.postMessage("","*"),c.onmessage=A,R}}()?(y="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",C,!1):c.attachEvent("onmessage",C),function(R){c.postMessage(y+R,"*")}):c.MessageChannel?((T=new MessageChannel).port1.onmessage=function(R){k(R.data)},function(R){T.port2.postMessage(R)}):m&&"onreadystatechange"in m.createElement("script")?(i=m.documentElement,function(R){var A=m.createElement("script");A.onreadystatechange=function(){k(R),A.onreadystatechange=null,i.removeChild(A),A=null},i.appendChild(A)}):function(R){setTimeout(k,0,R)},w.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var A=new Array(arguments.length-1),F=0;F<A.length;F++)A[F]=arguments[F+1];var D={callback:R,args:A};return d[v]=D,g(v),v++},w.clearImmediate=p}function p(R){delete d[R]}function k(R){if(E)setTimeout(k,0,R);else{var A=d[R];if(A){E=!0;try{(function(F){var D=F.callback,M=F.args;switch(M.length){case 0:D();break;case 1:D(M[0]);break;case 2:D(M[0],M[1]);break;case 3:D(M[0],M[1],M[2]);break;default:D.apply(a,M)}})(A)}finally{p(R),E=!1}}}}function C(R){R.source===c&&typeof R.data=="string"&&R.data.indexOf(y)===0&&k(+R.data.slice(y.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof er<"u"?er:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Fn);var ws=Fn.exports;const Or=Ln(ws),Vt=0,vs={content_country:"US",content_language:"en",theme:"DARK"};var Pn={exports:{}};const Es={},Ss=Object.freeze(Object.defineProperty({__proto__:null,default:Es},Symbol.toStringTag,{value:"Module"})),mn=ys(Ss);(function(n,f){var r=void 0,b=function(h){return r||(r=new Promise(function(s,c){var a=typeof h<"u"?h:{},g=a.onAbort;a.onAbort=function(t){c(new Error(t)),g&&g(t)},a.postRun=a.postRun||[],a.postRun.push(function(){s(a)}),n=void 0;var i;i||(i=typeof a<"u"?a:{});var T=typeof window=="object",y=typeof WorkerGlobalScope<"u",v=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";i.onRuntimeInitialized=function(){function t(B,et){switch(typeof et){case"boolean":vi(B,et?1:0);break;case"number":bi(B,et);break;case"string":yi(B,et,-1,-1);break;case"object":if(et===null)an(B);else if(et.length!=null){var dt=Qe(et,Ve);wi(B,dt,et.length,-1),Je(dt)}else tr(B,"Wrong API use : tried to return a value of an unknown type ("+et+").",-1);break;default:an(B)}}function e(B,et){for(var dt=[],mt=0;mt<B;mt+=1){var yt=Rt(et+4*mt,"i32"),Nt=hi(yt);if(Nt===1||Nt===2)yt=gi(yt);else if(Nt===3)yt=mi(yt);else if(Nt===4){Nt=yt,yt=pi(Nt),Nt=_i(Nt);for(var Jt=new Uint8Array(yt),Kt=0;Kt<yt;Kt+=1)Jt[Kt]=$[Nt+Kt];yt=Jt}else yt=null;dt.push(yt)}return dt}function l(B,et){this.Qa=B,this.db=et,this.Oa=1,this.lb=[]}function _(B,et){if(this.db=et,et=ft(B)+1,this.eb=Nr(et),this.eb===null)throw Error("Unable to allocate memory for the SQL string");kt(B,H,this.eb,et),this.kb=this.eb,this.Za=this.pb=null}function I(B){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),B!=null){var et=this.filename,dt="/",mt=et;if(dt&&(dt=typeof dt=="string"?dt:pr(dt),mt=et?P(dt+"/"+et):dt),et=Te(!0,!0),mt=Wn(mt,et),B){if(typeof B=="string"){dt=Array(B.length);for(var yt=0,Nt=B.length;yt<Nt;++yt)dt[yt]=B.charCodeAt(yt);B=dt}Ze(mt,et|146),dt=Ae(mt,577),Xr(dt,B,0,B.length,0),wr(dt),Ze(mt,et)}}this.handleError(ht(this.filename,j)),this.db=Rt(j,"i32"),ln(this.db),this.fb={},this.Sa={}}var j=fe(4),Z=i.cwrap,ht=Z("sqlite3_open","number",["string","number"]),Et=Z("sqlite3_close_v2","number",["number"]),wt=Z("sqlite3_exec","number",["number","string","number","number","number"]),Lt=Z("sqlite3_changes","number",["number"]),Ht=Z("sqlite3_prepare_v2","number",["number","string","number","number","number"]),tn=Z("sqlite3_sql","string",["number"]),Kn=Z("sqlite3_normalized_sql","string",["number"]),en=Z("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Vn=Z("sqlite3_bind_text","number",["number","number","number","number","number"]),rn=Z("sqlite3_bind_blob","number",["number","number","number","number","number"]),Qn=Z("sqlite3_bind_double","number",["number","number","number"]),Jn=Z("sqlite3_bind_int","number",["number","number","number"]),ti=Z("sqlite3_bind_parameter_index","number",["number","string"]),ei=Z("sqlite3_step","number",["number"]),ri=Z("sqlite3_errmsg","string",["number"]),ni=Z("sqlite3_column_count","number",["number"]),ii=Z("sqlite3_data_count","number",["number"]),si=Z("sqlite3_column_double","number",["number","number"]),nn=Z("sqlite3_column_text","string",["number","number"]),ai=Z("sqlite3_column_blob","number",["number","number"]),oi=Z("sqlite3_column_bytes","number",["number","number"]),li=Z("sqlite3_column_type","number",["number","number"]),ui=Z("sqlite3_column_name","string",["number","number"]),ci=Z("sqlite3_reset","number",["number"]),di=Z("sqlite3_clear_bindings","number",["number"]),fi=Z("sqlite3_finalize","number",["number"]),sn=Z("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),hi=Z("sqlite3_value_type","number",["number"]),pi=Z("sqlite3_value_bytes","number",["number"]),mi=Z("sqlite3_value_text","string",["number"]),_i=Z("sqlite3_value_blob","number",["number"]),gi=Z("sqlite3_value_double","number",["number"]),bi=Z("sqlite3_result_double","",["number","number"]),an=Z("sqlite3_result_null","",["number"]),yi=Z("sqlite3_result_text","",["number","string","number","number"]),wi=Z("sqlite3_result_blob","",["number","number","number","number"]),vi=Z("sqlite3_result_int","",["number","number"]),tr=Z("sqlite3_result_error","",["number","string","number"]),on=Z("sqlite3_aggregate_context","number",["number","number"]),ln=Z("RegisterExtensionFunctions","number",["number"]),un=Z("sqlite3_update_hook","number",["number","number","number"]);l.prototype.bind=function(B){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(B)?this.Cb(B):B!=null&&typeof B=="object"?this.Db(B):!0},l.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var B=ei(this.Qa);switch(B){case 100:return!0;case 101:return!1;default:throw this.db.handleError(B)}},l.prototype.wb=function(B){return B==null&&(B=this.Oa,this.Oa+=1),si(this.Qa,B)},l.prototype.Gb=function(B){if(B==null&&(B=this.Oa,this.Oa+=1),B=nn(this.Qa,B),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(B)},l.prototype.Hb=function(B){return B==null&&(B=this.Oa,this.Oa+=1),nn(this.Qa,B)},l.prototype.getBlob=function(B){B==null&&(B=this.Oa,this.Oa+=1);var et=oi(this.Qa,B);B=ai(this.Qa,B);for(var dt=new Uint8Array(et),mt=0;mt<et;mt+=1)dt[mt]=$[B+mt];return dt},l.prototype.get=function(B,et){et=et||{},B!=null&&this.bind(B)&&this.step(),B=[];for(var dt=ii(this.Qa),mt=0;mt<dt;mt+=1)switch(li(this.Qa,mt)){case 1:var yt=et.useBigInt?this.Gb(mt):this.wb(mt);B.push(yt);break;case 2:B.push(this.wb(mt));break;case 3:B.push(this.Hb(mt));break;case 4:B.push(this.getBlob(mt));break;default:B.push(null)}return B},l.prototype.getColumnNames=function(){for(var B=[],et=ni(this.Qa),dt=0;dt<et;dt+=1)B.push(ui(this.Qa,dt));return B},l.prototype.getAsObject=function(B,et){B=this.get(B,et),et=this.getColumnNames();for(var dt={},mt=0;mt<et.length;mt+=1)dt[et[mt]]=B[mt];return dt},l.prototype.getSQL=function(){return tn(this.Qa)},l.prototype.getNormalizedSQL=function(){return Kn(this.Qa)},l.prototype.run=function(B){return B!=null&&this.bind(B),this.step(),this.reset()},l.prototype.sb=function(B,et){et==null&&(et=this.Oa,this.Oa+=1),B=St(B);var dt=Qe(B,Ve);this.lb.push(dt),this.db.handleError(Vn(this.Qa,et,dt,B.length-1,0))},l.prototype.Bb=function(B,et){et==null&&(et=this.Oa,this.Oa+=1);var dt=Qe(B,Ve);this.lb.push(dt),this.db.handleError(rn(this.Qa,et,dt,B.length,0))},l.prototype.rb=function(B,et){et==null&&(et=this.Oa,this.Oa+=1),this.db.handleError((B===(B|0)?Jn:Qn)(this.Qa,et,B))},l.prototype.Eb=function(B){B==null&&(B=this.Oa,this.Oa+=1),rn(this.Qa,B,0,0,0)},l.prototype.tb=function(B,et){switch(et==null&&(et=this.Oa,this.Oa+=1),typeof B){case"string":this.sb(B,et);return;case"number":this.rb(B,et);return;case"bigint":this.sb(B.toString(),et);return;case"boolean":this.rb(B+0,et);return;case"object":if(B===null){this.Eb(et);return}if(B.length!=null){this.Bb(B,et);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+B+")."},l.prototype.Db=function(B){var et=this;return Object.keys(B).forEach(function(dt){var mt=ti(et.Qa,dt);mt!==0&&et.tb(B[dt],mt)}),!0},l.prototype.Cb=function(B){for(var et=0;et<B.length;et+=1)this.tb(B[et],et+1);return!0},l.prototype.reset=function(){return this.freemem(),di(this.Qa)===0&&ci(this.Qa)===0},l.prototype.freemem=function(){for(var B;(B=this.lb.pop())!==void 0;)Je(B)},l.prototype.free=function(){this.freemem();var B=fi(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,B},_.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var B=Pe(),et=fe(4);o(j),o(et);try{this.db.handleError(en(this.db.db,this.kb,-1,j,et)),this.kb=Rt(et,"i32");var dt=Rt(j,"i32");return dt===0?(this.mb(),{done:!0}):(this.Za=new l(dt,this.db),this.db.fb[dt]=this.Za,{value:this.Za,done:!1})}catch(mt){throw this.pb=x(this.kb),this.mb(),mt}finally{Fe(B)}},_.prototype.mb=function(){Je(this.eb),this.eb=null},_.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:x(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(_.prototype[Symbol.iterator]=function(){return this}),I.prototype.run=function(B,et){if(!this.db)throw"Database closed";if(et){B=this.prepare(B,et);try{B.step()}finally{B.free()}}else this.handleError(wt(this.db,B,0,0,j));return this},I.prototype.exec=function(B,et,dt){if(!this.db)throw"Database closed";var mt=Pe(),yt=null;try{var Nt=kr(B),Jt=fe(4);for(B=[];Rt(Nt,"i8")!==0;){o(j),o(Jt),this.handleError(en(this.db,Nt,-1,j,Jt));var Kt=Rt(j,"i32");if(Nt=Rt(Jt,"i32"),Kt!==0){var Zt=null;for(yt=new l(Kt,this),et!=null&&yt.bind(et);yt.step();)Zt===null&&(Zt={columns:yt.getColumnNames(),values:[]},B.push(Zt)),Zt.values.push(yt.get(null,dt));yt.free()}}return B}catch(te){throw yt&&yt.free(),te}finally{Fe(mt)}},I.prototype.each=function(B,et,dt,mt,yt){typeof et=="function"&&(mt=dt,dt=et,et=void 0),B=this.prepare(B,et);try{for(;B.step();)dt(B.getAsObject(null,yt))}finally{B.free()}if(typeof mt=="function")return mt()},I.prototype.prepare=function(B,et){if(o(j),this.handleError(Ht(this.db,B,-1,j,0)),B=Rt(j,"i32"),B===0)throw"Nothing to prepare";var dt=new l(B,this);return et!=null&&dt.bind(et),this.fb[B]=dt},I.prototype.iterateStatements=function(B){return new _(B,this)},I.prototype.export=function(){Object.values(this.fb).forEach(function(et){et.free()}),Object.values(this.Sa).forEach(de),this.Sa={},this.handleError(Et(this.db));var B=qn(this.filename);return this.handleError(ht(this.filename,j)),this.db=Rt(j,"i32"),ln(this.db),B},I.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(B){B.free()}),Object.values(this.Sa).forEach(de),this.Sa={},this.Ya&&(de(this.Ya),this.Ya=void 0),this.handleError(Et(this.db)),qr("/"+this.filename),this.db=null)},I.prototype.handleError=function(B){if(B===0)return null;throw B=ri(this.db),Error(B)},I.prototype.getRowsModified=function(){return Lt(this.db)},I.prototype.create_function=function(B,et){Object.prototype.hasOwnProperty.call(this.Sa,B)&&(de(this.Sa[B]),delete this.Sa[B]);var dt=Le(function(mt,yt,Nt){yt=e(yt,Nt);try{var Jt=et.apply(null,yt)}catch(Kt){tr(mt,Kt,-1);return}t(mt,Jt)},"viii");return this.Sa[B]=dt,this.handleError(sn(this.db,B,et.length,1,0,dt,0,0,0)),this},I.prototype.create_aggregate=function(B,et){var dt=et.init||function(){return null},mt=et.finalize||function(Zt){return Zt},yt=et.step;if(!yt)throw"An aggregate function must have a step function in "+B;var Nt={};Object.hasOwnProperty.call(this.Sa,B)&&(de(this.Sa[B]),delete this.Sa[B]),et=B+"__finalize",Object.hasOwnProperty.call(this.Sa,et)&&(de(this.Sa[et]),delete this.Sa[et]);var Jt=Le(function(Zt,te,xr){var Se=on(Zt,1);Object.hasOwnProperty.call(Nt,Se)||(Nt[Se]=dt()),te=e(te,xr),te=[Nt[Se]].concat(te);try{Nt[Se]=yt.apply(null,te)}catch(Ei){delete Nt[Se],tr(Zt,Ei,-1)}},"viii"),Kt=Le(function(Zt){var te=on(Zt,1);try{var xr=mt(Nt[te])}catch(Se){delete Nt[te],tr(Zt,Se,-1);return}t(Zt,xr),delete Nt[te]},"vi");return this.Sa[B]=Jt,this.Sa[et]=Kt,this.handleError(sn(this.db,B,yt.length-1,1,0,0,Jt,Kt,0)),this},I.prototype.updateHook=function(B){this.Ya&&(un(this.db,0,0),de(this.Ya),this.Ya=void 0),B&&(this.Ya=Le(function(et,dt,mt,yt,Nt){switch(dt){case 18:et="insert";break;case 23:et="update";break;case 9:et="delete";break;default:throw"unknown operationCode in updateHook callback: "+dt}if(mt=mt?W(H,mt):"",yt=yt?W(H,yt):"",Nt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";B(et,mt,yt,Number(Nt))},"viiiij"),un(this.db,this.Ya,0))},i.Database=I};var d={...i},E="./this.program",m=(t,e)=>{throw e},w="",p,k;if(v){var C=mn;w=__dirname+"/",k=t=>(t=ct(t)?new URL(t):t,C.readFileSync(t)),p=async t=>(t=ct(t)?new URL(t):t,C.readFileSync(t,void 0)),!i.thisProgram&&1<process.argv.length&&(E=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.exports=i,m=(t,e)=>{throw process.exitCode=t,e}}else(T||y)&&(y?w=self.location.href:typeof document<"u"&&document.currentScript&&(w=document.currentScript.src),w=w.startsWith("blob:")?"":w.slice(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1),y&&(k=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),p=async t=>{if(ct(t))return new Promise((l,_)=>{var I=new XMLHttpRequest;I.open("GET",t,!0),I.responseType="arraybuffer",I.onload=()=>{I.status==200||I.status==0&&I.response?l(I.response):_(I.status)},I.onerror=_,I.send(null)});var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw Error(e.status+" : "+e.url)});var R=i.print||console.log.bind(console),A=i.printErr||console.error.bind(console);Object.assign(i,d),d=null,i.thisProgram&&(E=i.thisProgram);var F=i.wasmBinary,D,M=!1,O,$,H,S,L,u,G,lt,X,ct=t=>t.startsWith("file://");function Y(){var t=D.buffer;i.HEAP8=$=new Int8Array(t),i.HEAP16=S=new Int16Array(t),i.HEAPU8=H=new Uint8Array(t),i.HEAPU16=new Uint16Array(t),i.HEAP32=L=new Int32Array(t),i.HEAPU32=u=new Uint32Array(t),i.HEAPF32=G=new Float32Array(t),i.HEAPF64=X=new Float64Array(t),i.HEAP64=lt=new BigInt64Array(t),i.HEAPU64=new BigUint64Array(t)}var ot=0,U=null;function z(t){var e;throw(e=i.onAbort)==null||e.call(i,t),t="Aborted("+t+")",A(t),M=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var nt;async function J(t){if(!F)try{var e=await p(t);return new Uint8Array(e)}catch{}if(t==nt&&F)t=new Uint8Array(F);else if(k)t=k(t);else throw"both async and sync fetching of the wasm failed";return t}async function Q(t,e){try{var l=await J(t);return await WebAssembly.instantiate(l,e)}catch(_){A(`failed to asynchronously prepare wasm: ${_}`),z(_)}}async function bt(t){var e=nt;if(!F&&typeof WebAssembly.instantiateStreaming=="function"&&!ct(e)&&!v)try{var l=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(l,t)}catch(_){A(`wasm streaming compile failed: ${_}`),A("falling back to ArrayBuffer instantiation")}return Q(e,t)}class Tt{constructor(e){he(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var _t=t=>{for(;0<t.length;)t.shift()(i)},vt=[],At=[],xt=()=>{var t=i.preRun.shift();At.unshift(t)};function Rt(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return $[t];case"i8":return $[t];case"i16":return S[t>>1];case"i32":return L[t>>2];case"i64":return lt[t>>3];case"float":return G[t>>2];case"double":return X[t>>3];case"*":return u[t>>2];default:z(`invalid type for getValue: ${e}`)}}var Bt=i.noExitRuntime||!0;function o(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":$[t]=0;break;case"i8":$[t]=0;break;case"i16":S[t>>1]=0;break;case"i32":L[t>>2]=0;break;case"i64":lt[t>>3]=BigInt(0);break;case"float":G[t>>2]=0;break;case"double":X[t>>3]=0;break;case"*":u[t>>2]=0;break;default:z(`invalid type for setValue: ${e}`)}}var K=typeof TextDecoder<"u"?new TextDecoder:void 0,W=(t,e=0,l=NaN)=>{var _=e+l;for(l=e;t[l]&&!(l>=_);)++l;if(16<l-e&&t.buffer&&K)return K.decode(t.subarray(e,l));for(_="";e<l;){var I=t[e++];if(I&128){var j=t[e++]&63;if((I&224)==192)_+=String.fromCharCode((I&31)<<6|j);else{var Z=t[e++]&63;I=(I&240)==224?(I&15)<<12|j<<6|Z:(I&7)<<18|j<<12|Z<<6|t[e++]&63,65536>I?_+=String.fromCharCode(I):(I-=65536,_+=String.fromCharCode(55296|I>>10,56320|I&1023))}}else _+=String.fromCharCode(I)}return _},x=(t,e)=>t?W(H,t,e):"",N=(t,e)=>{for(var l=0,_=t.length-1;0<=_;_--){var I=t[_];I==="."?t.splice(_,1):I===".."?(t.splice(_,1),l++):l&&(t.splice(_,1),l--)}if(e)for(;l;l--)t.unshift("..");return t},P=t=>{var e=t.charAt(0)==="/",l=t.slice(-1)==="/";return(t=N(t.split("/").filter(_=>!!_),!e).join("/"))||e||(t="."),t&&l&&(t+="/"),(e?"/":"")+t},tt=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.slice(0,-1)),t+e)},rt=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],q=()=>{if(v){var t=mn;return e=>t.randomFillSync(e)}return e=>crypto.getRandomValues(e)},it=t=>{(it=q())(t)},ut=(...t)=>{for(var e="",l=!1,_=t.length-1;-1<=_&&!l;_--){if(l=0<=_?t[_]:"/",typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";e=l+"/"+e,l=l.charAt(0)==="/"}return e=N(e.split("/").filter(I=>!!I),!l).join("/"),(l?"/":"")+e||"."},st=[],ft=t=>{for(var e=0,l=0;l<t.length;++l){var _=t.charCodeAt(l);127>=_?e++:2047>=_?e+=2:55296<=_&&57343>=_?(e+=4,++l):e+=3}return e},kt=(t,e,l,_)=>{if(!(0<_))return 0;var I=l;_=l+_-1;for(var j=0;j<t.length;++j){var Z=t.charCodeAt(j);if(55296<=Z&&57343>=Z){var ht=t.charCodeAt(++j);Z=65536+((Z&1023)<<10)|ht&1023}if(127>=Z){if(l>=_)break;e[l++]=Z}else{if(2047>=Z){if(l+1>=_)break;e[l++]=192|Z>>6}else{if(65535>=Z){if(l+2>=_)break;e[l++]=224|Z>>12}else{if(l+3>=_)break;e[l++]=240|Z>>18,e[l++]=128|Z>>12&63}e[l++]=128|Z>>6&63}e[l++]=128|Z&63}}return e[l]=0,l-I},St=(t,e)=>{var l=Array(ft(t)+1);return t=kt(t,l,0,l.length),e&&(l.length=t),l},jt=[];function oe(t,e){jt[t]={input:[],output:[],cb:e},br(t,Yt)}var Yt={open(t){var e=jt[t.node.rdev];if(!e)throw new at(43);t.tty=e,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,e,l,_){if(!t.tty||!t.tty.cb.xb)throw new at(60);for(var I=0,j=0;j<_;j++){try{var Z=t.tty.cb.xb(t.tty)}catch{throw new at(29)}if(Z===void 0&&I===0)throw new at(6);if(Z==null)break;I++,e[l+j]=Z}return I&&(t.node.atime=Date.now()),I},write(t,e,l,_){if(!t.tty||!t.tty.cb.qb)throw new at(60);try{for(var I=0;I<_;I++)t.tty.cb.qb(t.tty,e[l+I])}catch{throw new at(29)}return _&&(t.node.mtime=t.node.ctime=Date.now()),I}},be={xb(){t:{if(!st.length){var t=null;if(v){var e=Buffer.alloc(256),l=0,_=process.stdin.fd;try{l=C.readSync(_,e,0,256)}catch(I){if(I.toString().includes("EOF"))l=0;else throw I}0<l&&(t=e.slice(0,l).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break t}st=St(t,!0)}t=st.shift()}return t},qb(t,e){e===null||e===10?(R(W(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(R(W(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Dt={qb(t,e){e===null||e===10?(A(W(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(A(W(t.output)),t.output=[])}},gt={Wa:null,Xa(){return gt.createNode(null,"/",16895,0)},createNode(t,e,l,_){if((l&61440)===24576||(l&61440)===4096)throw new at(63);return gt.Wa||(gt.Wa={dir:{node:{Ta:gt.La.Ta,Ua:gt.La.Ua,lookup:gt.La.lookup,hb:gt.La.hb,rename:gt.La.rename,unlink:gt.La.unlink,rmdir:gt.La.rmdir,readdir:gt.La.readdir,symlink:gt.La.symlink},stream:{Va:gt.Ma.Va}},file:{node:{Ta:gt.La.Ta,Ua:gt.La.Ua},stream:{Va:gt.Ma.Va,read:gt.Ma.read,write:gt.Ma.write,ib:gt.Ma.ib,jb:gt.Ma.jb}},link:{node:{Ta:gt.La.Ta,Ua:gt.La.Ua,readlink:gt.La.readlink},stream:{}},ub:{node:{Ta:gt.La.Ta,Ua:gt.La.Ua},stream:jn}}),l=zr(t,e,l,_),qt(l.mode)?(l.La=gt.Wa.dir.node,l.Ma=gt.Wa.dir.stream,l.Na={}):(l.mode&61440)===32768?(l.La=gt.Wa.file.node,l.Ma=gt.Wa.file.stream,l.Ra=0,l.Na=null):(l.mode&61440)===40960?(l.La=gt.Wa.link.node,l.Ma=gt.Wa.link.stream):(l.mode&61440)===8192&&(l.La=gt.Wa.ub.node,l.Ma=gt.Wa.ub.stream),l.atime=l.mtime=l.ctime=Date.now(),t&&(t.Na[e]=l,t.atime=t.mtime=t.ctime=l.atime),l},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,qt(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.atime),e.mtime=new Date(t.mtime),e.ctime=new Date(t.ctime),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},Ua(t,e){for(var l of["mode","atime","mtime","ctime"])e[l]!=null&&(t[l]=e[l]);e.size!==void 0&&(e=e.size,t.Ra!=e&&(e==0?(t.Na=null,t.Ra=0):(l=t.Na,t.Na=new Uint8Array(e),l&&t.Na.set(l.subarray(0,Math.min(e,t.Ra))),t.Ra=e)))},lookup(){throw gt.vb},hb(t,e,l,_){return gt.createNode(t,e,l,_)},rename(t,e,l){try{var _=we(e,l)}catch{}if(_){if(qt(t.mode))for(var I in _.Na)throw new at(55);_r(_)}delete t.parent.Na[t.name],e.Na[l]=t,t.name=l,e.ctime=e.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,e){delete t.Na[e],t.ctime=t.mtime=Date.now()},rmdir(t,e){var l=we(t,e),_;for(_ in l.Na)throw new at(55);delete t.Na[e],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,e,l){return t=gt.createNode(t,e,41471,0),t.link=l,t},readlink(t){if((t.mode&61440)!==40960)throw new at(28);return t.link}},Ma:{read(t,e,l,_,I){var j=t.node.Na;if(I>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-I,_),8<t&&j.subarray)e.set(j.subarray(I,I+t),l);else for(_=0;_<t;_++)e[l+_]=j[I+_];return t},write(t,e,l,_,I,j){if(e.buffer===$.buffer&&(j=!1),!_)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(j)return t.Na=e.subarray(l,l+_),t.Ra=_;if(t.Ra===0&&I===0)return t.Na=e.slice(l,l+_),t.Ra=_;if(I+_<=t.Ra)return t.Na.set(e.subarray(l,l+_),I),_}j=I+_;var Z=t.Na?t.Na.length:0;if(Z>=j||(j=Math.max(j,Z*(1048576>Z?2:1.125)>>>0),Z!=0&&(j=Math.max(j,256)),Z=t.Na,t.Na=new Uint8Array(j),0<t.Ra&&t.Na.set(Z.subarray(0,t.Ra),0)),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(l,l+_),I);else for(j=0;j<_;j++)t.Na[I+j]=e[l+j];return t.Ra=Math.max(t.Ra,I+_),_},Va(t,e,l){if(l===1?e+=t.position:l===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new at(28);return e},ib(t,e,l,_,I){if((t.node.mode&61440)!==32768)throw new at(43);if(t=t.node.Na,I&2||!t||t.buffer!==$.buffer){I=!0,_=65536*Math.ceil(e/65536);var j=Qr(65536,_);if(j&&H.fill(0,j,j+_),_=j,!_)throw new at(48);t&&((0<l||l+e<t.length)&&(t.subarray?t=t.subarray(l,l+e):t=Array.prototype.slice.call(t,l,l+e)),$.set(t,_))}else I=!1,_=t.byteOffset;return{Kb:_,Ab:I}},jb(t,e,l,_){return gt.Ma.write(t,e,0,_,l,!1),0}}},Te=(t,e)=>{var l=0;return t&&(l|=365),e&&(l|=146),l},Gt=null,Re={},le=[],hr=1,re=null,Ie=!1,ue=!0,ye={},at=class{constructor(t){he(this,"name","ErrnoError");this.Pa=t}},Un=class{constructor(){he(this,"gb",{});he(this,"node",null)}get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},$n=class{constructor(t,e,l,_){he(this,"La",{});he(this,"Ma",{});he(this,"ab",null);t||(t=this),this.parent=t,this.Xa=t.Xa,this.id=hr++,this.name=e,this.mode=l,this.rdev=_,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function Xt(t,e={}){if(!t)throw new at(44);e.nb??(e.nb=!0),t.charAt(0)==="/"||(t="//"+t);var l=0;t:for(;40>l;l++){t=t.split("/").filter(ht=>!!ht);for(var _=Gt,I="/",j=0;j<t.length;j++){var Z=j===t.length-1;if(Z&&e.parent)break;if(t[j]!==".")if(t[j]==="..")I=tt(I),_=_.parent;else{I=P(I+"/"+t[j]);try{_=we(_,t[j])}catch(ht){if((ht==null?void 0:ht.Pa)===44&&Z&&e.Jb)return{path:I};throw ht}if(!_.ab||Z&&!e.nb||(_=_.ab.root),(_.mode&61440)===40960&&(!Z||e.$a)){if(!_.La.readlink)throw new at(52);_=_.La.readlink(_),_.charAt(0)==="/"||(_=tt(I)+"/"+_),t=_+"/"+t.slice(j+1).join("/");continue t}}}return{path:I,node:_}}throw new at(32)}function pr(t){for(var e;;){if(t===t.parent)return t=t.Xa.zb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function mr(t,e){for(var l=0,_=0;_<e.length;_++)l=(l<<5)-l+e.charCodeAt(_)|0;return(t+l>>>0)%re.length}function _r(t){var e=mr(t.parent.id,t.name);if(re[e]===t)re[e]=t.bb;else for(e=re[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function we(t,e){var l=qt(t.mode)?(l=Ne(t,"x"))?l:t.La.lookup?0:2:54;if(l)throw new at(l);for(l=re[mr(t.id,e)];l;l=l.bb){var _=l.name;if(l.parent.id===t.id&&_===e)return l}return t.La.lookup(t,e)}function zr(t,e,l,_){return t=new $n(t,e,l,_),e=mr(t.parent.id,t.name),t.bb=re[e],re[e]=t}function qt(t){return(t&61440)===16384}function Mr(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function Ne(t,e){if(ue)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function Ur(t,e){if(!qt(t.mode))return 54;try{return we(t,e),20}catch{}return Ne(t,"wx")}function $r(t,e,l){try{var _=we(t,e)}catch(I){return I.Pa}if(t=Ne(t,"wx"))return t;if(l){if(!qt(_.mode))return 54;if(_===_.parent||pr(_)==="/")return 10}else if(qt(_.mode))return 31;return 0}function qe(t){if(!t)throw new at(63);return t}function Wt(t){if(t=le[t],!t)throw new at(8);return t}function Br(t,e=-1){if(t=Object.assign(new Un,t),e==-1)t:{for(e=0;4096>=e;e++)if(!le[e])break t;throw new at(33)}return t.fd=e,le[e]=t}function Bn(t,e=-1){var l,_;return t=Br(t,e),(_=(l=t.Ma)==null?void 0:l.Rb)==null||_.call(l,t),t}function gr(t,e,l){var _=t==null?void 0:t.Ma.Ua;t=_?t:e,_??(_=e.La.Ua),qe(_),_(t,l)}var jn={open(t){var e,l;t.Ma=Re[t.node.rdev].Ma,(l=(e=t.Ma).open)==null||l.call(e,t)},Va(){throw new at(70)}};function br(t,e){Re[t]={Ma:e}}function jr(t,e){var l=e==="/";if(l&&Gt)throw new at(10);if(!l&&e){var _=Xt(e,{nb:!1});if(e=_.path,_=_.node,_.ab)throw new at(10);if(!qt(_.mode))throw new at(54)}e={type:t,Wb:{},zb:e,Ib:[]},t=t.Xa(e),t.Xa=e,e.root=t,l?Gt=t:_&&(_.ab=e,_.Xa&&_.Xa.Ib.push(e))}function He(t,e,l){var _=Xt(t,{parent:!0}).node;if(t=rt(t),!t)throw new at(28);if(t==="."||t==="..")throw new at(20);var I=Ur(_,t);if(I)throw new at(I);if(!_.La.hb)throw new at(63);return _.La.hb(_,t,e,l)}function Wn(t,e=438){return He(t,e&4095|32768,0)}function ne(t,e=511){return He(t,e&1023|16384,0)}function Ge(t,e,l){typeof l>"u"&&(l=e,e=438),He(t,e|8192,l)}function yr(t,e){if(!ut(t))throw new at(44);var l=Xt(e,{parent:!0}).node;if(!l)throw new at(44);e=rt(e);var _=Ur(l,e);if(_)throw new at(_);if(!l.La.symlink)throw new at(63);l.La.symlink(l,e,t)}function Wr(t){var e=Xt(t,{parent:!0}).node;t=rt(t);var l=we(e,t),_=$r(e,t,!0);if(_)throw new at(_);if(!e.La.rmdir)throw new at(63);if(l.ab)throw new at(10);e.La.rmdir(e,t),_r(l)}function qr(t){var e=Xt(t,{parent:!0}).node;if(!e)throw new at(44);t=rt(t);var l=we(e,t),_=$r(e,t,!1);if(_)throw new at(_);if(!e.La.unlink)throw new at(63);if(l.ab)throw new at(10);e.La.unlink(e,t),_r(l)}function Oe(t,e){return t=Xt(t,{$a:!e}).node,qe(t.La.Ta)(t)}function Hr(t,e,l,_){gr(t,e,{mode:l&4095|e.mode&-4096,ctime:Date.now(),Fb:_})}function Ze(t,e){t=typeof t=="string"?Xt(t,{$a:!0}).node:t,Hr(null,t,e)}function Gr(t,e,l){if(qt(e.mode))throw new at(31);if((e.mode&61440)!==32768)throw new at(28);var _=Ne(e,"w");if(_)throw new at(_);gr(t,e,{size:l,timestamp:Date.now()})}function Ae(t,e,l=438){if(t==="")throw new at(44);if(typeof e=="string"){var _={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof _>"u")throw Error(`Unknown file open mode: ${e}`);e=_}if(l=e&64?l&4095|32768:0,typeof t=="object")_=t;else{var I=t.endsWith("/");t=Xt(t,{$a:!(e&131072),Jb:!0}),_=t.node,t=t.path}var j=!1;if(e&64)if(_){if(e&128)throw new at(20)}else{if(I)throw new at(31);_=He(t,l|511,0),j=!0}if(!_)throw new at(44);if((_.mode&61440)===8192&&(e&=-513),e&65536&&!qt(_.mode))throw new at(54);if(!j&&(I=_?(_.mode&61440)===40960?32:qt(_.mode)&&(Mr(e)!=="r"||e&576)?31:Ne(_,Mr(e)):44))throw new at(I);return e&512&&!j&&(I=_,I=typeof I=="string"?Xt(I,{$a:!0}).node:I,Gr(null,I,0)),e&=-131713,I=Br({node:_,path:pr(_),flags:e,seekable:!0,position:0,Ma:_.Ma,Lb:[],error:!1}),I.Ma.open&&I.Ma.open(I),j&&Ze(_,l&511),!i.logReadFiles||e&1||t in ye||(ye[t]=1),I}function wr(t){if(t.fd===null)throw new at(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{le[t.fd]=null}t.fd=null}function Zr(t,e,l){if(t.fd===null)throw new at(8);if(!t.seekable||!t.Ma.Va)throw new at(70);if(l!=0&&l!=1&&l!=2)throw new at(28);t.position=t.Ma.Va(t,e,l),t.Lb=[]}function Yr(t,e,l,_,I){if(0>_||0>I)throw new at(28);if(t.fd===null)throw new at(8);if((t.flags&2097155)===1)throw new at(8);if(qt(t.node.mode))throw new at(31);if(!t.Ma.read)throw new at(28);var j=typeof I<"u";if(!j)I=t.position;else if(!t.seekable)throw new at(70);return e=t.Ma.read(t,e,l,_,I),j||(t.position+=e),e}function Xr(t,e,l,_,I){if(0>_||0>I)throw new at(28);if(t.fd===null)throw new at(8);if(!(t.flags&2097155))throw new at(8);if(qt(t.node.mode))throw new at(31);if(!t.Ma.write)throw new at(28);t.seekable&&t.flags&1024&&Zr(t,0,2);var j=typeof I<"u";if(!j)I=t.position;else if(!t.seekable)throw new at(70);return e=t.Ma.write(t,e,l,_,I,void 0),j||(t.position+=e),e}function qn(t){var e,l=Ae(t,l||0);t=Oe(t).size;var _=new Uint8Array(t);return Yr(l,_,0,t,0),e=_,wr(l),e}function ce(t,e,l){t=P("/dev/"+t);var _=Te(!!e,!!l);ce.yb??(ce.yb=64);var I=ce.yb++<<8|0;br(I,{open(j){j.seekable=!1},close(){var j;(j=l==null?void 0:l.buffer)!=null&&j.length&&l(10)},read(j,Z,ht,Et){for(var wt=0,Lt=0;Lt<Et;Lt++){try{var Ht=e()}catch{throw new at(29)}if(Ht===void 0&&wt===0)throw new at(6);if(Ht==null)break;wt++,Z[ht+Lt]=Ht}return wt&&(j.node.atime=Date.now()),wt},write(j,Z,ht,Et){for(var wt=0;wt<Et;wt++)try{l(Z[ht+wt])}catch{throw new at(29)}return Et&&(j.node.mtime=j.node.ctime=Date.now()),wt}}),Ge(t,_,I)}var It={};function ve(t,e,l){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":Wt(t).path,e.length==0){if(!l)throw new at(44);return t}return t+"/"+e}function Ye(t,e){L[t>>2]=e.dev,L[t+4>>2]=e.mode,u[t+8>>2]=e.nlink,L[t+12>>2]=e.uid,L[t+16>>2]=e.gid,L[t+20>>2]=e.rdev,lt[t+24>>3]=BigInt(e.size),L[t+32>>2]=4096,L[t+36>>2]=e.blocks;var l=e.atime.getTime(),_=e.mtime.getTime(),I=e.ctime.getTime();return lt[t+40>>3]=BigInt(Math.floor(l/1e3)),u[t+48>>2]=l%1e3*1e6,lt[t+56>>3]=BigInt(Math.floor(_/1e3)),u[t+64>>2]=_%1e3*1e6,lt[t+72>>3]=BigInt(Math.floor(I/1e3)),u[t+80>>2]=I%1e3*1e6,lt[t+88>>3]=BigInt(e.ino),0}var Xe=void 0,Ke=()=>{var t=L[+Xe>>2];return Xe+=4,t},vr=0,Hn=[0,31,60,91,121,152,182,213,244,274,305,335],Gn=[0,31,59,90,120,151,181,212,243,273,304,334],De={},Kr=t=>{var e;O=t,Bt||0<vr||((e=i.onExit)==null||e.call(i,t),M=!0),m(t,new Tt(t))},Zn=t=>{if(!M)try{if(t(),!(Bt||0<vr))try{O=t=O,Kr(t)}catch(e){e instanceof Tt||e=="unwind"||m(1,e)}}catch(e){e instanceof Tt||e=="unwind"||m(1,e)}},Er={},Vr=()=>{if(!Sr){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"},e;for(e in Er)Er[e]===void 0?delete t[e]:t[e]=Er[e];var l=[];for(e in t)l.push(`${e}=${t[e]}`);Sr=l}return Sr},Sr,kr=t=>{var e=ft(t)+1,l=fe(e);return kt(t,H,l,e),l},Yn=(t,e,l,_)=>{var I={string:wt=>{var Lt=0;return wt!=null&&wt!==0&&(Lt=kr(wt)),Lt},array:wt=>{var Lt=fe(wt.length);return $.set(wt,Lt),Lt}};t=i["_"+t];var j=[],Z=0;if(_)for(var ht=0;ht<_.length;ht++){var Et=I[l[ht]];Et?(Z===0&&(Z=Pe()),j[ht]=Et(_[ht])):j[ht]=_[ht]}return l=t(...j),l=function(wt){return Z!==0&&Fe(Z),e==="string"?wt?W(H,wt):"":e==="boolean"?!!wt:wt}(l)},Ve=0,Qe=(t,e)=>(e=e==1?fe(t.length):Nr(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),H.set(t,e),e),Ee,Tr=[],ie,de=t=>{Ee.delete(ie.get(t)),ie.set(t,null),Tr.push(t)},Le=(t,e)=>{if(!Ee){Ee=new WeakMap;var l=ie.length;if(Ee)for(var _=0;_<0+l;_++){var I=ie.get(_);I&&Ee.set(I,_)}}if(l=Ee.get(t)||0)return l;if(Tr.length)l=Tr.pop();else{try{ie.grow(1)}catch(Et){throw Et instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Et}l=ie.length-1}try{ie.set(l,t)}catch(Et){if(!(Et instanceof TypeError))throw Et;if(typeof WebAssembly.Function=="function"){var j=WebAssembly.Function;_={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},I={parameters:[],results:e[0]=="v"?[]:[_[e[0]]]};for(var Z=1;Z<e.length;++Z)I.parameters.push(_[e[Z]]);e=new j(I,t)}else{_=[1],I=e.slice(0,1),e=e.slice(1),Z={i:127,p:127,j:126,f:125,d:124,e:111},_.push(96);var ht=e.length;128>ht?_.push(ht):_.push(ht%128|128,ht>>7);for(j of e)_.push(Z[j]);I=="v"?_.push(0):_.push(1,Z[I]),e=[0,97,115,109,1,0,0,0,1],j=_.length,128>j?e.push(j):e.push(j%128|128,j>>7),e.push(..._),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}ie.set(l,e)}return Ee.set(t,l),l};re=Array(4096),jr(gt,"/"),ne("/tmp"),ne("/home"),ne("/home/web_user"),function(){ne("/dev"),br(259,{read:()=>0,write:(_,I,j,Z)=>Z,Va:()=>0}),Ge("/dev/null",259),oe(1280,be),oe(1536,Dt),Ge("/dev/tty",1280),Ge("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,l=()=>(e===0&&(it(t),e=t.byteLength),t[--e]);ce("random",l),ce("urandom",l),ne("/dev/shm"),ne("/dev/shm/tmp")}(),function(){ne("/proc");var t=ne("/proc/self");ne("/proc/self/fd"),jr({Xa(){var e=zr(t,"fd",16895,73);return e.Ma={Va:gt.Ma.Va},e.La={lookup(l,_){l=+_;var I=Wt(l);return l={parent:null,Xa:{zb:"fake"},La:{readlink:()=>I.path},id:l+1},l.parent=l},readdir(){return Array.from(le.entries()).filter(([,l])=>l).map(([l])=>l.toString())}},e}},"/proc/self/fd")}(),gt.vb=new at(44),gt.vb.stack="<generic error, no stack>";var Xn={a:(t,e,l,_)=>z(`Assertion failed: ${t?W(H,t):""}, at: `+[e?e?W(H,e):"":"unknown filename",l,_?_?W(H,_):"":"unknown function"]),i:function(t,e){try{return t=t?W(H,t):"",Ze(t,e),0}catch(l){if(typeof It>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},L:function(t,e,l){try{if(e=e?W(H,e):"",e=ve(t,e),l&-8)return-28;var _=Xt(e,{$a:!0}).node;return _?(t="",l&4&&(t+="r"),l&2&&(t+="w"),l&1&&(t+="x"),t&&Ne(_,t)?-2:0):-44}catch(I){if(typeof It>"u"||I.name!=="ErrnoError")throw I;return-I.Pa}},j:function(t,e){try{var l=Wt(t);return Hr(l,l.node,e,!1),0}catch(_){if(typeof It>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},h:function(t){try{var e=Wt(t);return gr(e,e.node,{timestamp:Date.now(),Fb:!1}),0}catch(l){if(typeof It>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},b:function(t,e,l){Xe=l;try{var _=Wt(t);switch(e){case 0:var I=Ke();if(0>I)break;for(;le[I];)I++;return Bn(_,I).fd;case 1:case 2:return 0;case 3:return _.flags;case 4:return I=Ke(),_.flags|=I,0;case 12:return I=Ke(),S[I+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(j){if(typeof It>"u"||j.name!=="ErrnoError")throw j;return-j.Pa}},g:function(t,e){try{var l=Wt(t),_=l.node,I=l.Ma.Ta;t=I?l:_,I??(I=_.La.Ta),qe(I);var j=I(t);return Ye(e,j)}catch(Z){if(typeof It>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Pa}},H:function(t,e){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var l=Wt(t);if(0>e||!(l.flags&2097155))throw new at(28);return Gr(l,l.node,e),0}catch(_){if(typeof It>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},G:function(t,e){try{if(e===0)return-28;var l=ft("/")+1;return e<l?-68:(kt("/",H,t,e),l)}catch(_){if(typeof It>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},K:function(t,e){try{return t=t?W(H,t):"",Ye(e,Oe(t,!0))}catch(l){if(typeof It>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},C:function(t,e,l){try{return e=e?W(H,e):"",e=ve(t,e),ne(e,l),0}catch(_){if(typeof It>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},J:function(t,e,l,_){try{e=e?W(H,e):"";var I=_&256;return e=ve(t,e,_&4096),Ye(l,I?Oe(e,!0):Oe(e))}catch(j){if(typeof It>"u"||j.name!=="ErrnoError")throw j;return-j.Pa}},x:function(t,e,l,_){Xe=_;try{e=e?W(H,e):"",e=ve(t,e);var I=_?Ke():0;return Ae(e,l,I).fd}catch(j){if(typeof It>"u"||j.name!=="ErrnoError")throw j;return-j.Pa}},v:function(t,e,l,_){try{if(e=e?W(H,e):"",e=ve(t,e),0>=_)return-28;var I=Xt(e).node;if(!I)throw new at(44);if(!I.La.readlink)throw new at(28);var j=I.La.readlink(I),Z=Math.min(_,ft(j)),ht=$[l+Z];return kt(j,H,l,_+1),$[l+Z]=ht,Z}catch(Et){if(typeof It>"u"||Et.name!=="ErrnoError")throw Et;return-Et.Pa}},u:function(t){try{return t=t?W(H,t):"",Wr(t),0}catch(e){if(typeof It>"u"||e.name!=="ErrnoError")throw e;return-e.Pa}},f:function(t,e){try{return t=t?W(H,t):"",Ye(e,Oe(t))}catch(l){if(typeof It>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},r:function(t,e,l){try{return e=e?W(H,e):"",e=ve(t,e),l===0?qr(e):l===512?Wr(e):z("Invalid flags passed to unlinkat"),0}catch(_){if(typeof It>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},q:function(t,e,l){try{e=e?W(H,e):"",e=ve(t,e,!0);var _=Date.now(),I,j;if(l){var Z=u[l>>2]+4294967296*L[l+4>>2],ht=L[l+8>>2];ht==1073741823?I=_:ht==1073741822?I=null:I=1e3*Z+ht/1e6,l+=16,Z=u[l>>2]+4294967296*L[l+4>>2],ht=L[l+8>>2],ht==1073741823?j=_:ht==1073741822?j=null:j=1e3*Z+ht/1e6}else j=I=_;if((j??I)!==null){t=I;var Et=Xt(e,{$a:!0}).node;qe(Et.La.Ua)(Et,{atime:t,mtime:j})}return 0}catch(wt){if(typeof It>"u"||wt.name!=="ErrnoError")throw wt;return-wt.Pa}},m:()=>z(""),l:()=>{Bt=!1,vr=0},A:function(t,e){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),L[e>>2]=t.getSeconds(),L[e+4>>2]=t.getMinutes(),L[e+8>>2]=t.getHours(),L[e+12>>2]=t.getDate(),L[e+16>>2]=t.getMonth(),L[e+20>>2]=t.getFullYear()-1900,L[e+24>>2]=t.getDay();var l=t.getFullYear();L[e+28>>2]=(l%4!==0||l%100===0&&l%400!==0?Gn:Hn)[t.getMonth()]+t.getDate()-1|0,L[e+36>>2]=-(60*t.getTimezoneOffset()),l=new Date(t.getFullYear(),6,1).getTimezoneOffset();var _=new Date(t.getFullYear(),0,1).getTimezoneOffset();L[e+32>>2]=(l!=_&&t.getTimezoneOffset()==Math.min(_,l))|0},y:function(t,e,l,_,I,j,Z){I=-9007199254740992>I||9007199254740992<I?NaN:Number(I);try{if(isNaN(I))return 61;var ht=Wt(_);if(e&2&&!(l&2)&&(ht.flags&2097155)!==2)throw new at(2);if((ht.flags&2097155)===1)throw new at(2);if(!ht.Ma.ib)throw new at(43);if(!t)throw new at(28);var Et=ht.Ma.ib(ht,t,I,e,l),wt=Et.Kb;return L[j>>2]=Et.Ab,u[Z>>2]=wt,0}catch(Lt){if(typeof It>"u"||Lt.name!=="ErrnoError")throw Lt;return-Lt.Pa}},z:function(t,e,l,_,I,j){j=-9007199254740992>j||9007199254740992<j?NaN:Number(j);try{var Z=Wt(I);if(l&2){if(l=j,(Z.node.mode&61440)!==32768)throw new at(43);if(!(_&2)){var ht=H.slice(t,t+e);Z.Ma.jb&&Z.Ma.jb(Z,ht,l,e,_)}}}catch(Et){if(typeof It>"u"||Et.name!=="ErrnoError")throw Et;return-Et.Pa}},n:(t,e)=>{if(De[t]&&(clearTimeout(De[t].id),delete De[t]),!e)return 0;var l=setTimeout(()=>{delete De[t],Zn(()=>Jr(t,performance.now()))},e);return De[t]={id:l,Xb:e},0},B:(t,e,l,_)=>{var I=new Date().getFullYear(),j=new Date(I,0,1).getTimezoneOffset();I=new Date(I,6,1).getTimezoneOffset(),u[t>>2]=60*Math.max(j,I),L[e>>2]=+(j!=I),e=Z=>{var ht=Math.abs(Z);return`UTC${0<=Z?"-":"+"}${String(Math.floor(ht/60)).padStart(2,"0")}${String(ht%60).padStart(2,"0")}`},t=e(j),e=e(I),I<j?(kt(t,H,l,17),kt(e,H,_,17)):(kt(t,H,_,17),kt(e,H,l,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var e=H.length;if(t>>>=0,2147483648<t)return!1;for(var l=1;4>=l;l*=2){var _=e*(1+.2/l);_=Math.min(_,t+100663296);t:{_=(Math.min(2147483648,65536*Math.ceil(Math.max(t,_)/65536))-D.buffer.byteLength+65535)/65536|0;try{D.grow(_),Y();var I=1;break t}catch{}I=void 0}if(I)return!0}return!1},E:(t,e)=>{var l=0;return Vr().forEach((_,I)=>{var j=e+l;for(I=u[t+4*I>>2]=j,j=0;j<_.length;++j)$[I++]=_.charCodeAt(j);$[I]=0,l+=_.length+1}),0},F:(t,e)=>{var l=Vr();u[t>>2]=l.length;var _=0;return l.forEach(I=>_+=I.length+1),u[e>>2]=_,0},e:function(t){try{var e=Wt(t);return wr(e),0}catch(l){if(typeof It>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},p:function(t,e){try{var l=Wt(t);return $[e]=l.tty?2:qt(l.mode)?3:(l.mode&61440)===40960?7:4,S[e+2>>1]=0,lt[e+8>>3]=BigInt(0),lt[e+16>>3]=BigInt(0),0}catch(_){if(typeof It>"u"||_.name!=="ErrnoError")throw _;return _.Pa}},w:function(t,e,l,_){try{t:{var I=Wt(t);t=e;for(var j,Z=e=0;Z<l;Z++){var ht=u[t>>2],Et=u[t+4>>2];t+=8;var wt=Yr(I,$,ht,Et,j);if(0>wt){var Lt=-1;break t}if(e+=wt,wt<Et)break;typeof j<"u"&&(j+=wt)}Lt=e}return u[_>>2]=Lt,0}catch(Ht){if(typeof It>"u"||Ht.name!=="ErrnoError")throw Ht;return Ht.Pa}},D:function(t,e,l,_){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var I=Wt(t);return Zr(I,e,l),lt[_>>3]=BigInt(I.position),I.ob&&e===0&&l===0&&(I.ob=null),0}catch(j){if(typeof It>"u"||j.name!=="ErrnoError")throw j;return j.Pa}},I:function(t){var l;try{var e=Wt(t);return(l=e.Ma)!=null&&l.fsync?e.Ma.fsync(e):0}catch(_){if(typeof It>"u"||_.name!=="ErrnoError")throw _;return _.Pa}},t:function(t,e,l,_){try{t:{var I=Wt(t);t=e;for(var j,Z=e=0;Z<l;Z++){var ht=u[t>>2],Et=u[t+4>>2];t+=8;var wt=Xr(I,$,ht,Et,j);if(0>wt){var Lt=-1;break t}if(e+=wt,wt<Et)break;typeof j<"u"&&(j+=wt)}Lt=e}return u[_>>2]=Lt,0}catch(Ht){if(typeof It>"u"||Ht.name!=="ErrnoError")throw Ht;return Ht.Pa}},k:Kr},pt;(async function(){var l;function t(_){var I;return pt=_.exports,D=pt.M,Y(),ie=pt.O,ot--,(I=i.monitorRunDependencies)==null||I.call(i,ot),ot==0&&U&&(_=U,U=null,_()),pt}ot++,(l=i.monitorRunDependencies)==null||l.call(i,ot);var e={a:Xn};return i.instantiateWasm?new Promise(_=>{i.instantiateWasm(e,(I,j)=>{t(I),_(I.exports)})}):(nt??(nt=i.locateFile?i.locateFile("sql-wasm.wasm",w):w+"sql-wasm.wasm"),t((await bt(e)).instance))})(),i._sqlite3_free=t=>(i._sqlite3_free=pt.P)(t),i._sqlite3_value_text=t=>(i._sqlite3_value_text=pt.Q)(t),i._sqlite3_prepare_v2=(t,e,l,_,I)=>(i._sqlite3_prepare_v2=pt.R)(t,e,l,_,I),i._sqlite3_step=t=>(i._sqlite3_step=pt.S)(t),i._sqlite3_reset=t=>(i._sqlite3_reset=pt.T)(t),i._sqlite3_exec=(t,e,l,_,I)=>(i._sqlite3_exec=pt.U)(t,e,l,_,I),i._sqlite3_finalize=t=>(i._sqlite3_finalize=pt.V)(t),i._sqlite3_column_name=(t,e)=>(i._sqlite3_column_name=pt.W)(t,e),i._sqlite3_column_text=(t,e)=>(i._sqlite3_column_text=pt.X)(t,e),i._sqlite3_column_type=(t,e)=>(i._sqlite3_column_type=pt.Y)(t,e),i._sqlite3_errmsg=t=>(i._sqlite3_errmsg=pt.Z)(t),i._sqlite3_clear_bindings=t=>(i._sqlite3_clear_bindings=pt._)(t),i._sqlite3_value_blob=t=>(i._sqlite3_value_blob=pt.$)(t),i._sqlite3_value_bytes=t=>(i._sqlite3_value_bytes=pt.aa)(t),i._sqlite3_value_double=t=>(i._sqlite3_value_double=pt.ba)(t),i._sqlite3_value_int=t=>(i._sqlite3_value_int=pt.ca)(t),i._sqlite3_value_type=t=>(i._sqlite3_value_type=pt.da)(t),i._sqlite3_result_blob=(t,e,l,_)=>(i._sqlite3_result_blob=pt.ea)(t,e,l,_),i._sqlite3_result_double=(t,e)=>(i._sqlite3_result_double=pt.fa)(t,e),i._sqlite3_result_error=(t,e,l)=>(i._sqlite3_result_error=pt.ga)(t,e,l),i._sqlite3_result_int=(t,e)=>(i._sqlite3_result_int=pt.ha)(t,e),i._sqlite3_result_int64=(t,e)=>(i._sqlite3_result_int64=pt.ia)(t,e),i._sqlite3_result_null=t=>(i._sqlite3_result_null=pt.ja)(t),i._sqlite3_result_text=(t,e,l,_)=>(i._sqlite3_result_text=pt.ka)(t,e,l,_),i._sqlite3_aggregate_context=(t,e)=>(i._sqlite3_aggregate_context=pt.la)(t,e),i._sqlite3_column_count=t=>(i._sqlite3_column_count=pt.ma)(t),i._sqlite3_data_count=t=>(i._sqlite3_data_count=pt.na)(t),i._sqlite3_column_blob=(t,e)=>(i._sqlite3_column_blob=pt.oa)(t,e),i._sqlite3_column_bytes=(t,e)=>(i._sqlite3_column_bytes=pt.pa)(t,e),i._sqlite3_column_double=(t,e)=>(i._sqlite3_column_double=pt.qa)(t,e),i._sqlite3_bind_blob=(t,e,l,_,I)=>(i._sqlite3_bind_blob=pt.ra)(t,e,l,_,I),i._sqlite3_bind_double=(t,e,l)=>(i._sqlite3_bind_double=pt.sa)(t,e,l),i._sqlite3_bind_int=(t,e,l)=>(i._sqlite3_bind_int=pt.ta)(t,e,l),i._sqlite3_bind_text=(t,e,l,_,I)=>(i._sqlite3_bind_text=pt.ua)(t,e,l,_,I),i._sqlite3_bind_parameter_index=(t,e)=>(i._sqlite3_bind_parameter_index=pt.va)(t,e),i._sqlite3_sql=t=>(i._sqlite3_sql=pt.wa)(t),i._sqlite3_normalized_sql=t=>(i._sqlite3_normalized_sql=pt.xa)(t),i._sqlite3_changes=t=>(i._sqlite3_changes=pt.ya)(t),i._sqlite3_close_v2=t=>(i._sqlite3_close_v2=pt.za)(t),i._sqlite3_create_function_v2=(t,e,l,_,I,j,Z,ht,Et)=>(i._sqlite3_create_function_v2=pt.Aa)(t,e,l,_,I,j,Z,ht,Et),i._sqlite3_update_hook=(t,e,l)=>(i._sqlite3_update_hook=pt.Ba)(t,e,l),i._sqlite3_open=(t,e)=>(i._sqlite3_open=pt.Ca)(t,e);var Nr=i._malloc=t=>(Nr=i._malloc=pt.Da)(t),Je=i._free=t=>(Je=i._free=pt.Ea)(t);i._RegisterExtensionFunctions=t=>(i._RegisterExtensionFunctions=pt.Fa)(t);var Qr=(t,e)=>(Qr=pt.Ga)(t,e),Jr=(t,e)=>(Jr=pt.Ha)(t,e),Fe=t=>(Fe=pt.Ia)(t),fe=t=>(fe=pt.Ja)(t),Pe=()=>(Pe=pt.Ka)();i.stackSave=()=>Pe(),i.stackRestore=t=>Fe(t),i.stackAlloc=t=>fe(t),i.cwrap=(t,e,l,_)=>{var I=!l||l.every(j=>j==="number"||j==="boolean");return e!=="string"&&I&&!_?i["_"+t]:(...j)=>Yn(t,e,l,j)},i.addFunction=Le,i.removeFunction=de,i.UTF8ToString=x,i.ALLOC_NORMAL=Ve,i.allocate=Qe,i.allocateUTF8OnStack=kr;function Ar(){function t(){var I;if(i.calledRun=!0,!M){if(!i.noFSInit&&!Ie){var e,l;Ie=!0,_??(_=i.stdin),e??(e=i.stdout),l??(l=i.stderr),_?ce("stdin",_):yr("/dev/tty","/dev/stdin"),e?ce("stdout",null,e):yr("/dev/tty","/dev/stdout"),l?ce("stderr",null,l):yr("/dev/tty1","/dev/stderr"),Ae("/dev/stdin",0),Ae("/dev/stdout",1),Ae("/dev/stderr",1)}if(pt.N(),ue=!1,(I=i.onRuntimeInitialized)==null||I.call(i),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var _=i.postRun.shift();vt.unshift(_)}_t(vt)}}if(0<ot)U=Ar;else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)xt();_t(At),0<ot?U=Ar:i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),t()},1)):t()}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return Ar(),a}),r)};n.exports=b,n.exports.default=b})(Pn);var ks=Pn.exports;const _n=Ln(ks),Ts="/npconv/assets/sql-wasm-C1U8OeUW.wasm";async function Ns(){try{return await _n({locateFile:()=>String(Ts)})}catch{try{return await _n()}catch(n){throw V("Failed to initialize sql.js: "+(n.message||n.toString()),"err"),n}}}function As(n){V("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const f=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];n.run("BEGIN TRANSACTION");try{for(const r of f)n.run(r);n.run("COMMIT"),V("Schema created.","schema")}catch(r){try{n.run("ROLLBACK")}catch{}throw V("Failed to create schema: "+(r.message||r.toString()),"err"),r}}function xs(n){try{const f=n.exec("PRAGMA foreign_key_list('stream_state')"),r=n.exec("PRAGMA table_info('stream_state')");let b=!1;f&&f.length>0&&f[0].values&&f[0].values.length>0&&(b=!0);let h=!1;if(r&&r.length>0&&r[0].values.length>=2){const s=r[0].values,c=s.map(g=>g[1]),a=s.map(g=>g[5]);c[0]==="progress_time"&&c[1]==="stream_id"&&a[0]===0&&a[1]===1&&(h=!0)}if(!b||!h){V("Patching stream_state schema to Room-compatible definition...","schema"),n.run("BEGIN TRANSACTION");const s=n.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(s&&s.length>0&&s[0].values.length>0){n.run("ALTER TABLE stream_state RENAME TO stream_state_old"),n.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{n.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(c){V("Note: could not copy old stream_state rows: "+(c.message||c.toString()),"warn")}n.run("DROP TABLE stream_state_old")}else n.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");n.run("COMMIT"),V("stream_state schema patched.","schema")}else V("stream_state schema OK.","schema")}catch(f){V("Failed to ensure stream_state schema: "+(f.message||f.toString()),"err")}}function Dr(n){let f="";try{const r=n.exec("PRAGMA table_info('stream_state')")||[],b=n.exec("PRAGMA foreign_key_list('stream_state')")||[],h=n.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];f+=`PRAGMA table_info("stream_state"):
`,r.length>0&&(f+=JSON.stringify(r[0],null,2)+`
`),f+=`
PRAGMA foreign_key_list("stream_state"):
`,b.length>0&&(f+=JSON.stringify(b[0],null,2)+`
`),f+=`
CREATE statement:
`,h.length>0&&h[0].values&&h[0].values.length>0&&(f+=h[0].values[0][0]+`
`)}catch(r){f+="Failed to collect stream_state debug info: "+(r.message||r.toString())+`
`}return f}function zn(){const n=new Date,f=r=>String(r).padStart(2,"0");return`${n.getFullYear()}-${f(n.getMonth()+1)}-${f(n.getDate())}-${f(n.getHours())}-${f(n.getMinutes())}-${f(n.getSeconds())}`}function Pr(n,f,r=null){let b=f;r&&(f.endsWith(".zip")?b=f.replace(".zip",`-${r}.zip`):f.endsWith(".json")&&(b=f.replace(".json",`-${r}.json`)));const h=URL.createObjectURL(n),s=document.createElement("a");s.href=h,s.download=b,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(h)}function Ue(n){if(!n)return"";const f=String(n);let r=f.match(/[?&]v=([^&]+)/);return r&&r[1]||(r=f.match(/youtu\.be\/([^?&/]+)/),r&&r[1])||(r=f.match(/\/shorts\/([^?&/]+)/),r&&r[1])||(r=f.match(/\/embed\/([^?&/]+)/),r&&r[1])?r[1]:""}const nr=Number.MAX_SAFE_INTEGER;function pe(n){const f=Number(n||0);return!Number.isFinite(f)||isNaN(f)?0:f>nr?nr:f<-nr?-nr:Math.trunc(f)}function gn(n){if(!n&&n!==0)return"1970-01-01";const f=String(n).trim();if(/^\d{4}-\d{2}-\d{2}/.test(f))return f.split("T")[0];const r=Number(f);if(!Number.isFinite(r))return"1970-01-01";const b=Math.abs(r);if(b>=1e7&&b<=99999999){const h=String(Math.trunc(r)),s=h.slice(0,4),c=h.slice(4,6),a=h.slice(6,8);return`${s}-${c}-${a}`}return b>1e12?new Date(r).toISOString().split("T")[0]:b>=1e9?new Date(r*1e3).toISOString().split("T")[0]:new Date(r).toISOString().split("T")[0]}function bn(n){if(n==null)return 0;if(typeof n=="number")return n>1e12?Math.floor(n):Math.floor(n*1e3);const f=String(n).trim();if(!f)return 0;const r=Date.parse(f);if(!isNaN(r))return r;const b=Number(f);return Number.isFinite(b)?b>1e12?Math.floor(b):Math.floor(b*1e3):0}async function Cs(n,f,r,b,h){V("Starting conversion to NewPipe format...");let s,c=new Or,a="",g=null,i=null;const T=h||null;let y=!1;if(r==="merge"&&n){V("Loading existing NewPipe backup...");const p=await n.arrayBuffer(),k=await Or.loadAsync(p),C=k.file("newpipe.db");if(C){const F=await C.async("uint8array");s=new b.Database(F),V("Database loaded. Running integrity check...");const D=s.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");D&&D[0]&&D[0].values&&V(`Existing NewPipe database contains: ${D[0].values.flat().join(", ")} tables.`,"schema");try{xs(s),a=Dr(s)}catch(M){V("Warning: failed to ensure stream_state schema: "+(M.message||M.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const R=k.file("preferences.json");R&&(g=await R.async("string"));const A=k.file("newpipe.settings");A&&(i=await A.async("blob"))}else V("Creating new NewPipe database..."),s=new b.Database,As(s),a=Dr(s);V("Parsing LibreTube JSON...");const v=await f.text(),d=JSON.parse(v);s.run("BEGIN TRANSACTION");try{V("Processing Subscriptions..."),r==="merge"&&s.run(`DELETE FROM subscriptions WHERE service_id = ${Vt}`);let p=0;if(d.subscriptions){const k=s.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");d.subscriptions.forEach(C=>{try{const R=C.url||`https://www.youtube.com/channel/${C.channelId}`,A=C.name||"Unknown",F=C.avatar||C.avatarUrl||null;if(!R.includes("youtube.com")&&!R.includes("youtu.be")){V(`Dropped non-YouTube subscription: ${A} (${R})`,"warn");return}k.run([Vt,R,A,F,0,"",0]),p++}catch(R){V(`ERROR inserting subscription ${C.name}: ${R.message||R.toString()}`,"err")}}),k.free()}V(`Inserted ${p} subscriptions.`)}catch(p){throw V(`FATAL ERROR during Subscriptions phase: ${p.message||p.toString()}`,"err"),p}try{V("Processing Playlists..."),r==="merge"&&(T==="only_libretube"?(s.run("DELETE FROM playlist_stream_join"),s.run("DELETE FROM playlists"),s.run("DELETE FROM remote_playlists"),V("Cleared existing playlists; will import only LibreTube playlists.")):T==="only_newpipe"?(y=!0,V("Preserving existing NewPipe playlists; skipping import from LibreTube.")):V(`Merging playlists with behavior: ${T||"default (LibreTube precedence)"}`));let p=0;if(d.localPlaylists&&!y){const k=s.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),C=s.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),R=s.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)"),A=d.localPlaylists;for(const F of A){const D=F.playlist.name||"Untitled";try{const M=s.prepare("SELECT uid FROM playlists WHERE name = ?");M.bind([D]);const O=[];for(;M.step();)O.push(M.getAsObject());if(M.free(),O.length>0){const L=O[0].uid;if(T==="merge_lt_precedence")try{const u=s.prepare("DELETE FROM playlist_stream_join WHERE playlist_id = ?");u.bind([L]),u.step(),u.free();const G=s.prepare("DELETE FROM playlists WHERE uid = ?");G.bind([L]),G.step(),G.free(),V(`Replaced existing local playlist: ${D}`,"schema")}catch(u){V(`WARN: failed to replace playlist ${D}: ${u.message||u.toString()}`,"warn")}else{V(`Skipping duplicate local playlist: ${D}`,"warn");continue}}C.run([D,0,-1,p]);const H=s.exec("SELECT last_insert_rowid()")[0].values[0][0];let S=0;for(const L of F.videos){const u=L.videoId||(L.url?Ue(L.url):null);if(!u){V(`Skipped video in playlist ${D} due to missing videoId.`,"warn");continue}const G=`https://www.youtube.com/watch?v=${u}`;try{const lt=L.title||"Unknown",X=L.uploader||"Unknown",ct=L.duration||0,Y=L.uploadDate?new Date(L.uploadDate).getTime()/1e3:null,ot=L.thumbnailUrl||null;k.run([Vt,G,lt,"VIDEO_STREAM",ct,X,Y,ot]);const U=s.prepare("SELECT uid FROM streams WHERE service_id = ? AND url = ?");U.bind([Vt,G]);let z=null;if(U.step()&&(z=U.getAsObject().uid),U.free(),z!==null){const nt=S;if(R.run([H,z,S++]),nt===0)try{const J=s.prepare("UPDATE playlists SET thumbnail_stream_id = ? WHERE uid = ?");J.bind([z,H]),J.step(),J.free()}catch(J){V(`WARN: failed to set playlist thumbnail for ${D}: ${J.message||J.toString()}`,"warn")}}else V(`Warning: Could not find/insert stream for video ${lt}`,"warn")}catch(lt){V(`ERROR processing video "${L.title}" in playlist "${D}": ${lt.message||lt.toString()}`,"err")}}p++}catch(M){throw V(`FATAL ERROR processing playlist "${D}": ${M.message||M.toString()}`,"err"),M}}k.free(),C.free(),R.free()}V(`Processed ${p} local playlists.`)}catch(p){throw V(`FATAL ERROR during Local Playlists phase: ${p.message||p.toString()}`,"err"),p}try{V("Processing Remote Playlist Bookmarks...");let p=0;if(d.playlistBookmarks&&!y){const k=s.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)"),C=d.playlistBookmarks;for(const R of C)try{const A=R.url||(R.playlistId?`https://www.youtube.com/playlist?list=${R.playlistId}`:null);if(!A||!A.includes("youtube.com")&&!A.includes("youtu.be")){V(`Dropped non-YouTube remote playlist: ${R.playlistName||"Untitled"}`,"warn");continue}const F=R.playlistName||R.name||"Untitled",D=R.thumbnailUrl||null,M=R.uploader||"Unknown",O=typeof R.videos=="number"?R.videos:0;try{const $=s.prepare("SELECT uid FROM remote_playlists WHERE url = ? OR name = ?");$.bind([A,F]);const H=[];for(;$.step();)H.push($.getAsObject());if($.free(),H.length>0){const S=H[0].uid;if(T==="merge_np_precedence")continue;if(T==="merge_lt_precedence"){const L=s.prepare("DELETE FROM remote_playlists WHERE uid = ?");L.bind([S]),L.step(),L.free()}}}catch{}k.run([Vt,F,A,D,M,p++,O])}catch(A){V(`ERROR inserting remote playlist ${R.playlistName||"Untitled"}: ${A.message||A.toString()}`,"err")}k.free()}V(`Processed ${p} remote playlist bookmarks.`)}catch(p){throw V(`FATAL ERROR during Remote Playlists phase: ${p.message||p.toString()}`,"err"),p}try{V("Processing Watch History...");let p=0,k=0,C=0;const R=d.history||d.watchHistory||d.watch_history||d.watch_history_items||[],A=new Map;if(d.watchPositions&&Array.isArray(d.watchPositions)){const F=d.watchPositions;for(const D of F)if(D&&D.videoId){const M=Number(D.position||0);A.set(String(D.videoId),M)}}if(R&&R.length>0){const F=s.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),D=s.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),M=s.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const O of R)try{const $=O.videoId||O.videoIdStr||O.id||(O.url?Ue(O.url):"")||"";if(!$)continue;const H=`https://www.youtube.com/watch?v=${$}`,S=O.title||O.name||"Unknown",L=O.uploader||O.uploaderName||"Unknown",u=O.duration||O.length||0,G=O.uploadDate?isNaN(Number(O.uploadDate))?Math.floor(new Date(O.uploadDate).getTime()/1e3):Math.floor(Number(O.uploadDate)):null,lt=O.thumbnailUrl||O.thumbnail||null;let X=0;const ct=A.get($),Y="9223372036854775807";if(ct!=null)String(ct)===Y?X=0:X=Math.floor(Number(ct)||0);else{const Q=O.currentTime||O.position||O.progress||0;X=Math.floor(Number(Q||0)*1e3)}let ot=O.accessDate||O.accessedAt||O.lastWatched||O.timestamp||O.date||O.time,U;if(!ot)U=Date.now();else if(typeof ot=="number")U=ot>1e12?Math.floor(ot):Math.floor(ot*1e3);else{const Q=Date.parse(String(ot));U=isNaN(Q)?Date.now():Q}const z=Number(O.repeatCount||O.watchCount||O.playCount||O.repeat_count||1);F.run([Vt,H,S,"VIDEO_STREAM",u,L,G,lt]);const nt=s.prepare("SELECT uid FROM streams WHERE service_id = ? AND url = ?");nt.bind([Vt,H]);let J=null;if(nt.step()&&(J=nt.getAsObject().uid),nt.free(),J!==null){try{D.run([X,J])}catch(Q){V(`WARN: failed to write stream_state for ${$}: ${Q.message||Q.toString()}`,"warn")}try{if(r==="merge"){const Q=U-1e3,bt=U+1e3,Tt=s.prepare("SELECT access_date, repeat_count FROM stream_history WHERE stream_id = ? AND access_date BETWEEN ? AND ?");Tt.bind([J,Q,bt]);const _t=[];for(;Tt.step();)_t.push(Tt.getAsObject());if(Tt.free(),_t.length>0){const vt=Number(_t[0].access_date),xt=(Number(_t[0].repeat_count)||0)+z,Rt=s.prepare("UPDATE stream_history SET repeat_count = ? WHERE stream_id = ? AND access_date = ?");Rt.bind([xt,J,vt]),Rt.step(),Rt.free(),C++}else M.run([J,U,z]),k++}else M.run([J,U,z]),k++}catch(Q){V(`WARN: failed to write stream_history for ${$}: ${Q.message||Q.toString()}`,"warn")}p++}}catch($){V(`ERROR processing history item: ${$.message||$.toString()}`,"warn")}F.free(),D.free(),M.free()}V(`Processed ${p} history items (added: ${k}, duplicates merged: ${C}).`)}catch(p){throw V(`FATAL ERROR during History phase: ${p.message||p.toString()}`,"err"),p}try{s.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),V("Inserted room_master_table identity.")}catch(p){V("Error inserting room_master_table: "+p.message,"warn")}try{V("Committing transaction..."),s.run("COMMIT")}catch(p){throw V(`FATAL ERROR on COMMIT: ${p.message||p.toString()}`,"err"),p}V("Exporting database...");const E=s.export();if(s.close(),c.file("newpipe.db",E),g?(c.file("preferences.json",g),V("Preserved existing preferences.json.")):(c.file("preferences.json",JSON.stringify(vs,null,2)),V("Created default preferences.json.")),i&&(c.file("newpipe.settings",i),V("Preserved existing newpipe.settings.")),c.file("stream_state_debug.txt",a||"No stream_state debug information collected."),V("Attached stream_state_debug.txt to zip for inspection.","schema"),a){const p=a.split(`
`).slice(0,12).join(`
`);V(`stream_state_debug preview:
`+p,"schema")}const m=await c.generateAsync({type:"blob"}),w=zn();Pr(m,"newpipe_converted.zip",w),V("Done! File downloaded.","info")}async function Rs(n,f,r,b,h,s){V("Starting conversion to LibreTube format...");let c={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[],watchPositions:[]};const a=h||null;let g=!1,i;if(r==="merge"&&f){V("Reading target LibreTube file...");const m=await f.text(),w=JSON.parse(m);c=w,i={playlistBookmarks:Array.isArray(w.playlistBookmarks)?JSON.parse(JSON.stringify(w.playlistBookmarks)):w.playlistBookmarks,localPlaylists:Array.isArray(w.localPlaylists)?JSON.parse(JSON.stringify(w.localPlaylists)):w.localPlaylists,otherPlaylistKeys:{}},Object.keys(w).forEach(p=>{if(p!=="playlistBookmarks"&&p!=="localPlaylists"&&/playlist/i.test(p))try{i.otherPlaylistKeys||(i.otherPlaylistKeys={}),i.otherPlaylistKeys[p]=JSON.parse(JSON.stringify(w[p]))}catch{i.otherPlaylistKeys||(i.otherPlaylistKeys={}),i.otherPlaylistKeys[p]=w[p]}}),a==="only_newpipe"?(c.subscriptions=[],c.playlistBookmarks=[],c.localPlaylists=[],V("Cleared target LibreTube playlists; will import only NewPipe playlists.")):a==="only_libretube"?(g=!0,V("Preserving existing LibreTube playlists; will skip importing NewPipe playlists.")):(c.subscriptions=c.subscriptions||[],c.playlistBookmarks=c.playlistBookmarks||[],c.localPlaylists=c.localPlaylists||[],V(`Merging playlists with behavior: ${a||"default (LibreTube precedence)"}`))}V("Reading NewPipe backup...");const T=await n.arrayBuffer(),v=(await Or.loadAsync(T)).file("newpipe.db");if(!v)throw new Error("NewPipe ZIP must contain newpipe.db");const d=await v.async("uint8array"),E=new b.Database(d);V("NewPipe database loaded.");try{try{const F=Dr(E);V(`Stream state debug (input NewPipe DB):
`+(F||"No stream_state debug info collected."),"schema")}catch(F){V("Failed to collect input stream_state debug: "+(F.message||F.toString()),"warn")}V("Extracting Subscriptions...");const m=E.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${Vt}`);m.length>0&&m[0].values.forEach(D=>{const M=String(D[0]);if(!M||!M.includes("youtube.com")&&!M.includes("youtu.be")){V(`Dropped non-YouTube subscription URL: ${D[1]}`,"warn");return}let O="";const $=M.match(/channel\/([\w-]+)/),H=M.match(/user\/([\w-]+)/);$?O=$[1]:H&&(O=H[1]),c.subscriptions.push({channelId:O,url:M,name:String(D[1]),avatar:D[2]?String(D[2]):void 0,verified:!1})}),V(`Extracted ${c.subscriptions.length} YouTube subscriptions.`),V("Extracting Remote Playlists...");const w=E.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${Vt}`);w.length>0&&!g&&w[0].values.forEach(D=>{const M=String(D[1]);if(!M||!M.includes("youtube.com")&&!M.includes("youtu.be")){V(`Dropped non-YouTube remote playlist URL: ${D[0]}`,"warn");return}const O=M.match(/[?&]list=([^&]+)/),$=O?O[1]:"";c.playlistBookmarks.push({playlistId:$,playlistName:String(D[0]),thumbnailUrl:D[3]?String(D[3]):void 0,uploader:D[2]?String(D[2]):void 0,uploaderUrl:"",videos:pe(D[4])})}),V(`Extracted ${c.playlistBookmarks.length} remote playlist bookmarks.`),V("Extracting Local Playlists...");const p=E.exec("SELECT uid, name FROM playlists");if(p.length>0&&!g)for(const F of p[0].values){const D=Number(F[0]),M=String(F[1]),O=[];let $=0;const H=E.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${D} AND s.service_id = ${Vt}
                    ORDER BY j.join_index ASC
                `);if(H.length>0&&H[0].values.forEach(S=>{const L=String(S[0]),u=Ue(L);if(!u){V(`Warning: Skipped stream in playlist "${M}" due to unparseable URL: ${L}`,"warn");return}O.push({id:$++,playlistId:pe(D),videoId:u,title:String(S[1]),uploadDate:gn(S[4]),uploader:String(S[3]),thumbnailUrl:S[5]?String(S[5]):void 0,duration:pe(S[2])})}),O.length>0||M){const S=c.localPlaylists.findIndex(L=>L.playlist&&L.playlist.name===M);if(S>=0)if(a==="merge_np_precedence")c.localPlaylists.splice(S,1);else continue;c.localPlaylists.push({playlist:{id:pe(D),name:M,thumbnailUrl:O.length>0?O[0].thumbnailUrl:""},videos:O})}}if(V(`Extracted ${c.localPlaylists.length} local playlists.`),r==="merge"&&h==="only_libretube"&&i)try{c.playlistBookmarks=i.playlistBookmarks,c.localPlaylists=i.localPlaylists,Object.keys(i.otherPlaylistKeys||{}).forEach(F=>{c[F]=i.otherPlaylistKeys[F]}),V("Restored original LibreTube playlist data (only_libretube).")}catch(F){V("Failed to restore preserved LibreTube playlists: "+(F.message||F.toString()),"warn")}if(c&&Array.isArray(c.watchPositions)&&(c.watchPositions=c.watchPositions.map(F=>F&&F.position!==void 0&&F.position!==null?{...F,position:pe(F.position)}:F)),s===void 0?!0:!!s)try{const F=E.exec(`SELECT s.url, s.title, s.duration, s.uploader, s.uploader_url, s.thumbnail_url, s.upload_date, sh.access_date, sh.repeat_count FROM stream_history sh JOIN streams s ON sh.stream_id = s.uid WHERE s.service_id = ${Vt}`)||[],D=E.exec(`SELECT s.url, ss.progress_time FROM stream_state ss JOIN streams s ON ss.stream_id = s.uid WHERE s.service_id = ${Vt}`)||[];c.watchHistory=c.watchHistory||[],c.watchPositions=c.watchPositions||[];const M=new Map;for(const O of c.watchPositions)O&&O.videoId&&M.set(String(O.videoId),pe(O.position));if(D.length>0){const O=D[0].values;for(const $ of O){const H=String($[0]),S=$[1]||0,L=Number(S),u=Ue(H);if(!u)continue;const G=M.get(u)||0,lt=pe(L);lt>G&&M.set(u,lt)}}if(c.watchPositions=Array.from(M.entries()).map(([O,$])=>({videoId:O,position:$})),F.length>0){const O=F[0].values,$=Array.isArray(c.watchHistory)?c.watchHistory.map(S=>({...S,accessDate:bn(S&&(S.accessDate||S.accessedAt||S.lastWatched||S.timestamp||S.date||S.time)||0)})):[],H=new Map;for(const S of $)S&&S.videoId&&H.set(String(S.videoId),S);for(const S of O){const L=String(S[0]),u=S[1]?String(S[1]):"",G=pe(S[2]),lt=S[3]?String(S[3]):"",X=S[4]?String(S[4]):"",ct=S[5]?String(S[5]):"",Y=S[6],ot=S[7],U=Ue(L);if(!U)continue;let z="";try{const Q=String(X).match(/channel\/([\w-]+)/),bt=String(X).match(/user\/([\w-]+)/);Q?z=Q[1]:bt?z=bt[1]:/^[UC][A-Za-z0-9_-]{20,}$/.test(X)&&(z=X)}catch{z=""}const nt=gn(Y);if(H.has(U))continue;const J=bn(ot);$.push({videoId:U,title:u,uploadDate:nt,uploader:lt,uploaderUrl:z,uploaderAvatar:"",thumbnailUrl:ct,duration:G,accessDate:J})}$.sort((S,L)=>Number(L&&L.accessDate?L.accessDate:0)-Number(S&&S.accessDate?S.accessDate:0)),c.watchHistory=$}}catch(F){V("Failed to import watch history from NewPipe DB: "+(F.message||F.toString()),"warn")}const C=JSON.stringify(c,null,2),R=new Blob([C],{type:"application/json"}),A=zn();Pr(R,"libretube_converted.json",A),V("Done! File downloaded.","info")}finally{E.close(),V("NewPipe database closed.","info")}}async function Mn(n,f){V("Parsing uHabits backup file...","info");const r=await n.arrayBuffer(),b=new f.Database(new Uint8Array(r)),h=new Map,s=new Map,c=[];try{const a=b.exec(`
			SELECT id, archived, color, description, freq_den, freq_num, highlight, 
			       name, position, reminder_hour, reminder_min, reminder_days, 
			       type, target_type, target_value, unit, question, uuid
			FROM Habits
		`);if(a.length>0){for(const i of a[0].values){if(i.length<18){V(`Skipping malformed habit row with ${i.length} columns`,"warn");continue}const T=Number(i[0]),y=String(i[7]??""),v=String(i[16]??""),d=Number(i[12]);if(!Number.isFinite(T)||!y){V("Skipping habit with invalid id or name","warn");continue}const E={id:T,archived:Number(i[1]),color:Number(i[2]),description:i[3]!==null?String(i[3]):void 0,freq_den:Number(i[4]),freq_num:Number(i[5]),highlight:Number(i[6]),name:y,position:Number(i[8]),reminder_hour:Number(i[9]),reminder_min:Number(i[10]),reminder_days:Number(i[11]),type:d,target_type:Number(i[13]),target_value:Number(i[14]),unit:String(i[15]??""),question:v,uuid:i[17]!==null?String(i[17]):void 0};h.set(E.id,E),E.type===0&&s.set(E.id,E)}V(`Loaded ${h.size} habits (${s.size} boolean)`,"info")}const g=b.exec("SELECT id, habit, timestamp, value, notes FROM Repetitions");if(g.length>0){for(const i of g[0].values){if(i.length<5){V(`Skipping malformed repetition row with ${i.length} columns`,"warn");continue}const T=Number(i[0]),y=Number(i[1]),v=Number(i[2]),d=Number(i[3]);if(!Number.isFinite(T)||!Number.isFinite(y)||!Number.isFinite(v)){V("Skipping repetition with invalid id/habit_id/timestamp","warn");continue}c.push({id:T,habit_id:y,timestamp:v,value:d,notes:i[4]!==null?String(i[4]):void 0})}V(`Loaded ${c.length} repetitions`,"info")}}catch(a){throw b.close(),a}return{db:b,allHabits:h,booleanHabits:s,repetitions:c}}function Is(n){const f=new Date(n);return f.setHours(0,0,0,0),f.getTime()}function Os(n){return n.export()}async function Ds(n,f,r,b){V("Starting STT → uHabits conversion","info");const h=await Rn(n);V(`Loaded ${h.recordTypes.size} activities, ${h.records.length} records`,"info");const{db:s,allHabits:c,booleanHabits:a,repetitions:g}=await Mn(f,b);V(`Loaded ${c.size} habits, ${g.length} repetitions`,"info");const i=new Set;for(const d of g)i.add(`${d.habit_id}:${d.timestamp}`);const T=[],y=[];for(const d of r){const E=h.recordTypes.get(d.sttTypeId),m=a.get(d.uhabitsHabitId);if(!E||!m){V("Skipping invalid mapping","warn");continue}const w=d.minDuration||0,p=In(h.records,w),k=Dn(p,d.sttTypeId);if(k.length===0)continue;const C=On(k);let R=0,A=0;for(const[F,D]of C){const M=Is(D[0].start_timestamp),O=`${d.uhabitsHabitId}:${M}`;if(i.has(O)){A++;continue}D.reduce((H,S)=>H+(S.end_timestamp-S.start_timestamp),0);let $="";if(d.copySttComments){const H=D.map(S=>S.comment).filter(S=>!!S&&S.trim().length>0);H.length>0&&($=[...new Set(H)].join("; "))}T.push({habitId:d.uhabitsHabitId,timestamp:M,notes:$}),i.add(O),R++}y.push({name:`"${E.emoji} ${E.name}" -> "${m.name}"`,newCount:R,skippedCount:A})}T.sort((d,E)=>d.timestamp-E.timestamp);for(const d of T)s.run(`
			INSERT INTO Repetitions (habit, timestamp, value, notes)
			VALUES (?, ?, ?, ?)
		`,[d.habitId,d.timestamp,2,d.notes]);for(const d of y)V(`${d.name}: +${d.newCount}${d.skippedCount>0?` (${d.skippedCount} skipped)`:""}`,"info");V(`Conversion complete: ${T.length} new repetitions added`,"info");const v=Os(s);return s.close(),new Blob([v],{type:"application/x-sqlite3"})}function Ls(n){const[f,r]=Ot(null),[b,h]=Ot(null),[s,c]=Ot(null),[a,g]=Ot(null);return{sttData:f,uhabitsData:b,sttFile:s,uhabitsFile:a,loadSttFile:async y=>{try{const v=await Rn(y);return r(v),c(y),V(`Loaded ${v.recordTypes.size} STT activity types`,"info"),!0}catch(v){return V(`Error loading STT file: ${v.message}`,"err"),r(null),c(null),!1}},loadUHabitsFile:async y=>{try{const v=b();v!=null&&v.db&&v.db.close();const d=await Mn(y,n);return h(d),g(y),V(`Loaded ${d.allHabits.size} habits (${d.booleanHabits.size} boolean)`,"info"),!0}catch(v){V(`Error loading uHabits file: ${v.message}`,"err");const d=b();return d!=null&&d.db&&d.db.close(),h(null),g(null),!1}}}}var Fs=Ut("<div id=global-options><label for=include-watch-history>Include watch history:</label><input type=checkbox id=include-watch-history>"),Ps=Ut("<div class=container><h1>npconv backup converter</h1><section id=main-file-area class=file-area>");const zs=n=>{const[f,r]=Ot("merge"),[b,h]=Ot(null),[s,c]=Ot(null),[a,g]=Ot(!0),[i,T]=Ot(!1),y=Ls(n.SQL);Sn(()=>{const A=y.uhabitsData();A!=null&&A.db&&A.db.close()});const v=()=>f()==="merge"||f()==="convert";let d="newpipe";const E=A=>{const F=A==="merge"||A==="convert"?"newpipe":"stt";d!==F&&(h(null),c(null)),d=F,r(A)},m={merge:{title:"NewPipe Backup (.zip)",hint:"Contains newpipe.db<br>click/drop file to upload",accept:".zip"},convert:{title:"NewPipe Backup (.zip)",hint:"Contains newpipe.db<br>click/drop file to upload",accept:".zip"},stt:{title:"Simple Time Tracker (.backup)",hint:"Upload your .backup file<br>click/drop file to upload",accept:".backup"}},w={merge:{title:"LibreTube Backup (.json)",hint:"JSON export file<br>click/drop file to upload",accept:".json"},convert:{title:"LibreTube Backup (.json)",hint:"JSON export file<br>click/drop file to upload",accept:".json"},stt:{title:"uHabits Backup (.db)",hint:"Upload your .db file<br>click/drop file to upload",accept:".db"}},p=async A=>{h(A),f()==="stt"&&A&&await y.loadSttFile(A)},k=async A=>{c(A),f()==="stt"&&A&&await y.loadUHabitsFile(A)},C=async(A,F)=>{const D=f(),M=b(),O=s();if(D==="merge"&&(!M||!O))return V("Merge mode requires BOTH files.","err");if(D==="convert"){if(A==="to_newpipe"&&!O)return V("Missing LibreTube source file.","err");if(A==="to_libretube"&&!M)return V("Missing NewPipe source file.","err")}try{T(!0),A==="to_newpipe"?await Cs(M,O,D,n.SQL,F):await Rs(M,O,D,n.SQL,F,a())}catch($){V(`FATAL ERROR: ${$.message||$.toString()||"An unknown error occurred"}`,"err"),$.stack?V(`Stack Trace: ${$.stack}`,"err"):V(`Error Object: ${$.toString()}`,"err"),console.error($)}finally{T(!1)}},R=async()=>{const A=y.sttFile(),F=y.uhabitsFile();if(!A||!F){V("Missing required files","err");return}const D=document.getElementById("mapping-list");if(!D){V("No mapping list found","err");return}const M=[],O=D.querySelectorAll(".mapping-item");for(let $=0;$<O.length;$++){const H=O[$],S=H.querySelector(".stt-activity-select"),L=H.querySelector(".uhabits-habit-select"),u=H.querySelector(".min-duration-input"),G=H.querySelector(".copy-stt-comments-checkbox"),lt=parseInt(S.value),X=parseInt(L.value),ct=u&&parseInt(u.value)||0,Y=G?G.checked:!1;lt&&X&&M.push({sttTypeId:lt,uhabitsHabitId:X,minDuration:ct,copySttComments:Y})}if(M.length===0){V("No valid mappings configured","err");return}try{T(!0),V("Starting conversion...","info");const $=await Ds(A,F,M,n.SQL);Pr($,"uhabits_with_stt.backup",null),V("Conversion complete! Download started.","info")}catch($){V(`Conversion failed: ${$.message}`,"err"),console.error($)}finally{T(!1)}};return(()=>{var A=Ps(),F=A.firstChild,D=F.nextSibling;return Ct(A,Ft(Qi,{mode:f,setMode:E}),D),Ct(A,Ft(ke,{get when(){return f()==="merge"},get children(){return Ft(rs,{onMerge:(M,O)=>C(M,O)})}}),D),Ct(A,Ft(ke,{get when(){return f()==="convert"},get children(){return Ft(is,{onConvert:M=>C(M)})}}),D),Ct(A,Ft(ke,{get when(){return f()==="stt"},get children(){return Ft(ms,{get disabled(){return i()},sttStore:y,onConvert:R})}}),D),Ct(A,Ft(ke,{get when(){return v()},get children(){var M=Fs(),O=M.firstChild,$=O.nextSibling;return $.addEventListener("change",H=>g(H.currentTarget.checked)),Pt(()=>$.checked=a()),M}}),D),Ct(D,Ft(pn,{id:"zone-left",mode:f,configs:m,onFileChange:p}),null),Ct(D,Ft(pn,{id:"zone-right",mode:f,configs:w,onFileChange:k}),null),Ct(A,Ft(bs,{}),null),A})()};let yn;async function Ms(){V("Initializing SQL.js...");try{yn=await Ns(),V("SQL.js ready.")}catch(f){V("Error loading SQL.js: "+(f.message||f.toString()),"err");return}const n=document.getElementById("app");n&&Mi(()=>Ft(zs,{SQL:yn}),n)}Ms();
//# sourceMappingURL=index-CaBb1yh9.js.map

(function(){const K=document.createElement("link").relList;if(K&&K.supports&&K.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))A(h);new MutationObserver(h=>{for(const l of h)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&A(s)}).observe(document,{childList:!0,subtree:!0});function p(h){const l={};return h.integrity&&(l.integrity=h.integrity),h.referrerPolicy&&(l.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?l.credentials="include":h.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function A(h){if(h.ep)return;h.ep=!0;const l=p(h);fetch(h.href,l)}})();const Ft="modulepreload",Pt=function(X){return"/npconv/"+X},Ct={},St=function(K,p,A){let h=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),r=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));h=Promise.allSettled(p.map(c=>{if(c=Pt(c),c in Ct)return;Ct[c]=!0;const b=c.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${v}`))return;const g=document.createElement("link");if(g.rel=b?"stylesheet":Ft,b||(g.as="script"),g.crossOrigin="",g.href=c,r&&g.setAttribute("nonce",r),document.head.appendChild(g),b)return new Promise((E,o)=>{g.addEventListener("load",E),g.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(s){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s}return h.then(s=>{for(const r of s||[])r.status==="rejected"&&l(r.reason);return K().catch(l)})};function $(X,K="info"){const p=document.getElementById("debug-console");if(!p)return;const A=document.createElement("div");A.textContent=`[${new Date().toLocaleTimeString()}] ${X}`,K==="err"?A.className="log-err":K==="warn"?A.className="log-warn":K==="schema"?A.className="log-schema":A.className="log-info",p.appendChild(A),p.scrollTop=p.scrollHeight}async function jt(){const X=(await St(async()=>{const{default:K}=await import("./sql-wasm-DRLDSTaD.js").then(p=>p.s);return{default:K}},[])).default||(await St(async()=>{const{default:K}=await import("./sql-wasm-DRLDSTaD.js").then(p=>p.s);return{default:K}},[])).default;try{const K=await St(()=>import("./sql-wasm-BB8hrvC5.js"),[]),p=K&&K.default||K;return await X({locateFile:()=>String(p)})}catch{return await X()}}function Mt(X){$("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const K=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];X.run("BEGIN TRANSACTION");try{for(const p of K)X.run(p);X.run("COMMIT"),$("Schema created.","schema")}catch(p){try{X.run("ROLLBACK")}catch{}throw $("Failed to create schema: "+(p.message||p.toString()),"err"),p}}function Gt(X){try{const K=X.exec("PRAGMA foreign_key_list('stream_state')"),p=X.exec("PRAGMA table_info('stream_state')");let A=!1;K&&K.length>0&&K[0].values&&K[0].values.length>0&&(A=!0);let h=!1;if(p&&p.length>0&&p[0].values.length>=2){const l=p[0].values,s=l.map(c=>c[1]),r=l.map(c=>c[5]);s[0]==="progress_time"&&s[1]==="stream_id"&&r[0]===0&&r[1]===1&&(h=!0)}if(!A||!h){$("Patching stream_state schema to Room-compatible definition...","schema"),X.run("BEGIN TRANSACTION");const l=X.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(l&&l.length>0&&l[0].values.length>0){X.run("ALTER TABLE stream_state RENAME TO stream_state_old"),X.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{X.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(s){$("Note: could not copy old stream_state rows: "+(s.message||s.toString()),"warn")}X.run("DROP TABLE stream_state_old")}else X.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");X.run("COMMIT"),$("stream_state schema patched.","schema")}else $("stream_state schema OK.","schema")}catch(K){$("Failed to ensure stream_state schema: "+(K.message||K.toString()),"err")}}const mt=0,Wt={content_country:"US",content_language:"en",theme:"DARK"};function At(){const X=new Date,K=p=>String(p).padStart(2,"0");return`${X.getFullYear()}-${K(X.getMonth()+1)}-${K(X.getDate())}-${K(X.getHours())}-${K(X.getMinutes())}-${K(X.getSeconds())}`}function Nt(X,K,p=null){let A=K;p&&(K.endsWith(".zip")?A=K.replace(".zip",`-${p}.zip`):K.endsWith(".json")&&(A=K.replace(".json",`-${p}.json`)));const h=URL.createObjectURL(X),l=document.createElement("a");l.href=h,l.download=A,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(h)}var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zt(X){return X&&X.__esModule&&Object.prototype.hasOwnProperty.call(X,"default")?X.default:X}function qt(X){if(X.__esModule)return X;var K=X.default;if(typeof K=="function"){var p=function A(){return this instanceof A?Reflect.construct(K,arguments,this.constructor):K.apply(this,arguments)};p.prototype=K.prototype}else p={};return Object.defineProperty(p,"__esModule",{value:!0}),Object.keys(X).forEach(function(A){var h=Object.getOwnPropertyDescriptor(X,A);Object.defineProperty(p,A,h.get?h:{enumerable:!0,get:function(){return X[A]}})}),p}function kt(X){throw new Error('Could not dynamically require "'+X+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(X,K){(function(p){X.exports=p()})(function(){return function p(A,h,l){function s(b,v){if(!h[b]){if(!A[b]){var g=typeof kt=="function"&&kt;if(!v&&g)return g(b,!0);if(r)return r(b,!0);var E=new Error("Cannot find module '"+b+"'");throw E.code="MODULE_NOT_FOUND",E}var o=h[b]={exports:{}};A[b][0].call(o.exports,function(u){var n=A[b][1][u];return s(n||u)},o,o.exports,p,A,h,l)}return h[b].exports}for(var r=typeof kt=="function"&&kt,c=0;c<l.length;c++)s(l[c]);return s}({1:[function(p,A,h){var l=p("./utils"),s=p("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(c){for(var b,v,g,E,o,u,n,a=[],i=0,f=c.length,m=f,k=l.getTypeOf(c)!=="string";i<c.length;)m=f-i,g=k?(b=c[i++],v=i<f?c[i++]:0,i<f?c[i++]:0):(b=c.charCodeAt(i++),v=i<f?c.charCodeAt(i++):0,i<f?c.charCodeAt(i++):0),E=b>>2,o=(3&b)<<4|v>>4,u=1<m?(15&v)<<2|g>>6:64,n=2<m?63&g:64,a.push(r.charAt(E)+r.charAt(o)+r.charAt(u)+r.charAt(n));return a.join("")},h.decode=function(c){var b,v,g,E,o,u,n=0,a=0,i="data:";if(c.substr(0,i.length)===i)throw new Error("Invalid base64 input, it looks like a data url.");var f,m=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===r.charAt(64)&&m--,c.charAt(c.length-2)===r.charAt(64)&&m--,m%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=s.uint8array?new Uint8Array(0|m):new Array(0|m);n<c.length;)b=r.indexOf(c.charAt(n++))<<2|(E=r.indexOf(c.charAt(n++)))>>4,v=(15&E)<<4|(o=r.indexOf(c.charAt(n++)))>>2,g=(3&o)<<6|(u=r.indexOf(c.charAt(n++))),f[a++]=b,o!==64&&(f[a++]=v),u!==64&&(f[a++]=g);return f}},{"./support":30,"./utils":32}],2:[function(p,A,h){var l=p("./external"),s=p("./stream/DataWorker"),r=p("./stream/Crc32Probe"),c=p("./stream/DataLengthProbe");function b(v,g,E,o,u){this.compressedSize=v,this.uncompressedSize=g,this.crc32=E,this.compression=o,this.compressedContent=u}b.prototype={getContentWorker:function(){var v=new s(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),g=this;return v.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new s(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(v,g,E){return v.pipe(new r).pipe(new c("uncompressedSize")).pipe(g.compressWorker(E)).pipe(new c("compressedSize")).withStreamInfo("compression",g)},A.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(p,A,h){var l=p("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},h.DEFLATE=p("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(p,A,h){var l=p("./utils"),s=function(){for(var r,c=[],b=0;b<256;b++){r=b;for(var v=0;v<8;v++)r=1&r?3988292384^r>>>1:r>>>1;c[b]=r}return c}();A.exports=function(r,c){return r!==void 0&&r.length?l.getTypeOf(r)!=="string"?function(b,v,g,E){var o=s,u=E+g;b^=-1;for(var n=E;n<u;n++)b=b>>>8^o[255&(b^v[n])];return-1^b}(0|c,r,r.length,0):function(b,v,g,E){var o=s,u=E+g;b^=-1;for(var n=E;n<u;n++)b=b>>>8^o[255&(b^v.charCodeAt(n))];return-1^b}(0|c,r,r.length,0):0}},{"./utils":32}],5:[function(p,A,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(p,A,h){var l=null;l=typeof Promise<"u"?Promise:p("lie"),A.exports={Promise:l}},{lie:37}],7:[function(p,A,h){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=p("pako"),r=p("./utils"),c=p("./stream/GenericWorker"),b=l?"uint8array":"array";function v(g,E){c.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=E,this.meta={}}h.magic="\b\0",r.inherits(v,c),v.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(b,g.data),!1)},v.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(E){g.push({data:E,meta:g.meta})}},h.compressWorker=function(g){return new v("Deflate",g)},h.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(p,A,h){function l(o,u){var n,a="";for(n=0;n<u;n++)a+=String.fromCharCode(255&o),o>>>=8;return a}function s(o,u,n,a,i,f){var m,k,w=o.file,D=o.compression,x=f!==b.utf8encode,U=r.transformTo("string",f(w.name)),O=r.transformTo("string",b.utf8encode(w.name)),j=w.comment,q=r.transformTo("string",f(j)),y=r.transformTo("string",b.utf8encode(j)),C=O.length!==w.name.length,e=y.length!==j.length,L="",Q="",F="",tt=w.dir,M=w.date,et={crc32:0,compressedSize:0,uncompressedSize:0};u&&!n||(et.crc32=o.crc32,et.compressedSize=o.compressedSize,et.uncompressedSize=o.uncompressedSize);var R=0;u&&(R|=8),x||!C&&!e||(R|=2048);var N=0,J=0;tt&&(N|=16),i==="UNIX"?(J=798,N|=function(Z,at){var ct=Z;return Z||(ct=at?16893:33204),(65535&ct)<<16}(w.unixPermissions,tt)):(J=20,N|=function(Z){return 63&(Z||0)}(w.dosPermissions)),m=M.getUTCHours(),m<<=6,m|=M.getUTCMinutes(),m<<=5,m|=M.getUTCSeconds()/2,k=M.getUTCFullYear()-1980,k<<=4,k|=M.getUTCMonth()+1,k<<=5,k|=M.getUTCDate(),C&&(Q=l(1,1)+l(v(U),4)+O,L+="up"+l(Q.length,2)+Q),e&&(F=l(1,1)+l(v(q),4)+y,L+="uc"+l(F.length,2)+F);var Y="";return Y+=`
\0`,Y+=l(R,2),Y+=D.magic,Y+=l(m,2),Y+=l(k,2),Y+=l(et.crc32,4),Y+=l(et.compressedSize,4),Y+=l(et.uncompressedSize,4),Y+=l(U.length,2),Y+=l(L.length,2),{fileRecord:g.LOCAL_FILE_HEADER+Y+U+L,dirRecord:g.CENTRAL_FILE_HEADER+l(J,2)+Y+l(q.length,2)+"\0\0\0\0"+l(N,4)+l(a,4)+U+L+q}}var r=p("../utils"),c=p("../stream/GenericWorker"),b=p("../utf8"),v=p("../crc32"),g=p("../signature");function E(o,u,n,a){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=u,this.zipPlatform=n,this.encodeFileName=a,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(E,c),E.prototype.push=function(o){var u=o.meta.percent||0,n=this.entriesCount,a=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,c.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:n?(u+100*(n-a-1))/n:100}}))},E.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var u=this.streamFiles&&!o.file.dir;if(u){var n=s(o,u,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(o){this.accumulate=!1;var u=this.streamFiles&&!o.file.dir,n=s(o,u,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),u)this.push({data:function(a){return g.DATA_DESCRIPTOR+l(a.crc32,4)+l(a.compressedSize,4)+l(a.uncompressedSize,4)}(o),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var o=this.bytesWritten,u=0;u<this.dirRecords.length;u++)this.push({data:this.dirRecords[u],meta:{percent:100}});var n=this.bytesWritten-o,a=function(i,f,m,k,w){var D=r.transformTo("string",w(k));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(i,2)+l(i,2)+l(f,4)+l(m,4)+l(D.length,2)+D}(this.dirRecords.length,n,o,this.zipComment,this.encodeFileName);this.push({data:a,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(o){this._sources.push(o);var u=this;return o.on("data",function(n){u.processChunk(n)}),o.on("end",function(){u.closedSource(u.previous.streamInfo),u._sources.length?u.prepareNextSource():u.end()}),o.on("error",function(n){u.error(n)}),this},E.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(o){var u=this._sources;if(!c.prototype.error.call(this,o))return!1;for(var n=0;n<u.length;n++)try{u[n].error(o)}catch{}return!0},E.prototype.lock=function(){c.prototype.lock.call(this);for(var o=this._sources,u=0;u<o.length;u++)o[u].lock()},A.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(p,A,h){var l=p("../compressions"),s=p("./ZipFileWorker");h.generateWorker=function(r,c,b){var v=new s(c.streamFiles,b,c.platform,c.encodeFileName),g=0;try{r.forEach(function(E,o){g++;var u=function(f,m){var k=f||m,w=l[k];if(!w)throw new Error(k+" is not a valid compression method !");return w}(o.options.compression,c.compression),n=o.options.compressionOptions||c.compressionOptions||{},a=o.dir,i=o.date;o._compressWorker(u,n).withStreamInfo("file",{name:E,dir:a,date:i,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(v)}),v.entriesCount=g}catch(E){v.error(E)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(p,A,h){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new l;for(var r in this)typeof this[r]!="function"&&(s[r]=this[r]);return s}}(l.prototype=p("./object")).loadAsync=p("./load"),l.support=p("./support"),l.defaults=p("./defaults"),l.version="3.10.1",l.loadAsync=function(s,r){return new l().loadAsync(s,r)},l.external=p("./external"),A.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(p,A,h){var l=p("./utils"),s=p("./external"),r=p("./utf8"),c=p("./zipEntries"),b=p("./stream/Crc32Probe"),v=p("./nodejsUtils");function g(E){return new s.Promise(function(o,u){var n=E.decompressed.getContentWorker().pipe(new b);n.on("error",function(a){u(a)}).on("end",function(){n.streamInfo.crc32!==E.decompressed.crc32?u(new Error("Corrupted zip : CRC32 mismatch")):o()}).resume()})}A.exports=function(E,o){var u=this;return o=l.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),v.isNode&&v.isStream(E)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",E,!0,o.optimizedBinaryString,o.base64).then(function(n){var a=new c(o);return a.load(n),a}).then(function(n){var a=[s.Promise.resolve(n)],i=n.files;if(o.checkCRC32)for(var f=0;f<i.length;f++)a.push(g(i[f]));return s.Promise.all(a)}).then(function(n){for(var a=n.shift(),i=a.files,f=0;f<i.length;f++){var m=i[f],k=m.fileNameStr,w=l.resolve(m.fileNameStr);u.file(w,m.decompressed,{binary:!0,optimizedBinaryString:!0,date:m.date,dir:m.dir,comment:m.fileCommentStr.length?m.fileCommentStr:null,unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions,createFolders:o.createFolders}),m.dir||(u.file(w).unsafeOriginalName=k)}return a.zipComment.length&&(u.comment=a.zipComment),u})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(p,A,h){var l=p("../utils"),s=p("../stream/GenericWorker");function r(c,b){s.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(b)}l.inherits(r,s),r.prototype._bindStream=function(c){var b=this;(this._stream=c).pause(),c.on("data",function(v){b.push({data:v,meta:{percent:0}})}).on("error",function(v){b.isPaused?this.generatedError=v:b.error(v)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},r.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},A.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(p,A,h){var l=p("readable-stream").Readable;function s(r,c,b){l.call(this,c),this._helper=r;var v=this;r.on("data",function(g,E){v.push(g)||v._helper.pause(),b&&b(E)}).on("error",function(g){v.emit("error",g)}).on("end",function(){v.push(null)})}p("../utils").inherits(s,l),s.prototype._read=function(){this._helper.resume()},A.exports=s},{"../utils":32,"readable-stream":16}],14:[function(p,A,h){A.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,s);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,s)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var s=new Buffer(l);return s.fill(0),s},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(p,A,h){function l(w,D,x){var U,O=r.getTypeOf(D),j=r.extend(x||{},v);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(w=i(w)),j.createFolders&&(U=a(w))&&f.call(this,U,!0);var q=O==="string"&&j.binary===!1&&j.base64===!1;x&&x.binary!==void 0||(j.binary=!q),(D instanceof g&&D.uncompressedSize===0||j.dir||!D||D.length===0)&&(j.base64=!1,j.binary=!0,D="",j.compression="STORE",O="string");var y=null;y=D instanceof g||D instanceof c?D:u.isNode&&u.isStream(D)?new n(w,D):r.prepareContent(w,D,j.binary,j.optimizedBinaryString,j.base64);var C=new E(w,y,j);this.files[w]=C}var s=p("./utf8"),r=p("./utils"),c=p("./stream/GenericWorker"),b=p("./stream/StreamHelper"),v=p("./defaults"),g=p("./compressedObject"),E=p("./zipObject"),o=p("./generate"),u=p("./nodejsUtils"),n=p("./nodejs/NodejsStreamInputAdapter"),a=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var D=w.lastIndexOf("/");return 0<D?w.substring(0,D):""},i=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},f=function(w,D){return D=D!==void 0?D:v.createFolders,w=i(w),this.files[w]||l.call(this,w,null,{dir:!0,createFolders:D}),this.files[w]};function m(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var D,x,U;for(D in this.files)U=this.files[D],(x=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&w(x,U)},filter:function(w){var D=[];return this.forEach(function(x,U){w(x,U)&&D.push(U)}),D},file:function(w,D,x){if(arguments.length!==1)return w=this.root+w,l.call(this,w,D,x),this;if(m(w)){var U=w;return this.filter(function(j,q){return!q.dir&&U.test(j)})}var O=this.files[this.root+w];return O&&!O.dir?O:null},folder:function(w){if(!w)return this;if(m(w))return this.filter(function(O,j){return j.dir&&w.test(O)});var D=this.root+w,x=f.call(this,D),U=this.clone();return U.root=x.name,U},remove:function(w){w=this.root+w;var D=this.files[w];if(D||(w.slice(-1)!=="/"&&(w+="/"),D=this.files[w]),D&&!D.dir)delete this.files[w];else for(var x=this.filter(function(O,j){return j.name.slice(0,w.length)===w}),U=0;U<x.length;U++)delete this.files[x[U].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var D,x={};try{if((x=r.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");r.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var U=x.comment||this.comment||"";D=o.generateWorker(this,x,U)}catch(O){(D=new c("error")).error(O)}return new b(D,x.type||"string",x.mimeType)},generateAsync:function(w,D){return this.generateInternalStream(w).accumulate(D)},generateNodeStream:function(w,D){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(D)}};A.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(p,A,h){A.exports=p("stream")},{stream:void 0}],17:[function(p,A,h){var l=p("./DataReader");function s(r){l.call(this,r);for(var c=0;c<this.data.length;c++)r[c]=255&r[c]}p("../utils").inherits(s,l),s.prototype.byteAt=function(r){return this.data[this.zero+r]},s.prototype.lastIndexOfSignature=function(r){for(var c=r.charCodeAt(0),b=r.charCodeAt(1),v=r.charCodeAt(2),g=r.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===c&&this.data[E+1]===b&&this.data[E+2]===v&&this.data[E+3]===g)return E-this.zero;return-1},s.prototype.readAndCheckSignature=function(r){var c=r.charCodeAt(0),b=r.charCodeAt(1),v=r.charCodeAt(2),g=r.charCodeAt(3),E=this.readData(4);return c===E[0]&&b===E[1]&&v===E[2]&&g===E[3]},s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},A.exports=s},{"../utils":32,"./DataReader":18}],18:[function(p,A,h){var l=p("../utils");function s(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var c,b=0;for(this.checkOffset(r),c=this.index+r-1;c>=this.index;c--)b=(b<<8)+this.byteAt(c);return this.index+=r,b},readString:function(r){return l.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},A.exports=s},{"../utils":32}],19:[function(p,A,h){var l=p("./Uint8ArrayReader");function s(r){l.call(this,r)}p("../utils").inherits(s,l),s.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},A.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(p,A,h){var l=p("./DataReader");function s(r){l.call(this,r)}p("../utils").inherits(s,l),s.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},s.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},s.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},s.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},A.exports=s},{"../utils":32,"./DataReader":18}],21:[function(p,A,h){var l=p("./ArrayReader");function s(r){l.call(this,r)}p("../utils").inherits(s,l),s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},A.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(p,A,h){var l=p("../utils"),s=p("../support"),r=p("./ArrayReader"),c=p("./StringReader"),b=p("./NodeBufferReader"),v=p("./Uint8ArrayReader");A.exports=function(g){var E=l.getTypeOf(g);return l.checkSupport(E),E!=="string"||s.uint8array?E==="nodebuffer"?new b(g):s.uint8array?new v(l.transformTo("uint8array",g)):new r(l.transformTo("array",g)):new c(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(p,A,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(p,A,h){var l=p("./GenericWorker"),s=p("../utils");function r(c){l.call(this,"ConvertWorker to "+c),this.destType=c}s.inherits(r,l),r.prototype.processChunk=function(c){this.push({data:s.transformTo(this.destType,c.data),meta:c.meta})},A.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(p,A,h){var l=p("./GenericWorker"),s=p("../crc32");function r(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}p("../utils").inherits(r,l),r.prototype.processChunk=function(c){this.streamInfo.crc32=s(c.data,this.streamInfo.crc32||0),this.push(c)},A.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(p,A,h){var l=p("../utils"),s=p("./GenericWorker");function r(c){s.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}l.inherits(r,s),r.prototype.processChunk=function(c){if(c){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+c.data.length}s.prototype.processChunk.call(this,c)},A.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(p,A,h){var l=p("../utils"),s=p("./GenericWorker");function r(c){s.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(v){b.dataIsReady=!0,b.data=v,b.max=v&&v.length||0,b.type=l.getTypeOf(v),b.isPaused||b._tickAndRepeat()},function(v){b.error(v)})}l.inherits(r,s),r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,b);break;case"uint8array":c=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":c=this.data.slice(this.index,b)}return this.index=b,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},A.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(p,A,h){function l(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,r){return this._listeners[s].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,r){if(this._listeners[s])for(var c=0;c<this._listeners[s].length;c++)this._listeners[s][c].call(this,r)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var r=this;return s.on("data",function(c){r.processChunk(c)}),s.on("end",function(){r.end()}),s.on("error",function(c){r.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,r){return this.extraStreamInfo[s]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},A.exports=l},{}],29:[function(p,A,h){var l=p("../utils"),s=p("./ConvertWorker"),r=p("./GenericWorker"),c=p("../base64"),b=p("../support"),v=p("../external"),g=null;if(b.nodestream)try{g=p("../nodejs/NodejsStreamOutputAdapter")}catch{}function E(u,n){return new v.Promise(function(a,i){var f=[],m=u._internalType,k=u._outputType,w=u._mimeType;u.on("data",function(D,x){f.push(D),n&&n(x)}).on("error",function(D){f=[],i(D)}).on("end",function(){try{var D=function(x,U,O){switch(x){case"blob":return l.newBlob(l.transformTo("arraybuffer",U),O);case"base64":return c.encode(U);default:return l.transformTo(x,U)}}(k,function(x,U){var O,j=0,q=null,y=0;for(O=0;O<U.length;O++)y+=U[O].length;switch(x){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(q=new Uint8Array(y),O=0;O<U.length;O++)q.set(U[O],j),j+=U[O].length;return q;case"nodebuffer":return Buffer.concat(U);default:throw new Error("concat : unsupported type '"+x+"'")}}(m,f),w);a(D)}catch(x){i(x)}f=[]}).resume()})}function o(u,n,a){var i=n;switch(n){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=n,this._mimeType=a,l.checkSupport(i),this._worker=u.pipe(new s(i)),u.lock()}catch(f){this._worker=new r("error"),this._worker.error(f)}}o.prototype={accumulate:function(u){return E(this,u)},on:function(u,n){var a=this;return u==="data"?this._worker.on(u,function(i){n.call(a,i.data,i.meta)}):this._worker.on(u,function(){l.delay(n,arguments,a)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(u){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},u)}},A.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(p,A,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var l=new ArrayBuffer(0);try{h.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(l),h.blob=s.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!p("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(p,A,h){for(var l=p("./utils"),s=p("./support"),r=p("./nodejsUtils"),c=p("./stream/GenericWorker"),b=new Array(256),v=0;v<256;v++)b[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;b[254]=b[254]=1;function g(){c.call(this,"utf-8 decode"),this.leftOver=null}function E(){c.call(this,"utf-8 encode")}h.utf8encode=function(o){return s.nodebuffer?r.newBufferFrom(o,"utf-8"):function(u){var n,a,i,f,m,k=u.length,w=0;for(f=0;f<k;f++)(64512&(a=u.charCodeAt(f)))==55296&&f+1<k&&(64512&(i=u.charCodeAt(f+1)))==56320&&(a=65536+(a-55296<<10)+(i-56320),f++),w+=a<128?1:a<2048?2:a<65536?3:4;for(n=s.uint8array?new Uint8Array(w):new Array(w),f=m=0;m<w;f++)(64512&(a=u.charCodeAt(f)))==55296&&f+1<k&&(64512&(i=u.charCodeAt(f+1)))==56320&&(a=65536+(a-55296<<10)+(i-56320),f++),a<128?n[m++]=a:(a<2048?n[m++]=192|a>>>6:(a<65536?n[m++]=224|a>>>12:(n[m++]=240|a>>>18,n[m++]=128|a>>>12&63),n[m++]=128|a>>>6&63),n[m++]=128|63&a);return n}(o)},h.utf8decode=function(o){return s.nodebuffer?l.transformTo("nodebuffer",o).toString("utf-8"):function(u){var n,a,i,f,m=u.length,k=new Array(2*m);for(n=a=0;n<m;)if((i=u[n++])<128)k[a++]=i;else if(4<(f=b[i]))k[a++]=65533,n+=f-1;else{for(i&=f===2?31:f===3?15:7;1<f&&n<m;)i=i<<6|63&u[n++],f--;1<f?k[a++]=65533:i<65536?k[a++]=i:(i-=65536,k[a++]=55296|i>>10&1023,k[a++]=56320|1023&i)}return k.length!==a&&(k.subarray?k=k.subarray(0,a):k.length=a),l.applyFromCharCode(k)}(o=l.transformTo(s.uint8array?"uint8array":"array",o))},l.inherits(g,c),g.prototype.processChunk=function(o){var u=l.transformTo(s.uint8array?"uint8array":"array",o.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var n=u;(u=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),u.set(n,this.leftOver.length)}else u=this.leftOver.concat(u);this.leftOver=null}var a=function(f,m){var k;for((m=m||f.length)>f.length&&(m=f.length),k=m-1;0<=k&&(192&f[k])==128;)k--;return k<0||k===0?m:k+b[f[k]]>m?k:m}(u),i=u;a!==u.length&&(s.uint8array?(i=u.subarray(0,a),this.leftOver=u.subarray(a,u.length)):(i=u.slice(0,a),this.leftOver=u.slice(a,u.length))),this.push({data:h.utf8decode(i),meta:o.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=g,l.inherits(E,c),E.prototype.processChunk=function(o){this.push({data:h.utf8encode(o.data),meta:o.meta})},h.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(p,A,h){var l=p("./support"),s=p("./base64"),r=p("./nodejsUtils"),c=p("./external");function b(n){return n}function v(n,a){for(var i=0;i<n.length;++i)a[i]=255&n.charCodeAt(i);return a}p("setimmediate"),h.newBlob=function(n,a){h.checkSupport("blob");try{return new Blob([n],{type:a})}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(n),i.getBlob(a)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(n,a,i){var f=[],m=0,k=n.length;if(k<=i)return String.fromCharCode.apply(null,n);for(;m<k;)a==="array"||a==="nodebuffer"?f.push(String.fromCharCode.apply(null,n.slice(m,Math.min(m+i,k)))):f.push(String.fromCharCode.apply(null,n.subarray(m,Math.min(m+i,k)))),m+=i;return f.join("")},stringifyByChar:function(n){for(var a="",i=0;i<n.length;i++)a+=String.fromCharCode(n[i]);return a},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function E(n){var a=65536,i=h.getTypeOf(n),f=!0;if(i==="uint8array"?f=g.applyCanBeUsed.uint8array:i==="nodebuffer"&&(f=g.applyCanBeUsed.nodebuffer),f)for(;1<a;)try{return g.stringifyByChunk(n,i,a)}catch{a=Math.floor(a/2)}return g.stringifyByChar(n)}function o(n,a){for(var i=0;i<n.length;i++)a[i]=n[i];return a}h.applyFromCharCode=E;var u={};u.string={string:b,array:function(n){return v(n,new Array(n.length))},arraybuffer:function(n){return u.string.uint8array(n).buffer},uint8array:function(n){return v(n,new Uint8Array(n.length))},nodebuffer:function(n){return v(n,r.allocBuffer(n.length))}},u.array={string:E,array:b,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return r.newBufferFrom(n)}},u.arraybuffer={string:function(n){return E(new Uint8Array(n))},array:function(n){return o(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:b,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return r.newBufferFrom(new Uint8Array(n))}},u.uint8array={string:E,array:function(n){return o(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:b,nodebuffer:function(n){return r.newBufferFrom(n)}},u.nodebuffer={string:E,array:function(n){return o(n,new Array(n.length))},arraybuffer:function(n){return u.nodebuffer.uint8array(n).buffer},uint8array:function(n){return o(n,new Uint8Array(n.length))},nodebuffer:b},h.transformTo=function(n,a){if(a=a||"",!n)return a;h.checkSupport(n);var i=h.getTypeOf(a);return u[i][n](a)},h.resolve=function(n){for(var a=n.split("/"),i=[],f=0;f<a.length;f++){var m=a[f];m==="."||m===""&&f!==0&&f!==a.length-1||(m===".."?i.pop():i.push(m))}return i.join("/")},h.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":l.nodebuffer&&r.isBuffer(n)?"nodebuffer":l.uint8array&&n instanceof Uint8Array?"uint8array":l.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(n){if(!l[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(n){var a,i,f="";for(i=0;i<(n||"").length;i++)f+="\\x"+((a=n.charCodeAt(i))<16?"0":"")+a.toString(16).toUpperCase();return f},h.delay=function(n,a,i){setImmediate(function(){n.apply(i||null,a||[])})},h.inherits=function(n,a){function i(){}i.prototype=a.prototype,n.prototype=new i},h.extend=function(){var n,a,i={};for(n=0;n<arguments.length;n++)for(a in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],a)&&i[a]===void 0&&(i[a]=arguments[n][a]);return i},h.prepareContent=function(n,a,i,f,m){return c.Promise.resolve(a).then(function(k){return l.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new c.Promise(function(w,D){var x=new FileReader;x.onload=function(U){w(U.target.result)},x.onerror=function(U){D(U.target.error)},x.readAsArrayBuffer(k)}):k}).then(function(k){var w=h.getTypeOf(k);return w?(w==="arraybuffer"?k=h.transformTo("uint8array",k):w==="string"&&(m?k=s.decode(k):i&&f!==!0&&(k=function(D){return v(D,l.uint8array?new Uint8Array(D.length):new Array(D.length))}(k))),k):c.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(p,A,h){var l=p("./reader/readerFor"),s=p("./utils"),r=p("./signature"),c=p("./zipEntry"),b=p("./support");function v(g){this.files=[],this.loadOptions=g}v.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(E)+", expected "+s.pretty(g)+")")}},isSignature:function(g,E){var o=this.reader.index;this.reader.setIndex(g);var u=this.reader.readString(4)===E;return this.reader.setIndex(o),u},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),E=b.uint8array?"uint8array":"array",o=s.transformTo(E,g);this.zipComment=this.loadOptions.decodeFileName(o)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,E,o,u=this.zip64EndOfCentralSize-44;0<u;)g=this.reader.readInt(2),E=this.reader.readInt(4),o=this.reader.readData(E),this.zip64ExtensibleData[g]={id:g,length:E,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,E;for(g=0;g<this.files.length;g++)E=this.files[g],this.reader.setIndex(E.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(g=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var E=g;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var o=this.centralDirOffset+this.centralDirSize;this.zip64&&(o+=20,o+=12+this.zip64EndOfCentralSize);var u=E-o;if(0<u)this.isSignature(E,r.CENTRAL_FILE_HEADER)||(this.reader.zero=u);else if(u<0)throw new Error("Corrupted zip: missing "+Math.abs(u)+" bytes.")},prepareReader:function(g){this.reader=l(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},A.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(p,A,h){var l=p("./reader/readerFor"),s=p("./utils"),r=p("./compressedObject"),c=p("./crc32"),b=p("./utf8"),v=p("./compressions"),g=p("./support");function E(o,u){this.options=o,this.loadOptions=u}E.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(o){var u,n;if(o.skip(22),this.fileNameLength=o.readInt(2),n=o.readInt(2),this.fileName=o.readData(this.fileNameLength),o.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((u=function(a){for(var i in v)if(Object.prototype.hasOwnProperty.call(v,i)&&v[i].magic===a)return v[i];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,u,o.readData(this.compressedSize))},readCentralPart:function(o){this.versionMadeBy=o.readInt(2),o.skip(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4);var u=o.readInt(2);if(this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");o.skip(u),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),o==0&&(this.dosPermissions=63&this.externalFileAttributes),o==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var o=l(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=o.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=o.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=o.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=o.readInt(4))}},readExtraFields:function(o){var u,n,a,i=o.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});o.index+4<i;)u=o.readInt(2),n=o.readInt(2),a=o.readData(n),this.extraFields[u]={id:u,length:n,value:a};o.setIndex(i)},handleUTF8:function(){var o=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var u=this.findExtraFieldUnicodePath();if(u!==null)this.fileNameStr=u;else{var n=s.transformTo(o,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var a=this.findExtraFieldUnicodeComment();if(a!==null)this.fileCommentStr=a;else{var i=s.transformTo(o,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var u=l(o.value);return u.readInt(1)!==1||c(this.fileName)!==u.readInt(4)?null:b.utf8decode(u.readData(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var u=l(o.value);return u.readInt(1)!==1||c(this.fileComment)!==u.readInt(4)?null:b.utf8decode(u.readData(o.length-5))}return null}},A.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(p,A,h){function l(u,n,a){this.name=u,this.dir=a.dir,this.date=a.date,this.comment=a.comment,this.unixPermissions=a.unixPermissions,this.dosPermissions=a.dosPermissions,this._data=n,this._dataBinary=a.binary,this.options={compression:a.compression,compressionOptions:a.compressionOptions}}var s=p("./stream/StreamHelper"),r=p("./stream/DataWorker"),c=p("./utf8"),b=p("./compressedObject"),v=p("./stream/GenericWorker");l.prototype={internalStream:function(u){var n=null,a="string";try{if(!u)throw new Error("No output type specified.");var i=(a=u.toLowerCase())==="string"||a==="text";a!=="binarystring"&&a!=="text"||(a="string"),n=this._decompressWorker();var f=!this._dataBinary;f&&!i&&(n=n.pipe(new c.Utf8EncodeWorker)),!f&&i&&(n=n.pipe(new c.Utf8DecodeWorker))}catch(m){(n=new v("error")).error(m)}return new s(n,a,"")},async:function(u,n){return this.internalStream(u).accumulate(n)},nodeStream:function(u,n){return this.internalStream(u||"nodebuffer").toNodejsStream(n)},_compressWorker:function(u,n){if(this._data instanceof b&&this._data.compression.magic===u.magic)return this._data.getCompressedWorker();var a=this._decompressWorker();return this._dataBinary||(a=a.pipe(new c.Utf8EncodeWorker)),b.createWorkerFrom(a,u,n)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof v?this._data:new r(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},o=0;o<g.length;o++)l.prototype[g[o]]=E;A.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(p,A,h){(function(l){var s,r,c=l.MutationObserver||l.WebKitMutationObserver;if(c){var b=0,v=new c(u),g=l.document.createTextNode("");v.observe(g,{characterData:!0}),s=function(){g.data=b=++b%2}}else if(l.setImmediate||l.MessageChannel===void 0)s="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var n=l.document.createElement("script");n.onreadystatechange=function(){u(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},l.document.documentElement.appendChild(n)}:function(){setTimeout(u,0)};else{var E=new l.MessageChannel;E.port1.onmessage=u,s=function(){E.port2.postMessage(0)}}var o=[];function u(){var n,a;r=!0;for(var i=o.length;i;){for(a=o,o=[],n=-1;++n<i;)a[n]();i=o.length}r=!1}A.exports=function(n){o.push(n)!==1||r||s()}}).call(this,typeof wt<"u"?wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(p,A,h){var l=p("immediate");function s(){}var r={},c=["REJECTED"],b=["FULFILLED"],v=["PENDING"];function g(i){if(typeof i!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,i!==s&&n(this,i)}function E(i,f,m){this.promise=i,typeof f=="function"&&(this.onFulfilled=f,this.callFulfilled=this.otherCallFulfilled),typeof m=="function"&&(this.onRejected=m,this.callRejected=this.otherCallRejected)}function o(i,f,m){l(function(){var k;try{k=f(m)}catch(w){return r.reject(i,w)}k===i?r.reject(i,new TypeError("Cannot resolve promise with itself")):r.resolve(i,k)})}function u(i){var f=i&&i.then;if(i&&(typeof i=="object"||typeof i=="function")&&typeof f=="function")return function(){f.apply(i,arguments)}}function n(i,f){var m=!1;function k(x){m||(m=!0,r.reject(i,x))}function w(x){m||(m=!0,r.resolve(i,x))}var D=a(function(){f(w,k)});D.status==="error"&&k(D.value)}function a(i,f){var m={};try{m.value=i(f),m.status="success"}catch(k){m.status="error",m.value=k}return m}(A.exports=g).prototype.finally=function(i){if(typeof i!="function")return this;var f=this.constructor;return this.then(function(m){return f.resolve(i()).then(function(){return m})},function(m){return f.resolve(i()).then(function(){throw m})})},g.prototype.catch=function(i){return this.then(null,i)},g.prototype.then=function(i,f){if(typeof i!="function"&&this.state===b||typeof f!="function"&&this.state===c)return this;var m=new this.constructor(s);return this.state!==v?o(m,this.state===b?i:f,this.outcome):this.queue.push(new E(m,i,f)),m},E.prototype.callFulfilled=function(i){r.resolve(this.promise,i)},E.prototype.otherCallFulfilled=function(i){o(this.promise,this.onFulfilled,i)},E.prototype.callRejected=function(i){r.reject(this.promise,i)},E.prototype.otherCallRejected=function(i){o(this.promise,this.onRejected,i)},r.resolve=function(i,f){var m=a(u,f);if(m.status==="error")return r.reject(i,m.value);var k=m.value;if(k)n(i,k);else{i.state=b,i.outcome=f;for(var w=-1,D=i.queue.length;++w<D;)i.queue[w].callFulfilled(f)}return i},r.reject=function(i,f){i.state=c,i.outcome=f;for(var m=-1,k=i.queue.length;++m<k;)i.queue[m].callRejected(f);return i},g.resolve=function(i){return i instanceof this?i:r.resolve(new this(s),i)},g.reject=function(i){var f=new this(s);return r.reject(f,i)},g.all=function(i){var f=this;if(Object.prototype.toString.call(i)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=i.length,k=!1;if(!m)return this.resolve([]);for(var w=new Array(m),D=0,x=-1,U=new this(s);++x<m;)O(i[x],x);return U;function O(j,q){f.resolve(j).then(function(y){w[q]=y,++D!==m||k||(k=!0,r.resolve(U,w))},function(y){k||(k=!0,r.reject(U,y))})}},g.race=function(i){var f=this;if(Object.prototype.toString.call(i)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=i.length,k=!1;if(!m)return this.resolve([]);for(var w=-1,D=new this(s);++w<m;)x=i[w],f.resolve(x).then(function(U){k||(k=!0,r.resolve(D,U))},function(U){k||(k=!0,r.reject(D,U))});var x;return D}},{immediate:36}],38:[function(p,A,h){var l={};(0,p("./lib/utils/common").assign)(l,p("./lib/deflate"),p("./lib/inflate"),p("./lib/zlib/constants")),A.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(p,A,h){var l=p("./zlib/deflate"),s=p("./utils/common"),r=p("./utils/strings"),c=p("./zlib/messages"),b=p("./zlib/zstream"),v=Object.prototype.toString,g=0,E=-1,o=0,u=8;function n(i){if(!(this instanceof n))return new n(i);this.options=s.assign({level:E,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:o,to:""},i||{});var f=this.options;f.raw&&0<f.windowBits?f.windowBits=-f.windowBits:f.gzip&&0<f.windowBits&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var m=l.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(m!==g)throw new Error(c[m]);if(f.header&&l.deflateSetHeader(this.strm,f.header),f.dictionary){var k;if(k=typeof f.dictionary=="string"?r.string2buf(f.dictionary):v.call(f.dictionary)==="[object ArrayBuffer]"?new Uint8Array(f.dictionary):f.dictionary,(m=l.deflateSetDictionary(this.strm,k))!==g)throw new Error(c[m]);this._dict_set=!0}}function a(i,f){var m=new n(f);if(m.push(i,!0),m.err)throw m.msg||c[m.err];return m.result}n.prototype.push=function(i,f){var m,k,w=this.strm,D=this.options.chunkSize;if(this.ended)return!1;k=f===~~f?f:f===!0?4:0,typeof i=="string"?w.input=r.string2buf(i):v.call(i)==="[object ArrayBuffer]"?w.input=new Uint8Array(i):w.input=i,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new s.Buf8(D),w.next_out=0,w.avail_out=D),(m=l.deflate(w,k))!==1&&m!==g)return this.onEnd(m),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(s.shrinkBuf(w.output,w.next_out))):this.onData(s.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&m!==1);return k===4?(m=l.deflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===g):k!==2||(this.onEnd(g),!(w.avail_out=0))},n.prototype.onData=function(i){this.chunks.push(i)},n.prototype.onEnd=function(i){i===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},h.Deflate=n,h.deflate=a,h.deflateRaw=function(i,f){return(f=f||{}).raw=!0,a(i,f)},h.gzip=function(i,f){return(f=f||{}).gzip=!0,a(i,f)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(p,A,h){var l=p("./zlib/inflate"),s=p("./utils/common"),r=p("./utils/strings"),c=p("./zlib/constants"),b=p("./zlib/messages"),v=p("./zlib/zstream"),g=p("./zlib/gzheader"),E=Object.prototype.toString;function o(n){if(!(this instanceof o))return new o(n);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},n||{});var a=this.options;a.raw&&0<=a.windowBits&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),!(0<=a.windowBits&&a.windowBits<16)||n&&n.windowBits||(a.windowBits+=32),15<a.windowBits&&a.windowBits<48&&!(15&a.windowBits)&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var i=l.inflateInit2(this.strm,a.windowBits);if(i!==c.Z_OK)throw new Error(b[i]);this.header=new g,l.inflateGetHeader(this.strm,this.header)}function u(n,a){var i=new o(a);if(i.push(n,!0),i.err)throw i.msg||b[i.err];return i.result}o.prototype.push=function(n,a){var i,f,m,k,w,D,x=this.strm,U=this.options.chunkSize,O=this.options.dictionary,j=!1;if(this.ended)return!1;f=a===~~a?a:a===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof n=="string"?x.input=r.binstring2buf(n):E.call(n)==="[object ArrayBuffer]"?x.input=new Uint8Array(n):x.input=n,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new s.Buf8(U),x.next_out=0,x.avail_out=U),(i=l.inflate(x,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&O&&(D=typeof O=="string"?r.string2buf(O):E.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,i=l.inflateSetDictionary(this.strm,D)),i===c.Z_BUF_ERROR&&j===!0&&(i=c.Z_OK,j=!1),i!==c.Z_STREAM_END&&i!==c.Z_OK)return this.onEnd(i),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&i!==c.Z_STREAM_END&&(x.avail_in!==0||f!==c.Z_FINISH&&f!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(m=r.utf8border(x.output,x.next_out),k=x.next_out-m,w=r.buf2string(x.output,m),x.next_out=k,x.avail_out=U-k,k&&s.arraySet(x.output,x.output,m,k,0),this.onData(w)):this.onData(s.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(j=!0)}while((0<x.avail_in||x.avail_out===0)&&i!==c.Z_STREAM_END);return i===c.Z_STREAM_END&&(f=c.Z_FINISH),f===c.Z_FINISH?(i=l.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c.Z_OK):f!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(x.avail_out=0))},o.prototype.onData=function(n){this.chunks.push(n)},o.prototype.onEnd=function(n){n===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},h.Inflate=o,h.inflate=u,h.inflateRaw=function(n,a){return(a=a||{}).raw=!0,u(n,a)},h.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(p,A,h){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(c){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var v=b.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var g in v)v.hasOwnProperty(g)&&(c[g]=v[g])}}return c},h.shrinkBuf=function(c,b){return c.length===b?c:c.subarray?c.subarray(0,b):(c.length=b,c)};var s={arraySet:function(c,b,v,g,E){if(b.subarray&&c.subarray)c.set(b.subarray(v,v+g),E);else for(var o=0;o<g;o++)c[E+o]=b[v+o]},flattenChunks:function(c){var b,v,g,E,o,u;for(b=g=0,v=c.length;b<v;b++)g+=c[b].length;for(u=new Uint8Array(g),b=E=0,v=c.length;b<v;b++)o=c[b],u.set(o,E),E+=o.length;return u}},r={arraySet:function(c,b,v,g,E){for(var o=0;o<g;o++)c[E+o]=b[v+o]},flattenChunks:function(c){return[].concat.apply([],c)}};h.setTyped=function(c){c?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,s)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,r))},h.setTyped(l)},{}],42:[function(p,A,h){var l=p("./common"),s=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var c=new l.Buf8(256),b=0;b<256;b++)c[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function v(g,E){if(E<65537&&(g.subarray&&r||!g.subarray&&s))return String.fromCharCode.apply(null,l.shrinkBuf(g,E));for(var o="",u=0;u<E;u++)o+=String.fromCharCode(g[u]);return o}c[254]=c[254]=1,h.string2buf=function(g){var E,o,u,n,a,i=g.length,f=0;for(n=0;n<i;n++)(64512&(o=g.charCodeAt(n)))==55296&&n+1<i&&(64512&(u=g.charCodeAt(n+1)))==56320&&(o=65536+(o-55296<<10)+(u-56320),n++),f+=o<128?1:o<2048?2:o<65536?3:4;for(E=new l.Buf8(f),n=a=0;a<f;n++)(64512&(o=g.charCodeAt(n)))==55296&&n+1<i&&(64512&(u=g.charCodeAt(n+1)))==56320&&(o=65536+(o-55296<<10)+(u-56320),n++),o<128?E[a++]=o:(o<2048?E[a++]=192|o>>>6:(o<65536?E[a++]=224|o>>>12:(E[a++]=240|o>>>18,E[a++]=128|o>>>12&63),E[a++]=128|o>>>6&63),E[a++]=128|63&o);return E},h.buf2binstring=function(g){return v(g,g.length)},h.binstring2buf=function(g){for(var E=new l.Buf8(g.length),o=0,u=E.length;o<u;o++)E[o]=g.charCodeAt(o);return E},h.buf2string=function(g,E){var o,u,n,a,i=E||g.length,f=new Array(2*i);for(o=u=0;o<i;)if((n=g[o++])<128)f[u++]=n;else if(4<(a=c[n]))f[u++]=65533,o+=a-1;else{for(n&=a===2?31:a===3?15:7;1<a&&o<i;)n=n<<6|63&g[o++],a--;1<a?f[u++]=65533:n<65536?f[u++]=n:(n-=65536,f[u++]=55296|n>>10&1023,f[u++]=56320|1023&n)}return v(f,u)},h.utf8border=function(g,E){var o;for((E=E||g.length)>g.length&&(E=g.length),o=E-1;0<=o&&(192&g[o])==128;)o--;return o<0||o===0?E:o+c[g[o]]>E?o:E}},{"./common":41}],43:[function(p,A,h){A.exports=function(l,s,r,c){for(var b=65535&l|0,v=l>>>16&65535|0,g=0;r!==0;){for(r-=g=2e3<r?2e3:r;v=v+(b=b+s[c++]|0)|0,--g;);b%=65521,v%=65521}return b|v<<16|0}},{}],44:[function(p,A,h){A.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(p,A,h){var l=function(){for(var s,r=[],c=0;c<256;c++){s=c;for(var b=0;b<8;b++)s=1&s?3988292384^s>>>1:s>>>1;r[c]=s}return r}();A.exports=function(s,r,c,b){var v=l,g=b+c;s^=-1;for(var E=b;E<g;E++)s=s>>>8^v[255&(s^r[E])];return-1^s}},{}],46:[function(p,A,h){var l,s=p("../utils/common"),r=p("./trees"),c=p("./adler32"),b=p("./crc32"),v=p("./messages"),g=0,E=4,o=0,u=-2,n=-1,a=4,i=2,f=8,m=9,k=286,w=30,D=19,x=2*k+1,U=15,O=3,j=258,q=j+O+1,y=42,C=113,e=1,L=2,Q=3,F=4;function tt(t,z){return t.msg=v[z],z}function M(t){return(t<<1)-(4<t?9:0)}function et(t){for(var z=t.length;0<=--z;)t[z]=0}function R(t){var z=t.state,I=z.pending;I>t.avail_out&&(I=t.avail_out),I!==0&&(s.arraySet(t.output,z.pending_buf,z.pending_out,I,t.next_out),t.next_out+=I,z.pending_out+=I,t.total_out+=I,t.avail_out-=I,z.pending-=I,z.pending===0&&(z.pending_out=0))}function N(t,z){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,z),t.block_start=t.strstart,R(t.strm)}function J(t,z){t.pending_buf[t.pending++]=z}function Y(t,z){t.pending_buf[t.pending++]=z>>>8&255,t.pending_buf[t.pending++]=255&z}function Z(t,z){var I,_,d=t.max_chain_length,T=t.strstart,B=t.prev_length,P=t.nice_match,S=t.strstart>t.w_size-q?t.strstart-(t.w_size-q):0,G=t.window,H=t.w_mask,W=t.prev,V=t.strstart+j,st=G[T+B-1],nt=G[T+B];t.prev_length>=t.good_match&&(d>>=2),P>t.lookahead&&(P=t.lookahead);do if(G[(I=z)+B]===nt&&G[I+B-1]===st&&G[I]===G[T]&&G[++I]===G[T+1]){T+=2,I++;do;while(G[++T]===G[++I]&&G[++T]===G[++I]&&G[++T]===G[++I]&&G[++T]===G[++I]&&G[++T]===G[++I]&&G[++T]===G[++I]&&G[++T]===G[++I]&&G[++T]===G[++I]&&T<V);if(_=j-(V-T),T=V-j,B<_){if(t.match_start=z,P<=(B=_))break;st=G[T+B-1],nt=G[T+B]}}while((z=W[z&H])>S&&--d!=0);return B<=t.lookahead?B:t.lookahead}function at(t){var z,I,_,d,T,B,P,S,G,H,W=t.w_size;do{if(d=t.window_size-t.lookahead-t.strstart,t.strstart>=W+(W-q)){for(s.arraySet(t.window,t.window,W,W,0),t.match_start-=W,t.strstart-=W,t.block_start-=W,z=I=t.hash_size;_=t.head[--z],t.head[z]=W<=_?_-W:0,--I;);for(z=I=W;_=t.prev[--z],t.prev[z]=W<=_?_-W:0,--I;);d+=W}if(t.strm.avail_in===0)break;if(B=t.strm,P=t.window,S=t.strstart+t.lookahead,G=d,H=void 0,H=B.avail_in,G<H&&(H=G),I=H===0?0:(B.avail_in-=H,s.arraySet(P,B.input,B.next_in,H,S),B.state.wrap===1?B.adler=c(B.adler,P,H,S):B.state.wrap===2&&(B.adler=b(B.adler,P,H,S)),B.next_in+=H,B.total_in+=H,H),t.lookahead+=I,t.lookahead+t.insert>=O)for(T=t.strstart-t.insert,t.ins_h=t.window[T],t.ins_h=(t.ins_h<<t.hash_shift^t.window[T+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[T+O-1])&t.hash_mask,t.prev[T&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=T,T++,t.insert--,!(t.lookahead+t.insert<O)););}while(t.lookahead<q&&t.strm.avail_in!==0)}function ct(t,z){for(var I,_;;){if(t.lookahead<q){if(at(t),t.lookahead<q&&z===g)return e;if(t.lookahead===0)break}if(I=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),I!==0&&t.strstart-I<=t.w_size-q&&(t.match_length=Z(t,I)),t.match_length>=O)if(_=r._tr_tally(t,t.strstart-t.match_start,t.match_length-O),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=O){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else _=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(_&&(N(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<O-1?t.strstart:O-1,z===E?(N(t,!0),t.strm.avail_out===0?Q:F):t.last_lit&&(N(t,!1),t.strm.avail_out===0)?e:L}function rt(t,z){for(var I,_,d;;){if(t.lookahead<q){if(at(t),t.lookahead<q&&z===g)return e;if(t.lookahead===0)break}if(I=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=O-1,I!==0&&t.prev_length<t.max_lazy_match&&t.strstart-I<=t.w_size-q&&(t.match_length=Z(t,I),t.match_length<=5&&(t.strategy===1||t.match_length===O&&4096<t.strstart-t.match_start)&&(t.match_length=O-1)),t.prev_length>=O&&t.match_length<=t.prev_length){for(d=t.strstart+t.lookahead-O,_=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-O),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=O-1,t.strstart++,_&&(N(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((_=r._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(_=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<O-1?t.strstart:O-1,z===E?(N(t,!0),t.strm.avail_out===0?Q:F):t.last_lit&&(N(t,!1),t.strm.avail_out===0)?e:L}function it(t,z,I,_,d){this.good_length=t,this.max_lazy=z,this.nice_length=I,this.max_chain=_,this.func=d}function ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=f,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*x),this.dyn_dtree=new s.Buf16(2*(2*w+1)),this.bl_tree=new s.Buf16(2*(2*D+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(U+1),this.heap=new s.Buf16(2*k+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*k+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ot(t){var z;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=i,(z=t.state).pending=0,z.pending_out=0,z.wrap<0&&(z.wrap=-z.wrap),z.status=z.wrap?y:C,t.adler=z.wrap===2?0:1,z.last_flush=g,r._tr_init(z),o):tt(t,u)}function ft(t){var z=ot(t);return z===o&&function(I){I.window_size=2*I.w_size,et(I.head),I.max_lazy_match=l[I.level].max_lazy,I.good_match=l[I.level].good_length,I.nice_match=l[I.level].nice_length,I.max_chain_length=l[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=O-1,I.match_available=0,I.ins_h=0}(t.state),z}function ht(t,z,I,_,d,T){if(!t)return u;var B=1;if(z===n&&(z=6),_<0?(B=0,_=-_):15<_&&(B=2,_-=16),d<1||m<d||I!==f||_<8||15<_||z<0||9<z||T<0||a<T)return tt(t,u);_===8&&(_=9);var P=new ut;return(t.state=P).strm=t,P.wrap=B,P.gzhead=null,P.w_bits=_,P.w_size=1<<P.w_bits,P.w_mask=P.w_size-1,P.hash_bits=d+7,P.hash_size=1<<P.hash_bits,P.hash_mask=P.hash_size-1,P.hash_shift=~~((P.hash_bits+O-1)/O),P.window=new s.Buf8(2*P.w_size),P.head=new s.Buf16(P.hash_size),P.prev=new s.Buf16(P.w_size),P.lit_bufsize=1<<d+6,P.pending_buf_size=4*P.lit_bufsize,P.pending_buf=new s.Buf8(P.pending_buf_size),P.d_buf=1*P.lit_bufsize,P.l_buf=3*P.lit_bufsize,P.level=z,P.strategy=T,P.method=I,ft(t)}l=[new it(0,0,0,0,function(t,z){var I=65535;for(I>t.pending_buf_size-5&&(I=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),t.lookahead===0&&z===g)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var _=t.block_start+I;if((t.strstart===0||t.strstart>=_)&&(t.lookahead=t.strstart-_,t.strstart=_,N(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-q&&(N(t,!1),t.strm.avail_out===0))return e}return t.insert=0,z===E?(N(t,!0),t.strm.avail_out===0?Q:F):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),e)}),new it(4,4,8,4,ct),new it(4,5,16,8,ct),new it(4,6,32,32,ct),new it(4,4,16,16,rt),new it(8,16,32,32,rt),new it(8,16,128,128,rt),new it(8,32,128,256,rt),new it(32,128,258,1024,rt),new it(32,258,258,4096,rt)],h.deflateInit=function(t,z){return ht(t,z,f,15,8,0)},h.deflateInit2=ht,h.deflateReset=ft,h.deflateResetKeep=ot,h.deflateSetHeader=function(t,z){return t&&t.state?t.state.wrap!==2?u:(t.state.gzhead=z,o):u},h.deflate=function(t,z){var I,_,d,T;if(!t||!t.state||5<z||z<0)return t?tt(t,u):u;if(_=t.state,!t.output||!t.input&&t.avail_in!==0||_.status===666&&z!==E)return tt(t,t.avail_out===0?-5:u);if(_.strm=t,I=_.last_flush,_.last_flush=z,_.status===y)if(_.wrap===2)t.adler=0,J(_,31),J(_,139),J(_,8),_.gzhead?(J(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),J(_,255&_.gzhead.time),J(_,_.gzhead.time>>8&255),J(_,_.gzhead.time>>16&255),J(_,_.gzhead.time>>24&255),J(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),J(_,255&_.gzhead.os),_.gzhead.extra&&_.gzhead.extra.length&&(J(_,255&_.gzhead.extra.length),J(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(t.adler=b(t.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=69):(J(_,0),J(_,0),J(_,0),J(_,0),J(_,0),J(_,_.level===9?2:2<=_.strategy||_.level<2?4:0),J(_,3),_.status=C);else{var B=f+(_.w_bits-8<<4)<<8;B|=(2<=_.strategy||_.level<2?0:_.level<6?1:_.level===6?2:3)<<6,_.strstart!==0&&(B|=32),B+=31-B%31,_.status=C,Y(_,B),_.strstart!==0&&(Y(_,t.adler>>>16),Y(_,65535&t.adler)),t.adler=1}if(_.status===69)if(_.gzhead.extra){for(d=_.pending;_.gzindex<(65535&_.gzhead.extra.length)&&(_.pending!==_.pending_buf_size||(_.gzhead.hcrc&&_.pending>d&&(t.adler=b(t.adler,_.pending_buf,_.pending-d,d)),R(t),d=_.pending,_.pending!==_.pending_buf_size));)J(_,255&_.gzhead.extra[_.gzindex]),_.gzindex++;_.gzhead.hcrc&&_.pending>d&&(t.adler=b(t.adler,_.pending_buf,_.pending-d,d)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=73)}else _.status=73;if(_.status===73)if(_.gzhead.name){d=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>d&&(t.adler=b(t.adler,_.pending_buf,_.pending-d,d)),R(t),d=_.pending,_.pending===_.pending_buf_size)){T=1;break}T=_.gzindex<_.gzhead.name.length?255&_.gzhead.name.charCodeAt(_.gzindex++):0,J(_,T)}while(T!==0);_.gzhead.hcrc&&_.pending>d&&(t.adler=b(t.adler,_.pending_buf,_.pending-d,d)),T===0&&(_.gzindex=0,_.status=91)}else _.status=91;if(_.status===91)if(_.gzhead.comment){d=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>d&&(t.adler=b(t.adler,_.pending_buf,_.pending-d,d)),R(t),d=_.pending,_.pending===_.pending_buf_size)){T=1;break}T=_.gzindex<_.gzhead.comment.length?255&_.gzhead.comment.charCodeAt(_.gzindex++):0,J(_,T)}while(T!==0);_.gzhead.hcrc&&_.pending>d&&(t.adler=b(t.adler,_.pending_buf,_.pending-d,d)),T===0&&(_.status=103)}else _.status=103;if(_.status===103&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&R(t),_.pending+2<=_.pending_buf_size&&(J(_,255&t.adler),J(_,t.adler>>8&255),t.adler=0,_.status=C)):_.status=C),_.pending!==0){if(R(t),t.avail_out===0)return _.last_flush=-1,o}else if(t.avail_in===0&&M(z)<=M(I)&&z!==E)return tt(t,-5);if(_.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||_.lookahead!==0||z!==g&&_.status!==666){var P=_.strategy===2?function(S,G){for(var H;;){if(S.lookahead===0&&(at(S),S.lookahead===0)){if(G===g)return e;break}if(S.match_length=0,H=r._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++,H&&(N(S,!1),S.strm.avail_out===0))return e}return S.insert=0,G===E?(N(S,!0),S.strm.avail_out===0?Q:F):S.last_lit&&(N(S,!1),S.strm.avail_out===0)?e:L}(_,z):_.strategy===3?function(S,G){for(var H,W,V,st,nt=S.window;;){if(S.lookahead<=j){if(at(S),S.lookahead<=j&&G===g)return e;if(S.lookahead===0)break}if(S.match_length=0,S.lookahead>=O&&0<S.strstart&&(W=nt[V=S.strstart-1])===nt[++V]&&W===nt[++V]&&W===nt[++V]){st=S.strstart+j;do;while(W===nt[++V]&&W===nt[++V]&&W===nt[++V]&&W===nt[++V]&&W===nt[++V]&&W===nt[++V]&&W===nt[++V]&&W===nt[++V]&&V<st);S.match_length=j-(st-V),S.match_length>S.lookahead&&(S.match_length=S.lookahead)}if(S.match_length>=O?(H=r._tr_tally(S,1,S.match_length-O),S.lookahead-=S.match_length,S.strstart+=S.match_length,S.match_length=0):(H=r._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++),H&&(N(S,!1),S.strm.avail_out===0))return e}return S.insert=0,G===E?(N(S,!0),S.strm.avail_out===0?Q:F):S.last_lit&&(N(S,!1),S.strm.avail_out===0)?e:L}(_,z):l[_.level].func(_,z);if(P!==Q&&P!==F||(_.status=666),P===e||P===Q)return t.avail_out===0&&(_.last_flush=-1),o;if(P===L&&(z===1?r._tr_align(_):z!==5&&(r._tr_stored_block(_,0,0,!1),z===3&&(et(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),R(t),t.avail_out===0))return _.last_flush=-1,o}return z!==E?o:_.wrap<=0?1:(_.wrap===2?(J(_,255&t.adler),J(_,t.adler>>8&255),J(_,t.adler>>16&255),J(_,t.adler>>24&255),J(_,255&t.total_in),J(_,t.total_in>>8&255),J(_,t.total_in>>16&255),J(_,t.total_in>>24&255)):(Y(_,t.adler>>>16),Y(_,65535&t.adler)),R(t),0<_.wrap&&(_.wrap=-_.wrap),_.pending!==0?o:1)},h.deflateEnd=function(t){var z;return t&&t.state?(z=t.state.status)!==y&&z!==69&&z!==73&&z!==91&&z!==103&&z!==C&&z!==666?tt(t,u):(t.state=null,z===C?tt(t,-3):o):u},h.deflateSetDictionary=function(t,z){var I,_,d,T,B,P,S,G,H=z.length;if(!t||!t.state||(T=(I=t.state).wrap)===2||T===1&&I.status!==y||I.lookahead)return u;for(T===1&&(t.adler=c(t.adler,z,H,0)),I.wrap=0,H>=I.w_size&&(T===0&&(et(I.head),I.strstart=0,I.block_start=0,I.insert=0),G=new s.Buf8(I.w_size),s.arraySet(G,z,H-I.w_size,I.w_size,0),z=G,H=I.w_size),B=t.avail_in,P=t.next_in,S=t.input,t.avail_in=H,t.next_in=0,t.input=z,at(I);I.lookahead>=O;){for(_=I.strstart,d=I.lookahead-(O-1);I.ins_h=(I.ins_h<<I.hash_shift^I.window[_+O-1])&I.hash_mask,I.prev[_&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=_,_++,--d;);I.strstart=_,I.lookahead=O-1,at(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=O-1,I.match_available=0,t.next_in=P,t.input=S,t.avail_in=B,I.wrap=T,o},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(p,A,h){A.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(p,A,h){A.exports=function(l,s){var r,c,b,v,g,E,o,u,n,a,i,f,m,k,w,D,x,U,O,j,q,y,C,e,L;r=l.state,c=l.next_in,e=l.input,b=c+(l.avail_in-5),v=l.next_out,L=l.output,g=v-(s-l.avail_out),E=v+(l.avail_out-257),o=r.dmax,u=r.wsize,n=r.whave,a=r.wnext,i=r.window,f=r.hold,m=r.bits,k=r.lencode,w=r.distcode,D=(1<<r.lenbits)-1,x=(1<<r.distbits)-1;t:do{m<15&&(f+=e[c++]<<m,m+=8,f+=e[c++]<<m,m+=8),U=k[f&D];e:for(;;){if(f>>>=O=U>>>24,m-=O,(O=U>>>16&255)===0)L[v++]=65535&U;else{if(!(16&O)){if(!(64&O)){U=k[(65535&U)+(f&(1<<O)-1)];continue e}if(32&O){r.mode=12;break t}l.msg="invalid literal/length code",r.mode=30;break t}j=65535&U,(O&=15)&&(m<O&&(f+=e[c++]<<m,m+=8),j+=f&(1<<O)-1,f>>>=O,m-=O),m<15&&(f+=e[c++]<<m,m+=8,f+=e[c++]<<m,m+=8),U=w[f&x];r:for(;;){if(f>>>=O=U>>>24,m-=O,!(16&(O=U>>>16&255))){if(!(64&O)){U=w[(65535&U)+(f&(1<<O)-1)];continue r}l.msg="invalid distance code",r.mode=30;break t}if(q=65535&U,m<(O&=15)&&(f+=e[c++]<<m,(m+=8)<O&&(f+=e[c++]<<m,m+=8)),o<(q+=f&(1<<O)-1)){l.msg="invalid distance too far back",r.mode=30;break t}if(f>>>=O,m-=O,(O=v-g)<q){if(n<(O=q-O)&&r.sane){l.msg="invalid distance too far back",r.mode=30;break t}if(C=i,(y=0)===a){if(y+=u-O,O<j){for(j-=O;L[v++]=i[y++],--O;);y=v-q,C=L}}else if(a<O){if(y+=u+a-O,(O-=a)<j){for(j-=O;L[v++]=i[y++],--O;);if(y=0,a<j){for(j-=O=a;L[v++]=i[y++],--O;);y=v-q,C=L}}}else if(y+=a-O,O<j){for(j-=O;L[v++]=i[y++],--O;);y=v-q,C=L}for(;2<j;)L[v++]=C[y++],L[v++]=C[y++],L[v++]=C[y++],j-=3;j&&(L[v++]=C[y++],1<j&&(L[v++]=C[y++]))}else{for(y=v-q;L[v++]=L[y++],L[v++]=L[y++],L[v++]=L[y++],2<(j-=3););j&&(L[v++]=L[y++],1<j&&(L[v++]=L[y++]))}break}}break}}while(c<b&&v<E);c-=j=m>>3,f&=(1<<(m-=j<<3))-1,l.next_in=c,l.next_out=v,l.avail_in=c<b?b-c+5:5-(c-b),l.avail_out=v<E?E-v+257:257-(v-E),r.hold=f,r.bits=m}},{}],49:[function(p,A,h){var l=p("../utils/common"),s=p("./adler32"),r=p("./crc32"),c=p("./inffast"),b=p("./inftrees"),v=1,g=2,E=0,o=-2,u=1,n=852,a=592;function i(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(y){var C;return y&&y.state?(C=y.state,y.total_in=y.total_out=C.total=0,y.msg="",C.wrap&&(y.adler=1&C.wrap),C.mode=u,C.last=0,C.havedict=0,C.dmax=32768,C.head=null,C.hold=0,C.bits=0,C.lencode=C.lendyn=new l.Buf32(n),C.distcode=C.distdyn=new l.Buf32(a),C.sane=1,C.back=-1,E):o}function k(y){var C;return y&&y.state?((C=y.state).wsize=0,C.whave=0,C.wnext=0,m(y)):o}function w(y,C){var e,L;return y&&y.state?(L=y.state,C<0?(e=0,C=-C):(e=1+(C>>4),C<48&&(C&=15)),C&&(C<8||15<C)?o:(L.window!==null&&L.wbits!==C&&(L.window=null),L.wrap=e,L.wbits=C,k(y))):o}function D(y,C){var e,L;return y?(L=new f,(y.state=L).window=null,(e=w(y,C))!==E&&(y.state=null),e):o}var x,U,O=!0;function j(y){if(O){var C;for(x=new l.Buf32(512),U=new l.Buf32(32),C=0;C<144;)y.lens[C++]=8;for(;C<256;)y.lens[C++]=9;for(;C<280;)y.lens[C++]=7;for(;C<288;)y.lens[C++]=8;for(b(v,y.lens,0,288,x,0,y.work,{bits:9}),C=0;C<32;)y.lens[C++]=5;b(g,y.lens,0,32,U,0,y.work,{bits:5}),O=!1}y.lencode=x,y.lenbits=9,y.distcode=U,y.distbits=5}function q(y,C,e,L){var Q,F=y.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new l.Buf8(F.wsize)),L>=F.wsize?(l.arraySet(F.window,C,e-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(L<(Q=F.wsize-F.wnext)&&(Q=L),l.arraySet(F.window,C,e-L,Q,F.wnext),(L-=Q)?(l.arraySet(F.window,C,e-L,L,0),F.wnext=L,F.whave=F.wsize):(F.wnext+=Q,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=Q))),0}h.inflateReset=k,h.inflateReset2=w,h.inflateResetKeep=m,h.inflateInit=function(y){return D(y,15)},h.inflateInit2=D,h.inflate=function(y,C){var e,L,Q,F,tt,M,et,R,N,J,Y,Z,at,ct,rt,it,ut,ot,ft,ht,t,z,I,_,d=0,T=new l.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return o;(e=y.state).mode===12&&(e.mode=13),tt=y.next_out,Q=y.output,et=y.avail_out,F=y.next_in,L=y.input,M=y.avail_in,R=e.hold,N=e.bits,J=M,Y=et,z=E;t:for(;;)switch(e.mode){case u:if(e.wrap===0){e.mode=13;break}for(;N<16;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(2&e.wrap&&R===35615){T[e.check=0]=255&R,T[1]=R>>>8&255,e.check=r(e.check,T,2,0),N=R=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&R)<<8)+(R>>8))%31){y.msg="incorrect header check",e.mode=30;break}if((15&R)!=8){y.msg="unknown compression method",e.mode=30;break}if(N-=4,t=8+(15&(R>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){y.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,y.adler=e.check=1,e.mode=512&R?10:12,N=R=0;break;case 2:for(;N<16;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(e.flags=R,(255&e.flags)!=8){y.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){y.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=R>>8&1),512&e.flags&&(T[0]=255&R,T[1]=R>>>8&255,e.check=r(e.check,T,2,0)),N=R=0,e.mode=3;case 3:for(;N<32;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}e.head&&(e.head.time=R),512&e.flags&&(T[0]=255&R,T[1]=R>>>8&255,T[2]=R>>>16&255,T[3]=R>>>24&255,e.check=r(e.check,T,4,0)),N=R=0,e.mode=4;case 4:for(;N<16;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}e.head&&(e.head.xflags=255&R,e.head.os=R>>8),512&e.flags&&(T[0]=255&R,T[1]=R>>>8&255,e.check=r(e.check,T,2,0)),N=R=0,e.mode=5;case 5:if(1024&e.flags){for(;N<16;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}e.length=R,e.head&&(e.head.extra_len=R),512&e.flags&&(T[0]=255&R,T[1]=R>>>8&255,e.check=r(e.check,T,2,0)),N=R=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(M<(Z=e.length)&&(Z=M),Z&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),l.arraySet(e.head.extra,L,F,Z,t)),512&e.flags&&(e.check=r(e.check,L,Z,F)),M-=Z,F+=Z,e.length-=Z),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(M===0)break t;for(Z=0;t=L[F+Z++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&Z<M;);if(512&e.flags&&(e.check=r(e.check,L,Z,F)),M-=Z,F+=Z,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(M===0)break t;for(Z=0;t=L[F+Z++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&Z<M;);if(512&e.flags&&(e.check=r(e.check,L,Z,F)),M-=Z,F+=Z,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;N<16;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(R!==(65535&e.check)){y.msg="header crc mismatch",e.mode=30;break}N=R=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),y.adler=e.check=0,e.mode=12;break;case 10:for(;N<32;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}y.adler=e.check=i(R),N=R=0,e.mode=11;case 11:if(e.havedict===0)return y.next_out=tt,y.avail_out=et,y.next_in=F,y.avail_in=M,e.hold=R,e.bits=N,2;y.adler=e.check=1,e.mode=12;case 12:if(C===5||C===6)break t;case 13:if(e.last){R>>>=7&N,N-=7&N,e.mode=27;break}for(;N<3;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}switch(e.last=1&R,N-=1,3&(R>>>=1)){case 0:e.mode=14;break;case 1:if(j(e),e.mode=20,C!==6)break;R>>>=2,N-=2;break t;case 2:e.mode=17;break;case 3:y.msg="invalid block type",e.mode=30}R>>>=2,N-=2;break;case 14:for(R>>>=7&N,N-=7&N;N<32;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if((65535&R)!=(R>>>16^65535)){y.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&R,N=R=0,e.mode=15,C===6)break t;case 15:e.mode=16;case 16:if(Z=e.length){if(M<Z&&(Z=M),et<Z&&(Z=et),Z===0)break t;l.arraySet(Q,L,F,Z,tt),M-=Z,F+=Z,et-=Z,tt+=Z,e.length-=Z;break}e.mode=12;break;case 17:for(;N<14;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(e.nlen=257+(31&R),R>>>=5,N-=5,e.ndist=1+(31&R),R>>>=5,N-=5,e.ncode=4+(15&R),R>>>=4,N-=4,286<e.nlen||30<e.ndist){y.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;N<3;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}e.lens[B[e.have++]]=7&R,R>>>=3,N-=3}for(;e.have<19;)e.lens[B[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,I={bits:e.lenbits},z=b(0,e.lens,0,19,e.lencode,0,e.work,I),e.lenbits=I.bits,z){y.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;it=(d=e.lencode[R&(1<<e.lenbits)-1])>>>16&255,ut=65535&d,!((rt=d>>>24)<=N);){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(ut<16)R>>>=rt,N-=rt,e.lens[e.have++]=ut;else{if(ut===16){for(_=rt+2;N<_;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(R>>>=rt,N-=rt,e.have===0){y.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],Z=3+(3&R),R>>>=2,N-=2}else if(ut===17){for(_=rt+3;N<_;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}N-=rt,t=0,Z=3+(7&(R>>>=rt)),R>>>=3,N-=3}else{for(_=rt+7;N<_;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}N-=rt,t=0,Z=11+(127&(R>>>=rt)),R>>>=7,N-=7}if(e.have+Z>e.nlen+e.ndist){y.msg="invalid bit length repeat",e.mode=30;break}for(;Z--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){y.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,I={bits:e.lenbits},z=b(v,e.lens,0,e.nlen,e.lencode,0,e.work,I),e.lenbits=I.bits,z){y.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,I={bits:e.distbits},z=b(g,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,I),e.distbits=I.bits,z){y.msg="invalid distances set",e.mode=30;break}if(e.mode=20,C===6)break t;case 20:e.mode=21;case 21:if(6<=M&&258<=et){y.next_out=tt,y.avail_out=et,y.next_in=F,y.avail_in=M,e.hold=R,e.bits=N,c(y,Y),tt=y.next_out,Q=y.output,et=y.avail_out,F=y.next_in,L=y.input,M=y.avail_in,R=e.hold,N=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;it=(d=e.lencode[R&(1<<e.lenbits)-1])>>>16&255,ut=65535&d,!((rt=d>>>24)<=N);){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(it&&!(240&it)){for(ot=rt,ft=it,ht=ut;it=(d=e.lencode[ht+((R&(1<<ot+ft)-1)>>ot)])>>>16&255,ut=65535&d,!(ot+(rt=d>>>24)<=N);){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}R>>>=ot,N-=ot,e.back+=ot}if(R>>>=rt,N-=rt,e.back+=rt,e.length=ut,it===0){e.mode=26;break}if(32&it){e.back=-1,e.mode=12;break}if(64&it){y.msg="invalid literal/length code",e.mode=30;break}e.extra=15&it,e.mode=22;case 22:if(e.extra){for(_=e.extra;N<_;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}e.length+=R&(1<<e.extra)-1,R>>>=e.extra,N-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;it=(d=e.distcode[R&(1<<e.distbits)-1])>>>16&255,ut=65535&d,!((rt=d>>>24)<=N);){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(!(240&it)){for(ot=rt,ft=it,ht=ut;it=(d=e.distcode[ht+((R&(1<<ot+ft)-1)>>ot)])>>>16&255,ut=65535&d,!(ot+(rt=d>>>24)<=N);){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}R>>>=ot,N-=ot,e.back+=ot}if(R>>>=rt,N-=rt,e.back+=rt,64&it){y.msg="invalid distance code",e.mode=30;break}e.offset=ut,e.extra=15&it,e.mode=24;case 24:if(e.extra){for(_=e.extra;N<_;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}e.offset+=R&(1<<e.extra)-1,R>>>=e.extra,N-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){y.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(et===0)break t;if(Z=Y-et,e.offset>Z){if((Z=e.offset-Z)>e.whave&&e.sane){y.msg="invalid distance too far back",e.mode=30;break}at=Z>e.wnext?(Z-=e.wnext,e.wsize-Z):e.wnext-Z,Z>e.length&&(Z=e.length),ct=e.window}else ct=Q,at=tt-e.offset,Z=e.length;for(et<Z&&(Z=et),et-=Z,e.length-=Z;Q[tt++]=ct[at++],--Z;);e.length===0&&(e.mode=21);break;case 26:if(et===0)break t;Q[tt++]=e.length,et--,e.mode=21;break;case 27:if(e.wrap){for(;N<32;){if(M===0)break t;M--,R|=L[F++]<<N,N+=8}if(Y-=et,y.total_out+=Y,e.total+=Y,Y&&(y.adler=e.check=e.flags?r(e.check,Q,Y,tt-Y):s(e.check,Q,Y,tt-Y)),Y=et,(e.flags?R:i(R))!==e.check){y.msg="incorrect data check",e.mode=30;break}N=R=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;N<32;){if(M===0)break t;M--,R+=L[F++]<<N,N+=8}if(R!==(4294967295&e.total)){y.msg="incorrect length check",e.mode=30;break}N=R=0}e.mode=29;case 29:z=1;break t;case 30:z=-3;break t;case 31:return-4;case 32:default:return o}return y.next_out=tt,y.avail_out=et,y.next_in=F,y.avail_in=M,e.hold=R,e.bits=N,(e.wsize||Y!==y.avail_out&&e.mode<30&&(e.mode<27||C!==4))&&q(y,y.output,y.next_out,Y-y.avail_out)?(e.mode=31,-4):(J-=y.avail_in,Y-=y.avail_out,y.total_in+=J,y.total_out+=Y,e.total+=Y,e.wrap&&Y&&(y.adler=e.check=e.flags?r(e.check,Q,Y,y.next_out-Y):s(e.check,Q,Y,y.next_out-Y)),y.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(J==0&&Y===0||C===4)&&z===E&&(z=-5),z)},h.inflateEnd=function(y){if(!y||!y.state)return o;var C=y.state;return C.window&&(C.window=null),y.state=null,E},h.inflateGetHeader=function(y,C){var e;return y&&y.state&&2&(e=y.state).wrap?((e.head=C).done=!1,E):o},h.inflateSetDictionary=function(y,C){var e,L=C.length;return y&&y.state?(e=y.state).wrap!==0&&e.mode!==11?o:e.mode===11&&s(1,C,L,0)!==e.check?-3:q(y,C,L,L)?(e.mode=31,-4):(e.havedict=1,E):o},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(p,A,h){var l=p("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];A.exports=function(v,g,E,o,u,n,a,i){var f,m,k,w,D,x,U,O,j,q=i.bits,y=0,C=0,e=0,L=0,Q=0,F=0,tt=0,M=0,et=0,R=0,N=null,J=0,Y=new l.Buf16(16),Z=new l.Buf16(16),at=null,ct=0;for(y=0;y<=15;y++)Y[y]=0;for(C=0;C<o;C++)Y[g[E+C]]++;for(Q=q,L=15;1<=L&&Y[L]===0;L--);if(L<Q&&(Q=L),L===0)return u[n++]=20971520,u[n++]=20971520,i.bits=1,0;for(e=1;e<L&&Y[e]===0;e++);for(Q<e&&(Q=e),y=M=1;y<=15;y++)if(M<<=1,(M-=Y[y])<0)return-1;if(0<M&&(v===0||L!==1))return-1;for(Z[1]=0,y=1;y<15;y++)Z[y+1]=Z[y]+Y[y];for(C=0;C<o;C++)g[E+C]!==0&&(a[Z[g[E+C]]++]=C);if(x=v===0?(N=at=a,19):v===1?(N=s,J-=257,at=r,ct-=257,256):(N=c,at=b,-1),y=e,D=n,tt=C=R=0,k=-1,w=(et=1<<(F=Q))-1,v===1&&852<et||v===2&&592<et)return 1;for(;;){for(U=y-tt,j=a[C]<x?(O=0,a[C]):a[C]>x?(O=at[ct+a[C]],N[J+a[C]]):(O=96,0),f=1<<y-tt,e=m=1<<F;u[D+(R>>tt)+(m-=f)]=U<<24|O<<16|j|0,m!==0;);for(f=1<<y-1;R&f;)f>>=1;if(f!==0?(R&=f-1,R+=f):R=0,C++,--Y[y]==0){if(y===L)break;y=g[E+a[C]]}if(Q<y&&(R&w)!==k){for(tt===0&&(tt=Q),D+=e,M=1<<(F=y-tt);F+tt<L&&!((M-=Y[F+tt])<=0);)F++,M<<=1;if(et+=1<<F,v===1&&852<et||v===2&&592<et)return 1;u[k=R&w]=Q<<24|F<<16|D-n|0}}return R!==0&&(u[D+R]=y-tt<<24|64<<16|0),i.bits=Q,0}},{"../utils/common":41}],51:[function(p,A,h){A.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(p,A,h){var l=p("../utils/common"),s=0,r=1;function c(d){for(var T=d.length;0<=--T;)d[T]=0}var b=0,v=29,g=256,E=g+1+v,o=30,u=19,n=2*E+1,a=15,i=16,f=7,m=256,k=16,w=17,D=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(E+2));c(q);var y=new Array(2*o);c(y);var C=new Array(512);c(C);var e=new Array(256);c(e);var L=new Array(v);c(L);var Q,F,tt,M=new Array(o);function et(d,T,B,P,S){this.static_tree=d,this.extra_bits=T,this.extra_base=B,this.elems=P,this.max_length=S,this.has_stree=d&&d.length}function R(d,T){this.dyn_tree=d,this.max_code=0,this.stat_desc=T}function N(d){return d<256?C[d]:C[256+(d>>>7)]}function J(d,T){d.pending_buf[d.pending++]=255&T,d.pending_buf[d.pending++]=T>>>8&255}function Y(d,T,B){d.bi_valid>i-B?(d.bi_buf|=T<<d.bi_valid&65535,J(d,d.bi_buf),d.bi_buf=T>>i-d.bi_valid,d.bi_valid+=B-i):(d.bi_buf|=T<<d.bi_valid&65535,d.bi_valid+=B)}function Z(d,T,B){Y(d,B[2*T],B[2*T+1])}function at(d,T){for(var B=0;B|=1&d,d>>>=1,B<<=1,0<--T;);return B>>>1}function ct(d,T,B){var P,S,G=new Array(a+1),H=0;for(P=1;P<=a;P++)G[P]=H=H+B[P-1]<<1;for(S=0;S<=T;S++){var W=d[2*S+1];W!==0&&(d[2*S]=at(G[W]++,W))}}function rt(d){var T;for(T=0;T<E;T++)d.dyn_ltree[2*T]=0;for(T=0;T<o;T++)d.dyn_dtree[2*T]=0;for(T=0;T<u;T++)d.bl_tree[2*T]=0;d.dyn_ltree[2*m]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function it(d){8<d.bi_valid?J(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function ut(d,T,B,P){var S=2*T,G=2*B;return d[S]<d[G]||d[S]===d[G]&&P[T]<=P[B]}function ot(d,T,B){for(var P=d.heap[B],S=B<<1;S<=d.heap_len&&(S<d.heap_len&&ut(T,d.heap[S+1],d.heap[S],d.depth)&&S++,!ut(T,P,d.heap[S],d.depth));)d.heap[B]=d.heap[S],B=S,S<<=1;d.heap[B]=P}function ft(d,T,B){var P,S,G,H,W=0;if(d.last_lit!==0)for(;P=d.pending_buf[d.d_buf+2*W]<<8|d.pending_buf[d.d_buf+2*W+1],S=d.pending_buf[d.l_buf+W],W++,P===0?Z(d,S,T):(Z(d,(G=e[S])+g+1,T),(H=x[G])!==0&&Y(d,S-=L[G],H),Z(d,G=N(--P),B),(H=U[G])!==0&&Y(d,P-=M[G],H)),W<d.last_lit;);Z(d,m,T)}function ht(d,T){var B,P,S,G=T.dyn_tree,H=T.stat_desc.static_tree,W=T.stat_desc.has_stree,V=T.stat_desc.elems,st=-1;for(d.heap_len=0,d.heap_max=n,B=0;B<V;B++)G[2*B]!==0?(d.heap[++d.heap_len]=st=B,d.depth[B]=0):G[2*B+1]=0;for(;d.heap_len<2;)G[2*(S=d.heap[++d.heap_len]=st<2?++st:0)]=1,d.depth[S]=0,d.opt_len--,W&&(d.static_len-=H[2*S+1]);for(T.max_code=st,B=d.heap_len>>1;1<=B;B--)ot(d,G,B);for(S=V;B=d.heap[1],d.heap[1]=d.heap[d.heap_len--],ot(d,G,1),P=d.heap[1],d.heap[--d.heap_max]=B,d.heap[--d.heap_max]=P,G[2*S]=G[2*B]+G[2*P],d.depth[S]=(d.depth[B]>=d.depth[P]?d.depth[B]:d.depth[P])+1,G[2*B+1]=G[2*P+1]=S,d.heap[1]=S++,ot(d,G,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(nt,dt){var gt,pt,bt,lt,Et,Tt,_t=dt.dyn_tree,xt=dt.max_code,zt=dt.stat_desc.static_tree,Ut=dt.stat_desc.has_stree,Bt=dt.stat_desc.extra_bits,Ot=dt.stat_desc.extra_base,yt=dt.stat_desc.max_length,vt=0;for(lt=0;lt<=a;lt++)nt.bl_count[lt]=0;for(_t[2*nt.heap[nt.heap_max]+1]=0,gt=nt.heap_max+1;gt<n;gt++)yt<(lt=_t[2*_t[2*(pt=nt.heap[gt])+1]+1]+1)&&(lt=yt,vt++),_t[2*pt+1]=lt,xt<pt||(nt.bl_count[lt]++,Et=0,Ot<=pt&&(Et=Bt[pt-Ot]),Tt=_t[2*pt],nt.opt_len+=Tt*(lt+Et),Ut&&(nt.static_len+=Tt*(zt[2*pt+1]+Et)));if(vt!==0){do{for(lt=yt-1;nt.bl_count[lt]===0;)lt--;nt.bl_count[lt]--,nt.bl_count[lt+1]+=2,nt.bl_count[yt]--,vt-=2}while(0<vt);for(lt=yt;lt!==0;lt--)for(pt=nt.bl_count[lt];pt!==0;)xt<(bt=nt.heap[--gt])||(_t[2*bt+1]!==lt&&(nt.opt_len+=(lt-_t[2*bt+1])*_t[2*bt],_t[2*bt+1]=lt),pt--)}}(d,T),ct(G,st,d.bl_count)}function t(d,T,B){var P,S,G=-1,H=T[1],W=0,V=7,st=4;for(H===0&&(V=138,st=3),T[2*(B+1)+1]=65535,P=0;P<=B;P++)S=H,H=T[2*(P+1)+1],++W<V&&S===H||(W<st?d.bl_tree[2*S]+=W:S!==0?(S!==G&&d.bl_tree[2*S]++,d.bl_tree[2*k]++):W<=10?d.bl_tree[2*w]++:d.bl_tree[2*D]++,G=S,st=(W=0)===H?(V=138,3):S===H?(V=6,3):(V=7,4))}function z(d,T,B){var P,S,G=-1,H=T[1],W=0,V=7,st=4;for(H===0&&(V=138,st=3),P=0;P<=B;P++)if(S=H,H=T[2*(P+1)+1],!(++W<V&&S===H)){if(W<st)for(;Z(d,S,d.bl_tree),--W!=0;);else S!==0?(S!==G&&(Z(d,S,d.bl_tree),W--),Z(d,k,d.bl_tree),Y(d,W-3,2)):W<=10?(Z(d,w,d.bl_tree),Y(d,W-3,3)):(Z(d,D,d.bl_tree),Y(d,W-11,7));G=S,st=(W=0)===H?(V=138,3):S===H?(V=6,3):(V=7,4)}}c(M);var I=!1;function _(d,T,B,P){Y(d,(b<<1)+(P?1:0),3),function(S,G,H,W){it(S),J(S,H),J(S,~H),l.arraySet(S.pending_buf,S.window,G,H,S.pending),S.pending+=H}(d,T,B)}h._tr_init=function(d){I||(function(){var T,B,P,S,G,H=new Array(a+1);for(S=P=0;S<v-1;S++)for(L[S]=P,T=0;T<1<<x[S];T++)e[P++]=S;for(e[P-1]=S,S=G=0;S<16;S++)for(M[S]=G,T=0;T<1<<U[S];T++)C[G++]=S;for(G>>=7;S<o;S++)for(M[S]=G<<7,T=0;T<1<<U[S]-7;T++)C[256+G++]=S;for(B=0;B<=a;B++)H[B]=0;for(T=0;T<=143;)q[2*T+1]=8,T++,H[8]++;for(;T<=255;)q[2*T+1]=9,T++,H[9]++;for(;T<=279;)q[2*T+1]=7,T++,H[7]++;for(;T<=287;)q[2*T+1]=8,T++,H[8]++;for(ct(q,E+1,H),T=0;T<o;T++)y[2*T+1]=5,y[2*T]=at(T,5);Q=new et(q,x,g+1,E,a),F=new et(y,U,0,o,a),tt=new et(new Array(0),O,0,u,f)}(),I=!0),d.l_desc=new R(d.dyn_ltree,Q),d.d_desc=new R(d.dyn_dtree,F),d.bl_desc=new R(d.bl_tree,tt),d.bi_buf=0,d.bi_valid=0,rt(d)},h._tr_stored_block=_,h._tr_flush_block=function(d,T,B,P){var S,G,H=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=function(W){var V,st=4093624447;for(V=0;V<=31;V++,st>>>=1)if(1&st&&W.dyn_ltree[2*V]!==0)return s;if(W.dyn_ltree[18]!==0||W.dyn_ltree[20]!==0||W.dyn_ltree[26]!==0)return r;for(V=32;V<g;V++)if(W.dyn_ltree[2*V]!==0)return r;return s}(d)),ht(d,d.l_desc),ht(d,d.d_desc),H=function(W){var V;for(t(W,W.dyn_ltree,W.l_desc.max_code),t(W,W.dyn_dtree,W.d_desc.max_code),ht(W,W.bl_desc),V=u-1;3<=V&&W.bl_tree[2*j[V]+1]===0;V--);return W.opt_len+=3*(V+1)+5+5+4,V}(d),S=d.opt_len+3+7>>>3,(G=d.static_len+3+7>>>3)<=S&&(S=G)):S=G=B+5,B+4<=S&&T!==-1?_(d,T,B,P):d.strategy===4||G===S?(Y(d,2+(P?1:0),3),ft(d,q,y)):(Y(d,4+(P?1:0),3),function(W,V,st,nt){var dt;for(Y(W,V-257,5),Y(W,st-1,5),Y(W,nt-4,4),dt=0;dt<nt;dt++)Y(W,W.bl_tree[2*j[dt]+1],3);z(W,W.dyn_ltree,V-1),z(W,W.dyn_dtree,st-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,H+1),ft(d,d.dyn_ltree,d.dyn_dtree)),rt(d),P&&it(d)},h._tr_tally=function(d,T,B){return d.pending_buf[d.d_buf+2*d.last_lit]=T>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&T,d.pending_buf[d.l_buf+d.last_lit]=255&B,d.last_lit++,T===0?d.dyn_ltree[2*B]++:(d.matches++,T--,d.dyn_ltree[2*(e[B]+g+1)]++,d.dyn_dtree[2*N(T)]++),d.last_lit===d.lit_bufsize-1},h._tr_align=function(d){Y(d,2,3),Z(d,m,q),function(T){T.bi_valid===16?(J(T,T.bi_buf),T.bi_buf=0,T.bi_valid=0):8<=T.bi_valid&&(T.pending_buf[T.pending++]=255&T.bi_buf,T.bi_buf>>=8,T.bi_valid-=8)}(d)}},{"../utils/common":41}],53:[function(p,A,h){A.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(p,A,h){(function(l){(function(s,r){if(!s.setImmediate){var c,b,v,g,E=1,o={},u=!1,n=s.document,a=Object.getPrototypeOf&&Object.getPrototypeOf(s);a=a&&a.setTimeout?a:s,c={}.toString.call(s.process)==="[object process]"?function(k){process.nextTick(function(){f(k)})}:function(){if(s.postMessage&&!s.importScripts){var k=!0,w=s.onmessage;return s.onmessage=function(){k=!1},s.postMessage("","*"),s.onmessage=w,k}}()?(g="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",m,!1):s.attachEvent("onmessage",m),function(k){s.postMessage(g+k,"*")}):s.MessageChannel?((v=new MessageChannel).port1.onmessage=function(k){f(k.data)},function(k){v.port2.postMessage(k)}):n&&"onreadystatechange"in n.createElement("script")?(b=n.documentElement,function(k){var w=n.createElement("script");w.onreadystatechange=function(){f(k),w.onreadystatechange=null,b.removeChild(w),w=null},b.appendChild(w)}):function(k){setTimeout(f,0,k)},a.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var w=new Array(arguments.length-1),D=0;D<w.length;D++)w[D]=arguments[D+1];var x={callback:k,args:w};return o[E]=x,c(E),E++},a.clearImmediate=i}function i(k){delete o[k]}function f(k){if(u)setTimeout(f,0,k);else{var w=o[k];if(w){u=!0;try{(function(D){var x=D.callback,U=D.args;switch(U.length){case 0:x();break;case 1:x(U[0]);break;case 2:x(U[0],U[1]);break;case 3:x(U[0],U[1],U[2]);break;default:x.apply(r,U)}})(w)}finally{i(k),u=!1}}}}function m(k){k.source===s&&typeof k.data=="string"&&k.data.indexOf(g)===0&&f(+k.data.slice(g.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof wt<"u"?wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Lt);var $t=Lt.exports;const Rt=Zt($t);async function Xt(X,K,p,A){$("Starting conversion to NewPipe format...");let h,l=new Rt,s="",r=null,c=null;if(p==="merge"&&X){$("Loading existing NewPipe backup...");const u=await X.arrayBuffer(),n=await Rt.loadAsync(u),a=n.file("newpipe.db");if(a){const m=await a.async("uint8array");h=new A.Database(m),$("Database loaded. Running integrity check...");const k=h.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");k&&k[0]&&k[0].values&&$(`Existing NewPipe database contains: ${k[0].values.flat().join(", ")} tables.`,"schema");try{Gt(h);try{const w=h.exec("PRAGMA table_info('stream_state')")||[],D=h.exec("PRAGMA foreign_key_list('stream_state')")||[],x=h.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];s+=`PRAGMA table_info("stream_state"):
`,w.length>0&&(s+=JSON.stringify(w[0],null,2)+`
`),s+=`
PRAGMA foreign_key_list("stream_state"):
`,D.length>0&&(s+=JSON.stringify(D[0],null,2)+`
`),s+=`
CREATE statement:
`,x.length>0&&x[0].values&&x[0].values.length>0&&(s+=x[0].values[0][0]+`
`)}catch(w){s+="Failed to collect stream_state debug info: "+(w.message||w.toString())+`
`}}catch(w){$("Warning: failed to ensure stream_state schema: "+(w.message||w.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const i=n.file("preferences.json");i&&(r=await i.async("string"));const f=n.file("newpipe.settings");f&&(c=await f.async("blob"))}else{$("Creating new NewPipe database..."),h=new A.Database,Mt(h);try{const u=h.exec("PRAGMA table_info('stream_state')")||[],n=h.exec("PRAGMA foreign_key_list('stream_state')")||[],a=h.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];s+=`PRAGMA table_info("stream_state"):
`,u.length>0&&(s+=JSON.stringify(u[0],null,2)+`
`),s+=`
PRAGMA foreign_key_list("stream_state"):
`,n.length>0&&(s+=JSON.stringify(n[0],null,2)+`
`),s+=`
CREATE statement:
`,a.length>0&&a[0].values&&a[0].values.length>0&&(s+=a[0].values[0][0]+`
`)}catch(u){s+="Failed to collect stream_state debug info (new DB): "+(u.message||u.toString())+`
`}}$("Parsing LibreTube JSON...");const b=await K.text(),v=JSON.parse(b);h.run("BEGIN TRANSACTION");try{$("Processing Subscriptions..."),p==="merge"&&h.run(`DELETE FROM subscriptions WHERE service_id = ${mt}`);let u=0;if(v.subscriptions){const n=h.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");v.subscriptions.forEach(a=>{try{const i=a.url||`https://www.youtube.com/channel/${a.channelId}`,f=a.name||"Unknown",m=a.avatar||a.avatarUrl||null;if(!i.includes("youtube.com")&&!i.includes("youtu.be")){$(`Dropped non-YouTube subscription: ${f} (${i})`,"warn");return}n.run([mt,i,f,m,0,"",0]),u++}catch(i){$(`ERROR inserting subscription ${a.name}: ${i.message||i.toString()}`,"err")}}),n.free()}$(`Inserted ${u} subscriptions.`)}catch(u){throw $(`FATAL ERROR during Subscriptions phase: ${u.message||u.toString()}`,"err"),u}try{$("Processing Playlists..."),p==="merge"&&(h.run("DELETE FROM playlists"),h.run("DELETE FROM playlist_stream_join"),h.run("DELETE FROM remote_playlists"),$("Cleared existing playlists and joins."));let u=0;if(v.localPlaylists){const n=h.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),a=h.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),i=h.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)");for(const f of v.localPlaylists){const m=f.playlist.name||"Untitled";try{if(h.exec(`SELECT uid FROM playlists WHERE name = '${m.replace(/'/g,"''")}'`).length>0){$(`Skipping duplicate local playlist: ${m}`,"warn");continue}a.run([m,0,-1,u]);const D=h.exec("SELECT last_insert_rowid()")[0].values[0][0];let x=0;for(const U of f.videos){const O=`https://www.youtube.com/watch?v=${U.videoId}`;if(!U.videoId){$(`Skipped video in playlist ${m} due to missing videoId.`,"warn");continue}try{const j=U.title||"Unknown",q=U.uploader||"Unknown",y=U.duration||0,C=U.uploadDate?new Date(U.uploadDate).getTime()/1e3:null,e=U.thumbnailUrl||null;n.run([mt,O,j,"VIDEO_STREAM",y,q,C,e]);const L=h.exec(`SELECT uid FROM streams WHERE service_id=${mt} AND url='${O.replace(/'/g,"''")}'`);if(L.length>0&&L[0].values.length>0){const Q=L[0].values[0][0];i.run([D,Q,x++])}else $(`Warning: Could not find/insert stream for video ${j}`,"warn")}catch(j){$(`ERROR processing video "${U.title}" in playlist "${m}": ${j.message||j.toString()}`,"err")}}u++}catch(k){throw $(`FATAL ERROR processing playlist "${m}": ${k.message||k.toString()}`,"err"),k}}n.free(),a.free(),i.free()}$(`Processed ${u} local playlists.`)}catch(u){throw $(`FATAL ERROR during Local Playlists phase: ${u.message||u.toString()}`,"err"),u}try{$("Processing Remote Playlist Bookmarks...");let u=0;const n=h.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)");if(v.playlistBookmarks){for(const a of v.playlistBookmarks)try{const i=a.url||(a.playlistId?`https://www.youtube.com/playlist?list=${a.playlistId}`:null);if(!i||!i.includes("youtube.com")&&!i.includes("youtu.be")){$(`Dropped non-YouTube remote playlist: ${a.playlistName||"Untitled"}`,"warn");continue}const f=a.playlistName||a.name||"Untitled",m=a.thumbnailUrl||null,k=a.uploader||"Unknown",w=typeof a.videos=="number"?a.videos:0;n.run([mt,f,i,m,k,u++,w])}catch(i){$(`ERROR inserting remote playlist ${a.playlistName||"Untitled"}: ${i.message||i.toString()}`,"err")}n.free()}$(`Processed ${u} remote playlist bookmarks.`)}catch(u){throw $(`FATAL ERROR during Remote Playlists phase: ${u.message||u.toString()}`,"err"),u}try{$("Processing Watch History...");let u=0;const n=v.history||v.watchHistory||v.watch_history||v.watch_history_items||[];if(n&&n.length>0){const a=h.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),i=h.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),f=h.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const m of n)try{const k=m.videoId||m.videoIdStr||m.id||m.url&&(m.url.match(/v=([^&]+)/)||[])[1];if(!k)continue;const w=`https://www.youtube.com/watch?v=${k}`,D=m.title||m.name||"Unknown",x=m.uploader||m.uploaderName||"Unknown",U=m.duration||m.length||0,O=m.uploadDate?isNaN(Number(m.uploadDate))?Math.floor(new Date(m.uploadDate).getTime()/1e3):Math.floor(Number(m.uploadDate)):null,j=m.thumbnailUrl||m.thumbnail||null,q=m.currentTime||m.position||m.progress||0,y=Math.floor(Number(q||0)*1e3);let C=m.accessDate||m.accessedAt||m.lastWatched||m.timestamp||m.date||m.time,e;if(!C)e=Math.floor(Date.now()/1e3);else if(typeof C=="number")e=C>1e12?Math.floor(C/1e3):Math.floor(C);else{const F=Date.parse(String(C));e=isNaN(F)?Math.floor(Date.now()/1e3):Math.floor(F/1e3)}const L=m.repeatCount||m.watchCount||m.playCount||m.repeat_count||1;a.run([mt,w,D,"VIDEO_STREAM",U,x,O,j]);const Q=h.exec(`SELECT uid FROM streams WHERE service_id=${mt} AND url='${w.replace(/'/g,"''")}'`);if(Q.length>0&&Q[0].values.length>0){const F=Q[0].values[0][0];try{i.run([y,F])}catch(tt){$(`WARN: failed to write stream_state for ${k}: ${tt.message||tt.toString()}`,"warn")}try{if(p==="merge"){const tt=h.exec(`SELECT repeat_count FROM stream_history WHERE stream_id = ${F} AND access_date = ${e}`);if(tt&&tt.length>0&&tt[0].values.length>0){const et=(Number(tt[0].values[0][0])||0)+Number(L||1);h.run(`UPDATE stream_history SET repeat_count = ${et} WHERE stream_id = ${F} AND access_date = ${e}`)}else f.run([F,e,Number(L||1)])}else f.run([F,e,Number(L||1)])}catch(tt){$(`WARN: failed to write stream_history for ${k}: ${tt.message||tt.toString()}`,"warn")}u++}}catch(k){$(`ERROR processing history item: ${k.message||k.toString()}`,"warn")}a.free(),i.free(),f.free()}$(`Processed ${u} history items.`)}catch(u){$(`Error processing history: ${u.message}`,"err")}try{h.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),$("Inserted room_master_table identity.")}catch(u){$("Error inserting room_master_table: "+u.message,"warn")}try{$("Committing transaction..."),h.run("COMMIT")}catch(u){throw $(`FATAL ERROR on COMMIT: ${u.message||u.toString()}`,"err"),u}$("Exporting database...");const g=h.export();if(l.file("newpipe.db",g),r?(l.file("preferences.json",r),$("Preserved existing preferences.json.")):(l.file("preferences.json",JSON.stringify(Wt,null,2)),$("Created default preferences.json.")),c&&(l.file("newpipe.settings",c),$("Preserved existing newpipe.settings.")),l.file("stream_state_debug.txt",s||"No stream_state debug information collected."),$("Attached stream_state_debug.txt to zip for inspection.","schema"),s){const u=s.split(`
`).slice(0,12).join(`
`);$(`stream_state_debug preview:
`+u,"schema")}const E=await l.generateAsync({type:"blob"}),o=At();Nt(E,"newpipe_converted.zip",o),$("Done! File downloaded.","info")}async function Yt(X,K,p,A){$("Starting conversion to LibreTube format...");let h={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[]};if(p==="merge"&&K){$("Reading target LibreTube file...");const a=await K.text();h=JSON.parse(a),h.subscriptions=[],h.playlistBookmarks=[],h.localPlaylists=[],$("Target LibreTube file loaded and old playlist/subscription data cleared for merge.")}$("Reading NewPipe backup...");const l=await X.arrayBuffer(),r=(await Rt.loadAsync(l)).file("newpipe.db");if(!r)throw new Error("NewPipe ZIP must contain newpipe.db");const c=await r.async("uint8array"),b=new A.Database(c);$("NewPipe database loaded.");try{let a="";const i=b.exec("PRAGMA table_info('stream_state')")||[],f=b.exec("PRAGMA foreign_key_list('stream_state')")||[],m=b.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,i.length>0&&(a+=JSON.stringify(i[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,f.length>0&&(a+=JSON.stringify(f[0],null,2)+`
`),a+=`
CREATE statement:
`,m.length>0&&m[0].values&&m[0].values.length>0&&(a+=m[0].values[0][0]+`
`);const k=new Blob([a||"No stream_state debug info collected."],{type:"text/plain"}),w=At();Nt(k,"stream_state_debug_input.txt",w),$("Downloaded separate stream_state debug file for input NewPipe DB.","schema")}catch(a){$("Failed to collect input stream_state debug: "+(a.message||a.toString()),"warn")}$("Extracting Subscriptions...");const v=b.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${mt}`);v.length>0&&v[0].values.forEach(i=>{const f=i[0];if(!f||!f.includes("youtube.com")&&!f.includes("youtu.be")){$(`Dropped non-YouTube subscription URL: ${i[1]}`,"warn");return}let m="";const k=f.match(/channel\/([\w-]+)/),w=f.match(/user\/([\w-]+)/);k?m=k[1]:w&&(m=w[1]),h.subscriptions.push({channelId:m,url:f,name:i[1],avatar:i[2],verified:!1})}),$(`Extracted ${h.subscriptions.length} YouTube subscriptions.`),$("Extracting Remote Playlists...");const g=b.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${mt}`);g.length>0&&g[0].values.forEach(i=>{const f=i[1];if(!f||!f.includes("youtube.com")&&!f.includes("youtu.be")){$(`Dropped non-YouTube remote playlist URL: ${i[0]}`,"warn");return}const m=f.match(/[?&]list=([^&]+)/),k=m?m[1]:"";h.playlistBookmarks.push({playlistId:k,playlistName:i[0],thumbnailUrl:i[3],uploader:i[2],uploaderUrl:"",videos:i[4]})}),$(`Extracted ${h.playlistBookmarks.length} remote playlist bookmarks.`),$("Extracting Local Playlists...");const E=b.exec("SELECT uid, name FROM playlists");if(E.length>0)for(const a of E[0].values){const i=a[0],f=a[1],m=[],k=b.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${i} AND s.service_id = ${mt}
                    ORDER BY j.join_index ASC
                `);k.length>0&&k[0].values.forEach(w=>{const D=w[0],x=D.match(/v=([^&]+)/),U=x?x[1]:"";if(!U){$(`Warning: Skipped stream in playlist "${f}" due to unparseable URL: ${D}`,"warn");return}m.push({id:U,playlistId:i,videoId:U,title:w[1],uploadDate:w[4]?new Date(w[4]*1e3).toISOString().split("T")[0]:"1970-01-01",uploader:w[3],thumbnailUrl:w[5],duration:w[2]})}),(m.length>0||f)&&h.localPlaylists.push({playlist:{id:i,name:f,thumbnailUrl:m.length>0?m[0].thumbnailUrl:""},videos:m})}$(`Extracted ${h.localPlaylists.length} local playlists.`);const o=JSON.stringify(h,null,2),u=new Blob([o],{type:"application/json"}),n=At();Nt(u,"libretube_converted.json",n),$("Done! File downloaded.","info")}let It;window.onload=async()=>{$("Initializing SQL.js...");try{It=await jt(),$("SQL.js ready.")}catch(X){$("Error loading SQL.js: "+(X.message||X.toString()),"err")}Dt(),Kt()};function Dt(){const X=document.querySelector('input[name="mode"]:checked'),K=X?X.value:"convert",p=document.getElementById("btn-to-newpipe"),A=document.getElementById("btn-to-libretube"),h=document.getElementById("file-newpipe"),l=document.getElementById("file-libretube");!p||!A||!h||!l||(K==="merge"?(p.textContent="Merge into NewPipe",A.textContent="Merge into LibreTube",h.disabled=!1,l.disabled=!1):(p.textContent="Convert LibreTube -> NewPipe",A.textContent="Convert NewPipe -> LibreTube"))}async function Ht(X){var l,s;const K=document.querySelector('input[name="mode"]:checked'),p=K?K.value:"convert",A=(l=document.getElementById("file-newpipe").files)==null?void 0:l[0],h=(s=document.getElementById("file-libretube").files)==null?void 0:s[0];if(p==="merge"&&(!A||!h))return $("Merge mode requires BOTH files.","err");if(p==="convert"){if(X==="to_newpipe"&&!h)return $("Missing LibreTube source file.","err");if(X==="to_libretube"&&!A)return $("Missing NewPipe source file.","err")}try{document.querySelectorAll(".controls button").forEach(r=>r.disabled=!0),X==="to_newpipe"?await Xt(A,h,p,It):await Yt(A,h,p,It)}catch(r){$(`FATAL ERROR: ${r.message||r.toString()||"An unknown error occurred"}`,"err"),r.stack?$(`Stack Trace: ${r.stack}`,"err"):$(`Error Object: ${r.toString()}`,"err"),console.error(r)}finally{document.querySelectorAll(".controls button").forEach(r=>r.disabled=!1)}}window.processBackup=Ht;window.updateUI=Dt;function Kt(){document.querySelectorAll(".drop-zone").forEach(X=>{const K=X.querySelector('input[type="file"]'),p=X.querySelector(".file-name");K&&(X.addEventListener("click",A=>{A.target!==K&&K.click()}),X.addEventListener("keydown",A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),K.click())}),X.addEventListener("dragover",A=>{A.preventDefault(),X.classList.add("active")}),X.addEventListener("dragleave",()=>{X.classList.remove("active")}),X.addEventListener("drop",A=>{A.preventDefault(),X.classList.remove("active");const h=A.dataTransfer&&A.dataTransfer.files;if(h&&h.length)try{const l=new DataTransfer;for(let s=0;s<h.length;s++)l.items.add(h[s]);K.files=l.files,K.dispatchEvent(new Event("change",{bubbles:!0}))}catch(l){console.warn("Could not set input.files programmatically",l)}}),K.addEventListener("change",()=>{const A=K.files&&K.files[0];p&&(p.textContent=A?A.name:"")}))})}export{Zt as a,qt as g};
//# sourceMappingURL=index-BHzqMARE.js.map

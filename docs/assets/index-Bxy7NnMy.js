var Fn=Object.defineProperty;var qn=(E,x,l)=>x in E?Fn(E,x,{enumerable:!0,configurable:!0,writable:!0,value:l}):E[x]=l;var ae=(E,x,l)=>qn(E,typeof x!="symbol"?x+"":x,l);(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))k(m);new MutationObserver(m=>{for(const o of m)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&k(u)}).observe(document,{childList:!0,subtree:!0});function l(m){const o={};return m.integrity&&(o.integrity=m.integrity),m.referrerPolicy&&(o.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?o.credentials="include":m.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function k(m){if(m.ep)return;m.ep=!0;const o=l(m);fetch(m.href,o)}})();function jn(E){return x=>{customElements.define(E,x)}}function Jt(E={type:String}){return function(x,l){const k=x.constructor;k.observedAttributes||(k.observedAttributes=[]);const m=E.attribute||l.toLowerCase();k.observedAttributes.includes(m)||k.observedAttributes.push(m);const o=Symbol(l);Object.defineProperty(x,l,{get(){return this[o]},set(u){const a=this[o];E.type===Boolean?this[o]=u===""||u==="true"||u===!0:this[o]=u,this.requestUpdate&&this.requestUpdate(l,a,this[o])},enumerable:!0,configurable:!0})}}function $n(){return function(E,x){const l=Symbol(x);Object.defineProperty(E,x,{get(){return this[l]},set(k){const m=this[l];this[l]=k,this.requestUpdate&&this.requestUpdate(x,m,k)},enumerable:!0,configurable:!0})}}function Wn(E){if(!E||typeof E!="object"||!("date"in E)||!("count"in E))return!1;const x=E,l=new Date(x.date);return!(isNaN(l.getTime())||typeof x.count!="number"||x.count<0)}const Te={default:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],green:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],red:["#ebedf0","#ffcdd2","#ef5350","#e53935","#b71c1c"],blue:["#ebedf0","#bbdefb","#64b5f6","#1e88e5","#0d47a1"],yellow:["#ebedf0","#fff9c4","#ffee58","#fdd835","#f57f17"],purple:["#ebedf0","#e1bee7","#ab47bc","#8e24aa","#4a148c"]},Gn=E=>E in Te&&E!=="default",Hn=`
  <style>
    :host {
      display: inline-block;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
    }

    /* Dark mode styles */
    :host([dark-mode]) {
      color: #c9d1d9;
      background-color: transparent;
    }

    .container {
      display: inline-grid;
      grid-template-rows: auto 1fr;
    }

    .months {
      display: flex;
      padding-left: 32px;
      font-size: 12px;
      color: #767676;
      height: 20px;
    }

    :host([dark-mode]) .months {
      color: #8b949e;
    }

    .months-spacer {
      width: 30px;
    }

    .months-container {
      display: flex;
      justify-content: space-between;
      flex: 1;
    }

    .months span {
      padding: 0 4px;
    }

    .grid-wrapper {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 4px;
    }

    .weekdays {
      display: grid;
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
      text-align: right;
      padding-left: 6px;
      padding-right: 2px;
      font-size: 12px;
      color: #767676;
      margin-top: -1px;
      height: calc(7 * 10px + 6 * 2px);
    }

    :host([dark-mode]) .weekdays {
      color: #8b949e;
    }

    .weekdays div {
      height: 10px;
      line-height: 10px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(var(--grid-columns), 1fr);
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
    }

    .cell {
      width: 10px;
      height: 10px;
      border-radius: 2px;
    }
  </style>
`,Zn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Mr={mondayStart:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],sundayStart:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},ye={light:"#ebedf0",dark:"#161b22"},qe=E=>`${E.getFullYear()}-${(E.getMonth()+1).toString().padStart(2,"0")}-${E.getDate().toString().padStart(2,"0")}`;class Xn{createMonthLabels(x,l){const k=[],m=new Date(x);for(m.setDate(1);m<=l;)k.push(Zn[m.getMonth()]),m.setMonth(m.getMonth()+1);return`
            <div class="months-container">
                ${k.map(o=>`<span>${o}</span>`).join("")}
            </div>
        `}createWeekLabels(x,l=[0,1,2,3,4,5,6]){return`
            <div class="weekdays">
                ${(x?Mr.mondayStart:Mr.sundayStart).map((k,m)=>`<div>${l.includes(m)?k:""}</div>`).join(`
`)}
            </div>
        `}getWeeksBetweenDates(x,l){const k=Math.abs(l.getTime()-x.getTime());return Math.ceil(k/6048e5)}defaultTitleFormatter(x,l,k){const m=l===1?"activity":"activities";return`${x.toDateString()}: ${l} ${m}`}createGridCells(x,l,k,m,o,u,a,p){let r="";const T=u?5:7,S=new Date(k),A=new Date(l);A.setHours(0,0,0,0);let h=u?5-k.getDay():7-k.getDay();a&&(h+=1),S.setDate(S.getDate()+h);const _=new Date(l),c=a?(l.getDay()||7)-1:l.getDay();c!==0&&_.setDate(l.getDate()-c);const g=this.getWeeksBetweenDates(S,l);for(let f=0;f<T;f++){const v=f>4;if(!(u&&v))for(let N=0;N<g;N++){const R=new Date(_);R.setDate(R.getDate()+f+N*7),R.setHours(0,0,0,0);const O=qe(R),B=x[O];if(R<A)r+=`
                        <div class="cell" 
                            style="background-color: transparent">
                        </div>`;else if(R<=k)if(B){const D=p?p(R,B.count,B.id):this.defaultTitleFormatter(R,B.count,B.id);r+=`
                            <div class="cell" 
                                style="background-color: ${m[B.level]||o}"
                                title="${D}"
                                data-date="${O}"
                                data-count="${B.count}"
            					${B.id?`cell-id="${B.id}"`:""}>
                            </div>`}else{const D=p?p(R,0):this.defaultTitleFormatter(R,0);r+=`
                            <div class="cell" 
                                style="background-color: ${o}"
                                title="${D}"
                                data-date="${O}"
                                data-count="0">
                            </div>`}else R<=S&&(r+=`
                        <div class="cell" 
                            style="background-color: transparent">
                        </div>`)}}return r}render(x,l,k,m){const o=new Date(k);let u=m.skipWeekends?5-k.getDay():7-k.getDay();m.startWeekOnMonday&&(u+=1),o.setDate(o.getDate()+u);const a=this.getWeeksBetweenDates(o,l),p=this.createMonthLabels(l,k),r=this.createWeekLabels(m.startWeekOnMonday,m.startWeekOnMonday?[0,2,4]:[1,3,5]),T=this.createGridCells(x,l,k,m.colors,m.emptyColor,m.skipWeekends,m.startWeekOnMonday,m.titleFormatter);return{html:`
            <div class="container">
                <div class="months">${p}</div>
                <div class="grid-wrapper">
                    ${r}
                    <div class="grid">
                        ${T}
                    </div>
                </div>
            </div>
        `,numOfWeeks:a}}}function Yn(E){return new CustomEvent("cell-click",{detail:E,bubbles:!0,composed:!0})}var Kn=Object.defineProperty,Vn=Object.getOwnPropertyDescriptor,Yt=(E,x,l,k)=>{for(var m=k>1?void 0:k?Vn(x,l):x,o=E.length-1,u;o>=0;o--)(u=E[o])&&(m=(k?u(x,l,m):u(m))||m);return k&&m&&Kn(x,l,m),m};let Ht=class extends HTMLElement{constructor(){super(),this.gridRenderer=new Xn,this._data=[],this._colors=Te.default,this._colorTheme=null,this._darkMode=!1,this._emptyColor=this._darkMode?ye.dark:ye.light,this._skipWeekends=!1,this._startWeekOnMonday=!1,this._endDate=new Date,this._titleFormatter=null,this.cells={},this.attachShadow({mode:"open"}),this._startDate=null}set data(E){this.validateActivityData(E)&&(this._data=E,this.updateGrid())}get data(){return this._data}set colors(E){if(!E||!Array.isArray(E)||E.length===0){console.warn("Invalid or empty colors array provided. Using default theme."),this._colors=Te.default,this.updateGrid();return}const x=E.filter(l=>!this.validateColor(l));if(x.length>0){console.warn(`Invalid colors found when trying to set color theme: ${x.join(", ")}. Using default theme.`),this._colors=Te.default,this.updateGrid();return}this._colorTheme||(this._colors=E,this.updateGrid())}get colors(){return this._colorTheme?Te[this._colorTheme]:this._colors}set colorTheme(E){E?Gn(E)?this._colorTheme=E:(console.warn(`Invalid color theme "${E}". Using default theme.`),this._colorTheme=null):this._colorTheme=null,this.updateGrid()}get colorTheme(){return this._colorTheme||""}set darkMode(E){this._darkMode=E,this.emptyColor=E?ye.dark:ye.light,this.updateGrid()}get darkMode(){return this._darkMode}set emptyColor(E){if(E===null||!this.validateColor(E)){this._emptyColor=this._darkMode?ye.dark:ye.light;return}this._emptyColor=E,this.updateGrid()}get emptyColor(){return this._emptyColor}set skipWeekends(E){this._skipWeekends=E,E&&(this.startWeekOnMonday=!0),this.updateGrid()}get skipWeekends(){return this._skipWeekends}set startWeekOnMonday(E){this._startWeekOnMonday=this.skipWeekends?!0:E,this.updateGrid()}get startWeekOnMonday(){return this._startWeekOnMonday}set endDate(E){const x=E?new Date(E):new Date;isNaN(x.getTime())?(console.warn("Invalid end-date provided. Using current date instead."),this._endDate=new Date):this._endDate=x,this.updateGrid()}get endDate(){return qe(this._endDate)}set startDate(E){const x=E?new Date(E):null;x&&!isNaN(x.getTime())?x>this._endDate?(console.warn("Start date cannot be after end date. Using one year before end date instead."),this._startDate=this.createDefaultStartDate()):this._startDate=x:this._startDate||(console.warn("Invalid start-date provided. Using one year before end date instead."),this._startDate=this.createDefaultStartDate()),this.isConnected&&this.updateGrid()}get startDate(){return this._startDate?qe(this._startDate):qe(this.createDefaultStartDate())}set titleFormatter(E){this._titleFormatter=E,this.updateGrid()}get titleFormatter(){return this._titleFormatter}connectedCallback(){this._startDate||(this._startDate=this.createDefaultStartDate()),this.updateGrid()}attributeChangedCallback(E,x,l){const k=E.replace(/-([a-z])/g,m=>m[1].toUpperCase());if(this[k]!==void 0){const m=this[k];if(typeof m=="boolean")this[k]=l!==null;else if(typeof m=="number")this[k]=Number(l);else if(Array.isArray(m))try{this[k]=JSON.parse(l||"[]")}catch(o){console.warn(`Invalid array value for ${E}:`,o)}else this[k]=l}}static get observedAttributes(){return["start-week-on-monday","skip-weekends","data","colors","color-theme","empty-color","max-level","end-date","start-date","dark-mode"]}createDefaultStartDate(){const E=new Date(this._endDate);E.setFullYear(E.getFullYear()-1);const x=this.startWeekOnMonday?(E.getDay()||7)-1:E.getDay();return x!==0&&E.setDate(E.getDate()-x),E}generateGridCells(){const E={};return this.data.forEach(x=>{E[x.date]={date:new Date(x.date),count:x.count,level:this.calculateLevel(x.count),ignore:!1,id:x.id}}),E}validateActivityData(E){if(!E||!Array.isArray(E))return console.warn("Invalid activity data: must be an array. Using empty array instead."),this._data=[],!1;const x=E.filter(l=>!Wn(l));return x.length>0&&console.warn("Invalid items found in activity data. They will be filtered out:",x),!0}validateColor(E){return CSS.supports("color",E)}calculateLevel(E){if(E===0)return 0;const x=this.colors.length-1,l=Math.max(...this.data.map(k=>k.count));return Math.ceil(E/l*x)}updateGrid(){if(!this.shadowRoot)return;this.cells=this.generateGridCells(),this._startDate||(this._startDate=this.createDefaultStartDate());const{html:E,numOfWeeks:x}=this.gridRenderer.render(this.cells,this._startDate,this._endDate,{colors:this.colors,emptyColor:this.emptyColor,skipWeekends:this.skipWeekends,startWeekOnMonday:this.startWeekOnMonday,titleFormatter:this.titleFormatter});this.style.setProperty("--grid-columns",x.toString()),this.shadowRoot.innerHTML=`${Hn}${E}`,this.attachEventListeners()}attachEventListeners(){this.shadowRoot&&this.shadowRoot.querySelectorAll(".cell[data-date]").forEach(E=>{E.addEventListener("click",x=>{const l=E.getAttribute("data-date"),k=parseInt(E.getAttribute("data-count")||"0",10),m=E.getAttribute("cell-id")||void 0;l&&this.dispatchEvent(Yn({date:l,count:k,id:m}))})})}};Yt([Jt({type:Array})],Ht.prototype,"data",1);Yt([Jt({type:Array})],Ht.prototype,"colors",1);Yt([Jt({type:String,attribute:"color-theme"})],Ht.prototype,"colorTheme",1);Yt([Jt({type:Boolean,attribute:"dark-mode"})],Ht.prototype,"darkMode",1);Yt([Jt({type:String,attribute:"empty-color"})],Ht.prototype,"emptyColor",1);Yt([Jt({type:Boolean})],Ht.prototype,"skipWeekends",1);Yt([Jt({type:Boolean})],Ht.prototype,"startWeekOnMonday",1);Yt([Jt({type:String,attribute:"end-date"})],Ht.prototype,"endDate",1);Yt([Jt({type:String,attribute:"start-date"})],Ht.prototype,"startDate",1);Yt([$n()],Ht.prototype,"cells",2);Ht=Yt([jn("activity-grid")],Ht);function G(E,x="info"){const l=document.getElementById("debug-console");if(!l)return;const k=document.createElement("div");k.textContent=`[${new Date().toLocaleTimeString()}] ${E}`,x==="err"?k.className="log-err":x==="warn"?k.className="log-warn":x==="schema"?k.className="log-schema":k.className="log-info",l.appendChild(k),l.scrollTop=l.scrollHeight}var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gr(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}function Qn(E){if(E.__esModule)return E;var x=E.default;if(typeof x=="function"){var l=function k(){return this instanceof k?Reflect.construct(x,arguments,this.constructor):x.apply(this,arguments)};l.prototype=x.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(E).forEach(function(k){var m=Object.getOwnPropertyDescriptor(E,k);Object.defineProperty(l,k,m.get?m:{enumerable:!0,get:function(){return E[k]}})}),l}var Hr={exports:{}};const Jn={},ti=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"})),Fr=Qn(ti);(function(E,x){var l=void 0,k=function(m){return l||(l=new Promise(function(o,u){var a=typeof m<"u"?m:{},p=a.onAbort;a.onAbort=function(t){u(new Error(t)),p&&p(t)},a.postRun=a.postRun||[],a.postRun.push(function(){o(a)}),E=void 0;var r;r||(r=typeof a<"u"?a:{});var T=typeof window=="object",S=typeof WorkerGlobalScope<"u",A=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";r.onRuntimeInitialized=function(){function t(U,V){switch(typeof V){case"boolean":zn(U,V?1:0);break;case"number":Bn(U,V);break;case"string":Pn(U,V,-1,-1);break;case"object":if(V===null)Br(U);else if(V.length!=null){var ct=Be(V,Le);Un(U,ct,V.length,-1),Pe(ct)}else Ue(U,"Wrong API use : tried to return a value of an unknown type ("+V+").",-1);break;default:Br(U)}}function e(U,V){for(var ct=[],mt=0;mt<U;mt+=1){var yt=Ct(V+4*mt,"i32"),St=xn(yt);if(St===1||St===2)yt=Ln(yt);else if(St===3)yt=Cn(yt);else if(St===4){St=yt,yt=On(St),St=Dn(St);for(var Zt=new Uint8Array(yt),Wt=0;Wt<yt;Wt+=1)Zt[Wt]=W[St+Wt];yt=Zt}else yt=null;ct.push(yt)}return ct}function i(U,V){this.Qa=U,this.db=V,this.Oa=1,this.lb=[]}function d(U,V){if(this.db=V,V=dt(U)+1,this.eb=nr(V),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Et(U,J,this.eb,V),this.kb=this.eb,this.Za=this.pb=null}function I(U){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),U!=null){var V=this.filename,ct="/",mt=V;if(ct&&(ct=typeof ct=="string"?ct:Ge(ct),mt=V?L(ct+"/"+V):ct),V=pe(!0,!0),mt=an(mt,V),U){if(typeof U=="string"){ct=Array(U.length);for(var yt=0,St=U.length;yt<St;++yt)ct[yt]=U.charCodeAt(yt);U=ct}xe(mt,V|146),ct=_e(mt,577),Tr(ct,U,0,U.length,0),Ve(ct),xe(mt,V)}}this.handleError(ft(this.filename,M)),this.db=Ct(M,"i32"),Ur(this.db),this.fb={},this.Sa={}}var M=se(4),Z=r.cwrap,ft=Z("sqlite3_open","number",["string","number"]),vt=Z("sqlite3_close_v2","number",["number"]),gt=Z("sqlite3_exec","number",["number","string","number","number","number"]),Ot=Z("sqlite3_changes","number",["number"]),Ut=Z("sqlite3_prepare_v2","number",["number","string","number","number","number"]),xr=Z("sqlite3_sql","string",["number"]),hn=Z("sqlite3_normalized_sql","string",["number"]),Or=Z("sqlite3_prepare_v2","number",["number","number","number","number","number"]),pn=Z("sqlite3_bind_text","number",["number","number","number","number","number"]),Cr=Z("sqlite3_bind_blob","number",["number","number","number","number","number"]),mn=Z("sqlite3_bind_double","number",["number","number","number"]),_n=Z("sqlite3_bind_int","number",["number","number","number"]),yn=Z("sqlite3_bind_parameter_index","number",["number","string"]),gn=Z("sqlite3_step","number",["number"]),bn=Z("sqlite3_errmsg","string",["number"]),vn=Z("sqlite3_column_count","number",["number"]),wn=Z("sqlite3_data_count","number",["number"]),En=Z("sqlite3_column_double","number",["number","number"]),Dr=Z("sqlite3_column_text","string",["number","number"]),kn=Z("sqlite3_column_blob","number",["number","number"]),Sn=Z("sqlite3_column_bytes","number",["number","number"]),Tn=Z("sqlite3_column_type","number",["number","number"]),An=Z("sqlite3_column_name","string",["number","number"]),Nn=Z("sqlite3_reset","number",["number"]),In=Z("sqlite3_clear_bindings","number",["number"]),Rn=Z("sqlite3_finalize","number",["number"]),Lr=Z("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),xn=Z("sqlite3_value_type","number",["number"]),On=Z("sqlite3_value_bytes","number",["number"]),Cn=Z("sqlite3_value_text","string",["number"]),Dn=Z("sqlite3_value_blob","number",["number"]),Ln=Z("sqlite3_value_double","number",["number"]),Bn=Z("sqlite3_result_double","",["number","number"]),Br=Z("sqlite3_result_null","",["number"]),Pn=Z("sqlite3_result_text","",["number","string","number","number"]),Un=Z("sqlite3_result_blob","",["number","number","number","number"]),zn=Z("sqlite3_result_int","",["number","number"]),Ue=Z("sqlite3_result_error","",["number","string","number"]),Pr=Z("sqlite3_aggregate_context","number",["number","number"]),Ur=Z("RegisterExtensionFunctions","number",["number"]),zr=Z("sqlite3_update_hook","number",["number","number","number"]);i.prototype.bind=function(U){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(U)?this.Cb(U):U!=null&&typeof U=="object"?this.Db(U):!0},i.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var U=gn(this.Qa);switch(U){case 100:return!0;case 101:return!1;default:throw this.db.handleError(U)}},i.prototype.wb=function(U){return U==null&&(U=this.Oa,this.Oa+=1),En(this.Qa,U)},i.prototype.Gb=function(U){if(U==null&&(U=this.Oa,this.Oa+=1),U=Dr(this.Qa,U),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(U)},i.prototype.Hb=function(U){return U==null&&(U=this.Oa,this.Oa+=1),Dr(this.Qa,U)},i.prototype.getBlob=function(U){U==null&&(U=this.Oa,this.Oa+=1);var V=Sn(this.Qa,U);U=kn(this.Qa,U);for(var ct=new Uint8Array(V),mt=0;mt<V;mt+=1)ct[mt]=W[U+mt];return ct},i.prototype.get=function(U,V){V=V||{},U!=null&&this.bind(U)&&this.step(),U=[];for(var ct=wn(this.Qa),mt=0;mt<ct;mt+=1)switch(Tn(this.Qa,mt)){case 1:var yt=V.useBigInt?this.Gb(mt):this.wb(mt);U.push(yt);break;case 2:U.push(this.wb(mt));break;case 3:U.push(this.Hb(mt));break;case 4:U.push(this.getBlob(mt));break;default:U.push(null)}return U},i.prototype.getColumnNames=function(){for(var U=[],V=vn(this.Qa),ct=0;ct<V;ct+=1)U.push(An(this.Qa,ct));return U},i.prototype.getAsObject=function(U,V){U=this.get(U,V),V=this.getColumnNames();for(var ct={},mt=0;mt<V.length;mt+=1)ct[V[mt]]=U[mt];return ct},i.prototype.getSQL=function(){return xr(this.Qa)},i.prototype.getNormalizedSQL=function(){return hn(this.Qa)},i.prototype.run=function(U){return U!=null&&this.bind(U),this.step(),this.reset()},i.prototype.sb=function(U,V){V==null&&(V=this.Oa,this.Oa+=1),U=wt(U);var ct=Be(U,Le);this.lb.push(ct),this.db.handleError(pn(this.Qa,V,ct,U.length-1,0))},i.prototype.Bb=function(U,V){V==null&&(V=this.Oa,this.Oa+=1);var ct=Be(U,Le);this.lb.push(ct),this.db.handleError(Cr(this.Qa,V,ct,U.length,0))},i.prototype.rb=function(U,V){V==null&&(V=this.Oa,this.Oa+=1),this.db.handleError((U===(U|0)?_n:mn)(this.Qa,V,U))},i.prototype.Eb=function(U){U==null&&(U=this.Oa,this.Oa+=1),Cr(this.Qa,U,0,0,0)},i.prototype.tb=function(U,V){switch(V==null&&(V=this.Oa,this.Oa+=1),typeof U){case"string":this.sb(U,V);return;case"number":this.rb(U,V);return;case"bigint":this.sb(U.toString(),V);return;case"boolean":this.rb(U+0,V);return;case"object":if(U===null){this.Eb(V);return}if(U.length!=null){this.Bb(U,V);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+U+")."},i.prototype.Db=function(U){var V=this;return Object.keys(U).forEach(function(ct){var mt=yn(V.Qa,ct);mt!==0&&V.tb(U[ct],mt)}),!0},i.prototype.Cb=function(U){for(var V=0;V<U.length;V+=1)this.tb(U[V],V+1);return!0},i.prototype.reset=function(){return this.freemem(),In(this.Qa)===0&&Nn(this.Qa)===0},i.prototype.freemem=function(){for(var U;(U=this.lb.pop())!==void 0;)Pe(U)},i.prototype.free=function(){this.freemem();var U=Rn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,U},d.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var U=Se(),V=se(4);n(M),n(V);try{this.db.handleError(Or(this.db.db,this.kb,-1,M,V)),this.kb=Ct(V,"i32");var ct=Ct(M,"i32");return ct===0?(this.mb(),{done:!0}):(this.Za=new i(ct,this.db),this.db.fb[ct]=this.Za,{value:this.Za,done:!1})}catch(mt){throw this.pb=w(this.kb),this.mb(),mt}finally{ke(U)}},d.prototype.mb=function(){Pe(this.eb),this.eb=null},d.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:w(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(d.prototype[Symbol.iterator]=function(){return this}),I.prototype.run=function(U,V){if(!this.db)throw"Database closed";if(V){U=this.prepare(U,V);try{U.step()}finally{U.free()}}else this.handleError(gt(this.db,U,0,0,M));return this},I.prototype.exec=function(U,V,ct){if(!this.db)throw"Database closed";var mt=Se(),yt=null;try{var St=er(U),Zt=se(4);for(U=[];Ct(St,"i8")!==0;){n(M),n(Zt),this.handleError(Or(this.db,St,-1,M,Zt));var Wt=Ct(M,"i32");if(St=Ct(Zt,"i32"),Wt!==0){var Mt=null;for(yt=new i(Wt,this),V!=null&&yt.bind(V);yt.step();)Mt===null&&(Mt={columns:yt.getColumnNames(),values:[]},U.push(Mt)),Mt.values.push(yt.get(null,ct));yt.free()}}return U}catch(Xt){throw yt&&yt.free(),Xt}finally{ke(mt)}},I.prototype.each=function(U,V,ct,mt,yt){typeof V=="function"&&(mt=ct,ct=V,V=void 0),U=this.prepare(U,V);try{for(;U.step();)ct(U.getAsObject(null,yt))}finally{U.free()}if(typeof mt=="function")return mt()},I.prototype.prepare=function(U,V){if(n(M),this.handleError(Ut(this.db,U,-1,M,0)),U=Ct(M,"i32"),U===0)throw"Nothing to prepare";var ct=new i(U,this);return V!=null&&ct.bind(V),this.fb[U]=ct},I.prototype.iterateStatements=function(U){return new d(U,this)},I.prototype.export=function(){Object.values(this.fb).forEach(function(V){V.free()}),Object.values(this.Sa).forEach(ie),this.Sa={},this.handleError(vt(this.db));var U=on(this.filename);return this.handleError(ft(this.filename,M)),this.db=Ct(M,"i32"),Ur(this.db),U},I.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(U){U.free()}),Object.values(this.Sa).forEach(ie),this.Sa={},this.Ya&&(ie(this.Ya),this.Ya=void 0),this.handleError(vt(this.db)),vr("/"+this.filename),this.db=null)},I.prototype.handleError=function(U){if(U===0)return null;throw U=bn(this.db),Error(U)},I.prototype.getRowsModified=function(){return Ot(this.db)},I.prototype.create_function=function(U,V){Object.prototype.hasOwnProperty.call(this.Sa,U)&&(ie(this.Sa[U]),delete this.Sa[U]);var ct=Ee(function(mt,yt,St){yt=e(yt,St);try{var Zt=V.apply(null,yt)}catch(Wt){Ue(mt,Wt,-1);return}t(mt,Zt)},"viii");return this.Sa[U]=ct,this.handleError(Lr(this.db,U,V.length,1,0,ct,0,0,0)),this},I.prototype.create_aggregate=function(U,V){var ct=V.init||function(){return null},mt=V.finalize||function(Mt){return Mt},yt=V.step;if(!yt)throw"An aggregate function must have a step function in "+U;var St={};Object.hasOwnProperty.call(this.Sa,U)&&(ie(this.Sa[U]),delete this.Sa[U]),V=U+"__finalize",Object.hasOwnProperty.call(this.Sa,V)&&(ie(this.Sa[V]),delete this.Sa[V]);var Zt=Ee(function(Mt,Xt,sr){var he=Pr(Mt,1);Object.hasOwnProperty.call(St,he)||(St[he]=ct()),Xt=e(Xt,sr),Xt=[St[he]].concat(Xt);try{St[he]=yt.apply(null,Xt)}catch(Mn){delete St[he],Ue(Mt,Mn,-1)}},"viii"),Wt=Ee(function(Mt){var Xt=Pr(Mt,1);try{var sr=mt(St[Xt])}catch(he){delete St[Xt],Ue(Mt,he,-1);return}t(Mt,sr),delete St[Xt]},"vi");return this.Sa[U]=Zt,this.Sa[V]=Wt,this.handleError(Lr(this.db,U,yt.length-1,1,0,0,Zt,Wt,0)),this},I.prototype.updateHook=function(U){this.Ya&&(zr(this.db,0,0),ie(this.Ya),this.Ya=void 0),U&&(this.Ya=Ee(function(V,ct,mt,yt,St){switch(ct){case 18:V="insert";break;case 23:V="update";break;case 9:V="delete";break;default:throw"unknown operationCode in updateHook callback: "+ct}if(mt=mt?j(J,mt):"",yt=yt?j(J,yt):"",St>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";U(V,mt,yt,Number(St))},"viiiij"),zr(this.db,this.Ya,0))},r.Database=I};var h={...r},_="./this.program",c=(t,e)=>{throw e},g="",f,v;if(A){var N=Fr;g=__dirname+"/",v=t=>(t=pt(t)?new URL(t):t,N.readFileSync(t)),f=async t=>(t=pt(t)?new URL(t):t,N.readFileSync(t,void 0)),!r.thisProgram&&1<process.argv.length&&(_=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),E.exports=r,c=(t,e)=>{throw process.exitCode=t,e}}else(T||S)&&(S?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=g.startsWith("blob:")?"":g.slice(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),S&&(v=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=async t=>{if(pt(t))return new Promise((i,d)=>{var I=new XMLHttpRequest;I.open("GET",t,!0),I.responseType="arraybuffer",I.onload=()=>{I.status==200||I.status==0&&I.response?i(I.response):d(I.status)},I.onerror=d,I.send(null)});var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw Error(e.status+" : "+e.url)});var R=r.print||console.log.bind(console),O=r.printErr||console.error.bind(console);Object.assign(r,h),h=null,r.thisProgram&&(_=r.thisProgram);var B=r.wasmBinary,D,q=!1,C,W,J,y,P,s,H,lt,Y,pt=t=>t.startsWith("file://");function tt(){var t=D.buffer;r.HEAP8=W=new Int8Array(t),r.HEAP16=y=new Int16Array(t),r.HEAPU8=J=new Uint8Array(t),r.HEAPU16=new Uint16Array(t),r.HEAP32=P=new Int32Array(t),r.HEAPU32=s=new Uint32Array(t),r.HEAPF32=H=new Float32Array(t),r.HEAPF64=Y=new Float64Array(t),r.HEAP64=lt=new BigInt64Array(t),r.HEAPU64=new BigUint64Array(t)}var ot=0,F=null;function z(t){var e;throw(e=r.onAbort)==null||e.call(r,t),t="Aborted("+t+")",O(t),q=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var ut;async function it(t){if(!B)try{var e=await f(t);return new Uint8Array(e)}catch{}if(t==ut&&B)t=new Uint8Array(B);else if(v)t=v(t);else throw"both async and sync fetching of the wasm failed";return t}async function et(t,e){try{var i=await it(t);return await WebAssembly.instantiate(i,e)}catch(d){O(`failed to asynchronously prepare wasm: ${d}`),z(d)}}async function Tt(t){var e=ut;if(!B&&typeof WebAssembly.instantiateStreaming=="function"&&!pt(e)&&!A)try{var i=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(i,t)}catch(d){O(`wasm streaming compile failed: ${d}`),O("falling back to ArrayBuffer instantiation")}return et(e,t)}class At{constructor(e){ae(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var bt=t=>{for(;0<t.length;)t.shift()(r)},kt=[],It=[],Rt=()=>{var t=r.preRun.shift();It.unshift(t)};function Ct(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return W[t];case"i8":return W[t];case"i16":return y[t>>1];case"i32":return P[t>>2];case"i64":return lt[t>>3];case"float":return H[t>>2];case"double":return Y[t>>3];case"*":return s[t>>2];default:z(`invalid type for getValue: ${e}`)}}var Dt=r.noExitRuntime||!0;function n(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":W[t]=0;break;case"i8":W[t]=0;break;case"i16":y[t>>1]=0;break;case"i32":P[t>>2]=0;break;case"i64":lt[t>>3]=BigInt(0);break;case"float":H[t>>2]=0;break;case"double":Y[t>>3]=0;break;case"*":s[t>>2]=0;break;default:z(`invalid type for setValue: ${e}`)}}var X=typeof TextDecoder<"u"?new TextDecoder:void 0,j=(t,e=0,i=NaN)=>{var d=e+i;for(i=e;t[i]&&!(i>=d);)++i;if(16<i-e&&t.buffer&&X)return X.decode(t.subarray(e,i));for(d="";e<i;){var I=t[e++];if(I&128){var M=t[e++]&63;if((I&224)==192)d+=String.fromCharCode((I&31)<<6|M);else{var Z=t[e++]&63;I=(I&240)==224?(I&15)<<12|M<<6|Z:(I&7)<<18|M<<12|Z<<6|t[e++]&63,65536>I?d+=String.fromCharCode(I):(I-=65536,d+=String.fromCharCode(55296|I>>10,56320|I&1023))}}else d+=String.fromCharCode(I)}return d},w=(t,e)=>t?j(J,t,e):"",b=(t,e)=>{for(var i=0,d=t.length-1;0<=d;d--){var I=t[d];I==="."?t.splice(d,1):I===".."?(t.splice(d,1),i++):i&&(t.splice(d,1),i--)}if(e)for(;i;i--)t.unshift("..");return t},L=t=>{var e=t.charAt(0)==="/",i=t.slice(-1)==="/";return(t=b(t.split("/").filter(d=>!!d),!e).join("/"))||e||(t="."),t&&i&&(t+="/"),(e?"/":"")+t},K=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.slice(0,-1)),t+e)},Q=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],$=()=>{if(A){var t=Fr;return e=>t.randomFillSync(e)}return e=>crypto.getRandomValues(e)},rt=t=>{(rt=$())(t)},at=(...t)=>{for(var e="",i=!1,d=t.length-1;-1<=d&&!i;d--){if(i=0<=d?t[d]:"/",typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,i=i.charAt(0)==="/"}return e=b(e.split("/").filter(I=>!!I),!i).join("/"),(i?"/":"")+e||"."},nt=[],dt=t=>{for(var e=0,i=0;i<t.length;++i){var d=t.charCodeAt(i);127>=d?e++:2047>=d?e+=2:55296<=d&&57343>=d?(e+=4,++i):e+=3}return e},Et=(t,e,i,d)=>{if(!(0<d))return 0;var I=i;d=i+d-1;for(var M=0;M<t.length;++M){var Z=t.charCodeAt(M);if(55296<=Z&&57343>=Z){var ft=t.charCodeAt(++M);Z=65536+((Z&1023)<<10)|ft&1023}if(127>=Z){if(i>=d)break;e[i++]=Z}else{if(2047>=Z){if(i+1>=d)break;e[i++]=192|Z>>6}else{if(65535>=Z){if(i+2>=d)break;e[i++]=224|Z>>12}else{if(i+3>=d)break;e[i++]=240|Z>>18,e[i++]=128|Z>>12&63}e[i++]=128|Z>>6&63}e[i++]=128|Z&63}}return e[i]=0,i-I},wt=(t,e)=>{var i=Array(dt(t)+1);return t=Et(t,i,0,i.length),e&&(i.length=t),i},Lt=[];function te(t,e){Lt[t]={input:[],output:[],cb:e},Ye(t,jt)}var jt={open(t){var e=Lt[t.node.rdev];if(!e)throw new st(43);t.tty=e,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,e,i,d){if(!t.tty||!t.tty.cb.xb)throw new st(60);for(var I=0,M=0;M<d;M++){try{var Z=t.tty.cb.xb(t.tty)}catch{throw new st(29)}if(Z===void 0&&I===0)throw new st(6);if(Z==null)break;I++,e[i+M]=Z}return I&&(t.node.atime=Date.now()),I},write(t,e,i,d){if(!t.tty||!t.tty.cb.qb)throw new st(60);try{for(var I=0;I<d;I++)t.tty.cb.qb(t.tty,e[i+I])}catch{throw new st(29)}return d&&(t.node.mtime=t.node.ctime=Date.now()),I}},le={xb(){t:{if(!nt.length){var t=null;if(A){var e=Buffer.alloc(256),i=0,d=process.stdin.fd;try{i=N.readSync(d,e,0,256)}catch(I){if(I.toString().includes("EOF"))i=0;else throw I}0<i&&(t=e.slice(0,i).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break t}nt=wt(t,!0)}t=nt.shift()}return t},qb(t,e){e===null||e===10?(R(j(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(R(j(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},xt={qb(t,e){e===null||e===10?(O(j(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(O(j(t.output)),t.output=[])}},_t={Wa:null,Xa(){return _t.createNode(null,"/",16895,0)},createNode(t,e,i,d){if((i&61440)===24576||(i&61440)===4096)throw new st(63);return _t.Wa||(_t.Wa={dir:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,lookup:_t.La.lookup,hb:_t.La.hb,rename:_t.La.rename,unlink:_t.La.unlink,rmdir:_t.La.rmdir,readdir:_t.La.readdir,symlink:_t.La.symlink},stream:{Va:_t.Ma.Va}},file:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:{Va:_t.Ma.Va,read:_t.Ma.read,write:_t.Ma.write,ib:_t.Ma.ib,jb:_t.Ma.jb}},link:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,readlink:_t.La.readlink},stream:{}},ub:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:sn}}),i=hr(t,e,i,d),Pt(i.mode)?(i.La=_t.Wa.dir.node,i.Ma=_t.Wa.dir.stream,i.Na={}):(i.mode&61440)===32768?(i.La=_t.Wa.file.node,i.Ma=_t.Wa.file.stream,i.Ra=0,i.Na=null):(i.mode&61440)===40960?(i.La=_t.Wa.link.node,i.Ma=_t.Wa.link.stream):(i.mode&61440)===8192&&(i.La=_t.Wa.ub.node,i.Ma=_t.Wa.ub.stream),i.atime=i.mtime=i.ctime=Date.now(),t&&(t.Na[e]=i,t.atime=t.mtime=t.ctime=i.atime),i},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Pt(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.atime),e.mtime=new Date(t.mtime),e.ctime=new Date(t.ctime),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},Ua(t,e){for(var i of["mode","atime","mtime","ctime"])e[i]!=null&&(t[i]=e[i]);e.size!==void 0&&(e=e.size,t.Ra!=e&&(e==0?(t.Na=null,t.Ra=0):(i=t.Na,t.Na=new Uint8Array(e),i&&t.Na.set(i.subarray(0,Math.min(e,t.Ra))),t.Ra=e)))},lookup(){throw _t.vb},hb(t,e,i,d){return _t.createNode(t,e,i,d)},rename(t,e,i){try{var d=ce(e,i)}catch{}if(d){if(Pt(t.mode))for(var I in d.Na)throw new st(55);Ze(d)}delete t.parent.Na[t.name],e.Na[i]=t,t.name=i,e.ctime=e.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,e){delete t.Na[e],t.ctime=t.mtime=Date.now()},rmdir(t,e){var i=ce(t,e),d;for(d in i.Na)throw new st(55);delete t.Na[e],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,e,i){return t=_t.createNode(t,e,41471,0),t.link=i,t},readlink(t){if((t.mode&61440)!==40960)throw new st(28);return t.link}},Ma:{read(t,e,i,d,I){var M=t.node.Na;if(I>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-I,d),8<t&&M.subarray)e.set(M.subarray(I,I+t),i);else for(d=0;d<t;d++)e[i+d]=M[I+d];return t},write(t,e,i,d,I,M){if(e.buffer===W.buffer&&(M=!1),!d)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(M)return t.Na=e.subarray(i,i+d),t.Ra=d;if(t.Ra===0&&I===0)return t.Na=e.slice(i,i+d),t.Ra=d;if(I+d<=t.Ra)return t.Na.set(e.subarray(i,i+d),I),d}M=I+d;var Z=t.Na?t.Na.length:0;if(Z>=M||(M=Math.max(M,Z*(1048576>Z?2:1.125)>>>0),Z!=0&&(M=Math.max(M,256)),Z=t.Na,t.Na=new Uint8Array(M),0<t.Ra&&t.Na.set(Z.subarray(0,t.Ra),0)),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(i,i+d),I);else for(M=0;M<d;M++)t.Na[I+M]=e[i+M];return t.Ra=Math.max(t.Ra,I+d),d},Va(t,e,i){if(i===1?e+=t.position:i===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new st(28);return e},ib(t,e,i,d,I){if((t.node.mode&61440)!==32768)throw new st(43);if(t=t.node.Na,I&2||!t||t.buffer!==W.buffer){I=!0,d=65536*Math.ceil(e/65536);var M=Ir(65536,d);if(M&&J.fill(0,M,M+d),d=M,!d)throw new st(48);t&&((0<i||i+e<t.length)&&(t.subarray?t=t.subarray(i,i+e):t=Array.prototype.slice.call(t,i,i+e)),W.set(t,d))}else I=!1,d=t.byteOffset;return{Kb:d,Ab:I}},jb(t,e,i,d){return _t.Ma.write(t,e,0,d,i,!1),0}}},pe=(t,e)=>{var i=0;return t&&(i|=365),e&&(i|=146),i},zt=null,ge={},ee=[],We=1,Kt=null,be=!1,re=!0,ue={},st=class{constructor(t){ae(this,"name","ErrnoError");this.Pa=t}},en=class{constructor(){ae(this,"gb",{});ae(this,"node",null)}get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},rn=class{constructor(t,e,i,d){ae(this,"La",{});ae(this,"Ma",{});ae(this,"ab",null);t||(t=this),this.parent=t,this.Xa=t.Xa,this.id=We++,this.name=e,this.mode=i,this.rdev=d,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function $t(t,e={}){if(!t)throw new st(44);e.nb??(e.nb=!0),t.charAt(0)==="/"||(t="//"+t);var i=0;t:for(;40>i;i++){t=t.split("/").filter(ft=>!!ft);for(var d=zt,I="/",M=0;M<t.length;M++){var Z=M===t.length-1;if(Z&&e.parent)break;if(t[M]!==".")if(t[M]==="..")I=K(I),d=d.parent;else{I=L(I+"/"+t[M]);try{d=ce(d,t[M])}catch(ft){if((ft==null?void 0:ft.Pa)===44&&Z&&e.Jb)return{path:I};throw ft}if(!d.ab||Z&&!e.nb||(d=d.ab.root),(d.mode&61440)===40960&&(!Z||e.$a)){if(!d.La.readlink)throw new st(52);d=d.La.readlink(d),d.charAt(0)==="/"||(d=K(I)+"/"+d),t=d+"/"+t.slice(M+1).join("/");continue t}}}return{path:I,node:d}}throw new st(32)}function Ge(t){for(var e;;){if(t===t.parent)return t=t.Xa.zb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function He(t,e){for(var i=0,d=0;d<e.length;d++)i=(i<<5)-i+e.charCodeAt(d)|0;return(t+i>>>0)%Kt.length}function Ze(t){var e=He(t.parent.id,t.name);if(Kt[e]===t)Kt[e]=t.bb;else for(e=Kt[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function ce(t,e){var i=Pt(t.mode)?(i=me(t,"x"))?i:t.La.lookup?0:2:54;if(i)throw new st(i);for(i=Kt[He(t.id,e)];i;i=i.bb){var d=i.name;if(i.parent.id===t.id&&d===e)return i}return t.La.lookup(t,e)}function hr(t,e,i,d){return t=new rn(t,e,i,d),e=He(t.parent.id,t.name),t.bb=Kt[e],Kt[e]=t}function Pt(t){return(t&61440)===16384}function pr(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function me(t,e){if(re)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function mr(t,e){if(!Pt(t.mode))return 54;try{return ce(t,e),20}catch{}return me(t,"wx")}function _r(t,e,i){try{var d=ce(t,e)}catch(I){return I.Pa}if(t=me(t,"wx"))return t;if(i){if(!Pt(d.mode))return 54;if(d===d.parent||Ge(d)==="/")return 10}else if(Pt(d.mode))return 31;return 0}function Ne(t){if(!t)throw new st(63);return t}function Bt(t){if(t=ee[t],!t)throw new st(8);return t}function yr(t,e=-1){if(t=Object.assign(new en,t),e==-1)t:{for(e=0;4096>=e;e++)if(!ee[e])break t;throw new st(33)}return t.fd=e,ee[e]=t}function nn(t,e=-1){var i,d;return t=yr(t,e),(d=(i=t.Ma)==null?void 0:i.Rb)==null||d.call(i,t),t}function Xe(t,e,i){var d=t==null?void 0:t.Ma.Ua;t=d?t:e,d??(d=e.La.Ua),Ne(d),d(t,i)}var sn={open(t){var e,i;t.Ma=ge[t.node.rdev].Ma,(i=(e=t.Ma).open)==null||i.call(e,t)},Va(){throw new st(70)}};function Ye(t,e){ge[t]={Ma:e}}function gr(t,e){var i=e==="/";if(i&&zt)throw new st(10);if(!i&&e){var d=$t(e,{nb:!1});if(e=d.path,d=d.node,d.ab)throw new st(10);if(!Pt(d.mode))throw new st(54)}e={type:t,Wb:{},zb:e,Ib:[]},t=t.Xa(e),t.Xa=e,e.root=t,i?zt=t:d&&(d.ab=e,d.Xa&&d.Xa.Ib.push(e))}function Ie(t,e,i){var d=$t(t,{parent:!0}).node;if(t=Q(t),!t)throw new st(28);if(t==="."||t==="..")throw new st(20);var I=mr(d,t);if(I)throw new st(I);if(!d.La.hb)throw new st(63);return d.La.hb(d,t,e,i)}function an(t,e=438){return Ie(t,e&4095|32768,0)}function Vt(t,e=511){return Ie(t,e&1023|16384,0)}function Re(t,e,i){typeof i>"u"&&(i=e,e=438),Ie(t,e|8192,i)}function Ke(t,e){if(!at(t))throw new st(44);var i=$t(e,{parent:!0}).node;if(!i)throw new st(44);e=Q(e);var d=mr(i,e);if(d)throw new st(d);if(!i.La.symlink)throw new st(63);i.La.symlink(i,e,t)}function br(t){var e=$t(t,{parent:!0}).node;t=Q(t);var i=ce(e,t),d=_r(e,t,!0);if(d)throw new st(d);if(!e.La.rmdir)throw new st(63);if(i.ab)throw new st(10);e.La.rmdir(e,t),Ze(i)}function vr(t){var e=$t(t,{parent:!0}).node;if(!e)throw new st(44);t=Q(t);var i=ce(e,t),d=_r(e,t,!1);if(d)throw new st(d);if(!e.La.unlink)throw new st(63);if(i.ab)throw new st(10);e.La.unlink(e,t),Ze(i)}function ve(t,e){return t=$t(t,{$a:!e}).node,Ne(t.La.Ta)(t)}function wr(t,e,i,d){Xe(t,e,{mode:i&4095|e.mode&-4096,ctime:Date.now(),Fb:d})}function xe(t,e){t=typeof t=="string"?$t(t,{$a:!0}).node:t,wr(null,t,e)}function Er(t,e,i){if(Pt(e.mode))throw new st(31);if((e.mode&61440)!==32768)throw new st(28);var d=me(e,"w");if(d)throw new st(d);Xe(t,e,{size:i,timestamp:Date.now()})}function _e(t,e,i=438){if(t==="")throw new st(44);if(typeof e=="string"){var d={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof d>"u")throw Error(`Unknown file open mode: ${e}`);e=d}if(i=e&64?i&4095|32768:0,typeof t=="object")d=t;else{var I=t.endsWith("/");t=$t(t,{$a:!(e&131072),Jb:!0}),d=t.node,t=t.path}var M=!1;if(e&64)if(d){if(e&128)throw new st(20)}else{if(I)throw new st(31);d=Ie(t,i|511,0),M=!0}if(!d)throw new st(44);if((d.mode&61440)===8192&&(e&=-513),e&65536&&!Pt(d.mode))throw new st(54);if(!M&&(I=d?(d.mode&61440)===40960?32:Pt(d.mode)&&(pr(e)!=="r"||e&576)?31:me(d,pr(e)):44))throw new st(I);return e&512&&!M&&(I=d,I=typeof I=="string"?$t(I,{$a:!0}).node:I,Er(null,I,0)),e&=-131713,I=yr({node:d,path:Ge(d),flags:e,seekable:!0,position:0,Ma:d.Ma,Lb:[],error:!1}),I.Ma.open&&I.Ma.open(I),M&&xe(d,i&511),!r.logReadFiles||e&1||t in ue||(ue[t]=1),I}function Ve(t){if(t.fd===null)throw new st(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{ee[t.fd]=null}t.fd=null}function kr(t,e,i){if(t.fd===null)throw new st(8);if(!t.seekable||!t.Ma.Va)throw new st(70);if(i!=0&&i!=1&&i!=2)throw new st(28);t.position=t.Ma.Va(t,e,i),t.Lb=[]}function Sr(t,e,i,d,I){if(0>d||0>I)throw new st(28);if(t.fd===null)throw new st(8);if((t.flags&2097155)===1)throw new st(8);if(Pt(t.node.mode))throw new st(31);if(!t.Ma.read)throw new st(28);var M=typeof I<"u";if(!M)I=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.read(t,e,i,d,I),M||(t.position+=e),e}function Tr(t,e,i,d,I){if(0>d||0>I)throw new st(28);if(t.fd===null)throw new st(8);if(!(t.flags&2097155))throw new st(8);if(Pt(t.node.mode))throw new st(31);if(!t.Ma.write)throw new st(28);t.seekable&&t.flags&1024&&kr(t,0,2);var M=typeof I<"u";if(!M)I=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.write(t,e,i,d,I,void 0),M||(t.position+=e),e}function on(t){var e,i=_e(t,i||0);t=ve(t).size;var d=new Uint8Array(t);return Sr(i,d,0,t,0),e=d,Ve(i),e}function ne(t,e,i){t=L("/dev/"+t);var d=pe(!!e,!!i);ne.yb??(ne.yb=64);var I=ne.yb++<<8|0;Ye(I,{open(M){M.seekable=!1},close(){var M;(M=i==null?void 0:i.buffer)!=null&&M.length&&i(10)},read(M,Z,ft,vt){for(var gt=0,Ot=0;Ot<vt;Ot++){try{var Ut=e()}catch{throw new st(29)}if(Ut===void 0&&gt===0)throw new st(6);if(Ut==null)break;gt++,Z[ft+Ot]=Ut}return gt&&(M.node.atime=Date.now()),gt},write(M,Z,ft,vt){for(var gt=0;gt<vt;gt++)try{i(Z[ft+gt])}catch{throw new st(29)}return vt&&(M.node.mtime=M.node.ctime=Date.now()),gt}}),Re(t,d,I)}var Nt={};function de(t,e,i){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":Bt(t).path,e.length==0){if(!i)throw new st(44);return t}return t+"/"+e}function Oe(t,e){P[t>>2]=e.dev,P[t+4>>2]=e.mode,s[t+8>>2]=e.nlink,P[t+12>>2]=e.uid,P[t+16>>2]=e.gid,P[t+20>>2]=e.rdev,lt[t+24>>3]=BigInt(e.size),P[t+32>>2]=4096,P[t+36>>2]=e.blocks;var i=e.atime.getTime(),d=e.mtime.getTime(),I=e.ctime.getTime();return lt[t+40>>3]=BigInt(Math.floor(i/1e3)),s[t+48>>2]=i%1e3*1e6,lt[t+56>>3]=BigInt(Math.floor(d/1e3)),s[t+64>>2]=d%1e3*1e6,lt[t+72>>3]=BigInt(Math.floor(I/1e3)),s[t+80>>2]=I%1e3*1e6,lt[t+88>>3]=BigInt(e.ino),0}var Ce=void 0,De=()=>{var t=P[+Ce>>2];return Ce+=4,t},Qe=0,ln=[0,31,60,91,121,152,182,213,244,274,305,335],un=[0,31,59,90,120,151,181,212,243,273,304,334],we={},Ar=t=>{var e;C=t,Dt||0<Qe||((e=r.onExit)==null||e.call(r,t),q=!0),c(t,new At(t))},cn=t=>{if(!q)try{if(t(),!(Dt||0<Qe))try{C=t=C,Ar(t)}catch(e){e instanceof At||e=="unwind"||c(1,e)}}catch(e){e instanceof At||e=="unwind"||c(1,e)}},Je={},Nr=()=>{if(!tr){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_||"./this.program"},e;for(e in Je)Je[e]===void 0?delete t[e]:t[e]=Je[e];var i=[];for(e in t)i.push(`${e}=${t[e]}`);tr=i}return tr},tr,er=t=>{var e=dt(t)+1,i=se(e);return Et(t,J,i,e),i},dn=(t,e,i,d)=>{var I={string:gt=>{var Ot=0;return gt!=null&&gt!==0&&(Ot=er(gt)),Ot},array:gt=>{var Ot=se(gt.length);return W.set(gt,Ot),Ot}};t=r["_"+t];var M=[],Z=0;if(d)for(var ft=0;ft<d.length;ft++){var vt=I[i[ft]];vt?(Z===0&&(Z=Se()),M[ft]=vt(d[ft])):M[ft]=d[ft]}return i=t(...M),i=function(gt){return Z!==0&&ke(Z),e==="string"?gt?j(J,gt):"":e==="boolean"?!!gt:gt}(i)},Le=0,Be=(t,e)=>(e=e==1?se(t.length):nr(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),J.set(t,e),e),fe,rr=[],Qt,ie=t=>{fe.delete(Qt.get(t)),Qt.set(t,null),rr.push(t)},Ee=(t,e)=>{if(!fe){fe=new WeakMap;var i=Qt.length;if(fe)for(var d=0;d<0+i;d++){var I=Qt.get(d);I&&fe.set(I,d)}}if(i=fe.get(t)||0)return i;if(rr.length)i=rr.pop();else{try{Qt.grow(1)}catch(vt){throw vt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":vt}i=Qt.length-1}try{Qt.set(i,t)}catch(vt){if(!(vt instanceof TypeError))throw vt;if(typeof WebAssembly.Function=="function"){var M=WebAssembly.Function;d={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},I={parameters:[],results:e[0]=="v"?[]:[d[e[0]]]};for(var Z=1;Z<e.length;++Z)I.parameters.push(d[e[Z]]);e=new M(I,t)}else{d=[1],I=e.slice(0,1),e=e.slice(1),Z={i:127,p:127,j:126,f:125,d:124,e:111},d.push(96);var ft=e.length;128>ft?d.push(ft):d.push(ft%128|128,ft>>7);for(M of e)d.push(Z[M]);I=="v"?d.push(0):d.push(1,Z[I]),e=[0,97,115,109,1,0,0,0,1],M=d.length,128>M?e.push(M):e.push(M%128|128,M>>7),e.push(...d),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}Qt.set(i,e)}return fe.set(t,i),i};Kt=Array(4096),gr(_t,"/"),Vt("/tmp"),Vt("/home"),Vt("/home/web_user"),function(){Vt("/dev"),Ye(259,{read:()=>0,write:(d,I,M,Z)=>Z,Va:()=>0}),Re("/dev/null",259),te(1280,le),te(1536,xt),Re("/dev/tty",1280),Re("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,i=()=>(e===0&&(rt(t),e=t.byteLength),t[--e]);ne("random",i),ne("urandom",i),Vt("/dev/shm"),Vt("/dev/shm/tmp")}(),function(){Vt("/proc");var t=Vt("/proc/self");Vt("/proc/self/fd"),gr({Xa(){var e=hr(t,"fd",16895,73);return e.Ma={Va:_t.Ma.Va},e.La={lookup(i,d){i=+d;var I=Bt(i);return i={parent:null,Xa:{zb:"fake"},La:{readlink:()=>I.path},id:i+1},i.parent=i},readdir(){return Array.from(ee.entries()).filter(([,i])=>i).map(([i])=>i.toString())}},e}},"/proc/self/fd")}(),_t.vb=new st(44),_t.vb.stack="<generic error, no stack>";var fn={a:(t,e,i,d)=>z(`Assertion failed: ${t?j(J,t):""}, at: `+[e?e?j(J,e):"":"unknown filename",i,d?d?j(J,d):"":"unknown function"]),i:function(t,e){try{return t=t?j(J,t):"",xe(t,e),0}catch(i){if(typeof Nt>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},L:function(t,e,i){try{if(e=e?j(J,e):"",e=de(t,e),i&-8)return-28;var d=$t(e,{$a:!0}).node;return d?(t="",i&4&&(t+="r"),i&2&&(t+="w"),i&1&&(t+="x"),t&&me(d,t)?-2:0):-44}catch(I){if(typeof Nt>"u"||I.name!=="ErrnoError")throw I;return-I.Pa}},j:function(t,e){try{var i=Bt(t);return wr(i,i.node,e,!1),0}catch(d){if(typeof Nt>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},h:function(t){try{var e=Bt(t);return Xe(e,e.node,{timestamp:Date.now(),Fb:!1}),0}catch(i){if(typeof Nt>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},b:function(t,e,i){Ce=i;try{var d=Bt(t);switch(e){case 0:var I=De();if(0>I)break;for(;ee[I];)I++;return nn(d,I).fd;case 1:case 2:return 0;case 3:return d.flags;case 4:return I=De(),d.flags|=I,0;case 12:return I=De(),y[I+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(M){if(typeof Nt>"u"||M.name!=="ErrnoError")throw M;return-M.Pa}},g:function(t,e){try{var i=Bt(t),d=i.node,I=i.Ma.Ta;t=I?i:d,I??(I=d.La.Ta),Ne(I);var M=I(t);return Oe(e,M)}catch(Z){if(typeof Nt>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Pa}},H:function(t,e){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var i=Bt(t);if(0>e||!(i.flags&2097155))throw new st(28);return Er(i,i.node,e),0}catch(d){if(typeof Nt>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},G:function(t,e){try{if(e===0)return-28;var i=dt("/")+1;return e<i?-68:(Et("/",J,t,e),i)}catch(d){if(typeof Nt>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},K:function(t,e){try{return t=t?j(J,t):"",Oe(e,ve(t,!0))}catch(i){if(typeof Nt>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},C:function(t,e,i){try{return e=e?j(J,e):"",e=de(t,e),Vt(e,i),0}catch(d){if(typeof Nt>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},J:function(t,e,i,d){try{e=e?j(J,e):"";var I=d&256;return e=de(t,e,d&4096),Oe(i,I?ve(e,!0):ve(e))}catch(M){if(typeof Nt>"u"||M.name!=="ErrnoError")throw M;return-M.Pa}},x:function(t,e,i,d){Ce=d;try{e=e?j(J,e):"",e=de(t,e);var I=d?De():0;return _e(e,i,I).fd}catch(M){if(typeof Nt>"u"||M.name!=="ErrnoError")throw M;return-M.Pa}},v:function(t,e,i,d){try{if(e=e?j(J,e):"",e=de(t,e),0>=d)return-28;var I=$t(e).node;if(!I)throw new st(44);if(!I.La.readlink)throw new st(28);var M=I.La.readlink(I),Z=Math.min(d,dt(M)),ft=W[i+Z];return Et(M,J,i,d+1),W[i+Z]=ft,Z}catch(vt){if(typeof Nt>"u"||vt.name!=="ErrnoError")throw vt;return-vt.Pa}},u:function(t){try{return t=t?j(J,t):"",br(t),0}catch(e){if(typeof Nt>"u"||e.name!=="ErrnoError")throw e;return-e.Pa}},f:function(t,e){try{return t=t?j(J,t):"",Oe(e,ve(t))}catch(i){if(typeof Nt>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},r:function(t,e,i){try{return e=e?j(J,e):"",e=de(t,e),i===0?vr(e):i===512?br(e):z("Invalid flags passed to unlinkat"),0}catch(d){if(typeof Nt>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},q:function(t,e,i){try{e=e?j(J,e):"",e=de(t,e,!0);var d=Date.now(),I,M;if(i){var Z=s[i>>2]+4294967296*P[i+4>>2],ft=P[i+8>>2];ft==1073741823?I=d:ft==1073741822?I=null:I=1e3*Z+ft/1e6,i+=16,Z=s[i>>2]+4294967296*P[i+4>>2],ft=P[i+8>>2],ft==1073741823?M=d:ft==1073741822?M=null:M=1e3*Z+ft/1e6}else M=I=d;if((M??I)!==null){t=I;var vt=$t(e,{$a:!0}).node;Ne(vt.La.Ua)(vt,{atime:t,mtime:M})}return 0}catch(gt){if(typeof Nt>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Pa}},m:()=>z(""),l:()=>{Dt=!1,Qe=0},A:function(t,e){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),P[e>>2]=t.getSeconds(),P[e+4>>2]=t.getMinutes(),P[e+8>>2]=t.getHours(),P[e+12>>2]=t.getDate(),P[e+16>>2]=t.getMonth(),P[e+20>>2]=t.getFullYear()-1900,P[e+24>>2]=t.getDay();var i=t.getFullYear();P[e+28>>2]=(i%4!==0||i%100===0&&i%400!==0?un:ln)[t.getMonth()]+t.getDate()-1|0,P[e+36>>2]=-(60*t.getTimezoneOffset()),i=new Date(t.getFullYear(),6,1).getTimezoneOffset();var d=new Date(t.getFullYear(),0,1).getTimezoneOffset();P[e+32>>2]=(i!=d&&t.getTimezoneOffset()==Math.min(d,i))|0},y:function(t,e,i,d,I,M,Z){I=-9007199254740992>I||9007199254740992<I?NaN:Number(I);try{if(isNaN(I))return 61;var ft=Bt(d);if(e&2&&!(i&2)&&(ft.flags&2097155)!==2)throw new st(2);if((ft.flags&2097155)===1)throw new st(2);if(!ft.Ma.ib)throw new st(43);if(!t)throw new st(28);var vt=ft.Ma.ib(ft,t,I,e,i),gt=vt.Kb;return P[M>>2]=vt.Ab,s[Z>>2]=gt,0}catch(Ot){if(typeof Nt>"u"||Ot.name!=="ErrnoError")throw Ot;return-Ot.Pa}},z:function(t,e,i,d,I,M){M=-9007199254740992>M||9007199254740992<M?NaN:Number(M);try{var Z=Bt(I);if(i&2){if(i=M,(Z.node.mode&61440)!==32768)throw new st(43);if(!(d&2)){var ft=J.slice(t,t+e);Z.Ma.jb&&Z.Ma.jb(Z,ft,i,e,d)}}}catch(vt){if(typeof Nt>"u"||vt.name!=="ErrnoError")throw vt;return-vt.Pa}},n:(t,e)=>{if(we[t]&&(clearTimeout(we[t].id),delete we[t]),!e)return 0;var i=setTimeout(()=>{delete we[t],cn(()=>Rr(t,performance.now()))},e);return we[t]={id:i,Xb:e},0},B:(t,e,i,d)=>{var I=new Date().getFullYear(),M=new Date(I,0,1).getTimezoneOffset();I=new Date(I,6,1).getTimezoneOffset(),s[t>>2]=60*Math.max(M,I),P[e>>2]=+(M!=I),e=Z=>{var ft=Math.abs(Z);return`UTC${0<=Z?"-":"+"}${String(Math.floor(ft/60)).padStart(2,"0")}${String(ft%60).padStart(2,"0")}`},t=e(M),e=e(I),I<M?(Et(t,J,i,17),Et(e,J,d,17)):(Et(t,J,d,17),Et(e,J,i,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var e=J.length;if(t>>>=0,2147483648<t)return!1;for(var i=1;4>=i;i*=2){var d=e*(1+.2/i);d=Math.min(d,t+100663296);t:{d=(Math.min(2147483648,65536*Math.ceil(Math.max(t,d)/65536))-D.buffer.byteLength+65535)/65536|0;try{D.grow(d),tt();var I=1;break t}catch{}I=void 0}if(I)return!0}return!1},E:(t,e)=>{var i=0;return Nr().forEach((d,I)=>{var M=e+i;for(I=s[t+4*I>>2]=M,M=0;M<d.length;++M)W[I++]=d.charCodeAt(M);W[I]=0,i+=d.length+1}),0},F:(t,e)=>{var i=Nr();s[t>>2]=i.length;var d=0;return i.forEach(I=>d+=I.length+1),s[e>>2]=d,0},e:function(t){try{var e=Bt(t);return Ve(e),0}catch(i){if(typeof Nt>"u"||i.name!=="ErrnoError")throw i;return i.Pa}},p:function(t,e){try{var i=Bt(t);return W[e]=i.tty?2:Pt(i.mode)?3:(i.mode&61440)===40960?7:4,y[e+2>>1]=0,lt[e+8>>3]=BigInt(0),lt[e+16>>3]=BigInt(0),0}catch(d){if(typeof Nt>"u"||d.name!=="ErrnoError")throw d;return d.Pa}},w:function(t,e,i,d){try{t:{var I=Bt(t);t=e;for(var M,Z=e=0;Z<i;Z++){var ft=s[t>>2],vt=s[t+4>>2];t+=8;var gt=Sr(I,W,ft,vt,M);if(0>gt){var Ot=-1;break t}if(e+=gt,gt<vt)break;typeof M<"u"&&(M+=gt)}Ot=e}return s[d>>2]=Ot,0}catch(Ut){if(typeof Nt>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Pa}},D:function(t,e,i,d){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var I=Bt(t);return kr(I,e,i),lt[d>>3]=BigInt(I.position),I.ob&&e===0&&i===0&&(I.ob=null),0}catch(M){if(typeof Nt>"u"||M.name!=="ErrnoError")throw M;return M.Pa}},I:function(t){var i;try{var e=Bt(t);return(i=e.Ma)!=null&&i.fsync?e.Ma.fsync(e):0}catch(d){if(typeof Nt>"u"||d.name!=="ErrnoError")throw d;return d.Pa}},t:function(t,e,i,d){try{t:{var I=Bt(t);t=e;for(var M,Z=e=0;Z<i;Z++){var ft=s[t>>2],vt=s[t+4>>2];t+=8;var gt=Tr(I,W,ft,vt,M);if(0>gt){var Ot=-1;break t}if(e+=gt,gt<vt)break;typeof M<"u"&&(M+=gt)}Ot=e}return s[d>>2]=Ot,0}catch(Ut){if(typeof Nt>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Pa}},k:Ar},ht;(async function(){var i;function t(d){var I;return ht=d.exports,D=ht.M,tt(),Qt=ht.O,ot--,(I=r.monitorRunDependencies)==null||I.call(r,ot),ot==0&&F&&(d=F,F=null,d()),ht}ot++,(i=r.monitorRunDependencies)==null||i.call(r,ot);var e={a:fn};return r.instantiateWasm?new Promise(d=>{r.instantiateWasm(e,(I,M)=>{t(I),d(I.exports)})}):(ut??(ut=r.locateFile?r.locateFile("sql-wasm.wasm",g):g+"sql-wasm.wasm"),t((await Tt(e)).instance))})(),r._sqlite3_free=t=>(r._sqlite3_free=ht.P)(t),r._sqlite3_value_text=t=>(r._sqlite3_value_text=ht.Q)(t),r._sqlite3_prepare_v2=(t,e,i,d,I)=>(r._sqlite3_prepare_v2=ht.R)(t,e,i,d,I),r._sqlite3_step=t=>(r._sqlite3_step=ht.S)(t),r._sqlite3_reset=t=>(r._sqlite3_reset=ht.T)(t),r._sqlite3_exec=(t,e,i,d,I)=>(r._sqlite3_exec=ht.U)(t,e,i,d,I),r._sqlite3_finalize=t=>(r._sqlite3_finalize=ht.V)(t),r._sqlite3_column_name=(t,e)=>(r._sqlite3_column_name=ht.W)(t,e),r._sqlite3_column_text=(t,e)=>(r._sqlite3_column_text=ht.X)(t,e),r._sqlite3_column_type=(t,e)=>(r._sqlite3_column_type=ht.Y)(t,e),r._sqlite3_errmsg=t=>(r._sqlite3_errmsg=ht.Z)(t),r._sqlite3_clear_bindings=t=>(r._sqlite3_clear_bindings=ht._)(t),r._sqlite3_value_blob=t=>(r._sqlite3_value_blob=ht.$)(t),r._sqlite3_value_bytes=t=>(r._sqlite3_value_bytes=ht.aa)(t),r._sqlite3_value_double=t=>(r._sqlite3_value_double=ht.ba)(t),r._sqlite3_value_int=t=>(r._sqlite3_value_int=ht.ca)(t),r._sqlite3_value_type=t=>(r._sqlite3_value_type=ht.da)(t),r._sqlite3_result_blob=(t,e,i,d)=>(r._sqlite3_result_blob=ht.ea)(t,e,i,d),r._sqlite3_result_double=(t,e)=>(r._sqlite3_result_double=ht.fa)(t,e),r._sqlite3_result_error=(t,e,i)=>(r._sqlite3_result_error=ht.ga)(t,e,i),r._sqlite3_result_int=(t,e)=>(r._sqlite3_result_int=ht.ha)(t,e),r._sqlite3_result_int64=(t,e)=>(r._sqlite3_result_int64=ht.ia)(t,e),r._sqlite3_result_null=t=>(r._sqlite3_result_null=ht.ja)(t),r._sqlite3_result_text=(t,e,i,d)=>(r._sqlite3_result_text=ht.ka)(t,e,i,d),r._sqlite3_aggregate_context=(t,e)=>(r._sqlite3_aggregate_context=ht.la)(t,e),r._sqlite3_column_count=t=>(r._sqlite3_column_count=ht.ma)(t),r._sqlite3_data_count=t=>(r._sqlite3_data_count=ht.na)(t),r._sqlite3_column_blob=(t,e)=>(r._sqlite3_column_blob=ht.oa)(t,e),r._sqlite3_column_bytes=(t,e)=>(r._sqlite3_column_bytes=ht.pa)(t,e),r._sqlite3_column_double=(t,e)=>(r._sqlite3_column_double=ht.qa)(t,e),r._sqlite3_bind_blob=(t,e,i,d,I)=>(r._sqlite3_bind_blob=ht.ra)(t,e,i,d,I),r._sqlite3_bind_double=(t,e,i)=>(r._sqlite3_bind_double=ht.sa)(t,e,i),r._sqlite3_bind_int=(t,e,i)=>(r._sqlite3_bind_int=ht.ta)(t,e,i),r._sqlite3_bind_text=(t,e,i,d,I)=>(r._sqlite3_bind_text=ht.ua)(t,e,i,d,I),r._sqlite3_bind_parameter_index=(t,e)=>(r._sqlite3_bind_parameter_index=ht.va)(t,e),r._sqlite3_sql=t=>(r._sqlite3_sql=ht.wa)(t),r._sqlite3_normalized_sql=t=>(r._sqlite3_normalized_sql=ht.xa)(t),r._sqlite3_changes=t=>(r._sqlite3_changes=ht.ya)(t),r._sqlite3_close_v2=t=>(r._sqlite3_close_v2=ht.za)(t),r._sqlite3_create_function_v2=(t,e,i,d,I,M,Z,ft,vt)=>(r._sqlite3_create_function_v2=ht.Aa)(t,e,i,d,I,M,Z,ft,vt),r._sqlite3_update_hook=(t,e,i)=>(r._sqlite3_update_hook=ht.Ba)(t,e,i),r._sqlite3_open=(t,e)=>(r._sqlite3_open=ht.Ca)(t,e);var nr=r._malloc=t=>(nr=r._malloc=ht.Da)(t),Pe=r._free=t=>(Pe=r._free=ht.Ea)(t);r._RegisterExtensionFunctions=t=>(r._RegisterExtensionFunctions=ht.Fa)(t);var Ir=(t,e)=>(Ir=ht.Ga)(t,e),Rr=(t,e)=>(Rr=ht.Ha)(t,e),ke=t=>(ke=ht.Ia)(t),se=t=>(se=ht.Ja)(t),Se=()=>(Se=ht.Ka)();r.stackSave=()=>Se(),r.stackRestore=t=>ke(t),r.stackAlloc=t=>se(t),r.cwrap=(t,e,i,d)=>{var I=!i||i.every(M=>M==="number"||M==="boolean");return e!=="string"&&I&&!d?r["_"+t]:(...M)=>dn(t,e,i,M)},r.addFunction=Ee,r.removeFunction=ie,r.UTF8ToString=w,r.ALLOC_NORMAL=Le,r.allocate=Be,r.allocateUTF8OnStack=er;function ir(){function t(){var I;if(r.calledRun=!0,!q){if(!r.noFSInit&&!be){var e,i;be=!0,d??(d=r.stdin),e??(e=r.stdout),i??(i=r.stderr),d?ne("stdin",d):Ke("/dev/tty","/dev/stdin"),e?ne("stdout",null,e):Ke("/dev/tty","/dev/stdout"),i?ne("stderr",null,i):Ke("/dev/tty1","/dev/stderr"),_e("/dev/stdin",0),_e("/dev/stdout",1),_e("/dev/stderr",1)}if(ht.N(),re=!1,(I=r.onRuntimeInitialized)==null||I.call(r),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var d=r.postRun.shift();kt.unshift(d)}bt(kt)}}if(0<ot)F=ir;else{if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Rt();bt(It),0<ot?F=ir:r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),t()},1)):t()}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return ir(),a}),l)};E.exports=k,E.exports.default=k})(Hr);var ei=Hr.exports;const qr=Gr(ei),ri="/npconv/assets/sql-wasm-C1U8OeUW.wasm";async function ni(){try{return await qr({locateFile:()=>String(ri)})}catch{try{return await qr()}catch(E){throw G("Failed to initialize sql.js: "+(E.message||E.toString()),"err"),E}}}function ii(E){G("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const x=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];E.run("BEGIN TRANSACTION");try{for(const l of x)E.run(l);E.run("COMMIT"),G("Schema created.","schema")}catch(l){try{E.run("ROLLBACK")}catch{}throw G("Failed to create schema: "+(l.message||l.toString()),"err"),l}}function si(E){try{const x=E.exec("PRAGMA foreign_key_list('stream_state')"),l=E.exec("PRAGMA table_info('stream_state')");let k=!1;x&&x.length>0&&x[0].values&&x[0].values.length>0&&(k=!0);let m=!1;if(l&&l.length>0&&l[0].values.length>=2){const o=l[0].values,u=o.map(p=>p[1]),a=o.map(p=>p[5]);u[0]==="progress_time"&&u[1]==="stream_id"&&a[0]===0&&a[1]===1&&(m=!0)}if(!k||!m){G("Patching stream_state schema to Room-compatible definition...","schema"),E.run("BEGIN TRANSACTION");const o=E.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(o&&o.length>0&&o[0].values.length>0){E.run("ALTER TABLE stream_state RENAME TO stream_state_old"),E.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{E.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(u){G("Note: could not copy old stream_state rows: "+(u.message||u.toString()),"warn")}E.run("DROP TABLE stream_state_old")}else E.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");E.run("COMMIT"),G("stream_state schema patched.","schema")}else G("stream_state schema OK.","schema")}catch(x){G("Failed to ensure stream_state schema: "+(x.message||x.toString()),"err")}}function Me(E){throw new Error('Could not dynamically require "'+E+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(E,x){(function(l){E.exports=l()})(function(){return function l(k,m,o){function u(r,T){if(!m[r]){if(!k[r]){var S=typeof Me=="function"&&Me;if(!T&&S)return S(r,!0);if(a)return a(r,!0);var A=new Error("Cannot find module '"+r+"'");throw A.code="MODULE_NOT_FOUND",A}var h=m[r]={exports:{}};k[r][0].call(h.exports,function(_){var c=k[r][1][_];return u(c||_)},h,h.exports,l,k,m,o)}return m[r].exports}for(var a=typeof Me=="function"&&Me,p=0;p<o.length;p++)u(o[p]);return u}({1:[function(l,k,m){var o=l("./utils"),u=l("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";m.encode=function(p){for(var r,T,S,A,h,_,c,g=[],f=0,v=p.length,N=v,R=o.getTypeOf(p)!=="string";f<p.length;)N=v-f,S=R?(r=p[f++],T=f<v?p[f++]:0,f<v?p[f++]:0):(r=p.charCodeAt(f++),T=f<v?p.charCodeAt(f++):0,f<v?p.charCodeAt(f++):0),A=r>>2,h=(3&r)<<4|T>>4,_=1<N?(15&T)<<2|S>>6:64,c=2<N?63&S:64,g.push(a.charAt(A)+a.charAt(h)+a.charAt(_)+a.charAt(c));return g.join("")},m.decode=function(p){var r,T,S,A,h,_,c=0,g=0,f="data:";if(p.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var v,N=3*(p=p.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(p.charAt(p.length-1)===a.charAt(64)&&N--,p.charAt(p.length-2)===a.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=u.uint8array?new Uint8Array(0|N):new Array(0|N);c<p.length;)r=a.indexOf(p.charAt(c++))<<2|(A=a.indexOf(p.charAt(c++)))>>4,T=(15&A)<<4|(h=a.indexOf(p.charAt(c++)))>>2,S=(3&h)<<6|(_=a.indexOf(p.charAt(c++))),v[g++]=r,h!==64&&(v[g++]=T),_!==64&&(v[g++]=S);return v}},{"./support":30,"./utils":32}],2:[function(l,k,m){var o=l("./external"),u=l("./stream/DataWorker"),a=l("./stream/Crc32Probe"),p=l("./stream/DataLengthProbe");function r(T,S,A,h,_){this.compressedSize=T,this.uncompressedSize=S,this.crc32=A,this.compression=h,this.compressedContent=_}r.prototype={getContentWorker:function(){var T=new u(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new p("data_length")),S=this;return T.on("end",function(){if(this.streamInfo.data_length!==S.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new u(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},r.createWorkerFrom=function(T,S,A){return T.pipe(new a).pipe(new p("uncompressedSize")).pipe(S.compressWorker(A)).pipe(new p("compressedSize")).withStreamInfo("compression",S)},k.exports=r},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(l,k,m){var o=l("./stream/GenericWorker");m.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},m.DEFLATE=l("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(l,k,m){var o=l("./utils"),u=function(){for(var a,p=[],r=0;r<256;r++){a=r;for(var T=0;T<8;T++)a=1&a?3988292384^a>>>1:a>>>1;p[r]=a}return p}();k.exports=function(a,p){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(r,T,S,A){var h=u,_=A+S;r^=-1;for(var c=A;c<_;c++)r=r>>>8^h[255&(r^T[c])];return-1^r}(0|p,a,a.length,0):function(r,T,S,A){var h=u,_=A+S;r^=-1;for(var c=A;c<_;c++)r=r>>>8^h[255&(r^T.charCodeAt(c))];return-1^r}(0|p,a,a.length,0):0}},{"./utils":32}],5:[function(l,k,m){m.base64=!1,m.binary=!1,m.dir=!1,m.createFolders=!0,m.date=null,m.compression=null,m.compressionOptions=null,m.comment=null,m.unixPermissions=null,m.dosPermissions=null},{}],6:[function(l,k,m){var o=null;o=typeof Promise<"u"?Promise:l("lie"),k.exports={Promise:o}},{lie:37}],7:[function(l,k,m){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=l("pako"),a=l("./utils"),p=l("./stream/GenericWorker"),r=o?"uint8array":"array";function T(S,A){p.call(this,"FlateWorker/"+S),this._pako=null,this._pakoAction=S,this._pakoOptions=A,this.meta={}}m.magic="\b\0",a.inherits(T,p),T.prototype.processChunk=function(S){this.meta=S.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(r,S.data),!1)},T.prototype.flush=function(){p.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var S=this;this._pako.onData=function(A){S.push({data:A,meta:S.meta})}},m.compressWorker=function(S){return new T("Deflate",S)},m.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(l,k,m){function o(h,_){var c,g="";for(c=0;c<_;c++)g+=String.fromCharCode(255&h),h>>>=8;return g}function u(h,_,c,g,f,v){var N,R,O=h.file,B=h.compression,D=v!==r.utf8encode,q=a.transformTo("string",v(O.name)),C=a.transformTo("string",r.utf8encode(O.name)),W=O.comment,J=a.transformTo("string",v(W)),y=a.transformTo("string",r.utf8encode(W)),P=C.length!==O.name.length,s=y.length!==W.length,H="",lt="",Y="",pt=O.dir,tt=O.date,ot={crc32:0,compressedSize:0,uncompressedSize:0};_&&!c||(ot.crc32=h.crc32,ot.compressedSize=h.compressedSize,ot.uncompressedSize=h.uncompressedSize);var F=0;_&&(F|=8),D||!P&&!s||(F|=2048);var z=0,ut=0;pt&&(z|=16),f==="UNIX"?(ut=798,z|=function(et,Tt){var At=et;return et||(At=Tt?16893:33204),(65535&At)<<16}(O.unixPermissions,pt)):(ut=20,z|=function(et){return 63&(et||0)}(O.dosPermissions)),N=tt.getUTCHours(),N<<=6,N|=tt.getUTCMinutes(),N<<=5,N|=tt.getUTCSeconds()/2,R=tt.getUTCFullYear()-1980,R<<=4,R|=tt.getUTCMonth()+1,R<<=5,R|=tt.getUTCDate(),P&&(lt=o(1,1)+o(T(q),4)+C,H+="up"+o(lt.length,2)+lt),s&&(Y=o(1,1)+o(T(J),4)+y,H+="uc"+o(Y.length,2)+Y);var it="";return it+=`
\0`,it+=o(F,2),it+=B.magic,it+=o(N,2),it+=o(R,2),it+=o(ot.crc32,4),it+=o(ot.compressedSize,4),it+=o(ot.uncompressedSize,4),it+=o(q.length,2),it+=o(H.length,2),{fileRecord:S.LOCAL_FILE_HEADER+it+q+H,dirRecord:S.CENTRAL_FILE_HEADER+o(ut,2)+it+o(J.length,2)+"\0\0\0\0"+o(z,4)+o(g,4)+q+H+J}}var a=l("../utils"),p=l("../stream/GenericWorker"),r=l("../utf8"),T=l("../crc32"),S=l("../signature");function A(h,_,c,g){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=c,this.encodeFileName=g,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(A,p),A.prototype.push=function(h){var _=h.meta.percent||0,c=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,p.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:c?(_+100*(c-g-1))/c:100}}))},A.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var _=this.streamFiles&&!h.file.dir;if(_){var c=u(h,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},A.prototype.closedSource=function(h){this.accumulate=!1;var _=this.streamFiles&&!h.file.dir,c=u(h,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),_)this.push({data:function(g){return S.DATA_DESCRIPTOR+o(g.crc32,4)+o(g.compressedSize,4)+o(g.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},A.prototype.flush=function(){for(var h=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var c=this.bytesWritten-h,g=function(f,v,N,R,O){var B=a.transformTo("string",O(R));return S.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(f,2)+o(f,2)+o(v,4)+o(N,4)+o(B.length,2)+B}(this.dirRecords.length,c,h,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},A.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},A.prototype.registerPrevious=function(h){this._sources.push(h);var _=this;return h.on("data",function(c){_.processChunk(c)}),h.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),h.on("error",function(c){_.error(c)}),this},A.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},A.prototype.error=function(h){var _=this._sources;if(!p.prototype.error.call(this,h))return!1;for(var c=0;c<_.length;c++)try{_[c].error(h)}catch{}return!0},A.prototype.lock=function(){p.prototype.lock.call(this);for(var h=this._sources,_=0;_<h.length;_++)h[_].lock()},k.exports=A},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(l,k,m){var o=l("../compressions"),u=l("./ZipFileWorker");m.generateWorker=function(a,p,r){var T=new u(p.streamFiles,r,p.platform,p.encodeFileName),S=0;try{a.forEach(function(A,h){S++;var _=function(v,N){var R=v||N,O=o[R];if(!O)throw new Error(R+" is not a valid compression method !");return O}(h.options.compression,p.compression),c=h.options.compressionOptions||p.compressionOptions||{},g=h.dir,f=h.date;h._compressWorker(_,c).withStreamInfo("file",{name:A,dir:g,date:f,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(T)}),T.entriesCount=S}catch(A){T.error(A)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(l,k,m){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new o;for(var a in this)typeof this[a]!="function"&&(u[a]=this[a]);return u}}(o.prototype=l("./object")).loadAsync=l("./load"),o.support=l("./support"),o.defaults=l("./defaults"),o.version="3.10.1",o.loadAsync=function(u,a){return new o().loadAsync(u,a)},o.external=l("./external"),k.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(l,k,m){var o=l("./utils"),u=l("./external"),a=l("./utf8"),p=l("./zipEntries"),r=l("./stream/Crc32Probe"),T=l("./nodejsUtils");function S(A){return new u.Promise(function(h,_){var c=A.decompressed.getContentWorker().pipe(new r);c.on("error",function(g){_(g)}).on("end",function(){c.streamInfo.crc32!==A.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}k.exports=function(A,h){var _=this;return h=o.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),T.isNode&&T.isStream(A)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",A,!0,h.optimizedBinaryString,h.base64).then(function(c){var g=new p(h);return g.load(c),g}).then(function(c){var g=[u.Promise.resolve(c)],f=c.files;if(h.checkCRC32)for(var v=0;v<f.length;v++)g.push(S(f[v]));return u.Promise.all(g)}).then(function(c){for(var g=c.shift(),f=g.files,v=0;v<f.length;v++){var N=f[v],R=N.fileNameStr,O=o.resolve(N.fileNameStr);_.file(O,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:h.createFolders}),N.dir||(_.file(O).unsafeOriginalName=R)}return g.zipComment.length&&(_.comment=g.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(l,k,m){var o=l("../utils"),u=l("../stream/GenericWorker");function a(p,r){u.call(this,"Nodejs stream input adapter for "+p),this._upstreamEnded=!1,this._bindStream(r)}o.inherits(a,u),a.prototype._bindStream=function(p){var r=this;(this._stream=p).pause(),p.on("data",function(T){r.push({data:T,meta:{percent:0}})}).on("error",function(T){r.isPaused?this.generatedError=T:r.error(T)}).on("end",function(){r.isPaused?r._upstreamEnded=!0:r.end()})},a.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},k.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(l,k,m){var o=l("readable-stream").Readable;function u(a,p,r){o.call(this,p),this._helper=a;var T=this;a.on("data",function(S,A){T.push(S)||T._helper.pause(),r&&r(A)}).on("error",function(S){T.emit("error",S)}).on("end",function(){T.push(null)})}l("../utils").inherits(u,o),u.prototype._read=function(){this._helper.resume()},k.exports=u},{"../utils":32,"readable-stream":16}],14:[function(l,k,m){k.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,u);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,u)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var u=new Buffer(o);return u.fill(0),u},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(l,k,m){function o(O,B,D){var q,C=a.getTypeOf(B),W=a.extend(D||{},T);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(O=f(O)),W.createFolders&&(q=g(O))&&v.call(this,q,!0);var J=C==="string"&&W.binary===!1&&W.base64===!1;D&&D.binary!==void 0||(W.binary=!J),(B instanceof S&&B.uncompressedSize===0||W.dir||!B||B.length===0)&&(W.base64=!1,W.binary=!0,B="",W.compression="STORE",C="string");var y=null;y=B instanceof S||B instanceof p?B:_.isNode&&_.isStream(B)?new c(O,B):a.prepareContent(O,B,W.binary,W.optimizedBinaryString,W.base64);var P=new A(O,y,W);this.files[O]=P}var u=l("./utf8"),a=l("./utils"),p=l("./stream/GenericWorker"),r=l("./stream/StreamHelper"),T=l("./defaults"),S=l("./compressedObject"),A=l("./zipObject"),h=l("./generate"),_=l("./nodejsUtils"),c=l("./nodejs/NodejsStreamInputAdapter"),g=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var B=O.lastIndexOf("/");return 0<B?O.substring(0,B):""},f=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},v=function(O,B){return B=B!==void 0?B:T.createFolders,O=f(O),this.files[O]||o.call(this,O,null,{dir:!0,createFolders:B}),this.files[O]};function N(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var B,D,q;for(B in this.files)q=this.files[B],(D=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&O(D,q)},filter:function(O){var B=[];return this.forEach(function(D,q){O(D,q)&&B.push(q)}),B},file:function(O,B,D){if(arguments.length!==1)return O=this.root+O,o.call(this,O,B,D),this;if(N(O)){var q=O;return this.filter(function(W,J){return!J.dir&&q.test(W)})}var C=this.files[this.root+O];return C&&!C.dir?C:null},folder:function(O){if(!O)return this;if(N(O))return this.filter(function(C,W){return W.dir&&O.test(C)});var B=this.root+O,D=v.call(this,B),q=this.clone();return q.root=D.name,q},remove:function(O){O=this.root+O;var B=this.files[O];if(B||(O.slice(-1)!=="/"&&(O+="/"),B=this.files[O]),B&&!B.dir)delete this.files[O];else for(var D=this.filter(function(C,W){return W.name.slice(0,O.length)===O}),q=0;q<D.length;q++)delete this.files[D[q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var B,D={};try{if((D=a.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");a.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var q=D.comment||this.comment||"";B=h.generateWorker(this,D,q)}catch(C){(B=new p("error")).error(C)}return new r(B,D.type||"string",D.mimeType)},generateAsync:function(O,B){return this.generateInternalStream(O).accumulate(B)},generateNodeStream:function(O,B){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(B)}};k.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(l,k,m){k.exports=l("stream")},{stream:void 0}],17:[function(l,k,m){var o=l("./DataReader");function u(a){o.call(this,a);for(var p=0;p<this.data.length;p++)a[p]=255&a[p]}l("../utils").inherits(u,o),u.prototype.byteAt=function(a){return this.data[this.zero+a]},u.prototype.lastIndexOfSignature=function(a){for(var p=a.charCodeAt(0),r=a.charCodeAt(1),T=a.charCodeAt(2),S=a.charCodeAt(3),A=this.length-4;0<=A;--A)if(this.data[A]===p&&this.data[A+1]===r&&this.data[A+2]===T&&this.data[A+3]===S)return A-this.zero;return-1},u.prototype.readAndCheckSignature=function(a){var p=a.charCodeAt(0),r=a.charCodeAt(1),T=a.charCodeAt(2),S=a.charCodeAt(3),A=this.readData(4);return p===A[0]&&r===A[1]&&T===A[2]&&S===A[3]},u.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},k.exports=u},{"../utils":32,"./DataReader":18}],18:[function(l,k,m){var o=l("../utils");function u(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var p,r=0;for(this.checkOffset(a),p=this.index+a-1;p>=this.index;p--)r=(r<<8)+this.byteAt(p);return this.index+=a,r},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},k.exports=u},{"../utils":32}],19:[function(l,k,m){var o=l("./Uint8ArrayReader");function u(a){o.call(this,a)}l("../utils").inherits(u,o),u.prototype.readData=function(a){this.checkOffset(a);var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},k.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(l,k,m){var o=l("./DataReader");function u(a){o.call(this,a)}l("../utils").inherits(u,o),u.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},u.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},u.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},u.prototype.readData=function(a){this.checkOffset(a);var p=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},k.exports=u},{"../utils":32,"./DataReader":18}],21:[function(l,k,m){var o=l("./ArrayReader");function u(a){o.call(this,a)}l("../utils").inherits(u,o),u.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var p=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,p},k.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(l,k,m){var o=l("../utils"),u=l("../support"),a=l("./ArrayReader"),p=l("./StringReader"),r=l("./NodeBufferReader"),T=l("./Uint8ArrayReader");k.exports=function(S){var A=o.getTypeOf(S);return o.checkSupport(A),A!=="string"||u.uint8array?A==="nodebuffer"?new r(S):u.uint8array?new T(o.transformTo("uint8array",S)):new a(o.transformTo("array",S)):new p(S)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(l,k,m){m.LOCAL_FILE_HEADER="PK",m.CENTRAL_FILE_HEADER="PK",m.CENTRAL_DIRECTORY_END="PK",m.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",m.ZIP64_CENTRAL_DIRECTORY_END="PK",m.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(l,k,m){var o=l("./GenericWorker"),u=l("../utils");function a(p){o.call(this,"ConvertWorker to "+p),this.destType=p}u.inherits(a,o),a.prototype.processChunk=function(p){this.push({data:u.transformTo(this.destType,p.data),meta:p.meta})},k.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(l,k,m){var o=l("./GenericWorker"),u=l("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}l("../utils").inherits(a,o),a.prototype.processChunk=function(p){this.streamInfo.crc32=u(p.data,this.streamInfo.crc32||0),this.push(p)},k.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(l,k,m){var o=l("../utils"),u=l("./GenericWorker");function a(p){u.call(this,"DataLengthProbe for "+p),this.propName=p,this.withStreamInfo(p,0)}o.inherits(a,u),a.prototype.processChunk=function(p){if(p){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+p.data.length}u.prototype.processChunk.call(this,p)},k.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(l,k,m){var o=l("../utils"),u=l("./GenericWorker");function a(p){u.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,p.then(function(T){r.dataIsReady=!0,r.data=T,r.max=T&&T.length||0,r.type=o.getTypeOf(T),r.isPaused||r._tickAndRepeat()},function(T){r.error(T)})}o.inherits(a,u),a.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var p=null,r=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,r);break;case"uint8array":p=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":p=this.data.slice(this.index,r)}return this.index=r,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},k.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(l,k,m){function o(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,a){return this._listeners[u].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,a){if(this._listeners[u])for(var p=0;p<this._listeners[u].length;p++)this._listeners[u][p].call(this,a)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var a=this;return u.on("data",function(p){a.processChunk(p)}),u.on("end",function(){a.end()}),u.on("error",function(p){a.error(p)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,a){return this.extraStreamInfo[u]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},k.exports=o},{}],29:[function(l,k,m){var o=l("../utils"),u=l("./ConvertWorker"),a=l("./GenericWorker"),p=l("../base64"),r=l("../support"),T=l("../external"),S=null;if(r.nodestream)try{S=l("../nodejs/NodejsStreamOutputAdapter")}catch{}function A(_,c){return new T.Promise(function(g,f){var v=[],N=_._internalType,R=_._outputType,O=_._mimeType;_.on("data",function(B,D){v.push(B),c&&c(D)}).on("error",function(B){v=[],f(B)}).on("end",function(){try{var B=function(D,q,C){switch(D){case"blob":return o.newBlob(o.transformTo("arraybuffer",q),C);case"base64":return p.encode(q);default:return o.transformTo(D,q)}}(R,function(D,q){var C,W=0,J=null,y=0;for(C=0;C<q.length;C++)y+=q[C].length;switch(D){case"string":return q.join("");case"array":return Array.prototype.concat.apply([],q);case"uint8array":for(J=new Uint8Array(y),C=0;C<q.length;C++)J.set(q[C],W),W+=q[C].length;return J;case"nodebuffer":return Buffer.concat(q);default:throw new Error("concat : unsupported type '"+D+"'")}}(N,v),O);g(B)}catch(D){f(D)}v=[]}).resume()})}function h(_,c,g){var f=c;switch(c){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=c,this._mimeType=g,o.checkSupport(f),this._worker=_.pipe(new u(f)),_.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}h.prototype={accumulate:function(_){return A(this,_)},on:function(_,c){var g=this;return _==="data"?this._worker.on(_,function(f){c.call(g,f.data,f.meta)}):this._worker.on(_,function(){o.delay(c,arguments,g)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new S(this,{objectMode:this._outputType!=="nodebuffer"},_)}},k.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(l,k,m){if(m.base64=!0,m.array=!0,m.string=!0,m.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",m.nodebuffer=typeof Buffer<"u",m.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")m.blob=!1;else{var o=new ArrayBuffer(0);try{m.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(o),m.blob=u.getBlob("application/zip").size===0}catch{m.blob=!1}}}try{m.nodestream=!!l("readable-stream").Readable}catch{m.nodestream=!1}},{"readable-stream":16}],31:[function(l,k,m){for(var o=l("./utils"),u=l("./support"),a=l("./nodejsUtils"),p=l("./stream/GenericWorker"),r=new Array(256),T=0;T<256;T++)r[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;r[254]=r[254]=1;function S(){p.call(this,"utf-8 decode"),this.leftOver=null}function A(){p.call(this,"utf-8 encode")}m.utf8encode=function(h){return u.nodebuffer?a.newBufferFrom(h,"utf-8"):function(_){var c,g,f,v,N,R=_.length,O=0;for(v=0;v<R;v++)(64512&(g=_.charCodeAt(v)))==55296&&v+1<R&&(64512&(f=_.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(f-56320),v++),O+=g<128?1:g<2048?2:g<65536?3:4;for(c=u.uint8array?new Uint8Array(O):new Array(O),v=N=0;N<O;v++)(64512&(g=_.charCodeAt(v)))==55296&&v+1<R&&(64512&(f=_.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(f-56320),v++),g<128?c[N++]=g:(g<2048?c[N++]=192|g>>>6:(g<65536?c[N++]=224|g>>>12:(c[N++]=240|g>>>18,c[N++]=128|g>>>12&63),c[N++]=128|g>>>6&63),c[N++]=128|63&g);return c}(h)},m.utf8decode=function(h){return u.nodebuffer?o.transformTo("nodebuffer",h).toString("utf-8"):function(_){var c,g,f,v,N=_.length,R=new Array(2*N);for(c=g=0;c<N;)if((f=_[c++])<128)R[g++]=f;else if(4<(v=r[f]))R[g++]=65533,c+=v-1;else{for(f&=v===2?31:v===3?15:7;1<v&&c<N;)f=f<<6|63&_[c++],v--;1<v?R[g++]=65533:f<65536?R[g++]=f:(f-=65536,R[g++]=55296|f>>10&1023,R[g++]=56320|1023&f)}return R.length!==g&&(R.subarray?R=R.subarray(0,g):R.length=g),o.applyFromCharCode(R)}(h=o.transformTo(u.uint8array?"uint8array":"array",h))},o.inherits(S,p),S.prototype.processChunk=function(h){var _=o.transformTo(u.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var c=_;(_=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),_.set(c,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var g=function(v,N){var R;for((N=N||v.length)>v.length&&(N=v.length),R=N-1;0<=R&&(192&v[R])==128;)R--;return R<0||R===0?N:R+r[v[R]]>N?R:N}(_),f=_;g!==_.length&&(u.uint8array?(f=_.subarray(0,g),this.leftOver=_.subarray(g,_.length)):(f=_.slice(0,g),this.leftOver=_.slice(g,_.length))),this.push({data:m.utf8decode(f),meta:h.meta})},S.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:m.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},m.Utf8DecodeWorker=S,o.inherits(A,p),A.prototype.processChunk=function(h){this.push({data:m.utf8encode(h.data),meta:h.meta})},m.Utf8EncodeWorker=A},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(l,k,m){var o=l("./support"),u=l("./base64"),a=l("./nodejsUtils"),p=l("./external");function r(c){return c}function T(c,g){for(var f=0;f<c.length;++f)g[f]=255&c.charCodeAt(f);return g}l("setimmediate"),m.newBlob=function(c,g){m.checkSupport("blob");try{return new Blob([c],{type:g})}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return f.append(c),f.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var S={stringifyByChunk:function(c,g,f){var v=[],N=0,R=c.length;if(R<=f)return String.fromCharCode.apply(null,c);for(;N<R;)g==="array"||g==="nodebuffer"?v.push(String.fromCharCode.apply(null,c.slice(N,Math.min(N+f,R)))):v.push(String.fromCharCode.apply(null,c.subarray(N,Math.min(N+f,R)))),N+=f;return v.join("")},stringifyByChar:function(c){for(var g="",f=0;f<c.length;f++)g+=String.fromCharCode(c[f]);return g},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function A(c){var g=65536,f=m.getTypeOf(c),v=!0;if(f==="uint8array"?v=S.applyCanBeUsed.uint8array:f==="nodebuffer"&&(v=S.applyCanBeUsed.nodebuffer),v)for(;1<g;)try{return S.stringifyByChunk(c,f,g)}catch{g=Math.floor(g/2)}return S.stringifyByChar(c)}function h(c,g){for(var f=0;f<c.length;f++)g[f]=c[f];return g}m.applyFromCharCode=A;var _={};_.string={string:r,array:function(c){return T(c,new Array(c.length))},arraybuffer:function(c){return _.string.uint8array(c).buffer},uint8array:function(c){return T(c,new Uint8Array(c.length))},nodebuffer:function(c){return T(c,a.allocBuffer(c.length))}},_.array={string:A,array:r,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return a.newBufferFrom(c)}},_.arraybuffer={string:function(c){return A(new Uint8Array(c))},array:function(c){return h(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:r,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return a.newBufferFrom(new Uint8Array(c))}},_.uint8array={string:A,array:function(c){return h(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:r,nodebuffer:function(c){return a.newBufferFrom(c)}},_.nodebuffer={string:A,array:function(c){return h(c,new Array(c.length))},arraybuffer:function(c){return _.nodebuffer.uint8array(c).buffer},uint8array:function(c){return h(c,new Uint8Array(c.length))},nodebuffer:r},m.transformTo=function(c,g){if(g=g||"",!c)return g;m.checkSupport(c);var f=m.getTypeOf(g);return _[f][c](g)},m.resolve=function(c){for(var g=c.split("/"),f=[],v=0;v<g.length;v++){var N=g[v];N==="."||N===""&&v!==0&&v!==g.length-1||(N===".."?f.pop():f.push(N))}return f.join("/")},m.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(c)?"nodebuffer":o.uint8array&&c instanceof Uint8Array?"uint8array":o.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},m.checkSupport=function(c){if(!o[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},m.MAX_VALUE_16BITS=65535,m.MAX_VALUE_32BITS=-1,m.pretty=function(c){var g,f,v="";for(f=0;f<(c||"").length;f++)v+="\\x"+((g=c.charCodeAt(f))<16?"0":"")+g.toString(16).toUpperCase();return v},m.delay=function(c,g,f){setImmediate(function(){c.apply(f||null,g||[])})},m.inherits=function(c,g){function f(){}f.prototype=g.prototype,c.prototype=new f},m.extend=function(){var c,g,f={};for(c=0;c<arguments.length;c++)for(g in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],g)&&f[g]===void 0&&(f[g]=arguments[c][g]);return f},m.prepareContent=function(c,g,f,v,N){return p.Promise.resolve(g).then(function(R){return o.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new p.Promise(function(O,B){var D=new FileReader;D.onload=function(q){O(q.target.result)},D.onerror=function(q){B(q.target.error)},D.readAsArrayBuffer(R)}):R}).then(function(R){var O=m.getTypeOf(R);return O?(O==="arraybuffer"?R=m.transformTo("uint8array",R):O==="string"&&(N?R=u.decode(R):f&&v!==!0&&(R=function(B){return T(B,o.uint8array?new Uint8Array(B.length):new Array(B.length))}(R))),R):p.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(l,k,m){var o=l("./reader/readerFor"),u=l("./utils"),a=l("./signature"),p=l("./zipEntry"),r=l("./support");function T(S){this.files=[],this.loadOptions=S}T.prototype={checkSignature:function(S){if(!this.reader.readAndCheckSignature(S)){this.reader.index-=4;var A=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(A)+", expected "+u.pretty(S)+")")}},isSignature:function(S,A){var h=this.reader.index;this.reader.setIndex(S);var _=this.reader.readString(4)===A;return this.reader.setIndex(h),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var S=this.reader.readData(this.zipCommentLength),A=r.uint8array?"uint8array":"array",h=u.transformTo(A,S);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var S,A,h,_=this.zip64EndOfCentralSize-44;0<_;)S=this.reader.readInt(2),A=this.reader.readInt(4),h=this.reader.readData(A),this.zip64ExtensibleData[S]={id:S,length:A,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var S,A;for(S=0;S<this.files.length;S++)A=this.files[S],this.reader.setIndex(A.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),A.readLocalPart(this.reader),A.handleUTF8(),A.processAttributes()},readCentralDir:function(){var S;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(S=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(S);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var S=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(S<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(S);var A=S;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(S=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(S),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var _=A-h;if(0<_)this.isSignature(A,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(S){this.reader=o(S)},load:function(S){this.prepareReader(S),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},k.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(l,k,m){var o=l("./reader/readerFor"),u=l("./utils"),a=l("./compressedObject"),p=l("./crc32"),r=l("./utf8"),T=l("./compressions"),S=l("./support");function A(h,_){this.options=h,this.loadOptions=_}A.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var _,c;if(h.skip(22),this.fileNameLength=h.readInt(2),c=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(g){for(var f in T)if(Object.prototype.hasOwnProperty.call(T,f)&&T[f].magic===g)return T[f];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var _=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(_),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=o(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var _,c,g,f=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<f;)_=h.readInt(2),c=h.readInt(2),g=h.readData(c),this.extraFields[_]={id:_,length:c,value:g};h.setIndex(f)},handleUTF8:function(){var h=S.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=r.utf8decode(this.fileName),this.fileCommentStr=r.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var c=u.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var f=u.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var _=o(h.value);return _.readInt(1)!==1||p(this.fileName)!==_.readInt(4)?null:r.utf8decode(_.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var _=o(h.value);return _.readInt(1)!==1||p(this.fileComment)!==_.readInt(4)?null:r.utf8decode(_.readData(h.length-5))}return null}},k.exports=A},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(l,k,m){function o(_,c,g){this.name=_,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=c,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var u=l("./stream/StreamHelper"),a=l("./stream/DataWorker"),p=l("./utf8"),r=l("./compressedObject"),T=l("./stream/GenericWorker");o.prototype={internalStream:function(_){var c=null,g="string";try{if(!_)throw new Error("No output type specified.");var f=(g=_.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),c=this._decompressWorker();var v=!this._dataBinary;v&&!f&&(c=c.pipe(new p.Utf8EncodeWorker)),!v&&f&&(c=c.pipe(new p.Utf8DecodeWorker))}catch(N){(c=new T("error")).error(N)}return new u(c,g,"")},async:function(_,c){return this.internalStream(_).accumulate(c)},nodeStream:function(_,c){return this.internalStream(_||"nodebuffer").toNodejsStream(c)},_compressWorker:function(_,c){if(this._data instanceof r&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new p.Utf8EncodeWorker)),r.createWorkerFrom(g,_,c)},_decompressWorker:function(){return this._data instanceof r?this._data.getContentWorker():this._data instanceof T?this._data:new a(this._data)}};for(var S=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],A=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<S.length;h++)o.prototype[S[h]]=A;k.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(l,k,m){(function(o){var u,a,p=o.MutationObserver||o.WebKitMutationObserver;if(p){var r=0,T=new p(_),S=o.document.createTextNode("");T.observe(S,{characterData:!0}),u=function(){S.data=r=++r%2}}else if(o.setImmediate||o.MessageChannel===void 0)u="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var c=o.document.createElement("script");c.onreadystatechange=function(){_(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},o.document.documentElement.appendChild(c)}:function(){setTimeout(_,0)};else{var A=new o.MessageChannel;A.port1.onmessage=_,u=function(){A.port2.postMessage(0)}}var h=[];function _(){var c,g;a=!0;for(var f=h.length;f;){for(g=h,h=[],c=-1;++c<f;)g[c]();f=h.length}a=!1}k.exports=function(c){h.push(c)!==1||a||u()}}).call(this,typeof ze<"u"?ze:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(l,k,m){var o=l("immediate");function u(){}var a={},p=["REJECTED"],r=["FULFILLED"],T=["PENDING"];function S(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,f!==u&&c(this,f)}function A(f,v,N){this.promise=f,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function h(f,v,N){o(function(){var R;try{R=v(N)}catch(O){return a.reject(f,O)}R===f?a.reject(f,new TypeError("Cannot resolve promise with itself")):a.resolve(f,R)})}function _(f){var v=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof v=="function")return function(){v.apply(f,arguments)}}function c(f,v){var N=!1;function R(D){N||(N=!0,a.reject(f,D))}function O(D){N||(N=!0,a.resolve(f,D))}var B=g(function(){v(O,R)});B.status==="error"&&R(B.value)}function g(f,v){var N={};try{N.value=f(v),N.status="success"}catch(R){N.status="error",N.value=R}return N}(k.exports=S).prototype.finally=function(f){if(typeof f!="function")return this;var v=this.constructor;return this.then(function(N){return v.resolve(f()).then(function(){return N})},function(N){return v.resolve(f()).then(function(){throw N})})},S.prototype.catch=function(f){return this.then(null,f)},S.prototype.then=function(f,v){if(typeof f!="function"&&this.state===r||typeof v!="function"&&this.state===p)return this;var N=new this.constructor(u);return this.state!==T?h(N,this.state===r?f:v,this.outcome):this.queue.push(new A(N,f,v)),N},A.prototype.callFulfilled=function(f){a.resolve(this.promise,f)},A.prototype.otherCallFulfilled=function(f){h(this.promise,this.onFulfilled,f)},A.prototype.callRejected=function(f){a.reject(this.promise,f)},A.prototype.otherCallRejected=function(f){h(this.promise,this.onRejected,f)},a.resolve=function(f,v){var N=g(_,v);if(N.status==="error")return a.reject(f,N.value);var R=N.value;if(R)c(f,R);else{f.state=r,f.outcome=v;for(var O=-1,B=f.queue.length;++O<B;)f.queue[O].callFulfilled(v)}return f},a.reject=function(f,v){f.state=p,f.outcome=v;for(var N=-1,R=f.queue.length;++N<R;)f.queue[N].callRejected(v);return f},S.resolve=function(f){return f instanceof this?f:a.resolve(new this(u),f)},S.reject=function(f){var v=new this(u);return a.reject(v,f)},S.all=function(f){var v=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=f.length,R=!1;if(!N)return this.resolve([]);for(var O=new Array(N),B=0,D=-1,q=new this(u);++D<N;)C(f[D],D);return q;function C(W,J){v.resolve(W).then(function(y){O[J]=y,++B!==N||R||(R=!0,a.resolve(q,O))},function(y){R||(R=!0,a.reject(q,y))})}},S.race=function(f){var v=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=f.length,R=!1;if(!N)return this.resolve([]);for(var O=-1,B=new this(u);++O<N;)D=f[O],v.resolve(D).then(function(q){R||(R=!0,a.resolve(B,q))},function(q){R||(R=!0,a.reject(B,q))});var D;return B}},{immediate:36}],38:[function(l,k,m){var o={};(0,l("./lib/utils/common").assign)(o,l("./lib/deflate"),l("./lib/inflate"),l("./lib/zlib/constants")),k.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(l,k,m){var o=l("./zlib/deflate"),u=l("./utils/common"),a=l("./utils/strings"),p=l("./zlib/messages"),r=l("./zlib/zstream"),T=Object.prototype.toString,S=0,A=-1,h=0,_=8;function c(f){if(!(this instanceof c))return new c(f);this.options=u.assign({level:A,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},f||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var N=o.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(N!==S)throw new Error(p[N]);if(v.header&&o.deflateSetHeader(this.strm,v.header),v.dictionary){var R;if(R=typeof v.dictionary=="string"?a.string2buf(v.dictionary):T.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(N=o.deflateSetDictionary(this.strm,R))!==S)throw new Error(p[N]);this._dict_set=!0}}function g(f,v){var N=new c(v);if(N.push(f,!0),N.err)throw N.msg||p[N.err];return N.result}c.prototype.push=function(f,v){var N,R,O=this.strm,B=this.options.chunkSize;if(this.ended)return!1;R=v===~~v?v:v===!0?4:0,typeof f=="string"?O.input=a.string2buf(f):T.call(f)==="[object ArrayBuffer]"?O.input=new Uint8Array(f):O.input=f,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new u.Buf8(B),O.next_out=0,O.avail_out=B),(N=o.deflate(O,R))!==1&&N!==S)return this.onEnd(N),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(u.shrinkBuf(O.output,O.next_out))):this.onData(u.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&N!==1);return R===4?(N=o.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===S):R!==2||(this.onEnd(S),!(O.avail_out=0))},c.prototype.onData=function(f){this.chunks.push(f)},c.prototype.onEnd=function(f){f===S&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},m.Deflate=c,m.deflate=g,m.deflateRaw=function(f,v){return(v=v||{}).raw=!0,g(f,v)},m.gzip=function(f,v){return(v=v||{}).gzip=!0,g(f,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(l,k,m){var o=l("./zlib/inflate"),u=l("./utils/common"),a=l("./utils/strings"),p=l("./zlib/constants"),r=l("./zlib/messages"),T=l("./zlib/zstream"),S=l("./zlib/gzheader"),A=Object.prototype.toString;function h(c){if(!(this instanceof h))return new h(c);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},c||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||c&&c.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var f=o.inflateInit2(this.strm,g.windowBits);if(f!==p.Z_OK)throw new Error(r[f]);this.header=new S,o.inflateGetHeader(this.strm,this.header)}function _(c,g){var f=new h(g);if(f.push(c,!0),f.err)throw f.msg||r[f.err];return f.result}h.prototype.push=function(c,g){var f,v,N,R,O,B,D=this.strm,q=this.options.chunkSize,C=this.options.dictionary,W=!1;if(this.ended)return!1;v=g===~~g?g:g===!0?p.Z_FINISH:p.Z_NO_FLUSH,typeof c=="string"?D.input=a.binstring2buf(c):A.call(c)==="[object ArrayBuffer]"?D.input=new Uint8Array(c):D.input=c,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new u.Buf8(q),D.next_out=0,D.avail_out=q),(f=o.inflate(D,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&C&&(B=typeof C=="string"?a.string2buf(C):A.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,f=o.inflateSetDictionary(this.strm,B)),f===p.Z_BUF_ERROR&&W===!0&&(f=p.Z_OK,W=!1),f!==p.Z_STREAM_END&&f!==p.Z_OK)return this.onEnd(f),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&f!==p.Z_STREAM_END&&(D.avail_in!==0||v!==p.Z_FINISH&&v!==p.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=a.utf8border(D.output,D.next_out),R=D.next_out-N,O=a.buf2string(D.output,N),D.next_out=R,D.avail_out=q-R,R&&u.arraySet(D.output,D.output,N,R,0),this.onData(O)):this.onData(u.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(W=!0)}while((0<D.avail_in||D.avail_out===0)&&f!==p.Z_STREAM_END);return f===p.Z_STREAM_END&&(v=p.Z_FINISH),v===p.Z_FINISH?(f=o.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===p.Z_OK):v!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(D.avail_out=0))},h.prototype.onData=function(c){this.chunks.push(c)},h.prototype.onEnd=function(c){c===p.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},m.Inflate=h,m.inflate=_,m.inflateRaw=function(c,g){return(g=g||{}).raw=!0,_(c,g)},m.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(l,k,m){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";m.assign=function(p){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var T=r.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var S in T)T.hasOwnProperty(S)&&(p[S]=T[S])}}return p},m.shrinkBuf=function(p,r){return p.length===r?p:p.subarray?p.subarray(0,r):(p.length=r,p)};var u={arraySet:function(p,r,T,S,A){if(r.subarray&&p.subarray)p.set(r.subarray(T,T+S),A);else for(var h=0;h<S;h++)p[A+h]=r[T+h]},flattenChunks:function(p){var r,T,S,A,h,_;for(r=S=0,T=p.length;r<T;r++)S+=p[r].length;for(_=new Uint8Array(S),r=A=0,T=p.length;r<T;r++)h=p[r],_.set(h,A),A+=h.length;return _}},a={arraySet:function(p,r,T,S,A){for(var h=0;h<S;h++)p[A+h]=r[T+h]},flattenChunks:function(p){return[].concat.apply([],p)}};m.setTyped=function(p){p?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,u)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,a))},m.setTyped(o)},{}],42:[function(l,k,m){var o=l("./common"),u=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var p=new o.Buf8(256),r=0;r<256;r++)p[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function T(S,A){if(A<65537&&(S.subarray&&a||!S.subarray&&u))return String.fromCharCode.apply(null,o.shrinkBuf(S,A));for(var h="",_=0;_<A;_++)h+=String.fromCharCode(S[_]);return h}p[254]=p[254]=1,m.string2buf=function(S){var A,h,_,c,g,f=S.length,v=0;for(c=0;c<f;c++)(64512&(h=S.charCodeAt(c)))==55296&&c+1<f&&(64512&(_=S.charCodeAt(c+1)))==56320&&(h=65536+(h-55296<<10)+(_-56320),c++),v+=h<128?1:h<2048?2:h<65536?3:4;for(A=new o.Buf8(v),c=g=0;g<v;c++)(64512&(h=S.charCodeAt(c)))==55296&&c+1<f&&(64512&(_=S.charCodeAt(c+1)))==56320&&(h=65536+(h-55296<<10)+(_-56320),c++),h<128?A[g++]=h:(h<2048?A[g++]=192|h>>>6:(h<65536?A[g++]=224|h>>>12:(A[g++]=240|h>>>18,A[g++]=128|h>>>12&63),A[g++]=128|h>>>6&63),A[g++]=128|63&h);return A},m.buf2binstring=function(S){return T(S,S.length)},m.binstring2buf=function(S){for(var A=new o.Buf8(S.length),h=0,_=A.length;h<_;h++)A[h]=S.charCodeAt(h);return A},m.buf2string=function(S,A){var h,_,c,g,f=A||S.length,v=new Array(2*f);for(h=_=0;h<f;)if((c=S[h++])<128)v[_++]=c;else if(4<(g=p[c]))v[_++]=65533,h+=g-1;else{for(c&=g===2?31:g===3?15:7;1<g&&h<f;)c=c<<6|63&S[h++],g--;1<g?v[_++]=65533:c<65536?v[_++]=c:(c-=65536,v[_++]=55296|c>>10&1023,v[_++]=56320|1023&c)}return T(v,_)},m.utf8border=function(S,A){var h;for((A=A||S.length)>S.length&&(A=S.length),h=A-1;0<=h&&(192&S[h])==128;)h--;return h<0||h===0?A:h+p[S[h]]>A?h:A}},{"./common":41}],43:[function(l,k,m){k.exports=function(o,u,a,p){for(var r=65535&o|0,T=o>>>16&65535|0,S=0;a!==0;){for(a-=S=2e3<a?2e3:a;T=T+(r=r+u[p++]|0)|0,--S;);r%=65521,T%=65521}return r|T<<16|0}},{}],44:[function(l,k,m){k.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(l,k,m){var o=function(){for(var u,a=[],p=0;p<256;p++){u=p;for(var r=0;r<8;r++)u=1&u?3988292384^u>>>1:u>>>1;a[p]=u}return a}();k.exports=function(u,a,p,r){var T=o,S=r+p;u^=-1;for(var A=r;A<S;A++)u=u>>>8^T[255&(u^a[A])];return-1^u}},{}],46:[function(l,k,m){var o,u=l("../utils/common"),a=l("./trees"),p=l("./adler32"),r=l("./crc32"),T=l("./messages"),S=0,A=4,h=0,_=-2,c=-1,g=4,f=2,v=8,N=9,R=286,O=30,B=19,D=2*R+1,q=15,C=3,W=258,J=W+C+1,y=42,P=113,s=1,H=2,lt=3,Y=4;function pt(n,X){return n.msg=T[X],X}function tt(n){return(n<<1)-(4<n?9:0)}function ot(n){for(var X=n.length;0<=--X;)n[X]=0}function F(n){var X=n.state,j=X.pending;j>n.avail_out&&(j=n.avail_out),j!==0&&(u.arraySet(n.output,X.pending_buf,X.pending_out,j,n.next_out),n.next_out+=j,X.pending_out+=j,n.total_out+=j,n.avail_out-=j,X.pending-=j,X.pending===0&&(X.pending_out=0))}function z(n,X){a._tr_flush_block(n,0<=n.block_start?n.block_start:-1,n.strstart-n.block_start,X),n.block_start=n.strstart,F(n.strm)}function ut(n,X){n.pending_buf[n.pending++]=X}function it(n,X){n.pending_buf[n.pending++]=X>>>8&255,n.pending_buf[n.pending++]=255&X}function et(n,X){var j,w,b=n.max_chain_length,L=n.strstart,K=n.prev_length,Q=n.nice_match,$=n.strstart>n.w_size-J?n.strstart-(n.w_size-J):0,rt=n.window,at=n.w_mask,nt=n.prev,dt=n.strstart+W,Et=rt[L+K-1],wt=rt[L+K];n.prev_length>=n.good_match&&(b>>=2),Q>n.lookahead&&(Q=n.lookahead);do if(rt[(j=X)+K]===wt&&rt[j+K-1]===Et&&rt[j]===rt[L]&&rt[++j]===rt[L+1]){L+=2,j++;do;while(rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&L<dt);if(w=W-(dt-L),L=dt-W,K<w){if(n.match_start=X,Q<=(K=w))break;Et=rt[L+K-1],wt=rt[L+K]}}while((X=nt[X&at])>$&&--b!=0);return K<=n.lookahead?K:n.lookahead}function Tt(n){var X,j,w,b,L,K,Q,$,rt,at,nt=n.w_size;do{if(b=n.window_size-n.lookahead-n.strstart,n.strstart>=nt+(nt-J)){for(u.arraySet(n.window,n.window,nt,nt,0),n.match_start-=nt,n.strstart-=nt,n.block_start-=nt,X=j=n.hash_size;w=n.head[--X],n.head[X]=nt<=w?w-nt:0,--j;);for(X=j=nt;w=n.prev[--X],n.prev[X]=nt<=w?w-nt:0,--j;);b+=nt}if(n.strm.avail_in===0)break;if(K=n.strm,Q=n.window,$=n.strstart+n.lookahead,rt=b,at=void 0,at=K.avail_in,rt<at&&(at=rt),j=at===0?0:(K.avail_in-=at,u.arraySet(Q,K.input,K.next_in,at,$),K.state.wrap===1?K.adler=p(K.adler,Q,at,$):K.state.wrap===2&&(K.adler=r(K.adler,Q,at,$)),K.next_in+=at,K.total_in+=at,at),n.lookahead+=j,n.lookahead+n.insert>=C)for(L=n.strstart-n.insert,n.ins_h=n.window[L],n.ins_h=(n.ins_h<<n.hash_shift^n.window[L+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[L+C-1])&n.hash_mask,n.prev[L&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=L,L++,n.insert--,!(n.lookahead+n.insert<C)););}while(n.lookahead<J&&n.strm.avail_in!==0)}function At(n,X){for(var j,w;;){if(n.lookahead<J){if(Tt(n),n.lookahead<J&&X===S)return s;if(n.lookahead===0)break}if(j=0,n.lookahead>=C&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+C-1])&n.hash_mask,j=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),j!==0&&n.strstart-j<=n.w_size-J&&(n.match_length=et(n,j)),n.match_length>=C)if(w=a._tr_tally(n,n.strstart-n.match_start,n.match_length-C),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=C){for(n.match_length--;n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+C-1])&n.hash_mask,j=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart,--n.match_length!=0;);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else w=a._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(w&&(z(n,!1),n.strm.avail_out===0))return s}return n.insert=n.strstart<C-1?n.strstart:C-1,X===A?(z(n,!0),n.strm.avail_out===0?lt:Y):n.last_lit&&(z(n,!1),n.strm.avail_out===0)?s:H}function bt(n,X){for(var j,w,b;;){if(n.lookahead<J){if(Tt(n),n.lookahead<J&&X===S)return s;if(n.lookahead===0)break}if(j=0,n.lookahead>=C&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+C-1])&n.hash_mask,j=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=C-1,j!==0&&n.prev_length<n.max_lazy_match&&n.strstart-j<=n.w_size-J&&(n.match_length=et(n,j),n.match_length<=5&&(n.strategy===1||n.match_length===C&&4096<n.strstart-n.match_start)&&(n.match_length=C-1)),n.prev_length>=C&&n.match_length<=n.prev_length){for(b=n.strstart+n.lookahead-C,w=a._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-C),n.lookahead-=n.prev_length-1,n.prev_length-=2;++n.strstart<=b&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+C-1])&n.hash_mask,j=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),--n.prev_length!=0;);if(n.match_available=0,n.match_length=C-1,n.strstart++,w&&(z(n,!1),n.strm.avail_out===0))return s}else if(n.match_available){if((w=a._tr_tally(n,0,n.window[n.strstart-1]))&&z(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return s}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(w=a._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<C-1?n.strstart:C-1,X===A?(z(n,!0),n.strm.avail_out===0?lt:Y):n.last_lit&&(z(n,!1),n.strm.avail_out===0)?s:H}function kt(n,X,j,w,b){this.good_length=n,this.max_lazy=X,this.nice_length=j,this.max_chain=w,this.func=b}function It(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*D),this.dyn_dtree=new u.Buf16(2*(2*O+1)),this.bl_tree=new u.Buf16(2*(2*B+1)),ot(this.dyn_ltree),ot(this.dyn_dtree),ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(q+1),this.heap=new u.Buf16(2*R+1),ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*R+1),ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Rt(n){var X;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=f,(X=n.state).pending=0,X.pending_out=0,X.wrap<0&&(X.wrap=-X.wrap),X.status=X.wrap?y:P,n.adler=X.wrap===2?0:1,X.last_flush=S,a._tr_init(X),h):pt(n,_)}function Ct(n){var X=Rt(n);return X===h&&function(j){j.window_size=2*j.w_size,ot(j.head),j.max_lazy_match=o[j.level].max_lazy,j.good_match=o[j.level].good_length,j.nice_match=o[j.level].nice_length,j.max_chain_length=o[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=C-1,j.match_available=0,j.ins_h=0}(n.state),X}function Dt(n,X,j,w,b,L){if(!n)return _;var K=1;if(X===c&&(X=6),w<0?(K=0,w=-w):15<w&&(K=2,w-=16),b<1||N<b||j!==v||w<8||15<w||X<0||9<X||L<0||g<L)return pt(n,_);w===8&&(w=9);var Q=new It;return(n.state=Q).strm=n,Q.wrap=K,Q.gzhead=null,Q.w_bits=w,Q.w_size=1<<Q.w_bits,Q.w_mask=Q.w_size-1,Q.hash_bits=b+7,Q.hash_size=1<<Q.hash_bits,Q.hash_mask=Q.hash_size-1,Q.hash_shift=~~((Q.hash_bits+C-1)/C),Q.window=new u.Buf8(2*Q.w_size),Q.head=new u.Buf16(Q.hash_size),Q.prev=new u.Buf16(Q.w_size),Q.lit_bufsize=1<<b+6,Q.pending_buf_size=4*Q.lit_bufsize,Q.pending_buf=new u.Buf8(Q.pending_buf_size),Q.d_buf=1*Q.lit_bufsize,Q.l_buf=3*Q.lit_bufsize,Q.level=X,Q.strategy=L,Q.method=j,Ct(n)}o=[new kt(0,0,0,0,function(n,X){var j=65535;for(j>n.pending_buf_size-5&&(j=n.pending_buf_size-5);;){if(n.lookahead<=1){if(Tt(n),n.lookahead===0&&X===S)return s;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var w=n.block_start+j;if((n.strstart===0||n.strstart>=w)&&(n.lookahead=n.strstart-w,n.strstart=w,z(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-J&&(z(n,!1),n.strm.avail_out===0))return s}return n.insert=0,X===A?(z(n,!0),n.strm.avail_out===0?lt:Y):(n.strstart>n.block_start&&(z(n,!1),n.strm.avail_out),s)}),new kt(4,4,8,4,At),new kt(4,5,16,8,At),new kt(4,6,32,32,At),new kt(4,4,16,16,bt),new kt(8,16,32,32,bt),new kt(8,16,128,128,bt),new kt(8,32,128,256,bt),new kt(32,128,258,1024,bt),new kt(32,258,258,4096,bt)],m.deflateInit=function(n,X){return Dt(n,X,v,15,8,0)},m.deflateInit2=Dt,m.deflateReset=Ct,m.deflateResetKeep=Rt,m.deflateSetHeader=function(n,X){return n&&n.state?n.state.wrap!==2?_:(n.state.gzhead=X,h):_},m.deflate=function(n,X){var j,w,b,L;if(!n||!n.state||5<X||X<0)return n?pt(n,_):_;if(w=n.state,!n.output||!n.input&&n.avail_in!==0||w.status===666&&X!==A)return pt(n,n.avail_out===0?-5:_);if(w.strm=n,j=w.last_flush,w.last_flush=X,w.status===y)if(w.wrap===2)n.adler=0,ut(w,31),ut(w,139),ut(w,8),w.gzhead?(ut(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),ut(w,255&w.gzhead.time),ut(w,w.gzhead.time>>8&255),ut(w,w.gzhead.time>>16&255),ut(w,w.gzhead.time>>24&255),ut(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),ut(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(ut(w,255&w.gzhead.extra.length),ut(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(n.adler=r(n.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(ut(w,0),ut(w,0),ut(w,0),ut(w,0),ut(w,0),ut(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),ut(w,3),w.status=P);else{var K=v+(w.w_bits-8<<4)<<8;K|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(K|=32),K+=31-K%31,w.status=P,it(w,K),w.strstart!==0&&(it(w,n.adler>>>16),it(w,65535&n.adler)),n.adler=1}if(w.status===69)if(w.gzhead.extra){for(b=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>b&&(n.adler=r(n.adler,w.pending_buf,w.pending-b,b)),F(n),b=w.pending,w.pending!==w.pending_buf_size));)ut(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>b&&(n.adler=r(n.adler,w.pending_buf,w.pending-b,b)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){b=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>b&&(n.adler=r(n.adler,w.pending_buf,w.pending-b,b)),F(n),b=w.pending,w.pending===w.pending_buf_size)){L=1;break}L=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,ut(w,L)}while(L!==0);w.gzhead.hcrc&&w.pending>b&&(n.adler=r(n.adler,w.pending_buf,w.pending-b,b)),L===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){b=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>b&&(n.adler=r(n.adler,w.pending_buf,w.pending-b,b)),F(n),b=w.pending,w.pending===w.pending_buf_size)){L=1;break}L=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,ut(w,L)}while(L!==0);w.gzhead.hcrc&&w.pending>b&&(n.adler=r(n.adler,w.pending_buf,w.pending-b,b)),L===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&F(n),w.pending+2<=w.pending_buf_size&&(ut(w,255&n.adler),ut(w,n.adler>>8&255),n.adler=0,w.status=P)):w.status=P),w.pending!==0){if(F(n),n.avail_out===0)return w.last_flush=-1,h}else if(n.avail_in===0&&tt(X)<=tt(j)&&X!==A)return pt(n,-5);if(w.status===666&&n.avail_in!==0)return pt(n,-5);if(n.avail_in!==0||w.lookahead!==0||X!==S&&w.status!==666){var Q=w.strategy===2?function($,rt){for(var at;;){if($.lookahead===0&&(Tt($),$.lookahead===0)){if(rt===S)return s;break}if($.match_length=0,at=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,at&&(z($,!1),$.strm.avail_out===0))return s}return $.insert=0,rt===A?(z($,!0),$.strm.avail_out===0?lt:Y):$.last_lit&&(z($,!1),$.strm.avail_out===0)?s:H}(w,X):w.strategy===3?function($,rt){for(var at,nt,dt,Et,wt=$.window;;){if($.lookahead<=W){if(Tt($),$.lookahead<=W&&rt===S)return s;if($.lookahead===0)break}if($.match_length=0,$.lookahead>=C&&0<$.strstart&&(nt=wt[dt=$.strstart-1])===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]){Et=$.strstart+W;do;while(nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&dt<Et);$.match_length=W-(Et-dt),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=C?(at=a._tr_tally($,1,$.match_length-C),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(at=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),at&&(z($,!1),$.strm.avail_out===0))return s}return $.insert=0,rt===A?(z($,!0),$.strm.avail_out===0?lt:Y):$.last_lit&&(z($,!1),$.strm.avail_out===0)?s:H}(w,X):o[w.level].func(w,X);if(Q!==lt&&Q!==Y||(w.status=666),Q===s||Q===lt)return n.avail_out===0&&(w.last_flush=-1),h;if(Q===H&&(X===1?a._tr_align(w):X!==5&&(a._tr_stored_block(w,0,0,!1),X===3&&(ot(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),F(n),n.avail_out===0))return w.last_flush=-1,h}return X!==A?h:w.wrap<=0?1:(w.wrap===2?(ut(w,255&n.adler),ut(w,n.adler>>8&255),ut(w,n.adler>>16&255),ut(w,n.adler>>24&255),ut(w,255&n.total_in),ut(w,n.total_in>>8&255),ut(w,n.total_in>>16&255),ut(w,n.total_in>>24&255)):(it(w,n.adler>>>16),it(w,65535&n.adler)),F(n),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?h:1)},m.deflateEnd=function(n){var X;return n&&n.state?(X=n.state.status)!==y&&X!==69&&X!==73&&X!==91&&X!==103&&X!==P&&X!==666?pt(n,_):(n.state=null,X===P?pt(n,-3):h):_},m.deflateSetDictionary=function(n,X){var j,w,b,L,K,Q,$,rt,at=X.length;if(!n||!n.state||(L=(j=n.state).wrap)===2||L===1&&j.status!==y||j.lookahead)return _;for(L===1&&(n.adler=p(n.adler,X,at,0)),j.wrap=0,at>=j.w_size&&(L===0&&(ot(j.head),j.strstart=0,j.block_start=0,j.insert=0),rt=new u.Buf8(j.w_size),u.arraySet(rt,X,at-j.w_size,j.w_size,0),X=rt,at=j.w_size),K=n.avail_in,Q=n.next_in,$=n.input,n.avail_in=at,n.next_in=0,n.input=X,Tt(j);j.lookahead>=C;){for(w=j.strstart,b=j.lookahead-(C-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[w+C-1])&j.hash_mask,j.prev[w&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=w,w++,--b;);j.strstart=w,j.lookahead=C-1,Tt(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=C-1,j.match_available=0,n.next_in=Q,n.input=$,n.avail_in=K,j.wrap=L,h},m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(l,k,m){k.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(l,k,m){k.exports=function(o,u){var a,p,r,T,S,A,h,_,c,g,f,v,N,R,O,B,D,q,C,W,J,y,P,s,H;a=o.state,p=o.next_in,s=o.input,r=p+(o.avail_in-5),T=o.next_out,H=o.output,S=T-(u-o.avail_out),A=T+(o.avail_out-257),h=a.dmax,_=a.wsize,c=a.whave,g=a.wnext,f=a.window,v=a.hold,N=a.bits,R=a.lencode,O=a.distcode,B=(1<<a.lenbits)-1,D=(1<<a.distbits)-1;t:do{N<15&&(v+=s[p++]<<N,N+=8,v+=s[p++]<<N,N+=8),q=R[v&B];e:for(;;){if(v>>>=C=q>>>24,N-=C,(C=q>>>16&255)===0)H[T++]=65535&q;else{if(!(16&C)){if(!(64&C)){q=R[(65535&q)+(v&(1<<C)-1)];continue e}if(32&C){a.mode=12;break t}o.msg="invalid literal/length code",a.mode=30;break t}W=65535&q,(C&=15)&&(N<C&&(v+=s[p++]<<N,N+=8),W+=v&(1<<C)-1,v>>>=C,N-=C),N<15&&(v+=s[p++]<<N,N+=8,v+=s[p++]<<N,N+=8),q=O[v&D];r:for(;;){if(v>>>=C=q>>>24,N-=C,!(16&(C=q>>>16&255))){if(!(64&C)){q=O[(65535&q)+(v&(1<<C)-1)];continue r}o.msg="invalid distance code",a.mode=30;break t}if(J=65535&q,N<(C&=15)&&(v+=s[p++]<<N,(N+=8)<C&&(v+=s[p++]<<N,N+=8)),h<(J+=v&(1<<C)-1)){o.msg="invalid distance too far back",a.mode=30;break t}if(v>>>=C,N-=C,(C=T-S)<J){if(c<(C=J-C)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break t}if(P=f,(y=0)===g){if(y+=_-C,C<W){for(W-=C;H[T++]=f[y++],--C;);y=T-J,P=H}}else if(g<C){if(y+=_+g-C,(C-=g)<W){for(W-=C;H[T++]=f[y++],--C;);if(y=0,g<W){for(W-=C=g;H[T++]=f[y++],--C;);y=T-J,P=H}}}else if(y+=g-C,C<W){for(W-=C;H[T++]=f[y++],--C;);y=T-J,P=H}for(;2<W;)H[T++]=P[y++],H[T++]=P[y++],H[T++]=P[y++],W-=3;W&&(H[T++]=P[y++],1<W&&(H[T++]=P[y++]))}else{for(y=T-J;H[T++]=H[y++],H[T++]=H[y++],H[T++]=H[y++],2<(W-=3););W&&(H[T++]=H[y++],1<W&&(H[T++]=H[y++]))}break}}break}}while(p<r&&T<A);p-=W=N>>3,v&=(1<<(N-=W<<3))-1,o.next_in=p,o.next_out=T,o.avail_in=p<r?r-p+5:5-(p-r),o.avail_out=T<A?A-T+257:257-(T-A),a.hold=v,a.bits=N}},{}],49:[function(l,k,m){var o=l("../utils/common"),u=l("./adler32"),a=l("./crc32"),p=l("./inffast"),r=l("./inftrees"),T=1,S=2,A=0,h=-2,_=1,c=852,g=592;function f(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(y){var P;return y&&y.state?(P=y.state,y.total_in=y.total_out=P.total=0,y.msg="",P.wrap&&(y.adler=1&P.wrap),P.mode=_,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new o.Buf32(c),P.distcode=P.distdyn=new o.Buf32(g),P.sane=1,P.back=-1,A):h}function R(y){var P;return y&&y.state?((P=y.state).wsize=0,P.whave=0,P.wnext=0,N(y)):h}function O(y,P){var s,H;return y&&y.state?(H=y.state,P<0?(s=0,P=-P):(s=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?h:(H.window!==null&&H.wbits!==P&&(H.window=null),H.wrap=s,H.wbits=P,R(y))):h}function B(y,P){var s,H;return y?(H=new v,(y.state=H).window=null,(s=O(y,P))!==A&&(y.state=null),s):h}var D,q,C=!0;function W(y){if(C){var P;for(D=new o.Buf32(512),q=new o.Buf32(32),P=0;P<144;)y.lens[P++]=8;for(;P<256;)y.lens[P++]=9;for(;P<280;)y.lens[P++]=7;for(;P<288;)y.lens[P++]=8;for(r(T,y.lens,0,288,D,0,y.work,{bits:9}),P=0;P<32;)y.lens[P++]=5;r(S,y.lens,0,32,q,0,y.work,{bits:5}),C=!1}y.lencode=D,y.lenbits=9,y.distcode=q,y.distbits=5}function J(y,P,s,H){var lt,Y=y.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new o.Buf8(Y.wsize)),H>=Y.wsize?(o.arraySet(Y.window,P,s-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):(H<(lt=Y.wsize-Y.wnext)&&(lt=H),o.arraySet(Y.window,P,s-H,lt,Y.wnext),(H-=lt)?(o.arraySet(Y.window,P,s-H,H,0),Y.wnext=H,Y.whave=Y.wsize):(Y.wnext+=lt,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=lt))),0}m.inflateReset=R,m.inflateReset2=O,m.inflateResetKeep=N,m.inflateInit=function(y){return B(y,15)},m.inflateInit2=B,m.inflate=function(y,P){var s,H,lt,Y,pt,tt,ot,F,z,ut,it,et,Tt,At,bt,kt,It,Rt,Ct,Dt,n,X,j,w,b=0,L=new o.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return h;(s=y.state).mode===12&&(s.mode=13),pt=y.next_out,lt=y.output,ot=y.avail_out,Y=y.next_in,H=y.input,tt=y.avail_in,F=s.hold,z=s.bits,ut=tt,it=ot,X=A;t:for(;;)switch(s.mode){case _:if(s.wrap===0){s.mode=13;break}for(;z<16;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(2&s.wrap&&F===35615){L[s.check=0]=255&F,L[1]=F>>>8&255,s.check=a(s.check,L,2,0),z=F=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&F)<<8)+(F>>8))%31){y.msg="incorrect header check",s.mode=30;break}if((15&F)!=8){y.msg="unknown compression method",s.mode=30;break}if(z-=4,n=8+(15&(F>>>=4)),s.wbits===0)s.wbits=n;else if(n>s.wbits){y.msg="invalid window size",s.mode=30;break}s.dmax=1<<n,y.adler=s.check=1,s.mode=512&F?10:12,z=F=0;break;case 2:for(;z<16;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(s.flags=F,(255&s.flags)!=8){y.msg="unknown compression method",s.mode=30;break}if(57344&s.flags){y.msg="unknown header flags set",s.mode=30;break}s.head&&(s.head.text=F>>8&1),512&s.flags&&(L[0]=255&F,L[1]=F>>>8&255,s.check=a(s.check,L,2,0)),z=F=0,s.mode=3;case 3:for(;z<32;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}s.head&&(s.head.time=F),512&s.flags&&(L[0]=255&F,L[1]=F>>>8&255,L[2]=F>>>16&255,L[3]=F>>>24&255,s.check=a(s.check,L,4,0)),z=F=0,s.mode=4;case 4:for(;z<16;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}s.head&&(s.head.xflags=255&F,s.head.os=F>>8),512&s.flags&&(L[0]=255&F,L[1]=F>>>8&255,s.check=a(s.check,L,2,0)),z=F=0,s.mode=5;case 5:if(1024&s.flags){for(;z<16;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}s.length=F,s.head&&(s.head.extra_len=F),512&s.flags&&(L[0]=255&F,L[1]=F>>>8&255,s.check=a(s.check,L,2,0)),z=F=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&(tt<(et=s.length)&&(et=tt),et&&(s.head&&(n=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),o.arraySet(s.head.extra,H,Y,et,n)),512&s.flags&&(s.check=a(s.check,H,et,Y)),tt-=et,Y+=et,s.length-=et),s.length))break t;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(tt===0)break t;for(et=0;n=H[Y+et++],s.head&&n&&s.length<65536&&(s.head.name+=String.fromCharCode(n)),n&&et<tt;);if(512&s.flags&&(s.check=a(s.check,H,et,Y)),tt-=et,Y+=et,n)break t}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(tt===0)break t;for(et=0;n=H[Y+et++],s.head&&n&&s.length<65536&&(s.head.comment+=String.fromCharCode(n)),n&&et<tt;);if(512&s.flags&&(s.check=a(s.check,H,et,Y)),tt-=et,Y+=et,n)break t}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;z<16;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(F!==(65535&s.check)){y.msg="header crc mismatch",s.mode=30;break}z=F=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),y.adler=s.check=0,s.mode=12;break;case 10:for(;z<32;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}y.adler=s.check=f(F),z=F=0,s.mode=11;case 11:if(s.havedict===0)return y.next_out=pt,y.avail_out=ot,y.next_in=Y,y.avail_in=tt,s.hold=F,s.bits=z,2;y.adler=s.check=1,s.mode=12;case 12:if(P===5||P===6)break t;case 13:if(s.last){F>>>=7&z,z-=7&z,s.mode=27;break}for(;z<3;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}switch(s.last=1&F,z-=1,3&(F>>>=1)){case 0:s.mode=14;break;case 1:if(W(s),s.mode=20,P!==6)break;F>>>=2,z-=2;break t;case 2:s.mode=17;break;case 3:y.msg="invalid block type",s.mode=30}F>>>=2,z-=2;break;case 14:for(F>>>=7&z,z-=7&z;z<32;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if((65535&F)!=(F>>>16^65535)){y.msg="invalid stored block lengths",s.mode=30;break}if(s.length=65535&F,z=F=0,s.mode=15,P===6)break t;case 15:s.mode=16;case 16:if(et=s.length){if(tt<et&&(et=tt),ot<et&&(et=ot),et===0)break t;o.arraySet(lt,H,Y,et,pt),tt-=et,Y+=et,ot-=et,pt+=et,s.length-=et;break}s.mode=12;break;case 17:for(;z<14;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(s.nlen=257+(31&F),F>>>=5,z-=5,s.ndist=1+(31&F),F>>>=5,z-=5,s.ncode=4+(15&F),F>>>=4,z-=4,286<s.nlen||30<s.ndist){y.msg="too many length or distance symbols",s.mode=30;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;z<3;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}s.lens[K[s.have++]]=7&F,F>>>=3,z-=3}for(;s.have<19;)s.lens[K[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,j={bits:s.lenbits},X=r(0,s.lens,0,19,s.lencode,0,s.work,j),s.lenbits=j.bits,X){y.msg="invalid code lengths set",s.mode=30;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;kt=(b=s.lencode[F&(1<<s.lenbits)-1])>>>16&255,It=65535&b,!((bt=b>>>24)<=z);){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(It<16)F>>>=bt,z-=bt,s.lens[s.have++]=It;else{if(It===16){for(w=bt+2;z<w;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(F>>>=bt,z-=bt,s.have===0){y.msg="invalid bit length repeat",s.mode=30;break}n=s.lens[s.have-1],et=3+(3&F),F>>>=2,z-=2}else if(It===17){for(w=bt+3;z<w;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}z-=bt,n=0,et=3+(7&(F>>>=bt)),F>>>=3,z-=3}else{for(w=bt+7;z<w;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}z-=bt,n=0,et=11+(127&(F>>>=bt)),F>>>=7,z-=7}if(s.have+et>s.nlen+s.ndist){y.msg="invalid bit length repeat",s.mode=30;break}for(;et--;)s.lens[s.have++]=n}}if(s.mode===30)break;if(s.lens[256]===0){y.msg="invalid code -- missing end-of-block",s.mode=30;break}if(s.lenbits=9,j={bits:s.lenbits},X=r(T,s.lens,0,s.nlen,s.lencode,0,s.work,j),s.lenbits=j.bits,X){y.msg="invalid literal/lengths set",s.mode=30;break}if(s.distbits=6,s.distcode=s.distdyn,j={bits:s.distbits},X=r(S,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,j),s.distbits=j.bits,X){y.msg="invalid distances set",s.mode=30;break}if(s.mode=20,P===6)break t;case 20:s.mode=21;case 21:if(6<=tt&&258<=ot){y.next_out=pt,y.avail_out=ot,y.next_in=Y,y.avail_in=tt,s.hold=F,s.bits=z,p(y,it),pt=y.next_out,lt=y.output,ot=y.avail_out,Y=y.next_in,H=y.input,tt=y.avail_in,F=s.hold,z=s.bits,s.mode===12&&(s.back=-1);break}for(s.back=0;kt=(b=s.lencode[F&(1<<s.lenbits)-1])>>>16&255,It=65535&b,!((bt=b>>>24)<=z);){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(kt&&!(240&kt)){for(Rt=bt,Ct=kt,Dt=It;kt=(b=s.lencode[Dt+((F&(1<<Rt+Ct)-1)>>Rt)])>>>16&255,It=65535&b,!(Rt+(bt=b>>>24)<=z);){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}F>>>=Rt,z-=Rt,s.back+=Rt}if(F>>>=bt,z-=bt,s.back+=bt,s.length=It,kt===0){s.mode=26;break}if(32&kt){s.back=-1,s.mode=12;break}if(64&kt){y.msg="invalid literal/length code",s.mode=30;break}s.extra=15&kt,s.mode=22;case 22:if(s.extra){for(w=s.extra;z<w;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}s.length+=F&(1<<s.extra)-1,F>>>=s.extra,z-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;kt=(b=s.distcode[F&(1<<s.distbits)-1])>>>16&255,It=65535&b,!((bt=b>>>24)<=z);){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(!(240&kt)){for(Rt=bt,Ct=kt,Dt=It;kt=(b=s.distcode[Dt+((F&(1<<Rt+Ct)-1)>>Rt)])>>>16&255,It=65535&b,!(Rt+(bt=b>>>24)<=z);){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}F>>>=Rt,z-=Rt,s.back+=Rt}if(F>>>=bt,z-=bt,s.back+=bt,64&kt){y.msg="invalid distance code",s.mode=30;break}s.offset=It,s.extra=15&kt,s.mode=24;case 24:if(s.extra){for(w=s.extra;z<w;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}s.offset+=F&(1<<s.extra)-1,F>>>=s.extra,z-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){y.msg="invalid distance too far back",s.mode=30;break}s.mode=25;case 25:if(ot===0)break t;if(et=it-ot,s.offset>et){if((et=s.offset-et)>s.whave&&s.sane){y.msg="invalid distance too far back",s.mode=30;break}Tt=et>s.wnext?(et-=s.wnext,s.wsize-et):s.wnext-et,et>s.length&&(et=s.length),At=s.window}else At=lt,Tt=pt-s.offset,et=s.length;for(ot<et&&(et=ot),ot-=et,s.length-=et;lt[pt++]=At[Tt++],--et;);s.length===0&&(s.mode=21);break;case 26:if(ot===0)break t;lt[pt++]=s.length,ot--,s.mode=21;break;case 27:if(s.wrap){for(;z<32;){if(tt===0)break t;tt--,F|=H[Y++]<<z,z+=8}if(it-=ot,y.total_out+=it,s.total+=it,it&&(y.adler=s.check=s.flags?a(s.check,lt,it,pt-it):u(s.check,lt,it,pt-it)),it=ot,(s.flags?F:f(F))!==s.check){y.msg="incorrect data check",s.mode=30;break}z=F=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;z<32;){if(tt===0)break t;tt--,F+=H[Y++]<<z,z+=8}if(F!==(4294967295&s.total)){y.msg="incorrect length check",s.mode=30;break}z=F=0}s.mode=29;case 29:X=1;break t;case 30:X=-3;break t;case 31:return-4;case 32:default:return h}return y.next_out=pt,y.avail_out=ot,y.next_in=Y,y.avail_in=tt,s.hold=F,s.bits=z,(s.wsize||it!==y.avail_out&&s.mode<30&&(s.mode<27||P!==4))&&J(y,y.output,y.next_out,it-y.avail_out)?(s.mode=31,-4):(ut-=y.avail_in,it-=y.avail_out,y.total_in+=ut,y.total_out+=it,s.total+=it,s.wrap&&it&&(y.adler=s.check=s.flags?a(s.check,lt,it,y.next_out-it):u(s.check,lt,it,y.next_out-it)),y.data_type=s.bits+(s.last?64:0)+(s.mode===12?128:0)+(s.mode===20||s.mode===15?256:0),(ut==0&&it===0||P===4)&&X===A&&(X=-5),X)},m.inflateEnd=function(y){if(!y||!y.state)return h;var P=y.state;return P.window&&(P.window=null),y.state=null,A},m.inflateGetHeader=function(y,P){var s;return y&&y.state&&2&(s=y.state).wrap?((s.head=P).done=!1,A):h},m.inflateSetDictionary=function(y,P){var s,H=P.length;return y&&y.state?(s=y.state).wrap!==0&&s.mode!==11?h:s.mode===11&&u(1,P,H,0)!==s.check?-3:J(y,P,H,H)?(s.mode=31,-4):(s.havedict=1,A):h},m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(l,k,m){var o=l("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],r=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];k.exports=function(T,S,A,h,_,c,g,f){var v,N,R,O,B,D,q,C,W,J=f.bits,y=0,P=0,s=0,H=0,lt=0,Y=0,pt=0,tt=0,ot=0,F=0,z=null,ut=0,it=new o.Buf16(16),et=new o.Buf16(16),Tt=null,At=0;for(y=0;y<=15;y++)it[y]=0;for(P=0;P<h;P++)it[S[A+P]]++;for(lt=J,H=15;1<=H&&it[H]===0;H--);if(H<lt&&(lt=H),H===0)return _[c++]=20971520,_[c++]=20971520,f.bits=1,0;for(s=1;s<H&&it[s]===0;s++);for(lt<s&&(lt=s),y=tt=1;y<=15;y++)if(tt<<=1,(tt-=it[y])<0)return-1;if(0<tt&&(T===0||H!==1))return-1;for(et[1]=0,y=1;y<15;y++)et[y+1]=et[y]+it[y];for(P=0;P<h;P++)S[A+P]!==0&&(g[et[S[A+P]]++]=P);if(D=T===0?(z=Tt=g,19):T===1?(z=u,ut-=257,Tt=a,At-=257,256):(z=p,Tt=r,-1),y=s,B=c,pt=P=F=0,R=-1,O=(ot=1<<(Y=lt))-1,T===1&&852<ot||T===2&&592<ot)return 1;for(;;){for(q=y-pt,W=g[P]<D?(C=0,g[P]):g[P]>D?(C=Tt[At+g[P]],z[ut+g[P]]):(C=96,0),v=1<<y-pt,s=N=1<<Y;_[B+(F>>pt)+(N-=v)]=q<<24|C<<16|W|0,N!==0;);for(v=1<<y-1;F&v;)v>>=1;if(v!==0?(F&=v-1,F+=v):F=0,P++,--it[y]==0){if(y===H)break;y=S[A+g[P]]}if(lt<y&&(F&O)!==R){for(pt===0&&(pt=lt),B+=s,tt=1<<(Y=y-pt);Y+pt<H&&!((tt-=it[Y+pt])<=0);)Y++,tt<<=1;if(ot+=1<<Y,T===1&&852<ot||T===2&&592<ot)return 1;_[R=F&O]=lt<<24|Y<<16|B-c|0}}return F!==0&&(_[B+F]=y-pt<<24|64<<16|0),f.bits=lt,0}},{"../utils/common":41}],51:[function(l,k,m){k.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(l,k,m){var o=l("../utils/common"),u=0,a=1;function p(b){for(var L=b.length;0<=--L;)b[L]=0}var r=0,T=29,S=256,A=S+1+T,h=30,_=19,c=2*A+1,g=15,f=16,v=7,N=256,R=16,O=17,B=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(A+2));p(J);var y=new Array(2*h);p(y);var P=new Array(512);p(P);var s=new Array(256);p(s);var H=new Array(T);p(H);var lt,Y,pt,tt=new Array(h);function ot(b,L,K,Q,$){this.static_tree=b,this.extra_bits=L,this.extra_base=K,this.elems=Q,this.max_length=$,this.has_stree=b&&b.length}function F(b,L){this.dyn_tree=b,this.max_code=0,this.stat_desc=L}function z(b){return b<256?P[b]:P[256+(b>>>7)]}function ut(b,L){b.pending_buf[b.pending++]=255&L,b.pending_buf[b.pending++]=L>>>8&255}function it(b,L,K){b.bi_valid>f-K?(b.bi_buf|=L<<b.bi_valid&65535,ut(b,b.bi_buf),b.bi_buf=L>>f-b.bi_valid,b.bi_valid+=K-f):(b.bi_buf|=L<<b.bi_valid&65535,b.bi_valid+=K)}function et(b,L,K){it(b,K[2*L],K[2*L+1])}function Tt(b,L){for(var K=0;K|=1&b,b>>>=1,K<<=1,0<--L;);return K>>>1}function At(b,L,K){var Q,$,rt=new Array(g+1),at=0;for(Q=1;Q<=g;Q++)rt[Q]=at=at+K[Q-1]<<1;for($=0;$<=L;$++){var nt=b[2*$+1];nt!==0&&(b[2*$]=Tt(rt[nt]++,nt))}}function bt(b){var L;for(L=0;L<A;L++)b.dyn_ltree[2*L]=0;for(L=0;L<h;L++)b.dyn_dtree[2*L]=0;for(L=0;L<_;L++)b.bl_tree[2*L]=0;b.dyn_ltree[2*N]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function kt(b){8<b.bi_valid?ut(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function It(b,L,K,Q){var $=2*L,rt=2*K;return b[$]<b[rt]||b[$]===b[rt]&&Q[L]<=Q[K]}function Rt(b,L,K){for(var Q=b.heap[K],$=K<<1;$<=b.heap_len&&($<b.heap_len&&It(L,b.heap[$+1],b.heap[$],b.depth)&&$++,!It(L,Q,b.heap[$],b.depth));)b.heap[K]=b.heap[$],K=$,$<<=1;b.heap[K]=Q}function Ct(b,L,K){var Q,$,rt,at,nt=0;if(b.last_lit!==0)for(;Q=b.pending_buf[b.d_buf+2*nt]<<8|b.pending_buf[b.d_buf+2*nt+1],$=b.pending_buf[b.l_buf+nt],nt++,Q===0?et(b,$,L):(et(b,(rt=s[$])+S+1,L),(at=D[rt])!==0&&it(b,$-=H[rt],at),et(b,rt=z(--Q),K),(at=q[rt])!==0&&it(b,Q-=tt[rt],at)),nt<b.last_lit;);et(b,N,L)}function Dt(b,L){var K,Q,$,rt=L.dyn_tree,at=L.stat_desc.static_tree,nt=L.stat_desc.has_stree,dt=L.stat_desc.elems,Et=-1;for(b.heap_len=0,b.heap_max=c,K=0;K<dt;K++)rt[2*K]!==0?(b.heap[++b.heap_len]=Et=K,b.depth[K]=0):rt[2*K+1]=0;for(;b.heap_len<2;)rt[2*($=b.heap[++b.heap_len]=Et<2?++Et:0)]=1,b.depth[$]=0,b.opt_len--,nt&&(b.static_len-=at[2*$+1]);for(L.max_code=Et,K=b.heap_len>>1;1<=K;K--)Rt(b,rt,K);for($=dt;K=b.heap[1],b.heap[1]=b.heap[b.heap_len--],Rt(b,rt,1),Q=b.heap[1],b.heap[--b.heap_max]=K,b.heap[--b.heap_max]=Q,rt[2*$]=rt[2*K]+rt[2*Q],b.depth[$]=(b.depth[K]>=b.depth[Q]?b.depth[K]:b.depth[Q])+1,rt[2*K+1]=rt[2*Q+1]=$,b.heap[1]=$++,Rt(b,rt,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],function(wt,Lt){var te,jt,le,xt,_t,pe,zt=Lt.dyn_tree,ge=Lt.max_code,ee=Lt.stat_desc.static_tree,We=Lt.stat_desc.has_stree,Kt=Lt.stat_desc.extra_bits,be=Lt.stat_desc.extra_base,re=Lt.stat_desc.max_length,ue=0;for(xt=0;xt<=g;xt++)wt.bl_count[xt]=0;for(zt[2*wt.heap[wt.heap_max]+1]=0,te=wt.heap_max+1;te<c;te++)re<(xt=zt[2*zt[2*(jt=wt.heap[te])+1]+1]+1)&&(xt=re,ue++),zt[2*jt+1]=xt,ge<jt||(wt.bl_count[xt]++,_t=0,be<=jt&&(_t=Kt[jt-be]),pe=zt[2*jt],wt.opt_len+=pe*(xt+_t),We&&(wt.static_len+=pe*(ee[2*jt+1]+_t)));if(ue!==0){do{for(xt=re-1;wt.bl_count[xt]===0;)xt--;wt.bl_count[xt]--,wt.bl_count[xt+1]+=2,wt.bl_count[re]--,ue-=2}while(0<ue);for(xt=re;xt!==0;xt--)for(jt=wt.bl_count[xt];jt!==0;)ge<(le=wt.heap[--te])||(zt[2*le+1]!==xt&&(wt.opt_len+=(xt-zt[2*le+1])*zt[2*le],zt[2*le+1]=xt),jt--)}}(b,L),At(rt,Et,b.bl_count)}function n(b,L,K){var Q,$,rt=-1,at=L[1],nt=0,dt=7,Et=4;for(at===0&&(dt=138,Et=3),L[2*(K+1)+1]=65535,Q=0;Q<=K;Q++)$=at,at=L[2*(Q+1)+1],++nt<dt&&$===at||(nt<Et?b.bl_tree[2*$]+=nt:$!==0?($!==rt&&b.bl_tree[2*$]++,b.bl_tree[2*R]++):nt<=10?b.bl_tree[2*O]++:b.bl_tree[2*B]++,rt=$,Et=(nt=0)===at?(dt=138,3):$===at?(dt=6,3):(dt=7,4))}function X(b,L,K){var Q,$,rt=-1,at=L[1],nt=0,dt=7,Et=4;for(at===0&&(dt=138,Et=3),Q=0;Q<=K;Q++)if($=at,at=L[2*(Q+1)+1],!(++nt<dt&&$===at)){if(nt<Et)for(;et(b,$,b.bl_tree),--nt!=0;);else $!==0?($!==rt&&(et(b,$,b.bl_tree),nt--),et(b,R,b.bl_tree),it(b,nt-3,2)):nt<=10?(et(b,O,b.bl_tree),it(b,nt-3,3)):(et(b,B,b.bl_tree),it(b,nt-11,7));rt=$,Et=(nt=0)===at?(dt=138,3):$===at?(dt=6,3):(dt=7,4)}}p(tt);var j=!1;function w(b,L,K,Q){it(b,(r<<1)+(Q?1:0),3),function($,rt,at,nt){kt($),ut($,at),ut($,~at),o.arraySet($.pending_buf,$.window,rt,at,$.pending),$.pending+=at}(b,L,K)}m._tr_init=function(b){j||(function(){var L,K,Q,$,rt,at=new Array(g+1);for($=Q=0;$<T-1;$++)for(H[$]=Q,L=0;L<1<<D[$];L++)s[Q++]=$;for(s[Q-1]=$,$=rt=0;$<16;$++)for(tt[$]=rt,L=0;L<1<<q[$];L++)P[rt++]=$;for(rt>>=7;$<h;$++)for(tt[$]=rt<<7,L=0;L<1<<q[$]-7;L++)P[256+rt++]=$;for(K=0;K<=g;K++)at[K]=0;for(L=0;L<=143;)J[2*L+1]=8,L++,at[8]++;for(;L<=255;)J[2*L+1]=9,L++,at[9]++;for(;L<=279;)J[2*L+1]=7,L++,at[7]++;for(;L<=287;)J[2*L+1]=8,L++,at[8]++;for(At(J,A+1,at),L=0;L<h;L++)y[2*L+1]=5,y[2*L]=Tt(L,5);lt=new ot(J,D,S+1,A,g),Y=new ot(y,q,0,h,g),pt=new ot(new Array(0),C,0,_,v)}(),j=!0),b.l_desc=new F(b.dyn_ltree,lt),b.d_desc=new F(b.dyn_dtree,Y),b.bl_desc=new F(b.bl_tree,pt),b.bi_buf=0,b.bi_valid=0,bt(b)},m._tr_stored_block=w,m._tr_flush_block=function(b,L,K,Q){var $,rt,at=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=function(nt){var dt,Et=4093624447;for(dt=0;dt<=31;dt++,Et>>>=1)if(1&Et&&nt.dyn_ltree[2*dt]!==0)return u;if(nt.dyn_ltree[18]!==0||nt.dyn_ltree[20]!==0||nt.dyn_ltree[26]!==0)return a;for(dt=32;dt<S;dt++)if(nt.dyn_ltree[2*dt]!==0)return a;return u}(b)),Dt(b,b.l_desc),Dt(b,b.d_desc),at=function(nt){var dt;for(n(nt,nt.dyn_ltree,nt.l_desc.max_code),n(nt,nt.dyn_dtree,nt.d_desc.max_code),Dt(nt,nt.bl_desc),dt=_-1;3<=dt&&nt.bl_tree[2*W[dt]+1]===0;dt--);return nt.opt_len+=3*(dt+1)+5+5+4,dt}(b),$=b.opt_len+3+7>>>3,(rt=b.static_len+3+7>>>3)<=$&&($=rt)):$=rt=K+5,K+4<=$&&L!==-1?w(b,L,K,Q):b.strategy===4||rt===$?(it(b,2+(Q?1:0),3),Ct(b,J,y)):(it(b,4+(Q?1:0),3),function(nt,dt,Et,wt){var Lt;for(it(nt,dt-257,5),it(nt,Et-1,5),it(nt,wt-4,4),Lt=0;Lt<wt;Lt++)it(nt,nt.bl_tree[2*W[Lt]+1],3);X(nt,nt.dyn_ltree,dt-1),X(nt,nt.dyn_dtree,Et-1)}(b,b.l_desc.max_code+1,b.d_desc.max_code+1,at+1),Ct(b,b.dyn_ltree,b.dyn_dtree)),bt(b),Q&&kt(b)},m._tr_tally=function(b,L,K){return b.pending_buf[b.d_buf+2*b.last_lit]=L>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&L,b.pending_buf[b.l_buf+b.last_lit]=255&K,b.last_lit++,L===0?b.dyn_ltree[2*K]++:(b.matches++,L--,b.dyn_ltree[2*(s[K]+S+1)]++,b.dyn_dtree[2*z(L)]++),b.last_lit===b.lit_bufsize-1},m._tr_align=function(b){it(b,2,3),et(b,N,J),function(L){L.bi_valid===16?(ut(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)}(b)}},{"../utils/common":41}],53:[function(l,k,m){k.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(l,k,m){(function(o){(function(u,a){if(!u.setImmediate){var p,r,T,S,A=1,h={},_=!1,c=u.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(u);g=g&&g.setTimeout?g:u,p={}.toString.call(u.process)==="[object process]"?function(R){process.nextTick(function(){v(R)})}:function(){if(u.postMessage&&!u.importScripts){var R=!0,O=u.onmessage;return u.onmessage=function(){R=!1},u.postMessage("","*"),u.onmessage=O,R}}()?(S="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",N,!1):u.attachEvent("onmessage",N),function(R){u.postMessage(S+R,"*")}):u.MessageChannel?((T=new MessageChannel).port1.onmessage=function(R){v(R.data)},function(R){T.port2.postMessage(R)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(R){var O=c.createElement("script");O.onreadystatechange=function(){v(R),O.onreadystatechange=null,r.removeChild(O),O=null},r.appendChild(O)}):function(R){setTimeout(v,0,R)},g.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var O=new Array(arguments.length-1),B=0;B<O.length;B++)O[B]=arguments[B+1];var D={callback:R,args:O};return h[A]=D,p(A),A++},g.clearImmediate=f}function f(R){delete h[R]}function v(R){if(_)setTimeout(v,0,R);else{var O=h[R];if(O){_=!0;try{(function(B){var D=B.callback,q=B.args;switch(q.length){case 0:D();break;case 1:D(q[0]);break;case 2:D(q[0],q[1]);break;case 3:D(q[0],q[1],q[2]);break;default:D.apply(a,q)}})(O)}finally{f(R),_=!1}}}}function N(R){R.source===u&&typeof R.data=="string"&&R.data.indexOf(S)===0&&v(+R.data.slice(S.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof ze<"u"?ze:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Zr);var ai=Zr.exports;const ar=Gr(ai),Gt=0,oi={content_country:"US",content_language:"en",theme:"DARK"};function Xr(){const E=new Date,x=l=>String(l).padStart(2,"0");return`${E.getFullYear()}-${x(E.getMonth()+1)}-${x(E.getDate())}-${x(E.getHours())}-${x(E.getMinutes())}-${x(E.getSeconds())}`}function ur(E,x,l=null){let k=x;l&&(x.endsWith(".zip")?k=x.replace(".zip",`-${l}.zip`):x.endsWith(".json")&&(k=x.replace(".json",`-${l}.json`)));const m=URL.createObjectURL(E),o=document.createElement("a");o.href=m,o.download=k,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(m)}function Ae(E){if(!E)return"";const x=String(E);let l=x.match(/[?&]v=([^&]+)/);return l&&l[1]||(l=x.match(/youtu\.be\/([^?&/]+)/),l&&l[1])||(l=x.match(/\/shorts\/([^?&/]+)/),l&&l[1])||(l=x.match(/\/embed\/([^?&/]+)/),l&&l[1])?l[1]:""}const Fe=Number.MAX_SAFE_INTEGER;function oe(E){const x=Number(E||0);return!Number.isFinite(x)||isNaN(x)?0:x>Fe?Fe:x<-Fe?-Fe:Math.trunc(x)}function jr(E){if(!E&&E!==0)return"1970-01-01";const x=String(E).trim();if(/^\d{4}-\d{2}-\d{2}/.test(x))return x.split("T")[0];const l=Number(x);if(!Number.isFinite(l))return"1970-01-01";const k=Math.abs(l);if(k>=1e7&&k<=99999999){const m=String(Math.trunc(l)),o=m.slice(0,4),u=m.slice(4,6),a=m.slice(6,8);return`${o}-${u}-${a}`}return k>1e12?new Date(l).toISOString().split("T")[0]:k>=1e9?new Date(l*1e3).toISOString().split("T")[0]:new Date(l).toISOString().split("T")[0]}function $r(E){if(E==null)return 0;if(typeof E=="number")return E>1e12?Math.floor(E):Math.floor(E*1e3);const x=String(E).trim();if(!x)return 0;const l=Date.parse(x);if(!isNaN(l))return l;const k=Number(x);return Number.isFinite(k)?k>1e12?Math.floor(k):Math.floor(k*1e3):0}async function li(E,x,l,k,m){G("Starting conversion to NewPipe format...");let o,u=new ar,a="",p=null,r=null;const T=m||null;let S=!1;if(l==="merge"&&E){G("Loading existing NewPipe backup...");const f=await E.arrayBuffer(),v=await ar.loadAsync(f),N=v.file("newpipe.db");if(N){const B=await N.async("uint8array");o=new k.Database(B),G("Database loaded. Running integrity check...");const D=o.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");D&&D[0]&&D[0].values&&G(`Existing NewPipe database contains: ${D[0].values.flat().join(", ")} tables.`,"schema");try{si(o);try{const q=o.exec("PRAGMA table_info('stream_state')")||[],C=o.exec("PRAGMA foreign_key_list('stream_state')")||[],W=o.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,q.length>0&&(a+=JSON.stringify(q[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,C.length>0&&(a+=JSON.stringify(C[0],null,2)+`
`),a+=`
CREATE statement:
`,W.length>0&&W[0].values&&W[0].values.length>0&&(a+=W[0].values[0][0]+`
`)}catch(q){a+="Failed to collect stream_state debug info: "+(q.message||q.toString())+`
`}}catch(q){G("Warning: failed to ensure stream_state schema: "+(q.message||q.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const R=v.file("preferences.json");R&&(p=await R.async("string"));const O=v.file("newpipe.settings");O&&(r=await O.async("blob"))}else{G("Creating new NewPipe database..."),o=new k.Database,ii(o);try{const f=o.exec("PRAGMA table_info('stream_state')")||[],v=o.exec("PRAGMA foreign_key_list('stream_state')")||[],N=o.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,f.length>0&&(a+=JSON.stringify(f[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,v.length>0&&(a+=JSON.stringify(v[0],null,2)+`
`),a+=`
CREATE statement:
`,N.length>0&&N[0].values&&N[0].values.length>0&&(a+=N[0].values[0][0]+`
`)}catch(f){a+="Failed to collect stream_state debug info (new DB): "+(f.message||f.toString())+`
`}}G("Parsing LibreTube JSON...");const A=await x.text(),h=JSON.parse(A);o.run("BEGIN TRANSACTION");try{G("Processing Subscriptions..."),l==="merge"&&o.run(`DELETE FROM subscriptions WHERE service_id = ${Gt}`);let f=0;if(h.subscriptions){const v=o.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");h.subscriptions.forEach(N=>{try{const R=N.url||`https://www.youtube.com/channel/${N.channelId}`,O=N.name||"Unknown",B=N.avatar||N.avatarUrl||null;if(!R.includes("youtube.com")&&!R.includes("youtu.be")){G(`Dropped non-YouTube subscription: ${O} (${R})`,"warn");return}v.run([Gt,R,O,B,0,"",0]),f++}catch(R){G(`ERROR inserting subscription ${N.name}: ${R.message||R.toString()}`,"err")}}),v.free()}G(`Inserted ${f} subscriptions.`)}catch(f){throw G(`FATAL ERROR during Subscriptions phase: ${f.message||f.toString()}`,"err"),f}try{G("Processing Playlists..."),l==="merge"&&(T==="only_libretube"?(o.run("DELETE FROM playlist_stream_join"),o.run("DELETE FROM playlists"),o.run("DELETE FROM remote_playlists"),G("Cleared existing playlists; will import only LibreTube playlists.")):T==="only_newpipe"?(S=!0,G("Preserving existing NewPipe playlists; skipping import from LibreTube.")):G(`Merging playlists with behavior: ${T||"default (LibreTube precedence)"}`));let f=0;if(h.localPlaylists&&!S){const v=o.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),N=o.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),R=o.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)"),O=h.localPlaylists;for(const B of O){const D=B.playlist.name||"Untitled";try{const q=o.exec(`SELECT uid FROM playlists WHERE name = '${D.replace(/'/g,"''")}'`);if(q.length>0)if(T==="merge_lt_precedence"){const y=q[0].values[0][0];try{o.run(`DELETE FROM playlist_stream_join WHERE playlist_id = ${y}`),o.run(`DELETE FROM playlists WHERE uid = ${y}`),G(`Replaced existing local playlist: ${D}`,"schema")}catch(P){G(`WARN: failed to replace playlist ${D}: ${P.message||P.toString()}`,"warn")}}else{G(`Skipping duplicate local playlist: ${D}`,"warn");continue}N.run([D,0,-1,f]);const W=o.exec("SELECT last_insert_rowid()")[0].values[0][0];let J=0;for(const y of B.videos){const P=y.videoId||(y.url?Ae(y.url):null);if(!P){G(`Skipped video in playlist ${D} due to missing videoId.`,"warn");continue}const s=`https://www.youtube.com/watch?v=${P}`;try{const H=y.title||"Unknown",lt=y.uploader||"Unknown",Y=y.duration||0,pt=y.uploadDate?new Date(y.uploadDate).getTime()/1e3:null,tt=y.thumbnailUrl||null;v.run([Gt,s,H,"VIDEO_STREAM",Y,lt,pt,tt]);const ot=o.exec(`SELECT uid FROM streams WHERE service_id=${Gt} AND url='${s.replace(/'/g,"''")}'`);if(ot.length>0&&ot[0].values.length>0){const F=ot[0].values[0][0],z=J;if(R.run([W,F,J++]),z===0)try{o.run(`UPDATE playlists SET thumbnail_stream_id = ${F} WHERE uid = ${W}`)}catch(ut){G(`WARN: failed to set playlist thumbnail for ${D}: ${ut.message||ut.toString()}`,"warn")}}else G(`Warning: Could not find/insert stream for video ${H}`,"warn")}catch(H){G(`ERROR processing video "${y.title}" in playlist "${D}": ${H.message||H.toString()}`,"err")}}f++}catch(q){throw G(`FATAL ERROR processing playlist "${D}": ${q.message||q.toString()}`,"err"),q}}v.free(),N.free(),R.free()}G(`Processed ${f} local playlists.`)}catch(f){throw G(`FATAL ERROR during Local Playlists phase: ${f.message||f.toString()}`,"err"),f}try{G("Processing Remote Playlist Bookmarks...");let f=0;const v=o.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)");if(h.playlistBookmarks&&!S){const N=h.playlistBookmarks;for(const R of N)try{const O=R.url||(R.playlistId?`https://www.youtube.com/playlist?list=${R.playlistId}`:null);if(!O||!O.includes("youtube.com")&&!O.includes("youtu.be")){G(`Dropped non-YouTube remote playlist: ${R.playlistName||"Untitled"}`,"warn");continue}const B=R.playlistName||R.name||"Untitled",D=R.thumbnailUrl||null,q=R.uploader||"Unknown",C=typeof R.videos=="number"?R.videos:0;try{const W=o.exec(`SELECT uid FROM remote_playlists WHERE url = '${O.replace(/'/g,"''")}' OR name = '${B.replace(/'/g,"''")}'`);if(W&&W.length>0&&W[0].values.length>0){if(T==="merge_np_precedence")continue;if(T==="merge_lt_precedence"){const J=W[0].values[0][0];o.run(`DELETE FROM remote_playlists WHERE uid = ${J}`)}}}catch{}v.run([Gt,B,O,D,q,f++,C])}catch(O){G(`ERROR inserting remote playlist ${R.playlistName||"Untitled"}: ${O.message||O.toString()}`,"err")}v.free()}G(`Processed ${f} remote playlist bookmarks.`)}catch(f){throw G(`FATAL ERROR during Remote Playlists phase: ${f.message||f.toString()}`,"err"),f}try{G("Processing Watch History...");let f=0,v=0,N=0;const R=h.history||h.watchHistory||h.watch_history||h.watch_history_items||[],O=new Map;if(h.watchPositions&&Array.isArray(h.watchPositions)){const B=h.watchPositions;for(const D of B)if(D&&D.videoId){const q=Number(D.position||0);O.set(String(D.videoId),q)}}if(R&&R.length>0){const B=o.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),D=o.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),q=o.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const C of R)try{const W=C.videoId||C.videoIdStr||C.id||(C.url?Ae(C.url):"")||"";if(!W)continue;const J=`https://www.youtube.com/watch?v=${W}`,y=C.title||C.name||"Unknown",P=C.uploader||C.uploaderName||"Unknown",s=C.duration||C.length||0,H=C.uploadDate?isNaN(Number(C.uploadDate))?Math.floor(new Date(C.uploadDate).getTime()/1e3):Math.floor(Number(C.uploadDate)):null,lt=C.thumbnailUrl||C.thumbnail||null;let Y=0;const pt=O.get(W),tt="9223372036854775807";if(pt!=null)String(pt)===tt?Y=0:Y=Math.floor(Number(pt)||0);else{const it=C.currentTime||C.position||C.progress||0;Y=Math.floor(Number(it||0)*1e3)}let ot=C.accessDate||C.accessedAt||C.lastWatched||C.timestamp||C.date||C.time,F;if(!ot)F=Date.now();else if(typeof ot=="number")F=ot>1e12?Math.floor(ot):Math.floor(ot*1e3);else{const it=Date.parse(String(ot));F=isNaN(it)?Date.now():it}const z=Number(C.repeatCount||C.watchCount||C.playCount||C.repeat_count||1);B.run([Gt,J,y,"VIDEO_STREAM",s,P,H,lt]);const ut=o.exec(`SELECT uid FROM streams WHERE service_id=${Gt} AND url='${J.replace(/'/g,"''")}'`);if(ut.length>0&&ut[0].values.length>0){const it=ut[0].values[0][0];try{D.run([Y,it])}catch(et){G(`WARN: failed to write stream_state for ${W}: ${et.message||et.toString()}`,"warn")}try{if(l==="merge"){const et=F-1e3,Tt=F+1e3,At=o.exec(`SELECT access_date, repeat_count FROM stream_history WHERE stream_id = ${it} AND access_date BETWEEN ${et} AND ${Tt}`);if(At&&At.length>0&&At[0].values.length>0){const bt=Number(At[0].values[0][0]),It=(Number(At[0].values[0][1])||0)+z;o.run(`UPDATE stream_history SET repeat_count = ${It} WHERE stream_id = ${it} AND access_date = ${bt}`),N++}else q.run([it,F,z]),v++}else q.run([it,F,z]),v++}catch(et){G(`WARN: failed to write stream_history for ${W}: ${et.message||et.toString()}`,"warn")}f++}}catch(W){G(`ERROR processing history item: ${W.message||W.toString()}`,"warn")}B.free(),D.free(),q.free()}G(`Processed ${f} history items (added: ${v}, duplicates merged: ${N}).`)}catch(f){G(`Error processing history: ${f.message}`,"err")}try{o.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),G("Inserted room_master_table identity.")}catch(f){G("Error inserting room_master_table: "+f.message,"warn")}try{G("Committing transaction..."),o.run("COMMIT")}catch(f){throw G(`FATAL ERROR on COMMIT: ${f.message||f.toString()}`,"err"),f}G("Exporting database...");const _=o.export();if(u.file("newpipe.db",_),p?(u.file("preferences.json",p),G("Preserved existing preferences.json.")):(u.file("preferences.json",JSON.stringify(oi,null,2)),G("Created default preferences.json.")),r&&(u.file("newpipe.settings",r),G("Preserved existing newpipe.settings.")),u.file("stream_state_debug.txt",a||"No stream_state debug information collected."),G("Attached stream_state_debug.txt to zip for inspection.","schema"),a){const f=a.split(`
`).slice(0,12).join(`
`);G(`stream_state_debug preview:
`+f,"schema")}const c=await u.generateAsync({type:"blob"}),g=Xr();ur(c,"newpipe_converted.zip",g),G("Done! File downloaded.","info")}async function ui(E,x,l,k,m,o){G("Starting conversion to LibreTube format...");let u={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[],watchPositions:[]};const a=m||null;let p=!1,r;if(l==="merge"&&x){G("Reading target LibreTube file...");const B=await x.text(),D=JSON.parse(B);u=D,r={playlistBookmarks:Array.isArray(D.playlistBookmarks)?JSON.parse(JSON.stringify(D.playlistBookmarks)):D.playlistBookmarks,localPlaylists:Array.isArray(D.localPlaylists)?JSON.parse(JSON.stringify(D.localPlaylists)):D.localPlaylists,otherPlaylistKeys:{}},Object.keys(D).forEach(q=>{if(q!=="playlistBookmarks"&&q!=="localPlaylists"&&/playlist/i.test(q))try{r.otherPlaylistKeys||(r.otherPlaylistKeys={}),r.otherPlaylistKeys[q]=JSON.parse(JSON.stringify(D[q]))}catch{r.otherPlaylistKeys||(r.otherPlaylistKeys={}),r.otherPlaylistKeys[q]=D[q]}}),a==="only_newpipe"?(u.subscriptions=[],u.playlistBookmarks=[],u.localPlaylists=[],G("Cleared target LibreTube playlists; will import only NewPipe playlists.")):a==="only_libretube"?(p=!0,G("Preserving existing LibreTube playlists; will skip importing NewPipe playlists.")):(u.subscriptions=u.subscriptions||[],u.playlistBookmarks=u.playlistBookmarks||[],u.localPlaylists=u.localPlaylists||[],G(`Merging playlists with behavior: ${a||"default (NewPipe precedence)"}`))}G("Reading NewPipe backup...");const T=await E.arrayBuffer(),A=(await ar.loadAsync(T)).file("newpipe.db");if(!A)throw new Error("NewPipe ZIP must contain newpipe.db");const h=await A.async("uint8array"),_=new k.Database(h);G("NewPipe database loaded.");try{let B="";const D=_.exec("PRAGMA table_info('stream_state')")||[],q=_.exec("PRAGMA foreign_key_list('stream_state')")||[],C=_.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];B+=`PRAGMA table_info("stream_state"):
`,D.length>0&&(B+=JSON.stringify(D[0],null,2)+`
`),B+=`
PRAGMA foreign_key_list("stream_state"):
`,q.length>0&&(B+=JSON.stringify(q[0],null,2)+`
`),B+=`
CREATE statement:
`,C.length>0&&C[0].values&&C[0].values.length>0&&(B+=C[0].values[0][0]+`
`),G(`Stream state debug (input NewPipe DB):
`+(B||"No stream_state debug info collected."),"schema")}catch(B){G("Failed to collect input stream_state debug: "+(B.message||B.toString()),"warn")}G("Extracting Subscriptions...");const c=_.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${Gt}`);c.length>0&&c[0].values.forEach(D=>{const q=String(D[0]);if(!q||!q.includes("youtube.com")&&!q.includes("youtu.be")){G(`Dropped non-YouTube subscription URL: ${D[1]}`,"warn");return}let C="";const W=q.match(/channel\/([\w-]+)/),J=q.match(/user\/([\w-]+)/);W?C=W[1]:J&&(C=J[1]),u.subscriptions.push({channelId:C,url:q,name:String(D[1]),avatar:D[2]?String(D[2]):void 0,verified:!1})}),G(`Extracted ${u.subscriptions.length} YouTube subscriptions.`),G("Extracting Remote Playlists...");const g=_.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${Gt}`);g.length>0&&!p&&g[0].values.forEach(D=>{const q=String(D[1]);if(!q||!q.includes("youtube.com")&&!q.includes("youtu.be")){G(`Dropped non-YouTube remote playlist URL: ${D[0]}`,"warn");return}const C=q.match(/[?&]list=([^&]+)/),W=C?C[1]:"";u.playlistBookmarks.push({playlistId:W,playlistName:String(D[0]),thumbnailUrl:D[3]?String(D[3]):void 0,uploader:D[2]?String(D[2]):void 0,uploaderUrl:"",videos:oe(D[4])})}),G(`Extracted ${u.playlistBookmarks.length} remote playlist bookmarks.`),G("Extracting Local Playlists...");const f=_.exec("SELECT uid, name FROM playlists");if(f.length>0&&!p)for(const B of f[0].values){const D=Number(B[0]),q=String(B[1]),C=[];let W=0;const J=_.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${D} AND s.service_id = ${Gt}
                    ORDER BY j.join_index ASC
                `);if(J.length>0&&J[0].values.forEach(y=>{const P=String(y[0]),s=Ae(P);if(!s){G(`Warning: Skipped stream in playlist "${q}" due to unparseable URL: ${P}`,"warn");return}C.push({id:W++,playlistId:oe(D),videoId:s,title:String(y[1]),uploadDate:jr(y[4]),uploader:String(y[3]),thumbnailUrl:y[5]?String(y[5]):void 0,duration:oe(y[2])})}),C.length>0||q){const y=u.localPlaylists.findIndex(P=>P.playlist&&P.playlist.name===q);if(y>=0)if(a==="merge_np_precedence")u.localPlaylists.splice(y,1);else continue;u.localPlaylists.push({playlist:{id:oe(D),name:q,thumbnailUrl:C.length>0?C[0].thumbnailUrl:""},videos:C})}}if(G(`Extracted ${u.localPlaylists.length} local playlists.`),l==="merge"&&m==="only_libretube"&&r)try{u.playlistBookmarks=r.playlistBookmarks,u.localPlaylists=r.localPlaylists,Object.keys(r.otherPlaylistKeys||{}).forEach(B=>{u[B]=r.otherPlaylistKeys[B]}),G("Restored original LibreTube playlist data (only_libretube).")}catch(B){G("Failed to restore preserved LibreTube playlists: "+(B.message||B.toString()),"warn")}if(u&&Array.isArray(u.watchPositions)&&(u.watchPositions=u.watchPositions.map(B=>B&&B.position!==void 0&&B.position!==null?{...B,position:oe(B.position)}:B)),(o===void 0?!0:!!o)&&E)try{const B=_.exec(`SELECT s.url, s.title, s.duration, s.uploader, s.uploader_url, s.thumbnail_url, s.upload_date, sh.access_date, sh.repeat_count FROM stream_history sh JOIN streams s ON sh.stream_id = s.uid WHERE s.service_id = ${Gt}`)||[],D=_.exec(`SELECT s.url, ss.progress_time FROM stream_state ss JOIN streams s ON ss.stream_id = s.uid WHERE s.service_id = ${Gt}`)||[];u.watchHistory=u.watchHistory||[],u.watchPositions=u.watchPositions||[];const q=new Map;for(const C of u.watchPositions)C&&C.videoId&&q.set(String(C.videoId),oe(C.position));if(D.length>0){const C=D[0].values;for(const W of C){const J=String(W[0]),y=W[1]||0,P=Number(y),s=Ae(J);if(!s)continue;const H=q.get(s)||0,lt=oe(P);lt>H&&q.set(s,lt)}}if(u.watchPositions=Array.from(q.entries()).map(([C,W])=>({videoId:C,position:W})),B.length>0){const C=B[0].values,W=Array.isArray(u.watchHistory)?u.watchHistory.map(y=>({...y,accessDate:$r(y&&(y.accessDate||y.accessedAt||y.lastWatched||y.timestamp||y.date||y.time)||0)})):[],J=new Map;for(const y of W)y&&y.videoId&&J.set(String(y.videoId),y);for(const y of C){const P=String(y[0]),s=y[1]?String(y[1]):"",H=oe(y[2]),lt=y[3]?String(y[3]):"",Y=y[4]?String(y[4]):"",pt=y[5]?String(y[5]):"",tt=y[6],ot=y[7],F=Ae(P);if(!F)continue;let z="";try{const et=String(Y).match(/channel\/([\w-]+)/),Tt=String(Y).match(/user\/([\w-]+)/);et?z=et[1]:Tt?z=Tt[1]:/^[UC][A-Za-z0-9_-]{20,}$/.test(Y)&&(z=Y)}catch{z=""}const ut=jr(tt);if(J.has(F))continue;const it=$r(ot);W.push({videoId:F,title:s,uploadDate:ut,uploader:lt,uploaderUrl:z,uploaderAvatar:"",thumbnailUrl:pt,duration:H,accessDate:it})}W.sort((y,P)=>Number(P&&P.accessDate?P.accessDate:0)-Number(y&&y.accessDate?y.accessDate:0)),u.watchHistory=W}}catch(B){G("Failed to import watch history from NewPipe DB: "+(B.message||B.toString()),"warn")}const N=JSON.stringify(u,null,2),R=new Blob([N],{type:"application/json"}),O=Xr();ur(R,"libretube_converted.json",O),G("Done! File downloaded.","info")}async function Yr(E){G("Parsing STT backup file...","info");const l=(await E.text()).split(`
`).filter(a=>a.trim()),k=new Map,m=[],o=new Map,u=new Map;for(const a of l){const p=a.split("	"),r=p[0];if(r==="recordType"){const T=parseInt(p[1]),S=p[2]||"",A=p[3]||"",h=parseInt(p[4])||0,_=parseInt(p[5])||0;k.set(T,{id:T,name:S,emoji:A,color:h,category_id:_})}else if(r==="record"){const T=parseInt(p[1]),S=parseInt(p[2]),A=parseInt(p[3]);let h=parseInt(p[4]);const _=p.slice(5).join("	");if(isNaN(h)){const c=p[4];c&&c.endsWith("f")&&(h=parseInt(c.slice(0,-1)))}if(isNaN(T)||isNaN(S)||isNaN(A)||isNaN(h)){G(`Skipping invalid record: ${a}`,"warn");continue}m.push({id:T,type_id:S,start_timestamp:A,end_timestamp:h,comment:_||void 0})}else if(r==="category"){const T=parseInt(p[1]),S=p[2]||"",A=parseInt(p[3])||0;o.set(T,{id:T,name:S,color:A})}else if(r==="recordTag"){const T=parseInt(p[1]),S=p[3]||"",A=parseInt(p[4])||0,h=parseInt(p[5])||0,_=p[7]||"";u.set(T,{id:T,name:S,emoji:_,color:A,type_id:h})}}return G(`Parsed ${k.size} record types, ${m.length} records`,"info"),{recordTypes:k,records:m,categories:o,recordTags:u}}function cr(E,x){if(x<=0)return E;const l=x*60*1e3;return E.filter(k=>k.end_timestamp-k.start_timestamp>=l)}function dr(E){const x=new Map;for(const l of E){const m=new Date(l.start_timestamp).toISOString().split("T")[0];x.has(m)||x.set(m,[]),x.get(m).push(l)}return x}function fr(E,x){return E.filter(l=>l.type_id===x)}async function Kr(E,x){G("Parsing uHabits backup file...","info");const l=await E.arrayBuffer(),k=new x.Database(new Uint8Array(l)),m=new Map,o=[];try{const u=k.exec(`
			SELECT id, archived, color, description, freq_den, freq_num, highlight, 
			       name, position, reminder_hour, reminder_min, reminder_days, 
			       type, target_type, target_value, unit, question, uuid
			FROM Habits 
			WHERE type = 0 AND archived = 0
		`);if(u.length>0){const p=u[0].values;for(const r of p){const T={id:r[0],archived:r[1],color:r[2],description:r[3],freq_den:r[4],freq_num:r[5],highlight:r[6],name:r[7],position:r[8],reminder_hour:r[9],reminder_min:r[10],reminder_days:r[11],type:r[12],target_type:r[13],target_value:r[14],unit:r[15],question:r[16],uuid:r[17]};m.set(T.id,T)}G(`Loaded ${m.size} boolean habits from uHabits`,"info")}const a=k.exec(`
			SELECT id, habit, timestamp, value, notes
			FROM Repetitions
		`);if(a.length>0){const p=a[0].values;for(const r of p)o.push({id:r[0],habit_id:r[1],timestamp:r[2],value:r[3],notes:r[4]});G(`Loaded ${o.length} repetitions from uHabits`,"info")}}finally{k.close()}return{habits:m,repetitions:o}}function ci(E){const x=new E.Database;return x.run(`
		CREATE TABLE Habits (
			id integer primary key autoincrement,
			archived integer,
			color integer,
			description text,
			freq_den integer,
			freq_num integer,
			highlight integer,
			name text,
			position integer,
			reminder_hour integer,
			reminder_min integer,
			reminder_days integer not null default 127,
			type integer not null default 0,
			target_type integer not null default 0,
			target_value real not null default 0,
			unit text not null default "",
			question text,
			uuid text
		)
	`),x.run(`
		CREATE TABLE Repetitions (
			id integer primary key autoincrement,
			habit integer not null references habits(id),
			timestamp integer not null,
			value integer not null,
			notes text
		)
	`),x.run(`
		CREATE UNIQUE INDEX idx_repetitions_habit_timestamp 
		ON Repetitions(habit, timestamp)
	`),x.run("CREATE TABLE android_metadata (locale TEXT)"),x.run("INSERT INTO android_metadata VALUES ('en_US')"),x.run("CREATE TABLE sqlite_sequence(name, seq)"),G("Created uHabits database schema","info"),x}function di(E){const x=new Date(E);return x.setHours(0,0,0,0),x.getTime()}function fi(E){return E.export()}async function hi(E,x,l,k,m){G("=== Starting STT  uHabits Conversion ===","info"),G(`Minimum duration filter: ${k} minutes`,"info"),G(`Number of mappings: ${l.length}`,"info");const o=await Yr(E);G(`Loaded ${o.recordTypes.size} STT activity types`,"info"),G(`Loaded ${o.records.length} total STT records`,"info");const u=await Kr(x,m);G(`Loaded ${u.habits.size} uHabits habits (boolean only)`,"info"),G(`Loaded ${u.repetitions.length} existing repetitions`,"info");const a=cr(o.records,k);G(`After duration filter: ${a.length} records`,"info");const p=ci(m);G("Copying existing habits to new database...","info");for(const[_,c]of u.habits)p.run(`
			INSERT INTO Habits (
				id, name, question, color, archived, type, 
				freq_num, freq_den, position, description, uuid, highlight, 
				reminder_hour, reminder_min, reminder_days, 
				target_type, target_value, unit
			) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
		`,[c.id,c.name,c.question,c.color,c.archived,c.type,c.freq_num,c.freq_den,c.position,c.description||null,c.uuid||null,c.highlight,c.reminder_hour,c.reminder_min,c.reminder_days,c.target_type,c.target_value,c.unit]);const r=new Set;G("Copying existing repetitions to new database...","info");for(const _ of u.repetitions)p.run(`
			INSERT INTO Repetitions (habit, timestamp, value, notes)
			VALUES (?, ?, ?, ?)
		`,[_.habit_id,_.timestamp,_.value,_.notes||null]),r.add(`${_.habit_id}:${_.timestamp}`);let T=0;for(const _ of l){const c=o.recordTypes.get(_.sttTypeId),g=u.habits.get(_.uhabitsHabitId);if(!c){G(`Warning: STT activity type ${_.sttTypeId} not found`,"warn");continue}if(!g){G(`Warning: uHabits habit ${_.uhabitsHabitId} not found`,"warn");continue}G(`
Processing mapping: "${c.emoji} ${c.name}"  "${g.name}"`,"info");const f=fr(a,_.sttTypeId);if(G(`  Found ${f.length} records for this activity`,"info"),f.length===0){G("  No records to convert","info");continue}const v=dr(f);G(`  Records span ${v.size} unique days`,"info");let N=0,R=0;for(const[O,B]of v){const D=di(B[0].start_timestamp),q=`${_.uhabitsHabitId}:${D}`;if(r.has(q)){R++;continue}const C=B.reduce((y,P)=>y+(P.end_timestamp-P.start_timestamp),0),W=Math.round(C/6e4),J=`Converted from STT: ${B.length} session${B.length>1?"s":""}, ${W}min total`;p.run(`
				INSERT INTO Repetitions (habit, timestamp, value, notes)
				VALUES (?, ?, ?, ?)
			`,[_.uhabitsHabitId,D,2,J]),r.add(q),N++,T++}G(`   Added ${N} new repetitions`,"info"),R>0&&G(`   Skipped ${R} existing days`,"info")}const S=Math.max(...Array.from(u.habits.keys()),0),A=u.repetitions.length>0?Math.max(...u.repetitions.map(_=>_.id)):0;p.run("INSERT INTO sqlite_sequence (name, seq) VALUES ('Habits', ?)",[S]),p.run("INSERT INTO sqlite_sequence (name, seq) VALUES ('Repetitions', ?)",[A+T]),G(`
=== Conversion Complete ===`,"info"),G(`Total new repetitions added: ${T}`,"info"),G("Exporting database...","info");const h=fi(p);return p.close(),new Blob([h],{type:"application/x-sqlite3"})}let Ft=null,qt=null,pi=0;function mi(E){const x=document.getElementById("file-stt"),l=document.getElementById("file-uhabits"),k=document.getElementById("add-mapping"),m=document.getElementById("btn-convert-stt"),o=document.getElementById("min-duration");!x||!l||!k||!m||(x.addEventListener("change",async()=>{var a;const u=(a=x.files)==null?void 0:a[0];if(u)try{Ft=await Yr(u),G(`Loaded ${Ft.recordTypes.size} STT activity types`,"info"),_i(),lr()}catch(p){G(`Error loading STT file: ${p.message}`,"err"),Ft=null}}),l.addEventListener("change",async()=>{var a;const u=(a=l.files)==null?void 0:a[0];if(u)try{qt=await Kr(u,E),G(`Loaded ${qt.habits.size} uHabits habits (boolean only)`,"info"),yi(),lr()}catch(p){G(`Error loading uHabits file: ${p.message}`,"err"),qt=null}}),k.addEventListener("click",()=>Wr()),m.addEventListener("click",async()=>await gi(E)),o&&o.addEventListener("change",()=>{document.querySelectorAll(".mapping-item").forEach(u=>{const a=parseInt(u.getAttribute("data-mapping-id")||"0");or(a)}),je()}),Wr())}function Wr(){const E=document.getElementById("mapping-list");if(!E)return;const x=pi++,l=document.createElement("div");l.className="mapping-item",l.setAttribute("data-mapping-id",x.toString()),l.innerHTML=`
		<div class="mapping-selects">
			<select class="stt-activity-select" data-mapping-id="${x}">
				<option value="">Select STT activity...</option>
			</select>
			<span class="mapping-arrow"></span>
			<select class="uhabits-habit-select" data-mapping-id="${x}">
				<option value="">Select uHabits habit...</option>
			</select>
			<button class="remove-mapping" aria-label="Remove mapping"></button>
		</div>
		<div class="activity-grid-container" style="display: none;">
			<activity-grid class="habit-preview-grid" dark-mode></activity-grid>
		</div>
	`,E.appendChild(l);const k=l.querySelector(".stt-activity-select"),m=l.querySelector(".uhabits-habit-select");Ft&&Vr(k),qt&&Qr(m),k.addEventListener("change",()=>{or(x),je()}),m.addEventListener("change",()=>{or(x),je()}),l.querySelector(".remove-mapping").addEventListener("click",()=>{l.remove(),je(),lr()})}function Vr(E){if(Ft){E.innerHTML='<option value="">Select STT activity...</option>';for(const[x,l]of Ft.recordTypes){const k=document.createElement("option");k.value=x.toString(),k.textContent=`${l.emoji} ${l.name} (id: ${x})`,E.appendChild(k)}}}function Qr(E){if(qt){E.innerHTML='<option value="">Select uHabits habit...</option>';for(const[x,l]of qt.habits){const k=document.createElement("option");k.value=x.toString(),k.textContent=`${l.name} (id: ${x})`,E.appendChild(k)}}}function _i(){document.querySelectorAll(".stt-activity-select").forEach(E=>{Vr(E)})}function yi(){document.querySelectorAll(".uhabits-habit-select").forEach(E=>{Qr(E)})}function or(E){const x=document.querySelector(`[data-mapping-id="${E}"]`);if(!x||!Ft||!qt)return;const l=x.querySelector(".stt-activity-select"),k=x.querySelector(".uhabits-habit-select"),m=x.querySelector(".activity-grid-container"),o=x.querySelector("activity-grid"),u=parseInt(l.value),a=parseInt(k.value);if(!u||!a){m.style.display="none";return}m.style.display="block";const p=document.getElementById("min-duration"),r=p&&parseInt(p.value)||0,T=[],S=new Set;for(const R of qt.repetitions)if(R.habit_id===a&&R.value>0){const O=new Date(R.timestamp).toISOString().split("T")[0];S.add(O),T.push({date:O,count:1})}const A=cr(Ft.records,r),h=fr(A,u),_=dr(h),c=[];for(const[R,O]of _)S.has(R)||c.push({date:R,count:2});const g=[...T,...c];o.data=g;const f=getComputedStyle(document.documentElement).getPropertyValue("--primary").trim();o.colors=["#ebedf0","#6b7280",f,f,f],o.emptyColor="#161b22";const v=new Date,N=new Date;N.setFullYear(N.getFullYear()-1),o.endDate=v.toISOString().split("T")[0],o.startDate=N.toISOString().split("T")[0]}function je(){const E=document.getElementById("conversion-summary");if(!E||!Ft||!qt)return;const x=document.querySelectorAll(".mapping-item"),l=document.getElementById("min-duration"),k=l&&parseInt(l.value)||0;let m=0,o=0;const u=[];for(let a=0;a<x.length;a++){const p=x[a],r=p.querySelector(".stt-activity-select"),T=p.querySelector(".uhabits-habit-select"),S=parseInt(r.value),A=parseInt(T.value);if(S&&A){m++;const h=Ft.recordTypes.get(S),_=qt.habits.get(A);if(h&&_){const c=cr(Ft.records,k),g=fr(c,S),f=dr(g),v=new Set;for(const R of qt.repetitions)R.habit_id===A&&R.value>0&&v.add(new Date(R.timestamp).toISOString().split("T")[0]);let N=0;for(const R of f.keys())v.has(R)||N++;o+=N,u.push(`"${h.emoji} ${h.name}"  "${_.name}": ${N} new days`)}}}m>0?(E.style.display="block",E.innerHTML=`
			<h4>Conversion Summary</h4>
			<ul>
				<li>${m} mapping(s) configured</li>
				<li>${o} new repetitions will be added</li>
				<li>Existing uHabits data will be preserved</li>
				${u.map(a=>`<li>${a}</li>`).join("")}
			</ul>
		`):E.style.display="none"}function lr(){var o,u;const E=document.getElementById("btn-convert-stt");if(!E)return;const x=document.getElementById("file-stt"),l=document.getElementById("file-uhabits"),k=document.querySelectorAll(".mapping-item").length>0,m=Ft&&qt&&((o=x==null?void 0:x.files)==null?void 0:o[0])&&((u=l==null?void 0:l.files)==null?void 0:u[0])&&k;E.disabled=!m}async function gi(E){var a,p;if(!Ft||!qt)return;const x=document.getElementById("file-stt"),l=document.getElementById("file-uhabits"),k=(a=x==null?void 0:x.files)==null?void 0:a[0],m=(p=l==null?void 0:l.files)==null?void 0:p[0];if(!k||!m){G("Missing required files","err");return}const o=[],u=document.querySelectorAll(".mapping-item");for(let r=0;r<u.length;r++){const T=u[r],S=T.querySelector(".stt-activity-select"),A=T.querySelector(".uhabits-habit-select"),h=parseInt(S.value),_=parseInt(A.value);h&&_&&o.push({sttTypeId:h,uhabitsHabitId:_})}if(o.length===0){G("No valid mappings configured","err");return}try{const r=document.getElementById("btn-convert-stt");r&&(r.disabled=!0);const T=document.getElementById("min-duration"),S=T&&parseInt(T.value)||0;G("Starting conversion...","info");const A=await hi(k,m,o,S,E);ur(A,"uhabits_with_stt.backup",null),G(" Conversion complete! Download started.","info")}catch(r){G(`Conversion failed: ${r.message}`,"err"),console.error(r)}finally{const r=document.getElementById("btn-convert-stt");r&&(r.disabled=!1)}}let $e;window.onload=async()=>{G("Initializing SQL.js...");try{$e=await ni(),G("SQL.js ready.")}catch(E){G("Error loading SQL.js: "+(E.message||E.toString()),"err")}Jr(),bi(),mi($e)};function Jr(){const E=document.querySelector('input[name="mode"]:checked'),x=E?E.value:"convert",l=document.getElementById("file-newpipe"),k=document.getElementById("file-libretube"),m=document.getElementById("merge-controls"),o=document.getElementById("convert-controls"),u=document.getElementById("stt-controls"),a=document.getElementById("main-file-area");!l||!k||!m||!o||!u||!a||(x==="stt"?(m.style.display="none",o.style.display="none",u.style.display="",a.style.display="none"):x==="merge"?(m.style.display="",o.style.display="none",u.style.display="none",a.style.display="",l.disabled=!1,k.disabled=!1):(m.style.display="none",o.style.display="",u.style.display="none",a.style.display="",l.disabled=!1,k.disabled=!1))}async function tn(E){var o,u;const x=document.querySelector('input[name="mode"]:checked'),l=x?x.value:"convert",k=(o=document.getElementById("file-newpipe").files)==null?void 0:o[0],m=(u=document.getElementById("file-libretube").files)==null?void 0:u[0];if(l==="merge"&&(!k||!m))return G("Merge mode requires BOTH files.","err");if(l==="convert"){if(E==="to_newpipe"&&!m)return G("Missing LibreTube source file.","err");if(E==="to_libretube"&&!k)return G("Missing NewPipe source file.","err")}try{document.querySelectorAll(".controls button").forEach(S=>S.disabled=!0);const a=document.getElementById("playlist-behavior"),p=a?a.value:void 0,r=document.getElementById("include-watch-history"),T=r?r.checked:!0;E==="to_newpipe"?await li(k,m,l,$e,p):await ui(k,m,l,$e,p,T)}catch(a){G(`FATAL ERROR: ${a.message||a.toString()||"An unknown error occurred"}`,"err"),a.stack?G(`Stack Trace: ${a.stack}`,"err"):G(`Error Object: ${a.toString()}`,"err"),console.error(a)}finally{document.querySelectorAll(".controls button").forEach(a=>a.disabled=!1)}}window.processBackup=tn;window.updateUI=Jr;window.addEventListener("DOMContentLoaded",()=>{const E=document.getElementById("btn-merge"),x=document.getElementById("merge-direction"),l=document.getElementById("playlist-behavior");E&&x&&l&&(l.value=x.checked?"merge_np_precedence":"merge_lt_precedence",x.addEventListener("change",()=>{x.checked?l.value="merge_np_precedence":l.value="merge_lt_precedence"}),E.addEventListener("click",async()=>{const k=x.checked?"to_libretube":"to_newpipe";await tn(k)}))});function bi(){document.querySelectorAll(".drop-zone").forEach(E=>{const x=E.querySelector('input[type="file"]'),l=E.querySelector(".file-name");x&&(E.addEventListener("click",k=>{k.target!==x&&x.click()}),E.addEventListener("keydown",k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),x.click())}),E.addEventListener("dragover",k=>{k.preventDefault(),E.classList.add("active")}),E.addEventListener("dragleave",()=>{E.classList.remove("active")}),E.addEventListener("drop",k=>{k.preventDefault(),E.classList.remove("active");const m=k.dataTransfer&&k.dataTransfer.files;if(m&&m.length)try{const o=new DataTransfer;for(let u=0;u<m.length;u++)o.items.add(m[u]);x.files=o.files,x.dispatchEvent(new Event("change",{bubbles:!0}))}catch(o){console.warn("Could not set input.files programmatically",o)}}),x.addEventListener("change",()=>{const k=x.files&&x.files[0];l&&(l.textContent=k?k.name:"")}))})}
//# sourceMappingURL=index-Bxy7NnMy.js.map

var jn=Object.defineProperty;var Wn=(w,A,o)=>A in w?jn(w,A,{enumerable:!0,configurable:!0,writable:!0,value:o}):w[A]=o;var oe=(w,A,o)=>Wn(w,typeof A!="symbol"?A+"":A,o);(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))N(p);new MutationObserver(p=>{for(const a of p)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&N(l)}).observe(document,{childList:!0,subtree:!0});function o(p){const a={};return p.integrity&&(a.integrity=p.integrity),p.referrerPolicy&&(a.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?a.credentials="include":p.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function N(p){if(p.ep)return;p.ep=!0;const a=o(p);fetch(p.href,a)}})();function Hn(w){return A=>{customElements.define(w,A)}}function te(w={type:String}){return function(A,o){const N=A.constructor;N.observedAttributes||(N.observedAttributes=[]);const p=w.attribute||o.toLowerCase();N.observedAttributes.includes(p)||N.observedAttributes.push(p);const a=Symbol(o);Object.defineProperty(A,o,{get(){return this[a]},set(l){const u=this[a];w.type===Boolean?this[a]=l===""||l==="true"||l===!0:this[a]=l,this.requestUpdate&&this.requestUpdate(o,u,this[a])},enumerable:!0,configurable:!0})}}function Gn(){return function(w,A){const o=Symbol(A);Object.defineProperty(w,A,{get(){return this[o]},set(N){const p=this[o];this[o]=N,this.requestUpdate&&this.requestUpdate(A,p,N)},enumerable:!0,configurable:!0})}}function Zn(w){if(!w||typeof w!="object"||!("date"in w)||!("count"in w))return!1;const A=w,o=new Date(A.date);return!(isNaN(o.getTime())||typeof A.count!="number"||A.count<0)}const Ae={default:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],green:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],red:["#ebedf0","#ffcdd2","#ef5350","#e53935","#b71c1c"],blue:["#ebedf0","#bbdefb","#64b5f6","#1e88e5","#0d47a1"],yellow:["#ebedf0","#fff9c4","#ffee58","#fdd835","#f57f17"],purple:["#ebedf0","#e1bee7","#ab47bc","#8e24aa","#4a148c"]},Yn=w=>w in Ae&&w!=="default",Xn=`
  <style>
    :host {
      display: inline-block;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
    }

    /* Dark mode styles */
    :host([dark-mode]) {
      color: #c9d1d9;
      background-color: transparent;
    }

    .container {
      display: inline-grid;
      grid-template-rows: auto 1fr;
    }

    .months {
      display: flex;
      padding-left: 32px;
      font-size: 12px;
      color: #767676;
      height: 20px;
    }

    :host([dark-mode]) .months {
      color: #8b949e;
    }

    .months-spacer {
      width: 30px;
    }

    .months-container {
      display: flex;
      justify-content: space-between;
      flex: 1;
    }

    .months span {
      padding: 0 4px;
    }

    .grid-wrapper {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 4px;
    }

    .weekdays {
      display: grid;
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
      text-align: right;
      padding-left: 6px;
      padding-right: 2px;
      font-size: 12px;
      color: #767676;
      margin-top: -1px;
      height: calc(7 * 10px + 6 * 2px);
    }

    :host([dark-mode]) .weekdays {
      color: #8b949e;
    }

    .weekdays div {
      height: 10px;
      line-height: 10px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(var(--grid-columns), 1fr);
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
    }

    .cell {
      width: 10px;
      height: 10px;
      border-radius: 2px;
    }
  </style>
`,Kn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],qr={mondayStart:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],sundayStart:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},ye={light:"#ebedf0",dark:"#161b22"},We=w=>`${w.getFullYear()}-${(w.getMonth()+1).toString().padStart(2,"0")}-${w.getDate().toString().padStart(2,"0")}`;class Vn{createMonthLabels(A,o){const N=[],p=new Date(A);for(p.setDate(1);p<=o;)N.push(Kn[p.getMonth()]),p.setMonth(p.getMonth()+1);return`
            <div class="months-container">
                ${N.map(a=>`<span>${a}</span>`).join("")}
            </div>
        `}createWeekLabels(A,o=[0,1,2,3,4,5,6]){return`
            <div class="weekdays">
                ${(A?qr.mondayStart:qr.sundayStart).map((N,p)=>`<div>${o.includes(p)?N:""}</div>`).join(`
`)}
            </div>
        `}getWeeksBetweenDates(A,o){const N=Math.abs(o.getTime()-A.getTime());return Math.ceil(N/6048e5)}defaultTitleFormatter(A,o,N){const p=o===1?"activity":"activities";return`${A.toDateString()}: ${o} ${p}`}createGridCells(A,o,N,p,a,l,u,m){let r="";const T=l?5:7,k=new Date(N),v=new Date(o);v.setHours(0,0,0,0);let c=l?5-N.getDay():7-N.getDay();u&&(c+=1),k.setDate(k.getDate()+c);const b=new Date(o),f=u?(o.getDay()||7)-1:o.getDay();f!==0&&b.setDate(o.getDate()-f);const _=this.getWeeksBetweenDates(k,o);for(let h=0;h<T;h++){const E=h>4;if(!(l&&E))for(let x=0;x<_;x++){const R=new Date(b);R.setDate(R.getDate()+h+x*7),R.setHours(0,0,0,0);const O=We(R),B=A[O];if(R<v)r+=`
                        <div class="cell" 
                            style="background-color: transparent">
                        </div>`;else if(R<=N)if(B){const C=m?m(R,B.count,B.id):this.defaultTitleFormatter(R,B.count,B.id);r+=`
                            <div class="cell" 
                                style="background-color: ${p[B.level]||a}"
                                title="${C}"
                                data-date="${O}"
                                data-count="${B.count}"
            					${B.id?`cell-id="${B.id}"`:""}>
                            </div>`}else{const C=m?m(R,0):this.defaultTitleFormatter(R,0);r+=`
                            <div class="cell" 
                                style="background-color: ${a}"
                                title="${C}"
                                data-date="${O}"
                                data-count="0">
                            </div>`}else R<=k&&(r+=`
                        <div class="cell" 
                            style="background-color: transparent">
                        </div>`)}}return r}render(A,o,N,p){const a=new Date(N);let l=p.skipWeekends?5-N.getDay():7-N.getDay();p.startWeekOnMonday&&(l+=1),a.setDate(a.getDate()+l);const u=this.getWeeksBetweenDates(a,o),m=this.createMonthLabels(o,N),r=this.createWeekLabels(p.startWeekOnMonday,p.startWeekOnMonday?[0,2,4]:[1,3,5]),T=this.createGridCells(A,o,N,p.colors,p.emptyColor,p.skipWeekends,p.startWeekOnMonday,p.titleFormatter);return{html:`
            <div class="container">
                <div class="months">${m}</div>
                <div class="grid-wrapper">
                    ${r}
                    <div class="grid">
                        ${T}
                    </div>
                </div>
            </div>
        `,numOfWeeks:u}}}function Qn(w){return new CustomEvent("cell-click",{detail:w,bubbles:!0,composed:!0})}var Jn=Object.defineProperty,ti=Object.getOwnPropertyDescriptor,Xt=(w,A,o,N)=>{for(var p=N>1?void 0:N?ti(A,o):A,a=w.length-1,l;a>=0;a--)(l=w[a])&&(p=(N?l(A,o,p):l(p))||p);return N&&p&&Jn(A,o,p),p};let Gt=class extends HTMLElement{constructor(){super(),this.gridRenderer=new Vn,this._data=[],this._colors=Ae.default,this._colorTheme=null,this._darkMode=!1,this._emptyColor=this._darkMode?ye.dark:ye.light,this._skipWeekends=!1,this._startWeekOnMonday=!1,this._endDate=new Date,this._titleFormatter=null,this.cells={},this.attachShadow({mode:"open"}),this._startDate=null}set data(w){this.validateActivityData(w)&&(this._data=w,this.updateGrid())}get data(){return this._data}set colors(w){if(!w||!Array.isArray(w)||w.length===0){console.warn("Invalid or empty colors array provided. Using default theme."),this._colors=Ae.default,this.updateGrid();return}const A=w.filter(o=>!this.validateColor(o));if(A.length>0){console.warn(`Invalid colors found when trying to set color theme: ${A.join(", ")}. Using default theme.`),this._colors=Ae.default,this.updateGrid();return}this._colorTheme||(this._colors=w,this.updateGrid())}get colors(){return this._colorTheme?Ae[this._colorTheme]:this._colors}set colorTheme(w){w?Yn(w)?this._colorTheme=w:(console.warn(`Invalid color theme "${w}". Using default theme.`),this._colorTheme=null):this._colorTheme=null,this.updateGrid()}get colorTheme(){return this._colorTheme||""}set darkMode(w){this._darkMode=w,this.emptyColor=w?ye.dark:ye.light,this.updateGrid()}get darkMode(){return this._darkMode}set emptyColor(w){if(w===null||!this.validateColor(w)){this._emptyColor=this._darkMode?ye.dark:ye.light;return}this._emptyColor=w,this.updateGrid()}get emptyColor(){return this._emptyColor}set skipWeekends(w){this._skipWeekends=w,w&&(this.startWeekOnMonday=!0),this.updateGrid()}get skipWeekends(){return this._skipWeekends}set startWeekOnMonday(w){this._startWeekOnMonday=this.skipWeekends?!0:w,this.updateGrid()}get startWeekOnMonday(){return this._startWeekOnMonday}set endDate(w){const A=w?new Date(w):new Date;isNaN(A.getTime())?(console.warn("Invalid end-date provided. Using current date instead."),this._endDate=new Date):this._endDate=A,this.updateGrid()}get endDate(){return We(this._endDate)}set startDate(w){const A=w?new Date(w):null;A&&!isNaN(A.getTime())?A>this._endDate?(console.warn("Start date cannot be after end date. Using one year before end date instead."),this._startDate=this.createDefaultStartDate()):this._startDate=A:this._startDate||(console.warn("Invalid start-date provided. Using one year before end date instead."),this._startDate=this.createDefaultStartDate()),this.isConnected&&this.updateGrid()}get startDate(){return this._startDate?We(this._startDate):We(this.createDefaultStartDate())}set titleFormatter(w){this._titleFormatter=w,this.updateGrid()}get titleFormatter(){return this._titleFormatter}connectedCallback(){this._startDate||(this._startDate=this.createDefaultStartDate()),this.updateGrid()}attributeChangedCallback(w,A,o){const N=w.replace(/-([a-z])/g,p=>p[1].toUpperCase());if(this[N]!==void 0){const p=this[N];if(typeof p=="boolean")this[N]=o!==null;else if(typeof p=="number")this[N]=Number(o);else if(Array.isArray(p))try{this[N]=JSON.parse(o||"[]")}catch(a){console.warn(`Invalid array value for ${w}:`,a)}else this[N]=o}}static get observedAttributes(){return["start-week-on-monday","skip-weekends","data","colors","color-theme","empty-color","max-level","end-date","start-date","dark-mode"]}createDefaultStartDate(){const w=new Date(this._endDate);w.setFullYear(w.getFullYear()-1);const A=this.startWeekOnMonday?(w.getDay()||7)-1:w.getDay();return A!==0&&w.setDate(w.getDate()-A),w}generateGridCells(){const w={};return this.data.forEach(A=>{w[A.date]={date:new Date(A.date),count:A.count,level:this.calculateLevel(A.count),ignore:!1,id:A.id}}),w}validateActivityData(w){if(!w||!Array.isArray(w))return console.warn("Invalid activity data: must be an array. Using empty array instead."),this._data=[],!1;const A=w.filter(o=>!Zn(o));return A.length>0&&console.warn("Invalid items found in activity data. They will be filtered out:",A),!0}validateColor(w){return CSS.supports("color",w)}calculateLevel(w){if(w===0)return 0;const A=this.colors.length-1,o=Math.max(...this.data.map(N=>N.count));return Math.ceil(w/o*A)}updateGrid(){if(!this.shadowRoot)return;this.cells=this.generateGridCells(),this._startDate||(this._startDate=this.createDefaultStartDate());const{html:w,numOfWeeks:A}=this.gridRenderer.render(this.cells,this._startDate,this._endDate,{colors:this.colors,emptyColor:this.emptyColor,skipWeekends:this.skipWeekends,startWeekOnMonday:this.startWeekOnMonday,titleFormatter:this.titleFormatter});this.style.setProperty("--grid-columns",A.toString()),this.shadowRoot.innerHTML=`${Xn}${w}`,this.attachEventListeners()}attachEventListeners(){this.shadowRoot&&this.shadowRoot.querySelectorAll(".cell[data-date]").forEach(w=>{w.addEventListener("click",A=>{const o=w.getAttribute("data-date"),N=parseInt(w.getAttribute("data-count")||"0",10),p=w.getAttribute("cell-id")||void 0;o&&this.dispatchEvent(Qn({date:o,count:N,id:p}))})})}};Xt([te({type:Array})],Gt.prototype,"data",1);Xt([te({type:Array})],Gt.prototype,"colors",1);Xt([te({type:String,attribute:"color-theme"})],Gt.prototype,"colorTheme",1);Xt([te({type:Boolean,attribute:"dark-mode"})],Gt.prototype,"darkMode",1);Xt([te({type:String,attribute:"empty-color"})],Gt.prototype,"emptyColor",1);Xt([te({type:Boolean})],Gt.prototype,"skipWeekends",1);Xt([te({type:Boolean})],Gt.prototype,"startWeekOnMonday",1);Xt([te({type:String,attribute:"end-date"})],Gt.prototype,"endDate",1);Xt([te({type:String,attribute:"start-date"})],Gt.prototype,"startDate",1);Xt([Gn()],Gt.prototype,"cells",2);Gt=Xt([Hn("activity-grid")],Gt);function H(w,A="info"){const o=document.getElementById("debug-console");if(!o)return;const N=document.createElement("div");N.textContent=`[${new Date().toLocaleTimeString()}] ${w}`,A==="err"?N.className="log-err":A==="warn"?N.className="log-warn":A==="schema"?N.className="log-schema":N.className="log-info",o.appendChild(N),o.scrollTop=o.scrollHeight}var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yr(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function ei(w){if(w.__esModule)return w;var A=w.default;if(typeof A=="function"){var o=function N(){return this instanceof N?Reflect.construct(A,arguments,this.constructor):A.apply(this,arguments)};o.prototype=A.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(w).forEach(function(N){var p=Object.getOwnPropertyDescriptor(w,N);Object.defineProperty(o,N,p.get?p:{enumerable:!0,get:function(){return w[N]}})}),o}var Xr={exports:{}};const ri={},ni=Object.freeze(Object.defineProperty({__proto__:null,default:ri},Symbol.toStringTag,{value:"Module"})),$r=ei(ni);(function(w,A){var o=void 0,N=function(p){return o||(o=new Promise(function(a,l){var u=typeof p<"u"?p:{},m=u.onAbort;u.onAbort=function(t){l(new Error(t)),m&&m(t)},u.postRun=u.postRun||[],u.postRun.push(function(){a(u)}),w=void 0;var r;r||(r=typeof u<"u"?u:{});var T=typeof window=="object",k=typeof WorkerGlobalScope<"u",v=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";r.onRuntimeInitialized=function(){function t(z,V){switch(typeof V){case"boolean":qn(z,V?1:0);break;case"number":Pn(z,V);break;case"string":Mn(z,V,-1,-1);break;case"object":if(V===null)zr(z);else if(V.length!=null){var ct=ze(V,Ue);Fn(z,ct,V.length,-1),Pe(ct)}else Me(z,"Wrong API use : tried to return a value of an unknown type ("+V+").",-1);break;default:zr(z)}}function e(z,V){for(var ct=[],mt=0;mt<z;mt+=1){var gt=Ct(V+4*mt,"i32"),St=Dn(gt);if(St===1||St===2)gt=zn(gt);else if(St===3)gt=Bn(gt);else if(St===4){St=gt,gt=Ln(St),St=Un(St);for(var Zt=new Uint8Array(gt),Wt=0;Wt<gt;Wt+=1)Zt[Wt]=W[St+Wt];gt=Zt}else gt=null;ct.push(gt)}return ct}function i(z,V){this.Qa=z,this.db=V,this.Oa=1,this.lb=[]}function d(z,V){if(this.db=V,V=dt(z)+1,this.eb=sr(V),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Et(z,J,this.eb,V),this.kb=this.eb,this.Za=this.pb=null}function I(z){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),z!=null){var V=this.filename,ct="/",mt=V;if(ct&&(ct=typeof ct=="string"?ct:Ze(ct),mt=V?L(ct+"/"+V):ct),V=me(!0,!0),mt=un(mt,V),z){if(typeof z=="string"){ct=Array(z.length);for(var gt=0,St=z.length;gt<St;++gt)ct[gt]=z.charCodeAt(gt);z=ct}Ce(mt,V|146),ct=ge(mt,577),Ar(ct,z,0,z.length,0),Je(ct),Ce(mt,V)}}this.handleError(ft(this.filename,M)),this.db=Ct(M,"i32"),Mr(this.db),this.fb={},this.Sa={}}var M=ae(4),Z=r.cwrap,ft=Z("sqlite3_open","number",["string","number"]),vt=Z("sqlite3_close_v2","number",["number"]),yt=Z("sqlite3_exec","number",["number","string","number","number","number"]),Ot=Z("sqlite3_changes","number",["number"]),zt=Z("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Cr=Z("sqlite3_sql","string",["number"]),_n=Z("sqlite3_normalized_sql","string",["number"]),Dr=Z("sqlite3_prepare_v2","number",["number","number","number","number","number"]),gn=Z("sqlite3_bind_text","number",["number","number","number","number","number"]),Lr=Z("sqlite3_bind_blob","number",["number","number","number","number","number"]),yn=Z("sqlite3_bind_double","number",["number","number","number"]),bn=Z("sqlite3_bind_int","number",["number","number","number"]),vn=Z("sqlite3_bind_parameter_index","number",["number","string"]),wn=Z("sqlite3_step","number",["number"]),En=Z("sqlite3_errmsg","string",["number"]),kn=Z("sqlite3_column_count","number",["number"]),Sn=Z("sqlite3_data_count","number",["number"]),Tn=Z("sqlite3_column_double","number",["number","number"]),Br=Z("sqlite3_column_text","string",["number","number"]),Nn=Z("sqlite3_column_blob","number",["number","number"]),An=Z("sqlite3_column_bytes","number",["number","number"]),In=Z("sqlite3_column_type","number",["number","number"]),Rn=Z("sqlite3_column_name","string",["number","number"]),xn=Z("sqlite3_reset","number",["number"]),On=Z("sqlite3_clear_bindings","number",["number"]),Cn=Z("sqlite3_finalize","number",["number"]),Ur=Z("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Dn=Z("sqlite3_value_type","number",["number"]),Ln=Z("sqlite3_value_bytes","number",["number"]),Bn=Z("sqlite3_value_text","string",["number"]),Un=Z("sqlite3_value_blob","number",["number"]),zn=Z("sqlite3_value_double","number",["number"]),Pn=Z("sqlite3_result_double","",["number","number"]),zr=Z("sqlite3_result_null","",["number"]),Mn=Z("sqlite3_result_text","",["number","string","number","number"]),Fn=Z("sqlite3_result_blob","",["number","number","number","number"]),qn=Z("sqlite3_result_int","",["number","number"]),Me=Z("sqlite3_result_error","",["number","string","number"]),Pr=Z("sqlite3_aggregate_context","number",["number","number"]),Mr=Z("RegisterExtensionFunctions","number",["number"]),Fr=Z("sqlite3_update_hook","number",["number","number","number"]);i.prototype.bind=function(z){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(z)?this.Cb(z):z!=null&&typeof z=="object"?this.Db(z):!0},i.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var z=wn(this.Qa);switch(z){case 100:return!0;case 101:return!1;default:throw this.db.handleError(z)}},i.prototype.wb=function(z){return z==null&&(z=this.Oa,this.Oa+=1),Tn(this.Qa,z)},i.prototype.Gb=function(z){if(z==null&&(z=this.Oa,this.Oa+=1),z=Br(this.Qa,z),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(z)},i.prototype.Hb=function(z){return z==null&&(z=this.Oa,this.Oa+=1),Br(this.Qa,z)},i.prototype.getBlob=function(z){z==null&&(z=this.Oa,this.Oa+=1);var V=An(this.Qa,z);z=Nn(this.Qa,z);for(var ct=new Uint8Array(V),mt=0;mt<V;mt+=1)ct[mt]=W[z+mt];return ct},i.prototype.get=function(z,V){V=V||{},z!=null&&this.bind(z)&&this.step(),z=[];for(var ct=Sn(this.Qa),mt=0;mt<ct;mt+=1)switch(In(this.Qa,mt)){case 1:var gt=V.useBigInt?this.Gb(mt):this.wb(mt);z.push(gt);break;case 2:z.push(this.wb(mt));break;case 3:z.push(this.Hb(mt));break;case 4:z.push(this.getBlob(mt));break;default:z.push(null)}return z},i.prototype.getColumnNames=function(){for(var z=[],V=kn(this.Qa),ct=0;ct<V;ct+=1)z.push(Rn(this.Qa,ct));return z},i.prototype.getAsObject=function(z,V){z=this.get(z,V),V=this.getColumnNames();for(var ct={},mt=0;mt<V.length;mt+=1)ct[V[mt]]=z[mt];return ct},i.prototype.getSQL=function(){return Cr(this.Qa)},i.prototype.getNormalizedSQL=function(){return _n(this.Qa)},i.prototype.run=function(z){return z!=null&&this.bind(z),this.step(),this.reset()},i.prototype.sb=function(z,V){V==null&&(V=this.Oa,this.Oa+=1),z=wt(z);var ct=ze(z,Ue);this.lb.push(ct),this.db.handleError(gn(this.Qa,V,ct,z.length-1,0))},i.prototype.Bb=function(z,V){V==null&&(V=this.Oa,this.Oa+=1);var ct=ze(z,Ue);this.lb.push(ct),this.db.handleError(Lr(this.Qa,V,ct,z.length,0))},i.prototype.rb=function(z,V){V==null&&(V=this.Oa,this.Oa+=1),this.db.handleError((z===(z|0)?bn:yn)(this.Qa,V,z))},i.prototype.Eb=function(z){z==null&&(z=this.Oa,this.Oa+=1),Lr(this.Qa,z,0,0,0)},i.prototype.tb=function(z,V){switch(V==null&&(V=this.Oa,this.Oa+=1),typeof z){case"string":this.sb(z,V);return;case"number":this.rb(z,V);return;case"bigint":this.sb(z.toString(),V);return;case"boolean":this.rb(z+0,V);return;case"object":if(z===null){this.Eb(V);return}if(z.length!=null){this.Bb(z,V);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+z+")."},i.prototype.Db=function(z){var V=this;return Object.keys(z).forEach(function(ct){var mt=vn(V.Qa,ct);mt!==0&&V.tb(z[ct],mt)}),!0},i.prototype.Cb=function(z){for(var V=0;V<z.length;V+=1)this.tb(z[V],V+1);return!0},i.prototype.reset=function(){return this.freemem(),On(this.Qa)===0&&xn(this.Qa)===0},i.prototype.freemem=function(){for(var z;(z=this.lb.pop())!==void 0;)Pe(z)},i.prototype.free=function(){this.freemem();var z=Cn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,z},d.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var z=Te(),V=ae(4);n(M),n(V);try{this.db.handleError(Dr(this.db.db,this.kb,-1,M,V)),this.kb=Ct(V,"i32");var ct=Ct(M,"i32");return ct===0?(this.mb(),{done:!0}):(this.Za=new i(ct,this.db),this.db.fb[ct]=this.Za,{value:this.Za,done:!1})}catch(mt){throw this.pb=S(this.kb),this.mb(),mt}finally{Se(z)}},d.prototype.mb=function(){Pe(this.eb),this.eb=null},d.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:S(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(d.prototype[Symbol.iterator]=function(){return this}),I.prototype.run=function(z,V){if(!this.db)throw"Database closed";if(V){z=this.prepare(z,V);try{z.step()}finally{z.free()}}else this.handleError(yt(this.db,z,0,0,M));return this},I.prototype.exec=function(z,V,ct){if(!this.db)throw"Database closed";var mt=Te(),gt=null;try{var St=nr(z),Zt=ae(4);for(z=[];Ct(St,"i8")!==0;){n(M),n(Zt),this.handleError(Dr(this.db,St,-1,M,Zt));var Wt=Ct(M,"i32");if(St=Ct(Zt,"i32"),Wt!==0){var Mt=null;for(gt=new i(Wt,this),V!=null&&gt.bind(V);gt.step();)Mt===null&&(Mt={columns:gt.getColumnNames(),values:[]},z.push(Mt)),Mt.values.push(gt.get(null,ct));gt.free()}}return z}catch(Yt){throw gt&&gt.free(),Yt}finally{Se(mt)}},I.prototype.each=function(z,V,ct,mt,gt){typeof V=="function"&&(mt=ct,ct=V,V=void 0),z=this.prepare(z,V);try{for(;z.step();)ct(z.getAsObject(null,gt))}finally{z.free()}if(typeof mt=="function")return mt()},I.prototype.prepare=function(z,V){if(n(M),this.handleError(zt(this.db,z,-1,M,0)),z=Ct(M,"i32"),z===0)throw"Nothing to prepare";var ct=new i(z,this);return V!=null&&ct.bind(V),this.fb[z]=ct},I.prototype.iterateStatements=function(z){return new d(z,this)},I.prototype.export=function(){Object.values(this.fb).forEach(function(V){V.free()}),Object.values(this.Sa).forEach(se),this.Sa={},this.handleError(vt(this.db));var z=cn(this.filename);return this.handleError(ft(this.filename,M)),this.db=Ct(M,"i32"),Mr(this.db),z},I.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(z){z.free()}),Object.values(this.Sa).forEach(se),this.Sa={},this.Ya&&(se(this.Ya),this.Ya=void 0),this.handleError(vt(this.db)),Er("/"+this.filename),this.db=null)},I.prototype.handleError=function(z){if(z===0)return null;throw z=En(this.db),Error(z)},I.prototype.getRowsModified=function(){return Ot(this.db)},I.prototype.create_function=function(z,V){Object.prototype.hasOwnProperty.call(this.Sa,z)&&(se(this.Sa[z]),delete this.Sa[z]);var ct=ke(function(mt,gt,St){gt=e(gt,St);try{var Zt=V.apply(null,gt)}catch(Wt){Me(mt,Wt,-1);return}t(mt,Zt)},"viii");return this.Sa[z]=ct,this.handleError(Ur(this.db,z,V.length,1,0,ct,0,0,0)),this},I.prototype.create_aggregate=function(z,V){var ct=V.init||function(){return null},mt=V.finalize||function(Mt){return Mt},gt=V.step;if(!gt)throw"An aggregate function must have a step function in "+z;var St={};Object.hasOwnProperty.call(this.Sa,z)&&(se(this.Sa[z]),delete this.Sa[z]),V=z+"__finalize",Object.hasOwnProperty.call(this.Sa,V)&&(se(this.Sa[V]),delete this.Sa[V]);var Zt=ke(function(Mt,Yt,or){var pe=Pr(Mt,1);Object.hasOwnProperty.call(St,pe)||(St[pe]=ct()),Yt=e(Yt,or),Yt=[St[pe]].concat(Yt);try{St[pe]=gt.apply(null,Yt)}catch($n){delete St[pe],Me(Mt,$n,-1)}},"viii"),Wt=ke(function(Mt){var Yt=Pr(Mt,1);try{var or=mt(St[Yt])}catch(pe){delete St[Yt],Me(Mt,pe,-1);return}t(Mt,or),delete St[Yt]},"vi");return this.Sa[z]=Zt,this.Sa[V]=Wt,this.handleError(Ur(this.db,z,gt.length-1,1,0,0,Zt,Wt,0)),this},I.prototype.updateHook=function(z){this.Ya&&(Fr(this.db,0,0),se(this.Ya),this.Ya=void 0),z&&(this.Ya=ke(function(V,ct,mt,gt,St){switch(ct){case 18:V="insert";break;case 23:V="update";break;case 9:V="delete";break;default:throw"unknown operationCode in updateHook callback: "+ct}if(mt=mt?q(J,mt):"",gt=gt?q(J,gt):"",St>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";z(V,mt,gt,Number(St))},"viiiij"),Fr(this.db,this.Ya,0))},r.Database=I};var c={...r},b="./this.program",f=(t,e)=>{throw e},_="",h,E;if(v){var x=$r;_=__dirname+"/",E=t=>(t=pt(t)?new URL(t):t,x.readFileSync(t)),h=async t=>(t=pt(t)?new URL(t):t,x.readFileSync(t,void 0)),!r.thisProgram&&1<process.argv.length&&(b=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),w.exports=r,f=(t,e)=>{throw process.exitCode=t,e}}else(T||k)&&(k?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),_=_.startsWith("blob:")?"":_.slice(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),k&&(E=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),h=async t=>{if(pt(t))return new Promise((i,d)=>{var I=new XMLHttpRequest;I.open("GET",t,!0),I.responseType="arraybuffer",I.onload=()=>{I.status==200||I.status==0&&I.response?i(I.response):d(I.status)},I.onerror=d,I.send(null)});var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw Error(e.status+" : "+e.url)});var R=r.print||console.log.bind(console),O=r.printErr||console.error.bind(console);Object.assign(r,c),c=null,r.thisProgram&&(b=r.thisProgram);var B=r.wasmBinary,C,j=!1,D,W,J,g,U,s,G,lt,X,pt=t=>t.startsWith("file://");function tt(){var t=C.buffer;r.HEAP8=W=new Int8Array(t),r.HEAP16=g=new Int16Array(t),r.HEAPU8=J=new Uint8Array(t),r.HEAPU16=new Uint16Array(t),r.HEAP32=U=new Int32Array(t),r.HEAPU32=s=new Uint32Array(t),r.HEAPF32=G=new Float32Array(t),r.HEAPF64=X=new Float64Array(t),r.HEAP64=lt=new BigInt64Array(t),r.HEAPU64=new BigUint64Array(t)}var ot=0,F=null;function P(t){var e;throw(e=r.onAbort)==null||e.call(r,t),t="Aborted("+t+")",O(t),j=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var ut;async function it(t){if(!B)try{var e=await h(t);return new Uint8Array(e)}catch{}if(t==ut&&B)t=new Uint8Array(B);else if(E)t=E(t);else throw"both async and sync fetching of the wasm failed";return t}async function et(t,e){try{var i=await it(t);return await WebAssembly.instantiate(i,e)}catch(d){O(`failed to asynchronously prepare wasm: ${d}`),P(d)}}async function Tt(t){var e=ut;if(!B&&typeof WebAssembly.instantiateStreaming=="function"&&!pt(e)&&!v)try{var i=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(i,t)}catch(d){O(`wasm streaming compile failed: ${d}`),O("falling back to ArrayBuffer instantiation")}return et(e,t)}class Nt{constructor(e){oe(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var bt=t=>{for(;0<t.length;)t.shift()(r)},kt=[],It=[],Rt=()=>{var t=r.preRun.shift();It.unshift(t)};function Ct(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return W[t];case"i8":return W[t];case"i16":return g[t>>1];case"i32":return U[t>>2];case"i64":return lt[t>>3];case"float":return G[t>>2];case"double":return X[t>>3];case"*":return s[t>>2];default:P(`invalid type for getValue: ${e}`)}}var Dt=r.noExitRuntime||!0;function n(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":W[t]=0;break;case"i8":W[t]=0;break;case"i16":g[t>>1]=0;break;case"i32":U[t>>2]=0;break;case"i64":lt[t>>3]=BigInt(0);break;case"float":G[t>>2]=0;break;case"double":X[t>>3]=0;break;case"*":s[t>>2]=0;break;default:P(`invalid type for setValue: ${e}`)}}var Y=typeof TextDecoder<"u"?new TextDecoder:void 0,q=(t,e=0,i=NaN)=>{var d=e+i;for(i=e;t[i]&&!(i>=d);)++i;if(16<i-e&&t.buffer&&Y)return Y.decode(t.subarray(e,i));for(d="";e<i;){var I=t[e++];if(I&128){var M=t[e++]&63;if((I&224)==192)d+=String.fromCharCode((I&31)<<6|M);else{var Z=t[e++]&63;I=(I&240)==224?(I&15)<<12|M<<6|Z:(I&7)<<18|M<<12|Z<<6|t[e++]&63,65536>I?d+=String.fromCharCode(I):(I-=65536,d+=String.fromCharCode(55296|I>>10,56320|I&1023))}}else d+=String.fromCharCode(I)}return d},S=(t,e)=>t?q(J,t,e):"",y=(t,e)=>{for(var i=0,d=t.length-1;0<=d;d--){var I=t[d];I==="."?t.splice(d,1):I===".."?(t.splice(d,1),i++):i&&(t.splice(d,1),i--)}if(e)for(;i;i--)t.unshift("..");return t},L=t=>{var e=t.charAt(0)==="/",i=t.slice(-1)==="/";return(t=y(t.split("/").filter(d=>!!d),!e).join("/"))||e||(t="."),t&&i&&(t+="/"),(e?"/":"")+t},K=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.slice(0,-1)),t+e)},Q=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],$=()=>{if(v){var t=$r;return e=>t.randomFillSync(e)}return e=>crypto.getRandomValues(e)},rt=t=>{(rt=$())(t)},at=(...t)=>{for(var e="",i=!1,d=t.length-1;-1<=d&&!i;d--){if(i=0<=d?t[d]:"/",typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,i=i.charAt(0)==="/"}return e=y(e.split("/").filter(I=>!!I),!i).join("/"),(i?"/":"")+e||"."},nt=[],dt=t=>{for(var e=0,i=0;i<t.length;++i){var d=t.charCodeAt(i);127>=d?e++:2047>=d?e+=2:55296<=d&&57343>=d?(e+=4,++i):e+=3}return e},Et=(t,e,i,d)=>{if(!(0<d))return 0;var I=i;d=i+d-1;for(var M=0;M<t.length;++M){var Z=t.charCodeAt(M);if(55296<=Z&&57343>=Z){var ft=t.charCodeAt(++M);Z=65536+((Z&1023)<<10)|ft&1023}if(127>=Z){if(i>=d)break;e[i++]=Z}else{if(2047>=Z){if(i+1>=d)break;e[i++]=192|Z>>6}else{if(65535>=Z){if(i+2>=d)break;e[i++]=224|Z>>12}else{if(i+3>=d)break;e[i++]=240|Z>>18,e[i++]=128|Z>>12&63}e[i++]=128|Z>>6&63}e[i++]=128|Z&63}}return e[i]=0,i-I},wt=(t,e)=>{var i=Array(dt(t)+1);return t=Et(t,i,0,i.length),e&&(i.length=t),i},Lt=[];function ee(t,e){Lt[t]={input:[],output:[],cb:e},Ve(t,$t)}var $t={open(t){var e=Lt[t.node.rdev];if(!e)throw new st(43);t.tty=e,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,e,i,d){if(!t.tty||!t.tty.cb.xb)throw new st(60);for(var I=0,M=0;M<d;M++){try{var Z=t.tty.cb.xb(t.tty)}catch{throw new st(29)}if(Z===void 0&&I===0)throw new st(6);if(Z==null)break;I++,e[i+M]=Z}return I&&(t.node.atime=Date.now()),I},write(t,e,i,d){if(!t.tty||!t.tty.cb.qb)throw new st(60);try{for(var I=0;I<d;I++)t.tty.cb.qb(t.tty,e[i+I])}catch{throw new st(29)}return d&&(t.node.mtime=t.node.ctime=Date.now()),I}},ue={xb(){t:{if(!nt.length){var t=null;if(v){var e=Buffer.alloc(256),i=0,d=process.stdin.fd;try{i=x.readSync(d,e,0,256)}catch(I){if(I.toString().includes("EOF"))i=0;else throw I}0<i&&(t=e.slice(0,i).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break t}nt=wt(t,!0)}t=nt.shift()}return t},qb(t,e){e===null||e===10?(R(q(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(R(q(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},xt={qb(t,e){e===null||e===10?(O(q(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(O(q(t.output)),t.output=[])}},_t={Wa:null,Xa(){return _t.createNode(null,"/",16895,0)},createNode(t,e,i,d){if((i&61440)===24576||(i&61440)===4096)throw new st(63);return _t.Wa||(_t.Wa={dir:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,lookup:_t.La.lookup,hb:_t.La.hb,rename:_t.La.rename,unlink:_t.La.unlink,rmdir:_t.La.rmdir,readdir:_t.La.readdir,symlink:_t.La.symlink},stream:{Va:_t.Ma.Va}},file:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:{Va:_t.Ma.Va,read:_t.Ma.read,write:_t.Ma.write,ib:_t.Ma.ib,jb:_t.Ma.jb}},link:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,readlink:_t.La.readlink},stream:{}},ub:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:ln}}),i=mr(t,e,i,d),Ut(i.mode)?(i.La=_t.Wa.dir.node,i.Ma=_t.Wa.dir.stream,i.Na={}):(i.mode&61440)===32768?(i.La=_t.Wa.file.node,i.Ma=_t.Wa.file.stream,i.Ra=0,i.Na=null):(i.mode&61440)===40960?(i.La=_t.Wa.link.node,i.Ma=_t.Wa.link.stream):(i.mode&61440)===8192&&(i.La=_t.Wa.ub.node,i.Ma=_t.Wa.ub.stream),i.atime=i.mtime=i.ctime=Date.now(),t&&(t.Na[e]=i,t.atime=t.mtime=t.ctime=i.atime),i},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Ut(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.atime),e.mtime=new Date(t.mtime),e.ctime=new Date(t.ctime),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},Ua(t,e){for(var i of["mode","atime","mtime","ctime"])e[i]!=null&&(t[i]=e[i]);e.size!==void 0&&(e=e.size,t.Ra!=e&&(e==0?(t.Na=null,t.Ra=0):(i=t.Na,t.Na=new Uint8Array(e),i&&t.Na.set(i.subarray(0,Math.min(e,t.Ra))),t.Ra=e)))},lookup(){throw _t.vb},hb(t,e,i,d){return _t.createNode(t,e,i,d)},rename(t,e,i){try{var d=de(e,i)}catch{}if(d){if(Ut(t.mode))for(var I in d.Na)throw new st(55);Xe(d)}delete t.parent.Na[t.name],e.Na[i]=t,t.name=i,e.ctime=e.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,e){delete t.Na[e],t.ctime=t.mtime=Date.now()},rmdir(t,e){var i=de(t,e),d;for(d in i.Na)throw new st(55);delete t.Na[e],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,e,i){return t=_t.createNode(t,e,41471,0),t.link=i,t},readlink(t){if((t.mode&61440)!==40960)throw new st(28);return t.link}},Ma:{read(t,e,i,d,I){var M=t.node.Na;if(I>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-I,d),8<t&&M.subarray)e.set(M.subarray(I,I+t),i);else for(d=0;d<t;d++)e[i+d]=M[I+d];return t},write(t,e,i,d,I,M){if(e.buffer===W.buffer&&(M=!1),!d)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(M)return t.Na=e.subarray(i,i+d),t.Ra=d;if(t.Ra===0&&I===0)return t.Na=e.slice(i,i+d),t.Ra=d;if(I+d<=t.Ra)return t.Na.set(e.subarray(i,i+d),I),d}M=I+d;var Z=t.Na?t.Na.length:0;if(Z>=M||(M=Math.max(M,Z*(1048576>Z?2:1.125)>>>0),Z!=0&&(M=Math.max(M,256)),Z=t.Na,t.Na=new Uint8Array(M),0<t.Ra&&t.Na.set(Z.subarray(0,t.Ra),0)),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(i,i+d),I);else for(M=0;M<d;M++)t.Na[I+M]=e[i+M];return t.Ra=Math.max(t.Ra,I+d),d},Va(t,e,i){if(i===1?e+=t.position:i===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new st(28);return e},ib(t,e,i,d,I){if((t.node.mode&61440)!==32768)throw new st(43);if(t=t.node.Na,I&2||!t||t.buffer!==W.buffer){I=!0,d=65536*Math.ceil(e/65536);var M=xr(65536,d);if(M&&J.fill(0,M,M+d),d=M,!d)throw new st(48);t&&((0<i||i+e<t.length)&&(t.subarray?t=t.subarray(i,i+e):t=Array.prototype.slice.call(t,i,i+e)),W.set(t,d))}else I=!1,d=t.byteOffset;return{Kb:d,Ab:I}},jb(t,e,i,d){return _t.Ma.write(t,e,0,d,i,!1),0}}},me=(t,e)=>{var i=0;return t&&(i|=365),e&&(i|=146),i},Pt=null,be={},re=[],Ge=1,Kt=null,ve=!1,ne=!0,ce={},st=class{constructor(t){oe(this,"name","ErrnoError");this.Pa=t}},sn=class{constructor(){oe(this,"gb",{});oe(this,"node",null)}get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},an=class{constructor(t,e,i,d){oe(this,"La",{});oe(this,"Ma",{});oe(this,"ab",null);t||(t=this),this.parent=t,this.Xa=t.Xa,this.id=Ge++,this.name=e,this.mode=i,this.rdev=d,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function jt(t,e={}){if(!t)throw new st(44);e.nb??(e.nb=!0),t.charAt(0)==="/"||(t="//"+t);var i=0;t:for(;40>i;i++){t=t.split("/").filter(ft=>!!ft);for(var d=Pt,I="/",M=0;M<t.length;M++){var Z=M===t.length-1;if(Z&&e.parent)break;if(t[M]!==".")if(t[M]==="..")I=K(I),d=d.parent;else{I=L(I+"/"+t[M]);try{d=de(d,t[M])}catch(ft){if((ft==null?void 0:ft.Pa)===44&&Z&&e.Jb)return{path:I};throw ft}if(!d.ab||Z&&!e.nb||(d=d.ab.root),(d.mode&61440)===40960&&(!Z||e.$a)){if(!d.La.readlink)throw new st(52);d=d.La.readlink(d),d.charAt(0)==="/"||(d=K(I)+"/"+d),t=d+"/"+t.slice(M+1).join("/");continue t}}}return{path:I,node:d}}throw new st(32)}function Ze(t){for(var e;;){if(t===t.parent)return t=t.Xa.zb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function Ye(t,e){for(var i=0,d=0;d<e.length;d++)i=(i<<5)-i+e.charCodeAt(d)|0;return(t+i>>>0)%Kt.length}function Xe(t){var e=Ye(t.parent.id,t.name);if(Kt[e]===t)Kt[e]=t.bb;else for(e=Kt[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function de(t,e){var i=Ut(t.mode)?(i=_e(t,"x"))?i:t.La.lookup?0:2:54;if(i)throw new st(i);for(i=Kt[Ye(t.id,e)];i;i=i.bb){var d=i.name;if(i.parent.id===t.id&&d===e)return i}return t.La.lookup(t,e)}function mr(t,e,i,d){return t=new an(t,e,i,d),e=Ye(t.parent.id,t.name),t.bb=Kt[e],Kt[e]=t}function Ut(t){return(t&61440)===16384}function _r(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function _e(t,e){if(ne)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function gr(t,e){if(!Ut(t.mode))return 54;try{return de(t,e),20}catch{}return _e(t,"wx")}function yr(t,e,i){try{var d=de(t,e)}catch(I){return I.Pa}if(t=_e(t,"wx"))return t;if(i){if(!Ut(d.mode))return 54;if(d===d.parent||Ze(d)==="/")return 10}else if(Ut(d.mode))return 31;return 0}function Re(t){if(!t)throw new st(63);return t}function Bt(t){if(t=re[t],!t)throw new st(8);return t}function br(t,e=-1){if(t=Object.assign(new sn,t),e==-1)t:{for(e=0;4096>=e;e++)if(!re[e])break t;throw new st(33)}return t.fd=e,re[e]=t}function on(t,e=-1){var i,d;return t=br(t,e),(d=(i=t.Ma)==null?void 0:i.Rb)==null||d.call(i,t),t}function Ke(t,e,i){var d=t==null?void 0:t.Ma.Ua;t=d?t:e,d??(d=e.La.Ua),Re(d),d(t,i)}var ln={open(t){var e,i;t.Ma=be[t.node.rdev].Ma,(i=(e=t.Ma).open)==null||i.call(e,t)},Va(){throw new st(70)}};function Ve(t,e){be[t]={Ma:e}}function vr(t,e){var i=e==="/";if(i&&Pt)throw new st(10);if(!i&&e){var d=jt(e,{nb:!1});if(e=d.path,d=d.node,d.ab)throw new st(10);if(!Ut(d.mode))throw new st(54)}e={type:t,Wb:{},zb:e,Ib:[]},t=t.Xa(e),t.Xa=e,e.root=t,i?Pt=t:d&&(d.ab=e,d.Xa&&d.Xa.Ib.push(e))}function xe(t,e,i){var d=jt(t,{parent:!0}).node;if(t=Q(t),!t)throw new st(28);if(t==="."||t==="..")throw new st(20);var I=gr(d,t);if(I)throw new st(I);if(!d.La.hb)throw new st(63);return d.La.hb(d,t,e,i)}function un(t,e=438){return xe(t,e&4095|32768,0)}function Vt(t,e=511){return xe(t,e&1023|16384,0)}function Oe(t,e,i){typeof i>"u"&&(i=e,e=438),xe(t,e|8192,i)}function Qe(t,e){if(!at(t))throw new st(44);var i=jt(e,{parent:!0}).node;if(!i)throw new st(44);e=Q(e);var d=gr(i,e);if(d)throw new st(d);if(!i.La.symlink)throw new st(63);i.La.symlink(i,e,t)}function wr(t){var e=jt(t,{parent:!0}).node;t=Q(t);var i=de(e,t),d=yr(e,t,!0);if(d)throw new st(d);if(!e.La.rmdir)throw new st(63);if(i.ab)throw new st(10);e.La.rmdir(e,t),Xe(i)}function Er(t){var e=jt(t,{parent:!0}).node;if(!e)throw new st(44);t=Q(t);var i=de(e,t),d=yr(e,t,!1);if(d)throw new st(d);if(!e.La.unlink)throw new st(63);if(i.ab)throw new st(10);e.La.unlink(e,t),Xe(i)}function we(t,e){return t=jt(t,{$a:!e}).node,Re(t.La.Ta)(t)}function kr(t,e,i,d){Ke(t,e,{mode:i&4095|e.mode&-4096,ctime:Date.now(),Fb:d})}function Ce(t,e){t=typeof t=="string"?jt(t,{$a:!0}).node:t,kr(null,t,e)}function Sr(t,e,i){if(Ut(e.mode))throw new st(31);if((e.mode&61440)!==32768)throw new st(28);var d=_e(e,"w");if(d)throw new st(d);Ke(t,e,{size:i,timestamp:Date.now()})}function ge(t,e,i=438){if(t==="")throw new st(44);if(typeof e=="string"){var d={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof d>"u")throw Error(`Unknown file open mode: ${e}`);e=d}if(i=e&64?i&4095|32768:0,typeof t=="object")d=t;else{var I=t.endsWith("/");t=jt(t,{$a:!(e&131072),Jb:!0}),d=t.node,t=t.path}var M=!1;if(e&64)if(d){if(e&128)throw new st(20)}else{if(I)throw new st(31);d=xe(t,i|511,0),M=!0}if(!d)throw new st(44);if((d.mode&61440)===8192&&(e&=-513),e&65536&&!Ut(d.mode))throw new st(54);if(!M&&(I=d?(d.mode&61440)===40960?32:Ut(d.mode)&&(_r(e)!=="r"||e&576)?31:_e(d,_r(e)):44))throw new st(I);return e&512&&!M&&(I=d,I=typeof I=="string"?jt(I,{$a:!0}).node:I,Sr(null,I,0)),e&=-131713,I=br({node:d,path:Ze(d),flags:e,seekable:!0,position:0,Ma:d.Ma,Lb:[],error:!1}),I.Ma.open&&I.Ma.open(I),M&&Ce(d,i&511),!r.logReadFiles||e&1||t in ce||(ce[t]=1),I}function Je(t){if(t.fd===null)throw new st(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{re[t.fd]=null}t.fd=null}function Tr(t,e,i){if(t.fd===null)throw new st(8);if(!t.seekable||!t.Ma.Va)throw new st(70);if(i!=0&&i!=1&&i!=2)throw new st(28);t.position=t.Ma.Va(t,e,i),t.Lb=[]}function Nr(t,e,i,d,I){if(0>d||0>I)throw new st(28);if(t.fd===null)throw new st(8);if((t.flags&2097155)===1)throw new st(8);if(Ut(t.node.mode))throw new st(31);if(!t.Ma.read)throw new st(28);var M=typeof I<"u";if(!M)I=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.read(t,e,i,d,I),M||(t.position+=e),e}function Ar(t,e,i,d,I){if(0>d||0>I)throw new st(28);if(t.fd===null)throw new st(8);if(!(t.flags&2097155))throw new st(8);if(Ut(t.node.mode))throw new st(31);if(!t.Ma.write)throw new st(28);t.seekable&&t.flags&1024&&Tr(t,0,2);var M=typeof I<"u";if(!M)I=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.write(t,e,i,d,I,void 0),M||(t.position+=e),e}function cn(t){var e,i=ge(t,i||0);t=we(t).size;var d=new Uint8Array(t);return Nr(i,d,0,t,0),e=d,Je(i),e}function ie(t,e,i){t=L("/dev/"+t);var d=me(!!e,!!i);ie.yb??(ie.yb=64);var I=ie.yb++<<8|0;Ve(I,{open(M){M.seekable=!1},close(){var M;(M=i==null?void 0:i.buffer)!=null&&M.length&&i(10)},read(M,Z,ft,vt){for(var yt=0,Ot=0;Ot<vt;Ot++){try{var zt=e()}catch{throw new st(29)}if(zt===void 0&&yt===0)throw new st(6);if(zt==null)break;yt++,Z[ft+Ot]=zt}return yt&&(M.node.atime=Date.now()),yt},write(M,Z,ft,vt){for(var yt=0;yt<vt;yt++)try{i(Z[ft+yt])}catch{throw new st(29)}return vt&&(M.node.mtime=M.node.ctime=Date.now()),yt}}),Oe(t,d,I)}var At={};function fe(t,e,i){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":Bt(t).path,e.length==0){if(!i)throw new st(44);return t}return t+"/"+e}function De(t,e){U[t>>2]=e.dev,U[t+4>>2]=e.mode,s[t+8>>2]=e.nlink,U[t+12>>2]=e.uid,U[t+16>>2]=e.gid,U[t+20>>2]=e.rdev,lt[t+24>>3]=BigInt(e.size),U[t+32>>2]=4096,U[t+36>>2]=e.blocks;var i=e.atime.getTime(),d=e.mtime.getTime(),I=e.ctime.getTime();return lt[t+40>>3]=BigInt(Math.floor(i/1e3)),s[t+48>>2]=i%1e3*1e6,lt[t+56>>3]=BigInt(Math.floor(d/1e3)),s[t+64>>2]=d%1e3*1e6,lt[t+72>>3]=BigInt(Math.floor(I/1e3)),s[t+80>>2]=I%1e3*1e6,lt[t+88>>3]=BigInt(e.ino),0}var Le=void 0,Be=()=>{var t=U[+Le>>2];return Le+=4,t},tr=0,dn=[0,31,60,91,121,152,182,213,244,274,305,335],fn=[0,31,59,90,120,151,181,212,243,273,304,334],Ee={},Ir=t=>{var e;D=t,Dt||0<tr||((e=r.onExit)==null||e.call(r,t),j=!0),f(t,new Nt(t))},hn=t=>{if(!j)try{if(t(),!(Dt||0<tr))try{D=t=D,Ir(t)}catch(e){e instanceof Nt||e=="unwind"||f(1,e)}}catch(e){e instanceof Nt||e=="unwind"||f(1,e)}},er={},Rr=()=>{if(!rr){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:b||"./this.program"},e;for(e in er)er[e]===void 0?delete t[e]:t[e]=er[e];var i=[];for(e in t)i.push(`${e}=${t[e]}`);rr=i}return rr},rr,nr=t=>{var e=dt(t)+1,i=ae(e);return Et(t,J,i,e),i},pn=(t,e,i,d)=>{var I={string:yt=>{var Ot=0;return yt!=null&&yt!==0&&(Ot=nr(yt)),Ot},array:yt=>{var Ot=ae(yt.length);return W.set(yt,Ot),Ot}};t=r["_"+t];var M=[],Z=0;if(d)for(var ft=0;ft<d.length;ft++){var vt=I[i[ft]];vt?(Z===0&&(Z=Te()),M[ft]=vt(d[ft])):M[ft]=d[ft]}return i=t(...M),i=function(yt){return Z!==0&&Se(Z),e==="string"?yt?q(J,yt):"":e==="boolean"?!!yt:yt}(i)},Ue=0,ze=(t,e)=>(e=e==1?ae(t.length):sr(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),J.set(t,e),e),he,ir=[],Qt,se=t=>{he.delete(Qt.get(t)),Qt.set(t,null),ir.push(t)},ke=(t,e)=>{if(!he){he=new WeakMap;var i=Qt.length;if(he)for(var d=0;d<0+i;d++){var I=Qt.get(d);I&&he.set(I,d)}}if(i=he.get(t)||0)return i;if(ir.length)i=ir.pop();else{try{Qt.grow(1)}catch(vt){throw vt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":vt}i=Qt.length-1}try{Qt.set(i,t)}catch(vt){if(!(vt instanceof TypeError))throw vt;if(typeof WebAssembly.Function=="function"){var M=WebAssembly.Function;d={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},I={parameters:[],results:e[0]=="v"?[]:[d[e[0]]]};for(var Z=1;Z<e.length;++Z)I.parameters.push(d[e[Z]]);e=new M(I,t)}else{d=[1],I=e.slice(0,1),e=e.slice(1),Z={i:127,p:127,j:126,f:125,d:124,e:111},d.push(96);var ft=e.length;128>ft?d.push(ft):d.push(ft%128|128,ft>>7);for(M of e)d.push(Z[M]);I=="v"?d.push(0):d.push(1,Z[I]),e=[0,97,115,109,1,0,0,0,1],M=d.length,128>M?e.push(M):e.push(M%128|128,M>>7),e.push(...d),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}Qt.set(i,e)}return he.set(t,i),i};Kt=Array(4096),vr(_t,"/"),Vt("/tmp"),Vt("/home"),Vt("/home/web_user"),function(){Vt("/dev"),Ve(259,{read:()=>0,write:(d,I,M,Z)=>Z,Va:()=>0}),Oe("/dev/null",259),ee(1280,ue),ee(1536,xt),Oe("/dev/tty",1280),Oe("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,i=()=>(e===0&&(rt(t),e=t.byteLength),t[--e]);ie("random",i),ie("urandom",i),Vt("/dev/shm"),Vt("/dev/shm/tmp")}(),function(){Vt("/proc");var t=Vt("/proc/self");Vt("/proc/self/fd"),vr({Xa(){var e=mr(t,"fd",16895,73);return e.Ma={Va:_t.Ma.Va},e.La={lookup(i,d){i=+d;var I=Bt(i);return i={parent:null,Xa:{zb:"fake"},La:{readlink:()=>I.path},id:i+1},i.parent=i},readdir(){return Array.from(re.entries()).filter(([,i])=>i).map(([i])=>i.toString())}},e}},"/proc/self/fd")}(),_t.vb=new st(44),_t.vb.stack="<generic error, no stack>";var mn={a:(t,e,i,d)=>P(`Assertion failed: ${t?q(J,t):""}, at: `+[e?e?q(J,e):"":"unknown filename",i,d?d?q(J,d):"":"unknown function"]),i:function(t,e){try{return t=t?q(J,t):"",Ce(t,e),0}catch(i){if(typeof At>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},L:function(t,e,i){try{if(e=e?q(J,e):"",e=fe(t,e),i&-8)return-28;var d=jt(e,{$a:!0}).node;return d?(t="",i&4&&(t+="r"),i&2&&(t+="w"),i&1&&(t+="x"),t&&_e(d,t)?-2:0):-44}catch(I){if(typeof At>"u"||I.name!=="ErrnoError")throw I;return-I.Pa}},j:function(t,e){try{var i=Bt(t);return kr(i,i.node,e,!1),0}catch(d){if(typeof At>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},h:function(t){try{var e=Bt(t);return Ke(e,e.node,{timestamp:Date.now(),Fb:!1}),0}catch(i){if(typeof At>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},b:function(t,e,i){Le=i;try{var d=Bt(t);switch(e){case 0:var I=Be();if(0>I)break;for(;re[I];)I++;return on(d,I).fd;case 1:case 2:return 0;case 3:return d.flags;case 4:return I=Be(),d.flags|=I,0;case 12:return I=Be(),g[I+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(M){if(typeof At>"u"||M.name!=="ErrnoError")throw M;return-M.Pa}},g:function(t,e){try{var i=Bt(t),d=i.node,I=i.Ma.Ta;t=I?i:d,I??(I=d.La.Ta),Re(I);var M=I(t);return De(e,M)}catch(Z){if(typeof At>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Pa}},H:function(t,e){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var i=Bt(t);if(0>e||!(i.flags&2097155))throw new st(28);return Sr(i,i.node,e),0}catch(d){if(typeof At>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},G:function(t,e){try{if(e===0)return-28;var i=dt("/")+1;return e<i?-68:(Et("/",J,t,e),i)}catch(d){if(typeof At>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},K:function(t,e){try{return t=t?q(J,t):"",De(e,we(t,!0))}catch(i){if(typeof At>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},C:function(t,e,i){try{return e=e?q(J,e):"",e=fe(t,e),Vt(e,i),0}catch(d){if(typeof At>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},J:function(t,e,i,d){try{e=e?q(J,e):"";var I=d&256;return e=fe(t,e,d&4096),De(i,I?we(e,!0):we(e))}catch(M){if(typeof At>"u"||M.name!=="ErrnoError")throw M;return-M.Pa}},x:function(t,e,i,d){Le=d;try{e=e?q(J,e):"",e=fe(t,e);var I=d?Be():0;return ge(e,i,I).fd}catch(M){if(typeof At>"u"||M.name!=="ErrnoError")throw M;return-M.Pa}},v:function(t,e,i,d){try{if(e=e?q(J,e):"",e=fe(t,e),0>=d)return-28;var I=jt(e).node;if(!I)throw new st(44);if(!I.La.readlink)throw new st(28);var M=I.La.readlink(I),Z=Math.min(d,dt(M)),ft=W[i+Z];return Et(M,J,i,d+1),W[i+Z]=ft,Z}catch(vt){if(typeof At>"u"||vt.name!=="ErrnoError")throw vt;return-vt.Pa}},u:function(t){try{return t=t?q(J,t):"",wr(t),0}catch(e){if(typeof At>"u"||e.name!=="ErrnoError")throw e;return-e.Pa}},f:function(t,e){try{return t=t?q(J,t):"",De(e,we(t))}catch(i){if(typeof At>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},r:function(t,e,i){try{return e=e?q(J,e):"",e=fe(t,e),i===0?Er(e):i===512?wr(e):P("Invalid flags passed to unlinkat"),0}catch(d){if(typeof At>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},q:function(t,e,i){try{e=e?q(J,e):"",e=fe(t,e,!0);var d=Date.now(),I,M;if(i){var Z=s[i>>2]+4294967296*U[i+4>>2],ft=U[i+8>>2];ft==1073741823?I=d:ft==1073741822?I=null:I=1e3*Z+ft/1e6,i+=16,Z=s[i>>2]+4294967296*U[i+4>>2],ft=U[i+8>>2],ft==1073741823?M=d:ft==1073741822?M=null:M=1e3*Z+ft/1e6}else M=I=d;if((M??I)!==null){t=I;var vt=jt(e,{$a:!0}).node;Re(vt.La.Ua)(vt,{atime:t,mtime:M})}return 0}catch(yt){if(typeof At>"u"||yt.name!=="ErrnoError")throw yt;return-yt.Pa}},m:()=>P(""),l:()=>{Dt=!1,tr=0},A:function(t,e){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),U[e>>2]=t.getSeconds(),U[e+4>>2]=t.getMinutes(),U[e+8>>2]=t.getHours(),U[e+12>>2]=t.getDate(),U[e+16>>2]=t.getMonth(),U[e+20>>2]=t.getFullYear()-1900,U[e+24>>2]=t.getDay();var i=t.getFullYear();U[e+28>>2]=(i%4!==0||i%100===0&&i%400!==0?fn:dn)[t.getMonth()]+t.getDate()-1|0,U[e+36>>2]=-(60*t.getTimezoneOffset()),i=new Date(t.getFullYear(),6,1).getTimezoneOffset();var d=new Date(t.getFullYear(),0,1).getTimezoneOffset();U[e+32>>2]=(i!=d&&t.getTimezoneOffset()==Math.min(d,i))|0},y:function(t,e,i,d,I,M,Z){I=-9007199254740992>I||9007199254740992<I?NaN:Number(I);try{if(isNaN(I))return 61;var ft=Bt(d);if(e&2&&!(i&2)&&(ft.flags&2097155)!==2)throw new st(2);if((ft.flags&2097155)===1)throw new st(2);if(!ft.Ma.ib)throw new st(43);if(!t)throw new st(28);var vt=ft.Ma.ib(ft,t,I,e,i),yt=vt.Kb;return U[M>>2]=vt.Ab,s[Z>>2]=yt,0}catch(Ot){if(typeof At>"u"||Ot.name!=="ErrnoError")throw Ot;return-Ot.Pa}},z:function(t,e,i,d,I,M){M=-9007199254740992>M||9007199254740992<M?NaN:Number(M);try{var Z=Bt(I);if(i&2){if(i=M,(Z.node.mode&61440)!==32768)throw new st(43);if(!(d&2)){var ft=J.slice(t,t+e);Z.Ma.jb&&Z.Ma.jb(Z,ft,i,e,d)}}}catch(vt){if(typeof At>"u"||vt.name!=="ErrnoError")throw vt;return-vt.Pa}},n:(t,e)=>{if(Ee[t]&&(clearTimeout(Ee[t].id),delete Ee[t]),!e)return 0;var i=setTimeout(()=>{delete Ee[t],hn(()=>Or(t,performance.now()))},e);return Ee[t]={id:i,Xb:e},0},B:(t,e,i,d)=>{var I=new Date().getFullYear(),M=new Date(I,0,1).getTimezoneOffset();I=new Date(I,6,1).getTimezoneOffset(),s[t>>2]=60*Math.max(M,I),U[e>>2]=+(M!=I),e=Z=>{var ft=Math.abs(Z);return`UTC${0<=Z?"-":"+"}${String(Math.floor(ft/60)).padStart(2,"0")}${String(ft%60).padStart(2,"0")}`},t=e(M),e=e(I),I<M?(Et(t,J,i,17),Et(e,J,d,17)):(Et(t,J,d,17),Et(e,J,i,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var e=J.length;if(t>>>=0,2147483648<t)return!1;for(var i=1;4>=i;i*=2){var d=e*(1+.2/i);d=Math.min(d,t+100663296);t:{d=(Math.min(2147483648,65536*Math.ceil(Math.max(t,d)/65536))-C.buffer.byteLength+65535)/65536|0;try{C.grow(d),tt();var I=1;break t}catch{}I=void 0}if(I)return!0}return!1},E:(t,e)=>{var i=0;return Rr().forEach((d,I)=>{var M=e+i;for(I=s[t+4*I>>2]=M,M=0;M<d.length;++M)W[I++]=d.charCodeAt(M);W[I]=0,i+=d.length+1}),0},F:(t,e)=>{var i=Rr();s[t>>2]=i.length;var d=0;return i.forEach(I=>d+=I.length+1),s[e>>2]=d,0},e:function(t){try{var e=Bt(t);return Je(e),0}catch(i){if(typeof At>"u"||i.name!=="ErrnoError")throw i;return i.Pa}},p:function(t,e){try{var i=Bt(t);return W[e]=i.tty?2:Ut(i.mode)?3:(i.mode&61440)===40960?7:4,g[e+2>>1]=0,lt[e+8>>3]=BigInt(0),lt[e+16>>3]=BigInt(0),0}catch(d){if(typeof At>"u"||d.name!=="ErrnoError")throw d;return d.Pa}},w:function(t,e,i,d){try{t:{var I=Bt(t);t=e;for(var M,Z=e=0;Z<i;Z++){var ft=s[t>>2],vt=s[t+4>>2];t+=8;var yt=Nr(I,W,ft,vt,M);if(0>yt){var Ot=-1;break t}if(e+=yt,yt<vt)break;typeof M<"u"&&(M+=yt)}Ot=e}return s[d>>2]=Ot,0}catch(zt){if(typeof At>"u"||zt.name!=="ErrnoError")throw zt;return zt.Pa}},D:function(t,e,i,d){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var I=Bt(t);return Tr(I,e,i),lt[d>>3]=BigInt(I.position),I.ob&&e===0&&i===0&&(I.ob=null),0}catch(M){if(typeof At>"u"||M.name!=="ErrnoError")throw M;return M.Pa}},I:function(t){var i;try{var e=Bt(t);return(i=e.Ma)!=null&&i.fsync?e.Ma.fsync(e):0}catch(d){if(typeof At>"u"||d.name!=="ErrnoError")throw d;return d.Pa}},t:function(t,e,i,d){try{t:{var I=Bt(t);t=e;for(var M,Z=e=0;Z<i;Z++){var ft=s[t>>2],vt=s[t+4>>2];t+=8;var yt=Ar(I,W,ft,vt,M);if(0>yt){var Ot=-1;break t}if(e+=yt,yt<vt)break;typeof M<"u"&&(M+=yt)}Ot=e}return s[d>>2]=Ot,0}catch(zt){if(typeof At>"u"||zt.name!=="ErrnoError")throw zt;return zt.Pa}},k:Ir},ht;(async function(){var i;function t(d){var I;return ht=d.exports,C=ht.M,tt(),Qt=ht.O,ot--,(I=r.monitorRunDependencies)==null||I.call(r,ot),ot==0&&F&&(d=F,F=null,d()),ht}ot++,(i=r.monitorRunDependencies)==null||i.call(r,ot);var e={a:mn};return r.instantiateWasm?new Promise(d=>{r.instantiateWasm(e,(I,M)=>{t(I),d(I.exports)})}):(ut??(ut=r.locateFile?r.locateFile("sql-wasm.wasm",_):_+"sql-wasm.wasm"),t((await Tt(e)).instance))})(),r._sqlite3_free=t=>(r._sqlite3_free=ht.P)(t),r._sqlite3_value_text=t=>(r._sqlite3_value_text=ht.Q)(t),r._sqlite3_prepare_v2=(t,e,i,d,I)=>(r._sqlite3_prepare_v2=ht.R)(t,e,i,d,I),r._sqlite3_step=t=>(r._sqlite3_step=ht.S)(t),r._sqlite3_reset=t=>(r._sqlite3_reset=ht.T)(t),r._sqlite3_exec=(t,e,i,d,I)=>(r._sqlite3_exec=ht.U)(t,e,i,d,I),r._sqlite3_finalize=t=>(r._sqlite3_finalize=ht.V)(t),r._sqlite3_column_name=(t,e)=>(r._sqlite3_column_name=ht.W)(t,e),r._sqlite3_column_text=(t,e)=>(r._sqlite3_column_text=ht.X)(t,e),r._sqlite3_column_type=(t,e)=>(r._sqlite3_column_type=ht.Y)(t,e),r._sqlite3_errmsg=t=>(r._sqlite3_errmsg=ht.Z)(t),r._sqlite3_clear_bindings=t=>(r._sqlite3_clear_bindings=ht._)(t),r._sqlite3_value_blob=t=>(r._sqlite3_value_blob=ht.$)(t),r._sqlite3_value_bytes=t=>(r._sqlite3_value_bytes=ht.aa)(t),r._sqlite3_value_double=t=>(r._sqlite3_value_double=ht.ba)(t),r._sqlite3_value_int=t=>(r._sqlite3_value_int=ht.ca)(t),r._sqlite3_value_type=t=>(r._sqlite3_value_type=ht.da)(t),r._sqlite3_result_blob=(t,e,i,d)=>(r._sqlite3_result_blob=ht.ea)(t,e,i,d),r._sqlite3_result_double=(t,e)=>(r._sqlite3_result_double=ht.fa)(t,e),r._sqlite3_result_error=(t,e,i)=>(r._sqlite3_result_error=ht.ga)(t,e,i),r._sqlite3_result_int=(t,e)=>(r._sqlite3_result_int=ht.ha)(t,e),r._sqlite3_result_int64=(t,e)=>(r._sqlite3_result_int64=ht.ia)(t,e),r._sqlite3_result_null=t=>(r._sqlite3_result_null=ht.ja)(t),r._sqlite3_result_text=(t,e,i,d)=>(r._sqlite3_result_text=ht.ka)(t,e,i,d),r._sqlite3_aggregate_context=(t,e)=>(r._sqlite3_aggregate_context=ht.la)(t,e),r._sqlite3_column_count=t=>(r._sqlite3_column_count=ht.ma)(t),r._sqlite3_data_count=t=>(r._sqlite3_data_count=ht.na)(t),r._sqlite3_column_blob=(t,e)=>(r._sqlite3_column_blob=ht.oa)(t,e),r._sqlite3_column_bytes=(t,e)=>(r._sqlite3_column_bytes=ht.pa)(t,e),r._sqlite3_column_double=(t,e)=>(r._sqlite3_column_double=ht.qa)(t,e),r._sqlite3_bind_blob=(t,e,i,d,I)=>(r._sqlite3_bind_blob=ht.ra)(t,e,i,d,I),r._sqlite3_bind_double=(t,e,i)=>(r._sqlite3_bind_double=ht.sa)(t,e,i),r._sqlite3_bind_int=(t,e,i)=>(r._sqlite3_bind_int=ht.ta)(t,e,i),r._sqlite3_bind_text=(t,e,i,d,I)=>(r._sqlite3_bind_text=ht.ua)(t,e,i,d,I),r._sqlite3_bind_parameter_index=(t,e)=>(r._sqlite3_bind_parameter_index=ht.va)(t,e),r._sqlite3_sql=t=>(r._sqlite3_sql=ht.wa)(t),r._sqlite3_normalized_sql=t=>(r._sqlite3_normalized_sql=ht.xa)(t),r._sqlite3_changes=t=>(r._sqlite3_changes=ht.ya)(t),r._sqlite3_close_v2=t=>(r._sqlite3_close_v2=ht.za)(t),r._sqlite3_create_function_v2=(t,e,i,d,I,M,Z,ft,vt)=>(r._sqlite3_create_function_v2=ht.Aa)(t,e,i,d,I,M,Z,ft,vt),r._sqlite3_update_hook=(t,e,i)=>(r._sqlite3_update_hook=ht.Ba)(t,e,i),r._sqlite3_open=(t,e)=>(r._sqlite3_open=ht.Ca)(t,e);var sr=r._malloc=t=>(sr=r._malloc=ht.Da)(t),Pe=r._free=t=>(Pe=r._free=ht.Ea)(t);r._RegisterExtensionFunctions=t=>(r._RegisterExtensionFunctions=ht.Fa)(t);var xr=(t,e)=>(xr=ht.Ga)(t,e),Or=(t,e)=>(Or=ht.Ha)(t,e),Se=t=>(Se=ht.Ia)(t),ae=t=>(ae=ht.Ja)(t),Te=()=>(Te=ht.Ka)();r.stackSave=()=>Te(),r.stackRestore=t=>Se(t),r.stackAlloc=t=>ae(t),r.cwrap=(t,e,i,d)=>{var I=!i||i.every(M=>M==="number"||M==="boolean");return e!=="string"&&I&&!d?r["_"+t]:(...M)=>pn(t,e,i,M)},r.addFunction=ke,r.removeFunction=se,r.UTF8ToString=S,r.ALLOC_NORMAL=Ue,r.allocate=ze,r.allocateUTF8OnStack=nr;function ar(){function t(){var I;if(r.calledRun=!0,!j){if(!r.noFSInit&&!ve){var e,i;ve=!0,d??(d=r.stdin),e??(e=r.stdout),i??(i=r.stderr),d?ie("stdin",d):Qe("/dev/tty","/dev/stdin"),e?ie("stdout",null,e):Qe("/dev/tty","/dev/stdout"),i?ie("stderr",null,i):Qe("/dev/tty1","/dev/stderr"),ge("/dev/stdin",0),ge("/dev/stdout",1),ge("/dev/stderr",1)}if(ht.N(),ne=!1,(I=r.onRuntimeInitialized)==null||I.call(r),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var d=r.postRun.shift();kt.unshift(d)}bt(kt)}}if(0<ot)F=ar;else{if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Rt();bt(It),0<ot?F=ar:r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),t()},1)):t()}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return ar(),u}),o)};w.exports=N,w.exports.default=N})(Xr);var ii=Xr.exports;const jr=Yr(ii),si="/npconv/assets/sql-wasm-C1U8OeUW.wasm";async function ai(){try{return await jr({locateFile:()=>String(si)})}catch{try{return await jr()}catch(w){throw H("Failed to initialize sql.js: "+(w.message||w.toString()),"err"),w}}}function oi(w){H("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const A=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];w.run("BEGIN TRANSACTION");try{for(const o of A)w.run(o);w.run("COMMIT"),H("Schema created.","schema")}catch(o){try{w.run("ROLLBACK")}catch{}throw H("Failed to create schema: "+(o.message||o.toString()),"err"),o}}function li(w){try{const A=w.exec("PRAGMA foreign_key_list('stream_state')"),o=w.exec("PRAGMA table_info('stream_state')");let N=!1;A&&A.length>0&&A[0].values&&A[0].values.length>0&&(N=!0);let p=!1;if(o&&o.length>0&&o[0].values.length>=2){const a=o[0].values,l=a.map(m=>m[1]),u=a.map(m=>m[5]);l[0]==="progress_time"&&l[1]==="stream_id"&&u[0]===0&&u[1]===1&&(p=!0)}if(!N||!p){H("Patching stream_state schema to Room-compatible definition...","schema"),w.run("BEGIN TRANSACTION");const a=w.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(a&&a.length>0&&a[0].values.length>0){w.run("ALTER TABLE stream_state RENAME TO stream_state_old"),w.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{w.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(l){H("Note: could not copy old stream_state rows: "+(l.message||l.toString()),"warn")}w.run("DROP TABLE stream_state_old")}else w.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");w.run("COMMIT"),H("stream_state schema patched.","schema")}else H("stream_state schema OK.","schema")}catch(A){H("Failed to ensure stream_state schema: "+(A.message||A.toString()),"err")}}function lr(w){let A="";try{const o=w.exec("PRAGMA table_info('stream_state')")||[],N=w.exec("PRAGMA foreign_key_list('stream_state')")||[],p=w.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];A+=`PRAGMA table_info("stream_state"):
`,o.length>0&&(A+=JSON.stringify(o[0],null,2)+`
`),A+=`
PRAGMA foreign_key_list("stream_state"):
`,N.length>0&&(A+=JSON.stringify(N[0],null,2)+`
`),A+=`
CREATE statement:
`,p.length>0&&p[0].values&&p[0].values.length>0&&(A+=p[0].values[0][0]+`
`)}catch(o){A+="Failed to collect stream_state debug info: "+(o.message||o.toString())+`
`}return A}function qe(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(w,A){(function(o){w.exports=o()})(function(){return function o(N,p,a){function l(r,T){if(!p[r]){if(!N[r]){var k=typeof qe=="function"&&qe;if(!T&&k)return k(r,!0);if(u)return u(r,!0);var v=new Error("Cannot find module '"+r+"'");throw v.code="MODULE_NOT_FOUND",v}var c=p[r]={exports:{}};N[r][0].call(c.exports,function(b){var f=N[r][1][b];return l(f||b)},c,c.exports,o,N,p,a)}return p[r].exports}for(var u=typeof qe=="function"&&qe,m=0;m<a.length;m++)l(a[m]);return l}({1:[function(o,N,p){var a=o("./utils"),l=o("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(m){for(var r,T,k,v,c,b,f,_=[],h=0,E=m.length,x=E,R=a.getTypeOf(m)!=="string";h<m.length;)x=E-h,k=R?(r=m[h++],T=h<E?m[h++]:0,h<E?m[h++]:0):(r=m.charCodeAt(h++),T=h<E?m.charCodeAt(h++):0,h<E?m.charCodeAt(h++):0),v=r>>2,c=(3&r)<<4|T>>4,b=1<x?(15&T)<<2|k>>6:64,f=2<x?63&k:64,_.push(u.charAt(v)+u.charAt(c)+u.charAt(b)+u.charAt(f));return _.join("")},p.decode=function(m){var r,T,k,v,c,b,f=0,_=0,h="data:";if(m.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var E,x=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===u.charAt(64)&&x--,m.charAt(m.length-2)===u.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=l.uint8array?new Uint8Array(0|x):new Array(0|x);f<m.length;)r=u.indexOf(m.charAt(f++))<<2|(v=u.indexOf(m.charAt(f++)))>>4,T=(15&v)<<4|(c=u.indexOf(m.charAt(f++)))>>2,k=(3&c)<<6|(b=u.indexOf(m.charAt(f++))),E[_++]=r,c!==64&&(E[_++]=T),b!==64&&(E[_++]=k);return E}},{"./support":30,"./utils":32}],2:[function(o,N,p){var a=o("./external"),l=o("./stream/DataWorker"),u=o("./stream/Crc32Probe"),m=o("./stream/DataLengthProbe");function r(T,k,v,c,b){this.compressedSize=T,this.uncompressedSize=k,this.crc32=v,this.compression=c,this.compressedContent=b}r.prototype={getContentWorker:function(){var T=new l(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),k=this;return T.on("end",function(){if(this.streamInfo.data_length!==k.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new l(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},r.createWorkerFrom=function(T,k,v){return T.pipe(new u).pipe(new m("uncompressedSize")).pipe(k.compressWorker(v)).pipe(new m("compressedSize")).withStreamInfo("compression",k)},N.exports=r},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,N,p){var a=o("./stream/GenericWorker");p.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},p.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,N,p){var a=o("./utils"),l=function(){for(var u,m=[],r=0;r<256;r++){u=r;for(var T=0;T<8;T++)u=1&u?3988292384^u>>>1:u>>>1;m[r]=u}return m}();N.exports=function(u,m){return u!==void 0&&u.length?a.getTypeOf(u)!=="string"?function(r,T,k,v){var c=l,b=v+k;r^=-1;for(var f=v;f<b;f++)r=r>>>8^c[255&(r^T[f])];return-1^r}(0|m,u,u.length,0):function(r,T,k,v){var c=l,b=v+k;r^=-1;for(var f=v;f<b;f++)r=r>>>8^c[255&(r^T.charCodeAt(f))];return-1^r}(0|m,u,u.length,0):0}},{"./utils":32}],5:[function(o,N,p){p.base64=!1,p.binary=!1,p.dir=!1,p.createFolders=!0,p.date=null,p.compression=null,p.compressionOptions=null,p.comment=null,p.unixPermissions=null,p.dosPermissions=null},{}],6:[function(o,N,p){var a=null;a=typeof Promise<"u"?Promise:o("lie"),N.exports={Promise:a}},{lie:37}],7:[function(o,N,p){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=o("pako"),u=o("./utils"),m=o("./stream/GenericWorker"),r=a?"uint8array":"array";function T(k,v){m.call(this,"FlateWorker/"+k),this._pako=null,this._pakoAction=k,this._pakoOptions=v,this.meta={}}p.magic="\b\0",u.inherits(T,m),T.prototype.processChunk=function(k){this.meta=k.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(r,k.data),!1)},T.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var k=this;this._pako.onData=function(v){k.push({data:v,meta:k.meta})}},p.compressWorker=function(k){return new T("Deflate",k)},p.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,N,p){function a(c,b){var f,_="";for(f=0;f<b;f++)_+=String.fromCharCode(255&c),c>>>=8;return _}function l(c,b,f,_,h,E){var x,R,O=c.file,B=c.compression,C=E!==r.utf8encode,j=u.transformTo("string",E(O.name)),D=u.transformTo("string",r.utf8encode(O.name)),W=O.comment,J=u.transformTo("string",E(W)),g=u.transformTo("string",r.utf8encode(W)),U=D.length!==O.name.length,s=g.length!==W.length,G="",lt="",X="",pt=O.dir,tt=O.date,ot={crc32:0,compressedSize:0,uncompressedSize:0};b&&!f||(ot.crc32=c.crc32,ot.compressedSize=c.compressedSize,ot.uncompressedSize=c.uncompressedSize);var F=0;b&&(F|=8),C||!U&&!s||(F|=2048);var P=0,ut=0;pt&&(P|=16),h==="UNIX"?(ut=798,P|=function(et,Tt){var Nt=et;return et||(Nt=Tt?16893:33204),(65535&Nt)<<16}(O.unixPermissions,pt)):(ut=20,P|=function(et){return 63&(et||0)}(O.dosPermissions)),x=tt.getUTCHours(),x<<=6,x|=tt.getUTCMinutes(),x<<=5,x|=tt.getUTCSeconds()/2,R=tt.getUTCFullYear()-1980,R<<=4,R|=tt.getUTCMonth()+1,R<<=5,R|=tt.getUTCDate(),U&&(lt=a(1,1)+a(T(j),4)+D,G+="up"+a(lt.length,2)+lt),s&&(X=a(1,1)+a(T(J),4)+g,G+="uc"+a(X.length,2)+X);var it="";return it+=`
\0`,it+=a(F,2),it+=B.magic,it+=a(x,2),it+=a(R,2),it+=a(ot.crc32,4),it+=a(ot.compressedSize,4),it+=a(ot.uncompressedSize,4),it+=a(j.length,2),it+=a(G.length,2),{fileRecord:k.LOCAL_FILE_HEADER+it+j+G,dirRecord:k.CENTRAL_FILE_HEADER+a(ut,2)+it+a(J.length,2)+"\0\0\0\0"+a(P,4)+a(_,4)+j+G+J}}var u=o("../utils"),m=o("../stream/GenericWorker"),r=o("../utf8"),T=o("../crc32"),k=o("../signature");function v(c,b,f,_){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=f,this.encodeFileName=_,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(v,m),v.prototype.push=function(c){var b=c.meta.percent||0,f=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,m.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:f?(b+100*(f-_-1))/f:100}}))},v.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var b=this.streamFiles&&!c.file.dir;if(b){var f=l(c,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(c){this.accumulate=!1;var b=this.streamFiles&&!c.file.dir,f=l(c,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),b)this.push({data:function(_){return k.DATA_DESCRIPTOR+a(_.crc32,4)+a(_.compressedSize,4)+a(_.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var c=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var f=this.bytesWritten-c,_=function(h,E,x,R,O){var B=u.transformTo("string",O(R));return k.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(h,2)+a(h,2)+a(E,4)+a(x,4)+a(B.length,2)+B}(this.dirRecords.length,f,c,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(c){this._sources.push(c);var b=this;return c.on("data",function(f){b.processChunk(f)}),c.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),c.on("error",function(f){b.error(f)}),this},v.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(c){var b=this._sources;if(!m.prototype.error.call(this,c))return!1;for(var f=0;f<b.length;f++)try{b[f].error(c)}catch{}return!0},v.prototype.lock=function(){m.prototype.lock.call(this);for(var c=this._sources,b=0;b<c.length;b++)c[b].lock()},N.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,N,p){var a=o("../compressions"),l=o("./ZipFileWorker");p.generateWorker=function(u,m,r){var T=new l(m.streamFiles,r,m.platform,m.encodeFileName),k=0;try{u.forEach(function(v,c){k++;var b=function(E,x){var R=E||x,O=a[R];if(!O)throw new Error(R+" is not a valid compression method !");return O}(c.options.compression,m.compression),f=c.options.compressionOptions||m.compressionOptions||{},_=c.dir,h=c.date;c._compressWorker(b,f).withStreamInfo("file",{name:v,dir:_,date:h,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(T)}),T.entriesCount=k}catch(v){T.error(v)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,N,p){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new a;for(var u in this)typeof this[u]!="function"&&(l[u]=this[u]);return l}}(a.prototype=o("./object")).loadAsync=o("./load"),a.support=o("./support"),a.defaults=o("./defaults"),a.version="3.10.1",a.loadAsync=function(l,u){return new a().loadAsync(l,u)},a.external=o("./external"),N.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,N,p){var a=o("./utils"),l=o("./external"),u=o("./utf8"),m=o("./zipEntries"),r=o("./stream/Crc32Probe"),T=o("./nodejsUtils");function k(v){return new l.Promise(function(c,b){var f=v.decompressed.getContentWorker().pipe(new r);f.on("error",function(_){b(_)}).on("end",function(){f.streamInfo.crc32!==v.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}N.exports=function(v,c){var b=this;return c=a.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),T.isNode&&T.isStream(v)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",v,!0,c.optimizedBinaryString,c.base64).then(function(f){var _=new m(c);return _.load(f),_}).then(function(f){var _=[l.Promise.resolve(f)],h=f.files;if(c.checkCRC32)for(var E=0;E<h.length;E++)_.push(k(h[E]));return l.Promise.all(_)}).then(function(f){for(var _=f.shift(),h=_.files,E=0;E<h.length;E++){var x=h[E],R=x.fileNameStr,O=a.resolve(x.fileNameStr);b.file(O,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:c.createFolders}),x.dir||(b.file(O).unsafeOriginalName=R)}return _.zipComment.length&&(b.comment=_.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,N,p){var a=o("../utils"),l=o("../stream/GenericWorker");function u(m,r){l.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(r)}a.inherits(u,l),u.prototype._bindStream=function(m){var r=this;(this._stream=m).pause(),m.on("data",function(T){r.push({data:T,meta:{percent:0}})}).on("error",function(T){r.isPaused?this.generatedError=T:r.error(T)}).on("end",function(){r.isPaused?r._upstreamEnded=!0:r.end()})},u.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},N.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,N,p){var a=o("readable-stream").Readable;function l(u,m,r){a.call(this,m),this._helper=u;var T=this;u.on("data",function(k,v){T.push(k)||T._helper.pause(),r&&r(v)}).on("error",function(k){T.emit("error",k)}).on("end",function(){T.push(null)})}o("../utils").inherits(l,a),l.prototype._read=function(){this._helper.resume()},N.exports=l},{"../utils":32,"readable-stream":16}],14:[function(o,N,p){N.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,l);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,l)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var l=new Buffer(a);return l.fill(0),l},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(o,N,p){function a(O,B,C){var j,D=u.getTypeOf(B),W=u.extend(C||{},T);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(O=h(O)),W.createFolders&&(j=_(O))&&E.call(this,j,!0);var J=D==="string"&&W.binary===!1&&W.base64===!1;C&&C.binary!==void 0||(W.binary=!J),(B instanceof k&&B.uncompressedSize===0||W.dir||!B||B.length===0)&&(W.base64=!1,W.binary=!0,B="",W.compression="STORE",D="string");var g=null;g=B instanceof k||B instanceof m?B:b.isNode&&b.isStream(B)?new f(O,B):u.prepareContent(O,B,W.binary,W.optimizedBinaryString,W.base64);var U=new v(O,g,W);this.files[O]=U}var l=o("./utf8"),u=o("./utils"),m=o("./stream/GenericWorker"),r=o("./stream/StreamHelper"),T=o("./defaults"),k=o("./compressedObject"),v=o("./zipObject"),c=o("./generate"),b=o("./nodejsUtils"),f=o("./nodejs/NodejsStreamInputAdapter"),_=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var B=O.lastIndexOf("/");return 0<B?O.substring(0,B):""},h=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},E=function(O,B){return B=B!==void 0?B:T.createFolders,O=h(O),this.files[O]||a.call(this,O,null,{dir:!0,createFolders:B}),this.files[O]};function x(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var B,C,j;for(B in this.files)j=this.files[B],(C=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&O(C,j)},filter:function(O){var B=[];return this.forEach(function(C,j){O(C,j)&&B.push(j)}),B},file:function(O,B,C){if(arguments.length!==1)return O=this.root+O,a.call(this,O,B,C),this;if(x(O)){var j=O;return this.filter(function(W,J){return!J.dir&&j.test(W)})}var D=this.files[this.root+O];return D&&!D.dir?D:null},folder:function(O){if(!O)return this;if(x(O))return this.filter(function(D,W){return W.dir&&O.test(D)});var B=this.root+O,C=E.call(this,B),j=this.clone();return j.root=C.name,j},remove:function(O){O=this.root+O;var B=this.files[O];if(B||(O.slice(-1)!=="/"&&(O+="/"),B=this.files[O]),B&&!B.dir)delete this.files[O];else for(var C=this.filter(function(D,W){return W.name.slice(0,O.length)===O}),j=0;j<C.length;j++)delete this.files[C[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var B,C={};try{if((C=u.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");u.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var j=C.comment||this.comment||"";B=c.generateWorker(this,C,j)}catch(D){(B=new m("error")).error(D)}return new r(B,C.type||"string",C.mimeType)},generateAsync:function(O,B){return this.generateInternalStream(O).accumulate(B)},generateNodeStream:function(O,B){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(B)}};N.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,N,p){N.exports=o("stream")},{stream:void 0}],17:[function(o,N,p){var a=o("./DataReader");function l(u){a.call(this,u);for(var m=0;m<this.data.length;m++)u[m]=255&u[m]}o("../utils").inherits(l,a),l.prototype.byteAt=function(u){return this.data[this.zero+u]},l.prototype.lastIndexOfSignature=function(u){for(var m=u.charCodeAt(0),r=u.charCodeAt(1),T=u.charCodeAt(2),k=u.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===m&&this.data[v+1]===r&&this.data[v+2]===T&&this.data[v+3]===k)return v-this.zero;return-1},l.prototype.readAndCheckSignature=function(u){var m=u.charCodeAt(0),r=u.charCodeAt(1),T=u.charCodeAt(2),k=u.charCodeAt(3),v=this.readData(4);return m===v[0]&&r===v[1]&&T===v[2]&&k===v[3]},l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,m},N.exports=l},{"../utils":32,"./DataReader":18}],18:[function(o,N,p){var a=o("../utils");function l(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var m,r=0;for(this.checkOffset(u),m=this.index+u-1;m>=this.index;m--)r=(r<<8)+this.byteAt(m);return this.index+=u,r},readString:function(u){return a.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},N.exports=l},{"../utils":32}],19:[function(o,N,p){var a=o("./Uint8ArrayReader");function l(u){a.call(this,u)}o("../utils").inherits(l,a),l.prototype.readData=function(u){this.checkOffset(u);var m=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,m},N.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,N,p){var a=o("./DataReader");function l(u){a.call(this,u)}o("../utils").inherits(l,a),l.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},l.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},l.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},l.prototype.readData=function(u){this.checkOffset(u);var m=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,m},N.exports=l},{"../utils":32,"./DataReader":18}],21:[function(o,N,p){var a=o("./ArrayReader");function l(u){a.call(this,u)}o("../utils").inherits(l,a),l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,m},N.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(o,N,p){var a=o("../utils"),l=o("../support"),u=o("./ArrayReader"),m=o("./StringReader"),r=o("./NodeBufferReader"),T=o("./Uint8ArrayReader");N.exports=function(k){var v=a.getTypeOf(k);return a.checkSupport(v),v!=="string"||l.uint8array?v==="nodebuffer"?new r(k):l.uint8array?new T(a.transformTo("uint8array",k)):new u(a.transformTo("array",k)):new m(k)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,N,p){p.LOCAL_FILE_HEADER="PK",p.CENTRAL_FILE_HEADER="PK",p.CENTRAL_DIRECTORY_END="PK",p.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",p.ZIP64_CENTRAL_DIRECTORY_END="PK",p.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,N,p){var a=o("./GenericWorker"),l=o("../utils");function u(m){a.call(this,"ConvertWorker to "+m),this.destType=m}l.inherits(u,a),u.prototype.processChunk=function(m){this.push({data:l.transformTo(this.destType,m.data),meta:m.meta})},N.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(o,N,p){var a=o("./GenericWorker"),l=o("../crc32");function u(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(u,a),u.prototype.processChunk=function(m){this.streamInfo.crc32=l(m.data,this.streamInfo.crc32||0),this.push(m)},N.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,N,p){var a=o("../utils"),l=o("./GenericWorker");function u(m){l.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}a.inherits(u,l),u.prototype.processChunk=function(m){if(m){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+m.data.length}l.prototype.processChunk.call(this,m)},N.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(o,N,p){var a=o("../utils"),l=o("./GenericWorker");function u(m){l.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(T){r.dataIsReady=!0,r.data=T,r.max=T&&T.length||0,r.type=a.getTypeOf(T),r.isPaused||r._tickAndRepeat()},function(T){r.error(T)})}a.inherits(u,l),u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,r=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,r);break;case"uint8array":m=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":m=this.data.slice(this.index,r)}return this.index=r,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},N.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(o,N,p){function a(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,u){return this._listeners[l].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,u){if(this._listeners[l])for(var m=0;m<this._listeners[l].length;m++)this._listeners[l][m].call(this,u)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var u=this;return l.on("data",function(m){u.processChunk(m)}),l.on("end",function(){u.end()}),l.on("error",function(m){u.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,u){return this.extraStreamInfo[l]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},N.exports=a},{}],29:[function(o,N,p){var a=o("../utils"),l=o("./ConvertWorker"),u=o("./GenericWorker"),m=o("../base64"),r=o("../support"),T=o("../external"),k=null;if(r.nodestream)try{k=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(b,f){return new T.Promise(function(_,h){var E=[],x=b._internalType,R=b._outputType,O=b._mimeType;b.on("data",function(B,C){E.push(B),f&&f(C)}).on("error",function(B){E=[],h(B)}).on("end",function(){try{var B=function(C,j,D){switch(C){case"blob":return a.newBlob(a.transformTo("arraybuffer",j),D);case"base64":return m.encode(j);default:return a.transformTo(C,j)}}(R,function(C,j){var D,W=0,J=null,g=0;for(D=0;D<j.length;D++)g+=j[D].length;switch(C){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(J=new Uint8Array(g),D=0;D<j.length;D++)J.set(j[D],W),W+=j[D].length;return J;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+C+"'")}}(x,E),O);_(B)}catch(C){h(C)}E=[]}).resume()})}function c(b,f,_){var h=f;switch(f){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=f,this._mimeType=_,a.checkSupport(h),this._worker=b.pipe(new l(h)),b.lock()}catch(E){this._worker=new u("error"),this._worker.error(E)}}c.prototype={accumulate:function(b){return v(this,b)},on:function(b,f){var _=this;return b==="data"?this._worker.on(b,function(h){f.call(_,h.data,h.meta)}):this._worker.on(b,function(){a.delay(f,arguments,_)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new k(this,{objectMode:this._outputType!=="nodebuffer"},b)}},N.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,N,p){if(p.base64=!0,p.array=!0,p.string=!0,p.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",p.nodebuffer=typeof Buffer<"u",p.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")p.blob=!1;else{var a=new ArrayBuffer(0);try{p.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(a),p.blob=l.getBlob("application/zip").size===0}catch{p.blob=!1}}}try{p.nodestream=!!o("readable-stream").Readable}catch{p.nodestream=!1}},{"readable-stream":16}],31:[function(o,N,p){for(var a=o("./utils"),l=o("./support"),u=o("./nodejsUtils"),m=o("./stream/GenericWorker"),r=new Array(256),T=0;T<256;T++)r[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;r[254]=r[254]=1;function k(){m.call(this,"utf-8 decode"),this.leftOver=null}function v(){m.call(this,"utf-8 encode")}p.utf8encode=function(c){return l.nodebuffer?u.newBufferFrom(c,"utf-8"):function(b){var f,_,h,E,x,R=b.length,O=0;for(E=0;E<R;E++)(64512&(_=b.charCodeAt(E)))==55296&&E+1<R&&(64512&(h=b.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(h-56320),E++),O+=_<128?1:_<2048?2:_<65536?3:4;for(f=l.uint8array?new Uint8Array(O):new Array(O),E=x=0;x<O;E++)(64512&(_=b.charCodeAt(E)))==55296&&E+1<R&&(64512&(h=b.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(h-56320),E++),_<128?f[x++]=_:(_<2048?f[x++]=192|_>>>6:(_<65536?f[x++]=224|_>>>12:(f[x++]=240|_>>>18,f[x++]=128|_>>>12&63),f[x++]=128|_>>>6&63),f[x++]=128|63&_);return f}(c)},p.utf8decode=function(c){return l.nodebuffer?a.transformTo("nodebuffer",c).toString("utf-8"):function(b){var f,_,h,E,x=b.length,R=new Array(2*x);for(f=_=0;f<x;)if((h=b[f++])<128)R[_++]=h;else if(4<(E=r[h]))R[_++]=65533,f+=E-1;else{for(h&=E===2?31:E===3?15:7;1<E&&f<x;)h=h<<6|63&b[f++],E--;1<E?R[_++]=65533:h<65536?R[_++]=h:(h-=65536,R[_++]=55296|h>>10&1023,R[_++]=56320|1023&h)}return R.length!==_&&(R.subarray?R=R.subarray(0,_):R.length=_),a.applyFromCharCode(R)}(c=a.transformTo(l.uint8array?"uint8array":"array",c))},a.inherits(k,m),k.prototype.processChunk=function(c){var b=a.transformTo(l.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var f=b;(b=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),b.set(f,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var _=function(E,x){var R;for((x=x||E.length)>E.length&&(x=E.length),R=x-1;0<=R&&(192&E[R])==128;)R--;return R<0||R===0?x:R+r[E[R]]>x?R:x}(b),h=b;_!==b.length&&(l.uint8array?(h=b.subarray(0,_),this.leftOver=b.subarray(_,b.length)):(h=b.slice(0,_),this.leftOver=b.slice(_,b.length))),this.push({data:p.utf8decode(h),meta:c.meta})},k.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:p.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},p.Utf8DecodeWorker=k,a.inherits(v,m),v.prototype.processChunk=function(c){this.push({data:p.utf8encode(c.data),meta:c.meta})},p.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,N,p){var a=o("./support"),l=o("./base64"),u=o("./nodejsUtils"),m=o("./external");function r(f){return f}function T(f,_){for(var h=0;h<f.length;++h)_[h]=255&f.charCodeAt(h);return _}o("setimmediate"),p.newBlob=function(f,_){p.checkSupport("blob");try{return new Blob([f],{type:_})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(f),h.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var k={stringifyByChunk:function(f,_,h){var E=[],x=0,R=f.length;if(R<=h)return String.fromCharCode.apply(null,f);for(;x<R;)_==="array"||_==="nodebuffer"?E.push(String.fromCharCode.apply(null,f.slice(x,Math.min(x+h,R)))):E.push(String.fromCharCode.apply(null,f.subarray(x,Math.min(x+h,R)))),x+=h;return E.join("")},stringifyByChar:function(f){for(var _="",h=0;h<f.length;h++)_+=String.fromCharCode(f[h]);return _},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}}()}};function v(f){var _=65536,h=p.getTypeOf(f),E=!0;if(h==="uint8array"?E=k.applyCanBeUsed.uint8array:h==="nodebuffer"&&(E=k.applyCanBeUsed.nodebuffer),E)for(;1<_;)try{return k.stringifyByChunk(f,h,_)}catch{_=Math.floor(_/2)}return k.stringifyByChar(f)}function c(f,_){for(var h=0;h<f.length;h++)_[h]=f[h];return _}p.applyFromCharCode=v;var b={};b.string={string:r,array:function(f){return T(f,new Array(f.length))},arraybuffer:function(f){return b.string.uint8array(f).buffer},uint8array:function(f){return T(f,new Uint8Array(f.length))},nodebuffer:function(f){return T(f,u.allocBuffer(f.length))}},b.array={string:v,array:r,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return u.newBufferFrom(f)}},b.arraybuffer={string:function(f){return v(new Uint8Array(f))},array:function(f){return c(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:r,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return u.newBufferFrom(new Uint8Array(f))}},b.uint8array={string:v,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:r,nodebuffer:function(f){return u.newBufferFrom(f)}},b.nodebuffer={string:v,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return b.nodebuffer.uint8array(f).buffer},uint8array:function(f){return c(f,new Uint8Array(f.length))},nodebuffer:r},p.transformTo=function(f,_){if(_=_||"",!f)return _;p.checkSupport(f);var h=p.getTypeOf(_);return b[h][f](_)},p.resolve=function(f){for(var _=f.split("/"),h=[],E=0;E<_.length;E++){var x=_[E];x==="."||x===""&&E!==0&&E!==_.length-1||(x===".."?h.pop():h.push(x))}return h.join("/")},p.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":a.nodebuffer&&u.isBuffer(f)?"nodebuffer":a.uint8array&&f instanceof Uint8Array?"uint8array":a.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},p.checkSupport=function(f){if(!a[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},p.MAX_VALUE_16BITS=65535,p.MAX_VALUE_32BITS=-1,p.pretty=function(f){var _,h,E="";for(h=0;h<(f||"").length;h++)E+="\\x"+((_=f.charCodeAt(h))<16?"0":"")+_.toString(16).toUpperCase();return E},p.delay=function(f,_,h){setImmediate(function(){f.apply(h||null,_||[])})},p.inherits=function(f,_){function h(){}h.prototype=_.prototype,f.prototype=new h},p.extend=function(){var f,_,h={};for(f=0;f<arguments.length;f++)for(_ in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],_)&&h[_]===void 0&&(h[_]=arguments[f][_]);return h},p.prepareContent=function(f,_,h,E,x){return m.Promise.resolve(_).then(function(R){return a.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new m.Promise(function(O,B){var C=new FileReader;C.onload=function(j){O(j.target.result)},C.onerror=function(j){B(j.target.error)},C.readAsArrayBuffer(R)}):R}).then(function(R){var O=p.getTypeOf(R);return O?(O==="arraybuffer"?R=p.transformTo("uint8array",R):O==="string"&&(x?R=l.decode(R):h&&E!==!0&&(R=function(B){return T(B,a.uint8array?new Uint8Array(B.length):new Array(B.length))}(R))),R):m.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,N,p){var a=o("./reader/readerFor"),l=o("./utils"),u=o("./signature"),m=o("./zipEntry"),r=o("./support");function T(k){this.files=[],this.loadOptions=k}T.prototype={checkSignature:function(k){if(!this.reader.readAndCheckSignature(k)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(v)+", expected "+l.pretty(k)+")")}},isSignature:function(k,v){var c=this.reader.index;this.reader.setIndex(k);var b=this.reader.readString(4)===v;return this.reader.setIndex(c),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var k=this.reader.readData(this.zipCommentLength),v=r.uint8array?"uint8array":"array",c=l.transformTo(v,k);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var k,v,c,b=this.zip64EndOfCentralSize-44;0<b;)k=this.reader.readInt(2),v=this.reader.readInt(4),c=this.reader.readData(v),this.zip64ExtensibleData[k]={id:k,length:v,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var k,v;for(k=0;k<this.files.length;k++)v=this.files[k],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var k;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(k=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(k);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var k=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(k<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(k);var v=k;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(k=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(k),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var b=v-c;if(0<b)this.isSignature(v,u.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(k){this.reader=a(k)},load:function(k){this.prepareReader(k),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},N.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,N,p){var a=o("./reader/readerFor"),l=o("./utils"),u=o("./compressedObject"),m=o("./crc32"),r=o("./utf8"),T=o("./compressions"),k=o("./support");function v(c,b){this.options=c,this.loadOptions=b}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var b,f;if(c.skip(22),this.fileNameLength=c.readInt(2),f=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(_){for(var h in T)if(Object.prototype.hasOwnProperty.call(T,h)&&T[h].magic===_)return T[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,b,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var b=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(b),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=a(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var b,f,_,h=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<h;)b=c.readInt(2),f=c.readInt(2),_=c.readData(f),this.extraFields[b]={id:b,length:f,value:_};c.setIndex(h)},handleUTF8:function(){var c=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=r.utf8decode(this.fileName),this.fileCommentStr=r.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var f=l.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var h=l.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var b=a(c.value);return b.readInt(1)!==1||m(this.fileName)!==b.readInt(4)?null:r.utf8decode(b.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var b=a(c.value);return b.readInt(1)!==1||m(this.fileComment)!==b.readInt(4)?null:r.utf8decode(b.readData(c.length-5))}return null}},N.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,N,p){function a(b,f,_){this.name=b,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=f,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var l=o("./stream/StreamHelper"),u=o("./stream/DataWorker"),m=o("./utf8"),r=o("./compressedObject"),T=o("./stream/GenericWorker");a.prototype={internalStream:function(b){var f=null,_="string";try{if(!b)throw new Error("No output type specified.");var h=(_=b.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),f=this._decompressWorker();var E=!this._dataBinary;E&&!h&&(f=f.pipe(new m.Utf8EncodeWorker)),!E&&h&&(f=f.pipe(new m.Utf8DecodeWorker))}catch(x){(f=new T("error")).error(x)}return new l(f,_,"")},async:function(b,f){return this.internalStream(b).accumulate(f)},nodeStream:function(b,f){return this.internalStream(b||"nodebuffer").toNodejsStream(f)},_compressWorker:function(b,f){if(this._data instanceof r&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new m.Utf8EncodeWorker)),r.createWorkerFrom(_,b,f)},_decompressWorker:function(){return this._data instanceof r?this._data.getContentWorker():this._data instanceof T?this._data:new u(this._data)}};for(var k=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<k.length;c++)a.prototype[k[c]]=v;N.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,N,p){(function(a){var l,u,m=a.MutationObserver||a.WebKitMutationObserver;if(m){var r=0,T=new m(b),k=a.document.createTextNode("");T.observe(k,{characterData:!0}),l=function(){k.data=r=++r%2}}else if(a.setImmediate||a.MessageChannel===void 0)l="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var f=a.document.createElement("script");f.onreadystatechange=function(){b(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},a.document.documentElement.appendChild(f)}:function(){setTimeout(b,0)};else{var v=new a.MessageChannel;v.port1.onmessage=b,l=function(){v.port2.postMessage(0)}}var c=[];function b(){var f,_;u=!0;for(var h=c.length;h;){for(_=c,c=[],f=-1;++f<h;)_[f]();h=c.length}u=!1}N.exports=function(f){c.push(f)!==1||u||l()}}).call(this,typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,N,p){var a=o("immediate");function l(){}var u={},m=["REJECTED"],r=["FULFILLED"],T=["PENDING"];function k(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,h!==l&&f(this,h)}function v(h,E,x){this.promise=h,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function c(h,E,x){a(function(){var R;try{R=E(x)}catch(O){return u.reject(h,O)}R===h?u.reject(h,new TypeError("Cannot resolve promise with itself")):u.resolve(h,R)})}function b(h){var E=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof E=="function")return function(){E.apply(h,arguments)}}function f(h,E){var x=!1;function R(C){x||(x=!0,u.reject(h,C))}function O(C){x||(x=!0,u.resolve(h,C))}var B=_(function(){E(O,R)});B.status==="error"&&R(B.value)}function _(h,E){var x={};try{x.value=h(E),x.status="success"}catch(R){x.status="error",x.value=R}return x}(N.exports=k).prototype.finally=function(h){if(typeof h!="function")return this;var E=this.constructor;return this.then(function(x){return E.resolve(h()).then(function(){return x})},function(x){return E.resolve(h()).then(function(){throw x})})},k.prototype.catch=function(h){return this.then(null,h)},k.prototype.then=function(h,E){if(typeof h!="function"&&this.state===r||typeof E!="function"&&this.state===m)return this;var x=new this.constructor(l);return this.state!==T?c(x,this.state===r?h:E,this.outcome):this.queue.push(new v(x,h,E)),x},v.prototype.callFulfilled=function(h){u.resolve(this.promise,h)},v.prototype.otherCallFulfilled=function(h){c(this.promise,this.onFulfilled,h)},v.prototype.callRejected=function(h){u.reject(this.promise,h)},v.prototype.otherCallRejected=function(h){c(this.promise,this.onRejected,h)},u.resolve=function(h,E){var x=_(b,E);if(x.status==="error")return u.reject(h,x.value);var R=x.value;if(R)f(h,R);else{h.state=r,h.outcome=E;for(var O=-1,B=h.queue.length;++O<B;)h.queue[O].callFulfilled(E)}return h},u.reject=function(h,E){h.state=m,h.outcome=E;for(var x=-1,R=h.queue.length;++x<R;)h.queue[x].callRejected(E);return h},k.resolve=function(h){return h instanceof this?h:u.resolve(new this(l),h)},k.reject=function(h){var E=new this(l);return u.reject(E,h)},k.all=function(h){var E=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=h.length,R=!1;if(!x)return this.resolve([]);for(var O=new Array(x),B=0,C=-1,j=new this(l);++C<x;)D(h[C],C);return j;function D(W,J){E.resolve(W).then(function(g){O[J]=g,++B!==x||R||(R=!0,u.resolve(j,O))},function(g){R||(R=!0,u.reject(j,g))})}},k.race=function(h){var E=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=h.length,R=!1;if(!x)return this.resolve([]);for(var O=-1,B=new this(l);++O<x;)C=h[O],E.resolve(C).then(function(j){R||(R=!0,u.resolve(B,j))},function(j){R||(R=!0,u.reject(B,j))});var C;return B}},{immediate:36}],38:[function(o,N,p){var a={};(0,o("./lib/utils/common").assign)(a,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),N.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,N,p){var a=o("./zlib/deflate"),l=o("./utils/common"),u=o("./utils/strings"),m=o("./zlib/messages"),r=o("./zlib/zstream"),T=Object.prototype.toString,k=0,v=-1,c=0,b=8;function f(h){if(!(this instanceof f))return new f(h);this.options=l.assign({level:v,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},h||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var x=a.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(x!==k)throw new Error(m[x]);if(E.header&&a.deflateSetHeader(this.strm,E.header),E.dictionary){var R;if(R=typeof E.dictionary=="string"?u.string2buf(E.dictionary):T.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(x=a.deflateSetDictionary(this.strm,R))!==k)throw new Error(m[x]);this._dict_set=!0}}function _(h,E){var x=new f(E);if(x.push(h,!0),x.err)throw x.msg||m[x.err];return x.result}f.prototype.push=function(h,E){var x,R,O=this.strm,B=this.options.chunkSize;if(this.ended)return!1;R=E===~~E?E:E===!0?4:0,typeof h=="string"?O.input=u.string2buf(h):T.call(h)==="[object ArrayBuffer]"?O.input=new Uint8Array(h):O.input=h,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new l.Buf8(B),O.next_out=0,O.avail_out=B),(x=a.deflate(O,R))!==1&&x!==k)return this.onEnd(x),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(l.shrinkBuf(O.output,O.next_out))):this.onData(l.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&x!==1);return R===4?(x=a.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===k):R!==2||(this.onEnd(k),!(O.avail_out=0))},f.prototype.onData=function(h){this.chunks.push(h)},f.prototype.onEnd=function(h){h===k&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},p.Deflate=f,p.deflate=_,p.deflateRaw=function(h,E){return(E=E||{}).raw=!0,_(h,E)},p.gzip=function(h,E){return(E=E||{}).gzip=!0,_(h,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,N,p){var a=o("./zlib/inflate"),l=o("./utils/common"),u=o("./utils/strings"),m=o("./zlib/constants"),r=o("./zlib/messages"),T=o("./zlib/zstream"),k=o("./zlib/gzheader"),v=Object.prototype.toString;function c(f){if(!(this instanceof c))return new c(f);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},f||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||f&&f.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var h=a.inflateInit2(this.strm,_.windowBits);if(h!==m.Z_OK)throw new Error(r[h]);this.header=new k,a.inflateGetHeader(this.strm,this.header)}function b(f,_){var h=new c(_);if(h.push(f,!0),h.err)throw h.msg||r[h.err];return h.result}c.prototype.push=function(f,_){var h,E,x,R,O,B,C=this.strm,j=this.options.chunkSize,D=this.options.dictionary,W=!1;if(this.ended)return!1;E=_===~~_?_:_===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof f=="string"?C.input=u.binstring2buf(f):v.call(f)==="[object ArrayBuffer]"?C.input=new Uint8Array(f):C.input=f,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new l.Buf8(j),C.next_out=0,C.avail_out=j),(h=a.inflate(C,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&D&&(B=typeof D=="string"?u.string2buf(D):v.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,h=a.inflateSetDictionary(this.strm,B)),h===m.Z_BUF_ERROR&&W===!0&&(h=m.Z_OK,W=!1),h!==m.Z_STREAM_END&&h!==m.Z_OK)return this.onEnd(h),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&h!==m.Z_STREAM_END&&(C.avail_in!==0||E!==m.Z_FINISH&&E!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=u.utf8border(C.output,C.next_out),R=C.next_out-x,O=u.buf2string(C.output,x),C.next_out=R,C.avail_out=j-R,R&&l.arraySet(C.output,C.output,x,R,0),this.onData(O)):this.onData(l.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(W=!0)}while((0<C.avail_in||C.avail_out===0)&&h!==m.Z_STREAM_END);return h===m.Z_STREAM_END&&(E=m.Z_FINISH),E===m.Z_FINISH?(h=a.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===m.Z_OK):E!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(C.avail_out=0))},c.prototype.onData=function(f){this.chunks.push(f)},c.prototype.onEnd=function(f){f===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},p.Inflate=c,p.inflate=b,p.inflateRaw=function(f,_){return(_=_||{}).raw=!0,b(f,_)},p.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,N,p){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";p.assign=function(m){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var T=r.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var k in T)T.hasOwnProperty(k)&&(m[k]=T[k])}}return m},p.shrinkBuf=function(m,r){return m.length===r?m:m.subarray?m.subarray(0,r):(m.length=r,m)};var l={arraySet:function(m,r,T,k,v){if(r.subarray&&m.subarray)m.set(r.subarray(T,T+k),v);else for(var c=0;c<k;c++)m[v+c]=r[T+c]},flattenChunks:function(m){var r,T,k,v,c,b;for(r=k=0,T=m.length;r<T;r++)k+=m[r].length;for(b=new Uint8Array(k),r=v=0,T=m.length;r<T;r++)c=m[r],b.set(c,v),v+=c.length;return b}},u={arraySet:function(m,r,T,k,v){for(var c=0;c<k;c++)m[v+c]=r[T+c]},flattenChunks:function(m){return[].concat.apply([],m)}};p.setTyped=function(m){m?(p.Buf8=Uint8Array,p.Buf16=Uint16Array,p.Buf32=Int32Array,p.assign(p,l)):(p.Buf8=Array,p.Buf16=Array,p.Buf32=Array,p.assign(p,u))},p.setTyped(a)},{}],42:[function(o,N,p){var a=o("./common"),l=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var m=new a.Buf8(256),r=0;r<256;r++)m[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function T(k,v){if(v<65537&&(k.subarray&&u||!k.subarray&&l))return String.fromCharCode.apply(null,a.shrinkBuf(k,v));for(var c="",b=0;b<v;b++)c+=String.fromCharCode(k[b]);return c}m[254]=m[254]=1,p.string2buf=function(k){var v,c,b,f,_,h=k.length,E=0;for(f=0;f<h;f++)(64512&(c=k.charCodeAt(f)))==55296&&f+1<h&&(64512&(b=k.charCodeAt(f+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),f++),E+=c<128?1:c<2048?2:c<65536?3:4;for(v=new a.Buf8(E),f=_=0;_<E;f++)(64512&(c=k.charCodeAt(f)))==55296&&f+1<h&&(64512&(b=k.charCodeAt(f+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),f++),c<128?v[_++]=c:(c<2048?v[_++]=192|c>>>6:(c<65536?v[_++]=224|c>>>12:(v[_++]=240|c>>>18,v[_++]=128|c>>>12&63),v[_++]=128|c>>>6&63),v[_++]=128|63&c);return v},p.buf2binstring=function(k){return T(k,k.length)},p.binstring2buf=function(k){for(var v=new a.Buf8(k.length),c=0,b=v.length;c<b;c++)v[c]=k.charCodeAt(c);return v},p.buf2string=function(k,v){var c,b,f,_,h=v||k.length,E=new Array(2*h);for(c=b=0;c<h;)if((f=k[c++])<128)E[b++]=f;else if(4<(_=m[f]))E[b++]=65533,c+=_-1;else{for(f&=_===2?31:_===3?15:7;1<_&&c<h;)f=f<<6|63&k[c++],_--;1<_?E[b++]=65533:f<65536?E[b++]=f:(f-=65536,E[b++]=55296|f>>10&1023,E[b++]=56320|1023&f)}return T(E,b)},p.utf8border=function(k,v){var c;for((v=v||k.length)>k.length&&(v=k.length),c=v-1;0<=c&&(192&k[c])==128;)c--;return c<0||c===0?v:c+m[k[c]]>v?c:v}},{"./common":41}],43:[function(o,N,p){N.exports=function(a,l,u,m){for(var r=65535&a|0,T=a>>>16&65535|0,k=0;u!==0;){for(u-=k=2e3<u?2e3:u;T=T+(r=r+l[m++]|0)|0,--k;);r%=65521,T%=65521}return r|T<<16|0}},{}],44:[function(o,N,p){N.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,N,p){var a=function(){for(var l,u=[],m=0;m<256;m++){l=m;for(var r=0;r<8;r++)l=1&l?3988292384^l>>>1:l>>>1;u[m]=l}return u}();N.exports=function(l,u,m,r){var T=a,k=r+m;l^=-1;for(var v=r;v<k;v++)l=l>>>8^T[255&(l^u[v])];return-1^l}},{}],46:[function(o,N,p){var a,l=o("../utils/common"),u=o("./trees"),m=o("./adler32"),r=o("./crc32"),T=o("./messages"),k=0,v=4,c=0,b=-2,f=-1,_=4,h=2,E=8,x=9,R=286,O=30,B=19,C=2*R+1,j=15,D=3,W=258,J=W+D+1,g=42,U=113,s=1,G=2,lt=3,X=4;function pt(n,Y){return n.msg=T[Y],Y}function tt(n){return(n<<1)-(4<n?9:0)}function ot(n){for(var Y=n.length;0<=--Y;)n[Y]=0}function F(n){var Y=n.state,q=Y.pending;q>n.avail_out&&(q=n.avail_out),q!==0&&(l.arraySet(n.output,Y.pending_buf,Y.pending_out,q,n.next_out),n.next_out+=q,Y.pending_out+=q,n.total_out+=q,n.avail_out-=q,Y.pending-=q,Y.pending===0&&(Y.pending_out=0))}function P(n,Y){u._tr_flush_block(n,0<=n.block_start?n.block_start:-1,n.strstart-n.block_start,Y),n.block_start=n.strstart,F(n.strm)}function ut(n,Y){n.pending_buf[n.pending++]=Y}function it(n,Y){n.pending_buf[n.pending++]=Y>>>8&255,n.pending_buf[n.pending++]=255&Y}function et(n,Y){var q,S,y=n.max_chain_length,L=n.strstart,K=n.prev_length,Q=n.nice_match,$=n.strstart>n.w_size-J?n.strstart-(n.w_size-J):0,rt=n.window,at=n.w_mask,nt=n.prev,dt=n.strstart+W,Et=rt[L+K-1],wt=rt[L+K];n.prev_length>=n.good_match&&(y>>=2),Q>n.lookahead&&(Q=n.lookahead);do if(rt[(q=Y)+K]===wt&&rt[q+K-1]===Et&&rt[q]===rt[L]&&rt[++q]===rt[L+1]){L+=2,q++;do;while(rt[++L]===rt[++q]&&rt[++L]===rt[++q]&&rt[++L]===rt[++q]&&rt[++L]===rt[++q]&&rt[++L]===rt[++q]&&rt[++L]===rt[++q]&&rt[++L]===rt[++q]&&rt[++L]===rt[++q]&&L<dt);if(S=W-(dt-L),L=dt-W,K<S){if(n.match_start=Y,Q<=(K=S))break;Et=rt[L+K-1],wt=rt[L+K]}}while((Y=nt[Y&at])>$&&--y!=0);return K<=n.lookahead?K:n.lookahead}function Tt(n){var Y,q,S,y,L,K,Q,$,rt,at,nt=n.w_size;do{if(y=n.window_size-n.lookahead-n.strstart,n.strstart>=nt+(nt-J)){for(l.arraySet(n.window,n.window,nt,nt,0),n.match_start-=nt,n.strstart-=nt,n.block_start-=nt,Y=q=n.hash_size;S=n.head[--Y],n.head[Y]=nt<=S?S-nt:0,--q;);for(Y=q=nt;S=n.prev[--Y],n.prev[Y]=nt<=S?S-nt:0,--q;);y+=nt}if(n.strm.avail_in===0)break;if(K=n.strm,Q=n.window,$=n.strstart+n.lookahead,rt=y,at=void 0,at=K.avail_in,rt<at&&(at=rt),q=at===0?0:(K.avail_in-=at,l.arraySet(Q,K.input,K.next_in,at,$),K.state.wrap===1?K.adler=m(K.adler,Q,at,$):K.state.wrap===2&&(K.adler=r(K.adler,Q,at,$)),K.next_in+=at,K.total_in+=at,at),n.lookahead+=q,n.lookahead+n.insert>=D)for(L=n.strstart-n.insert,n.ins_h=n.window[L],n.ins_h=(n.ins_h<<n.hash_shift^n.window[L+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[L+D-1])&n.hash_mask,n.prev[L&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=L,L++,n.insert--,!(n.lookahead+n.insert<D)););}while(n.lookahead<J&&n.strm.avail_in!==0)}function Nt(n,Y){for(var q,S;;){if(n.lookahead<J){if(Tt(n),n.lookahead<J&&Y===k)return s;if(n.lookahead===0)break}if(q=0,n.lookahead>=D&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+D-1])&n.hash_mask,q=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),q!==0&&n.strstart-q<=n.w_size-J&&(n.match_length=et(n,q)),n.match_length>=D)if(S=u._tr_tally(n,n.strstart-n.match_start,n.match_length-D),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=D){for(n.match_length--;n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+D-1])&n.hash_mask,q=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart,--n.match_length!=0;);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else S=u._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(S&&(P(n,!1),n.strm.avail_out===0))return s}return n.insert=n.strstart<D-1?n.strstart:D-1,Y===v?(P(n,!0),n.strm.avail_out===0?lt:X):n.last_lit&&(P(n,!1),n.strm.avail_out===0)?s:G}function bt(n,Y){for(var q,S,y;;){if(n.lookahead<J){if(Tt(n),n.lookahead<J&&Y===k)return s;if(n.lookahead===0)break}if(q=0,n.lookahead>=D&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+D-1])&n.hash_mask,q=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=D-1,q!==0&&n.prev_length<n.max_lazy_match&&n.strstart-q<=n.w_size-J&&(n.match_length=et(n,q),n.match_length<=5&&(n.strategy===1||n.match_length===D&&4096<n.strstart-n.match_start)&&(n.match_length=D-1)),n.prev_length>=D&&n.match_length<=n.prev_length){for(y=n.strstart+n.lookahead-D,S=u._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-D),n.lookahead-=n.prev_length-1,n.prev_length-=2;++n.strstart<=y&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+D-1])&n.hash_mask,q=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),--n.prev_length!=0;);if(n.match_available=0,n.match_length=D-1,n.strstart++,S&&(P(n,!1),n.strm.avail_out===0))return s}else if(n.match_available){if((S=u._tr_tally(n,0,n.window[n.strstart-1]))&&P(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return s}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(S=u._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<D-1?n.strstart:D-1,Y===v?(P(n,!0),n.strm.avail_out===0?lt:X):n.last_lit&&(P(n,!1),n.strm.avail_out===0)?s:G}function kt(n,Y,q,S,y){this.good_length=n,this.max_lazy=Y,this.nice_length=q,this.max_chain=S,this.func=y}function It(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*C),this.dyn_dtree=new l.Buf16(2*(2*O+1)),this.bl_tree=new l.Buf16(2*(2*B+1)),ot(this.dyn_ltree),ot(this.dyn_dtree),ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(j+1),this.heap=new l.Buf16(2*R+1),ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*R+1),ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Rt(n){var Y;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=h,(Y=n.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?g:U,n.adler=Y.wrap===2?0:1,Y.last_flush=k,u._tr_init(Y),c):pt(n,b)}function Ct(n){var Y=Rt(n);return Y===c&&function(q){q.window_size=2*q.w_size,ot(q.head),q.max_lazy_match=a[q.level].max_lazy,q.good_match=a[q.level].good_length,q.nice_match=a[q.level].nice_length,q.max_chain_length=a[q.level].max_chain,q.strstart=0,q.block_start=0,q.lookahead=0,q.insert=0,q.match_length=q.prev_length=D-1,q.match_available=0,q.ins_h=0}(n.state),Y}function Dt(n,Y,q,S,y,L){if(!n)return b;var K=1;if(Y===f&&(Y=6),S<0?(K=0,S=-S):15<S&&(K=2,S-=16),y<1||x<y||q!==E||S<8||15<S||Y<0||9<Y||L<0||_<L)return pt(n,b);S===8&&(S=9);var Q=new It;return(n.state=Q).strm=n,Q.wrap=K,Q.gzhead=null,Q.w_bits=S,Q.w_size=1<<Q.w_bits,Q.w_mask=Q.w_size-1,Q.hash_bits=y+7,Q.hash_size=1<<Q.hash_bits,Q.hash_mask=Q.hash_size-1,Q.hash_shift=~~((Q.hash_bits+D-1)/D),Q.window=new l.Buf8(2*Q.w_size),Q.head=new l.Buf16(Q.hash_size),Q.prev=new l.Buf16(Q.w_size),Q.lit_bufsize=1<<y+6,Q.pending_buf_size=4*Q.lit_bufsize,Q.pending_buf=new l.Buf8(Q.pending_buf_size),Q.d_buf=1*Q.lit_bufsize,Q.l_buf=3*Q.lit_bufsize,Q.level=Y,Q.strategy=L,Q.method=q,Ct(n)}a=[new kt(0,0,0,0,function(n,Y){var q=65535;for(q>n.pending_buf_size-5&&(q=n.pending_buf_size-5);;){if(n.lookahead<=1){if(Tt(n),n.lookahead===0&&Y===k)return s;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var S=n.block_start+q;if((n.strstart===0||n.strstart>=S)&&(n.lookahead=n.strstart-S,n.strstart=S,P(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-J&&(P(n,!1),n.strm.avail_out===0))return s}return n.insert=0,Y===v?(P(n,!0),n.strm.avail_out===0?lt:X):(n.strstart>n.block_start&&(P(n,!1),n.strm.avail_out),s)}),new kt(4,4,8,4,Nt),new kt(4,5,16,8,Nt),new kt(4,6,32,32,Nt),new kt(4,4,16,16,bt),new kt(8,16,32,32,bt),new kt(8,16,128,128,bt),new kt(8,32,128,256,bt),new kt(32,128,258,1024,bt),new kt(32,258,258,4096,bt)],p.deflateInit=function(n,Y){return Dt(n,Y,E,15,8,0)},p.deflateInit2=Dt,p.deflateReset=Ct,p.deflateResetKeep=Rt,p.deflateSetHeader=function(n,Y){return n&&n.state?n.state.wrap!==2?b:(n.state.gzhead=Y,c):b},p.deflate=function(n,Y){var q,S,y,L;if(!n||!n.state||5<Y||Y<0)return n?pt(n,b):b;if(S=n.state,!n.output||!n.input&&n.avail_in!==0||S.status===666&&Y!==v)return pt(n,n.avail_out===0?-5:b);if(S.strm=n,q=S.last_flush,S.last_flush=Y,S.status===g)if(S.wrap===2)n.adler=0,ut(S,31),ut(S,139),ut(S,8),S.gzhead?(ut(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),ut(S,255&S.gzhead.time),ut(S,S.gzhead.time>>8&255),ut(S,S.gzhead.time>>16&255),ut(S,S.gzhead.time>>24&255),ut(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),ut(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(ut(S,255&S.gzhead.extra.length),ut(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(n.adler=r(n.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(ut(S,0),ut(S,0),ut(S,0),ut(S,0),ut(S,0),ut(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),ut(S,3),S.status=U);else{var K=E+(S.w_bits-8<<4)<<8;K|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&(K|=32),K+=31-K%31,S.status=U,it(S,K),S.strstart!==0&&(it(S,n.adler>>>16),it(S,65535&n.adler)),n.adler=1}if(S.status===69)if(S.gzhead.extra){for(y=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>y&&(n.adler=r(n.adler,S.pending_buf,S.pending-y,y)),F(n),y=S.pending,S.pending!==S.pending_buf_size));)ut(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>y&&(n.adler=r(n.adler,S.pending_buf,S.pending-y,y)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){y=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>y&&(n.adler=r(n.adler,S.pending_buf,S.pending-y,y)),F(n),y=S.pending,S.pending===S.pending_buf_size)){L=1;break}L=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,ut(S,L)}while(L!==0);S.gzhead.hcrc&&S.pending>y&&(n.adler=r(n.adler,S.pending_buf,S.pending-y,y)),L===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){y=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>y&&(n.adler=r(n.adler,S.pending_buf,S.pending-y,y)),F(n),y=S.pending,S.pending===S.pending_buf_size)){L=1;break}L=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,ut(S,L)}while(L!==0);S.gzhead.hcrc&&S.pending>y&&(n.adler=r(n.adler,S.pending_buf,S.pending-y,y)),L===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&F(n),S.pending+2<=S.pending_buf_size&&(ut(S,255&n.adler),ut(S,n.adler>>8&255),n.adler=0,S.status=U)):S.status=U),S.pending!==0){if(F(n),n.avail_out===0)return S.last_flush=-1,c}else if(n.avail_in===0&&tt(Y)<=tt(q)&&Y!==v)return pt(n,-5);if(S.status===666&&n.avail_in!==0)return pt(n,-5);if(n.avail_in!==0||S.lookahead!==0||Y!==k&&S.status!==666){var Q=S.strategy===2?function($,rt){for(var at;;){if($.lookahead===0&&(Tt($),$.lookahead===0)){if(rt===k)return s;break}if($.match_length=0,at=u._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,at&&(P($,!1),$.strm.avail_out===0))return s}return $.insert=0,rt===v?(P($,!0),$.strm.avail_out===0?lt:X):$.last_lit&&(P($,!1),$.strm.avail_out===0)?s:G}(S,Y):S.strategy===3?function($,rt){for(var at,nt,dt,Et,wt=$.window;;){if($.lookahead<=W){if(Tt($),$.lookahead<=W&&rt===k)return s;if($.lookahead===0)break}if($.match_length=0,$.lookahead>=D&&0<$.strstart&&(nt=wt[dt=$.strstart-1])===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]){Et=$.strstart+W;do;while(nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&dt<Et);$.match_length=W-(Et-dt),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=D?(at=u._tr_tally($,1,$.match_length-D),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(at=u._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),at&&(P($,!1),$.strm.avail_out===0))return s}return $.insert=0,rt===v?(P($,!0),$.strm.avail_out===0?lt:X):$.last_lit&&(P($,!1),$.strm.avail_out===0)?s:G}(S,Y):a[S.level].func(S,Y);if(Q!==lt&&Q!==X||(S.status=666),Q===s||Q===lt)return n.avail_out===0&&(S.last_flush=-1),c;if(Q===G&&(Y===1?u._tr_align(S):Y!==5&&(u._tr_stored_block(S,0,0,!1),Y===3&&(ot(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),F(n),n.avail_out===0))return S.last_flush=-1,c}return Y!==v?c:S.wrap<=0?1:(S.wrap===2?(ut(S,255&n.adler),ut(S,n.adler>>8&255),ut(S,n.adler>>16&255),ut(S,n.adler>>24&255),ut(S,255&n.total_in),ut(S,n.total_in>>8&255),ut(S,n.total_in>>16&255),ut(S,n.total_in>>24&255)):(it(S,n.adler>>>16),it(S,65535&n.adler)),F(n),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?c:1)},p.deflateEnd=function(n){var Y;return n&&n.state?(Y=n.state.status)!==g&&Y!==69&&Y!==73&&Y!==91&&Y!==103&&Y!==U&&Y!==666?pt(n,b):(n.state=null,Y===U?pt(n,-3):c):b},p.deflateSetDictionary=function(n,Y){var q,S,y,L,K,Q,$,rt,at=Y.length;if(!n||!n.state||(L=(q=n.state).wrap)===2||L===1&&q.status!==g||q.lookahead)return b;for(L===1&&(n.adler=m(n.adler,Y,at,0)),q.wrap=0,at>=q.w_size&&(L===0&&(ot(q.head),q.strstart=0,q.block_start=0,q.insert=0),rt=new l.Buf8(q.w_size),l.arraySet(rt,Y,at-q.w_size,q.w_size,0),Y=rt,at=q.w_size),K=n.avail_in,Q=n.next_in,$=n.input,n.avail_in=at,n.next_in=0,n.input=Y,Tt(q);q.lookahead>=D;){for(S=q.strstart,y=q.lookahead-(D-1);q.ins_h=(q.ins_h<<q.hash_shift^q.window[S+D-1])&q.hash_mask,q.prev[S&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=S,S++,--y;);q.strstart=S,q.lookahead=D-1,Tt(q)}return q.strstart+=q.lookahead,q.block_start=q.strstart,q.insert=q.lookahead,q.lookahead=0,q.match_length=q.prev_length=D-1,q.match_available=0,n.next_in=Q,n.input=$,n.avail_in=K,q.wrap=L,c},p.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,N,p){N.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,N,p){N.exports=function(a,l){var u,m,r,T,k,v,c,b,f,_,h,E,x,R,O,B,C,j,D,W,J,g,U,s,G;u=a.state,m=a.next_in,s=a.input,r=m+(a.avail_in-5),T=a.next_out,G=a.output,k=T-(l-a.avail_out),v=T+(a.avail_out-257),c=u.dmax,b=u.wsize,f=u.whave,_=u.wnext,h=u.window,E=u.hold,x=u.bits,R=u.lencode,O=u.distcode,B=(1<<u.lenbits)-1,C=(1<<u.distbits)-1;t:do{x<15&&(E+=s[m++]<<x,x+=8,E+=s[m++]<<x,x+=8),j=R[E&B];e:for(;;){if(E>>>=D=j>>>24,x-=D,(D=j>>>16&255)===0)G[T++]=65535&j;else{if(!(16&D)){if(!(64&D)){j=R[(65535&j)+(E&(1<<D)-1)];continue e}if(32&D){u.mode=12;break t}a.msg="invalid literal/length code",u.mode=30;break t}W=65535&j,(D&=15)&&(x<D&&(E+=s[m++]<<x,x+=8),W+=E&(1<<D)-1,E>>>=D,x-=D),x<15&&(E+=s[m++]<<x,x+=8,E+=s[m++]<<x,x+=8),j=O[E&C];r:for(;;){if(E>>>=D=j>>>24,x-=D,!(16&(D=j>>>16&255))){if(!(64&D)){j=O[(65535&j)+(E&(1<<D)-1)];continue r}a.msg="invalid distance code",u.mode=30;break t}if(J=65535&j,x<(D&=15)&&(E+=s[m++]<<x,(x+=8)<D&&(E+=s[m++]<<x,x+=8)),c<(J+=E&(1<<D)-1)){a.msg="invalid distance too far back",u.mode=30;break t}if(E>>>=D,x-=D,(D=T-k)<J){if(f<(D=J-D)&&u.sane){a.msg="invalid distance too far back",u.mode=30;break t}if(U=h,(g=0)===_){if(g+=b-D,D<W){for(W-=D;G[T++]=h[g++],--D;);g=T-J,U=G}}else if(_<D){if(g+=b+_-D,(D-=_)<W){for(W-=D;G[T++]=h[g++],--D;);if(g=0,_<W){for(W-=D=_;G[T++]=h[g++],--D;);g=T-J,U=G}}}else if(g+=_-D,D<W){for(W-=D;G[T++]=h[g++],--D;);g=T-J,U=G}for(;2<W;)G[T++]=U[g++],G[T++]=U[g++],G[T++]=U[g++],W-=3;W&&(G[T++]=U[g++],1<W&&(G[T++]=U[g++]))}else{for(g=T-J;G[T++]=G[g++],G[T++]=G[g++],G[T++]=G[g++],2<(W-=3););W&&(G[T++]=G[g++],1<W&&(G[T++]=G[g++]))}break}}break}}while(m<r&&T<v);m-=W=x>>3,E&=(1<<(x-=W<<3))-1,a.next_in=m,a.next_out=T,a.avail_in=m<r?r-m+5:5-(m-r),a.avail_out=T<v?v-T+257:257-(T-v),u.hold=E,u.bits=x}},{}],49:[function(o,N,p){var a=o("../utils/common"),l=o("./adler32"),u=o("./crc32"),m=o("./inffast"),r=o("./inftrees"),T=1,k=2,v=0,c=-2,b=1,f=852,_=592;function h(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(g){var U;return g&&g.state?(U=g.state,g.total_in=g.total_out=U.total=0,g.msg="",U.wrap&&(g.adler=1&U.wrap),U.mode=b,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new a.Buf32(f),U.distcode=U.distdyn=new a.Buf32(_),U.sane=1,U.back=-1,v):c}function R(g){var U;return g&&g.state?((U=g.state).wsize=0,U.whave=0,U.wnext=0,x(g)):c}function O(g,U){var s,G;return g&&g.state?(G=g.state,U<0?(s=0,U=-U):(s=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?c:(G.window!==null&&G.wbits!==U&&(G.window=null),G.wrap=s,G.wbits=U,R(g))):c}function B(g,U){var s,G;return g?(G=new E,(g.state=G).window=null,(s=O(g,U))!==v&&(g.state=null),s):c}var C,j,D=!0;function W(g){if(D){var U;for(C=new a.Buf32(512),j=new a.Buf32(32),U=0;U<144;)g.lens[U++]=8;for(;U<256;)g.lens[U++]=9;for(;U<280;)g.lens[U++]=7;for(;U<288;)g.lens[U++]=8;for(r(T,g.lens,0,288,C,0,g.work,{bits:9}),U=0;U<32;)g.lens[U++]=5;r(k,g.lens,0,32,j,0,g.work,{bits:5}),D=!1}g.lencode=C,g.lenbits=9,g.distcode=j,g.distbits=5}function J(g,U,s,G){var lt,X=g.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new a.Buf8(X.wsize)),G>=X.wsize?(a.arraySet(X.window,U,s-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(G<(lt=X.wsize-X.wnext)&&(lt=G),a.arraySet(X.window,U,s-G,lt,X.wnext),(G-=lt)?(a.arraySet(X.window,U,s-G,G,0),X.wnext=G,X.whave=X.wsize):(X.wnext+=lt,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=lt))),0}p.inflateReset=R,p.inflateReset2=O,p.inflateResetKeep=x,p.inflateInit=function(g){return B(g,15)},p.inflateInit2=B,p.inflate=function(g,U){var s,G,lt,X,pt,tt,ot,F,P,ut,it,et,Tt,Nt,bt,kt,It,Rt,Ct,Dt,n,Y,q,S,y=0,L=new a.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&g.avail_in!==0)return c;(s=g.state).mode===12&&(s.mode=13),pt=g.next_out,lt=g.output,ot=g.avail_out,X=g.next_in,G=g.input,tt=g.avail_in,F=s.hold,P=s.bits,ut=tt,it=ot,Y=v;t:for(;;)switch(s.mode){case b:if(s.wrap===0){s.mode=13;break}for(;P<16;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(2&s.wrap&&F===35615){L[s.check=0]=255&F,L[1]=F>>>8&255,s.check=u(s.check,L,2,0),P=F=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&F)<<8)+(F>>8))%31){g.msg="incorrect header check",s.mode=30;break}if((15&F)!=8){g.msg="unknown compression method",s.mode=30;break}if(P-=4,n=8+(15&(F>>>=4)),s.wbits===0)s.wbits=n;else if(n>s.wbits){g.msg="invalid window size",s.mode=30;break}s.dmax=1<<n,g.adler=s.check=1,s.mode=512&F?10:12,P=F=0;break;case 2:for(;P<16;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(s.flags=F,(255&s.flags)!=8){g.msg="unknown compression method",s.mode=30;break}if(57344&s.flags){g.msg="unknown header flags set",s.mode=30;break}s.head&&(s.head.text=F>>8&1),512&s.flags&&(L[0]=255&F,L[1]=F>>>8&255,s.check=u(s.check,L,2,0)),P=F=0,s.mode=3;case 3:for(;P<32;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}s.head&&(s.head.time=F),512&s.flags&&(L[0]=255&F,L[1]=F>>>8&255,L[2]=F>>>16&255,L[3]=F>>>24&255,s.check=u(s.check,L,4,0)),P=F=0,s.mode=4;case 4:for(;P<16;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}s.head&&(s.head.xflags=255&F,s.head.os=F>>8),512&s.flags&&(L[0]=255&F,L[1]=F>>>8&255,s.check=u(s.check,L,2,0)),P=F=0,s.mode=5;case 5:if(1024&s.flags){for(;P<16;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}s.length=F,s.head&&(s.head.extra_len=F),512&s.flags&&(L[0]=255&F,L[1]=F>>>8&255,s.check=u(s.check,L,2,0)),P=F=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&(tt<(et=s.length)&&(et=tt),et&&(s.head&&(n=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),a.arraySet(s.head.extra,G,X,et,n)),512&s.flags&&(s.check=u(s.check,G,et,X)),tt-=et,X+=et,s.length-=et),s.length))break t;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(tt===0)break t;for(et=0;n=G[X+et++],s.head&&n&&s.length<65536&&(s.head.name+=String.fromCharCode(n)),n&&et<tt;);if(512&s.flags&&(s.check=u(s.check,G,et,X)),tt-=et,X+=et,n)break t}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(tt===0)break t;for(et=0;n=G[X+et++],s.head&&n&&s.length<65536&&(s.head.comment+=String.fromCharCode(n)),n&&et<tt;);if(512&s.flags&&(s.check=u(s.check,G,et,X)),tt-=et,X+=et,n)break t}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;P<16;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(F!==(65535&s.check)){g.msg="header crc mismatch",s.mode=30;break}P=F=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),g.adler=s.check=0,s.mode=12;break;case 10:for(;P<32;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}g.adler=s.check=h(F),P=F=0,s.mode=11;case 11:if(s.havedict===0)return g.next_out=pt,g.avail_out=ot,g.next_in=X,g.avail_in=tt,s.hold=F,s.bits=P,2;g.adler=s.check=1,s.mode=12;case 12:if(U===5||U===6)break t;case 13:if(s.last){F>>>=7&P,P-=7&P,s.mode=27;break}for(;P<3;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}switch(s.last=1&F,P-=1,3&(F>>>=1)){case 0:s.mode=14;break;case 1:if(W(s),s.mode=20,U!==6)break;F>>>=2,P-=2;break t;case 2:s.mode=17;break;case 3:g.msg="invalid block type",s.mode=30}F>>>=2,P-=2;break;case 14:for(F>>>=7&P,P-=7&P;P<32;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if((65535&F)!=(F>>>16^65535)){g.msg="invalid stored block lengths",s.mode=30;break}if(s.length=65535&F,P=F=0,s.mode=15,U===6)break t;case 15:s.mode=16;case 16:if(et=s.length){if(tt<et&&(et=tt),ot<et&&(et=ot),et===0)break t;a.arraySet(lt,G,X,et,pt),tt-=et,X+=et,ot-=et,pt+=et,s.length-=et;break}s.mode=12;break;case 17:for(;P<14;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(s.nlen=257+(31&F),F>>>=5,P-=5,s.ndist=1+(31&F),F>>>=5,P-=5,s.ncode=4+(15&F),F>>>=4,P-=4,286<s.nlen||30<s.ndist){g.msg="too many length or distance symbols",s.mode=30;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;P<3;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}s.lens[K[s.have++]]=7&F,F>>>=3,P-=3}for(;s.have<19;)s.lens[K[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,q={bits:s.lenbits},Y=r(0,s.lens,0,19,s.lencode,0,s.work,q),s.lenbits=q.bits,Y){g.msg="invalid code lengths set",s.mode=30;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;kt=(y=s.lencode[F&(1<<s.lenbits)-1])>>>16&255,It=65535&y,!((bt=y>>>24)<=P);){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(It<16)F>>>=bt,P-=bt,s.lens[s.have++]=It;else{if(It===16){for(S=bt+2;P<S;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(F>>>=bt,P-=bt,s.have===0){g.msg="invalid bit length repeat",s.mode=30;break}n=s.lens[s.have-1],et=3+(3&F),F>>>=2,P-=2}else if(It===17){for(S=bt+3;P<S;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}P-=bt,n=0,et=3+(7&(F>>>=bt)),F>>>=3,P-=3}else{for(S=bt+7;P<S;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}P-=bt,n=0,et=11+(127&(F>>>=bt)),F>>>=7,P-=7}if(s.have+et>s.nlen+s.ndist){g.msg="invalid bit length repeat",s.mode=30;break}for(;et--;)s.lens[s.have++]=n}}if(s.mode===30)break;if(s.lens[256]===0){g.msg="invalid code -- missing end-of-block",s.mode=30;break}if(s.lenbits=9,q={bits:s.lenbits},Y=r(T,s.lens,0,s.nlen,s.lencode,0,s.work,q),s.lenbits=q.bits,Y){g.msg="invalid literal/lengths set",s.mode=30;break}if(s.distbits=6,s.distcode=s.distdyn,q={bits:s.distbits},Y=r(k,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,q),s.distbits=q.bits,Y){g.msg="invalid distances set",s.mode=30;break}if(s.mode=20,U===6)break t;case 20:s.mode=21;case 21:if(6<=tt&&258<=ot){g.next_out=pt,g.avail_out=ot,g.next_in=X,g.avail_in=tt,s.hold=F,s.bits=P,m(g,it),pt=g.next_out,lt=g.output,ot=g.avail_out,X=g.next_in,G=g.input,tt=g.avail_in,F=s.hold,P=s.bits,s.mode===12&&(s.back=-1);break}for(s.back=0;kt=(y=s.lencode[F&(1<<s.lenbits)-1])>>>16&255,It=65535&y,!((bt=y>>>24)<=P);){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(kt&&!(240&kt)){for(Rt=bt,Ct=kt,Dt=It;kt=(y=s.lencode[Dt+((F&(1<<Rt+Ct)-1)>>Rt)])>>>16&255,It=65535&y,!(Rt+(bt=y>>>24)<=P);){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}F>>>=Rt,P-=Rt,s.back+=Rt}if(F>>>=bt,P-=bt,s.back+=bt,s.length=It,kt===0){s.mode=26;break}if(32&kt){s.back=-1,s.mode=12;break}if(64&kt){g.msg="invalid literal/length code",s.mode=30;break}s.extra=15&kt,s.mode=22;case 22:if(s.extra){for(S=s.extra;P<S;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}s.length+=F&(1<<s.extra)-1,F>>>=s.extra,P-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;kt=(y=s.distcode[F&(1<<s.distbits)-1])>>>16&255,It=65535&y,!((bt=y>>>24)<=P);){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(!(240&kt)){for(Rt=bt,Ct=kt,Dt=It;kt=(y=s.distcode[Dt+((F&(1<<Rt+Ct)-1)>>Rt)])>>>16&255,It=65535&y,!(Rt+(bt=y>>>24)<=P);){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}F>>>=Rt,P-=Rt,s.back+=Rt}if(F>>>=bt,P-=bt,s.back+=bt,64&kt){g.msg="invalid distance code",s.mode=30;break}s.offset=It,s.extra=15&kt,s.mode=24;case 24:if(s.extra){for(S=s.extra;P<S;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}s.offset+=F&(1<<s.extra)-1,F>>>=s.extra,P-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){g.msg="invalid distance too far back",s.mode=30;break}s.mode=25;case 25:if(ot===0)break t;if(et=it-ot,s.offset>et){if((et=s.offset-et)>s.whave&&s.sane){g.msg="invalid distance too far back",s.mode=30;break}Tt=et>s.wnext?(et-=s.wnext,s.wsize-et):s.wnext-et,et>s.length&&(et=s.length),Nt=s.window}else Nt=lt,Tt=pt-s.offset,et=s.length;for(ot<et&&(et=ot),ot-=et,s.length-=et;lt[pt++]=Nt[Tt++],--et;);s.length===0&&(s.mode=21);break;case 26:if(ot===0)break t;lt[pt++]=s.length,ot--,s.mode=21;break;case 27:if(s.wrap){for(;P<32;){if(tt===0)break t;tt--,F|=G[X++]<<P,P+=8}if(it-=ot,g.total_out+=it,s.total+=it,it&&(g.adler=s.check=s.flags?u(s.check,lt,it,pt-it):l(s.check,lt,it,pt-it)),it=ot,(s.flags?F:h(F))!==s.check){g.msg="incorrect data check",s.mode=30;break}P=F=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;P<32;){if(tt===0)break t;tt--,F+=G[X++]<<P,P+=8}if(F!==(4294967295&s.total)){g.msg="incorrect length check",s.mode=30;break}P=F=0}s.mode=29;case 29:Y=1;break t;case 30:Y=-3;break t;case 31:return-4;case 32:default:return c}return g.next_out=pt,g.avail_out=ot,g.next_in=X,g.avail_in=tt,s.hold=F,s.bits=P,(s.wsize||it!==g.avail_out&&s.mode<30&&(s.mode<27||U!==4))&&J(g,g.output,g.next_out,it-g.avail_out)?(s.mode=31,-4):(ut-=g.avail_in,it-=g.avail_out,g.total_in+=ut,g.total_out+=it,s.total+=it,s.wrap&&it&&(g.adler=s.check=s.flags?u(s.check,lt,it,g.next_out-it):l(s.check,lt,it,g.next_out-it)),g.data_type=s.bits+(s.last?64:0)+(s.mode===12?128:0)+(s.mode===20||s.mode===15?256:0),(ut==0&&it===0||U===4)&&Y===v&&(Y=-5),Y)},p.inflateEnd=function(g){if(!g||!g.state)return c;var U=g.state;return U.window&&(U.window=null),g.state=null,v},p.inflateGetHeader=function(g,U){var s;return g&&g.state&&2&(s=g.state).wrap?((s.head=U).done=!1,v):c},p.inflateSetDictionary=function(g,U){var s,G=U.length;return g&&g.state?(s=g.state).wrap!==0&&s.mode!==11?c:s.mode===11&&l(1,U,G,0)!==s.check?-3:J(g,U,G,G)?(s.mode=31,-4):(s.havedict=1,v):c},p.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,N,p){var a=o("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],r=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];N.exports=function(T,k,v,c,b,f,_,h){var E,x,R,O,B,C,j,D,W,J=h.bits,g=0,U=0,s=0,G=0,lt=0,X=0,pt=0,tt=0,ot=0,F=0,P=null,ut=0,it=new a.Buf16(16),et=new a.Buf16(16),Tt=null,Nt=0;for(g=0;g<=15;g++)it[g]=0;for(U=0;U<c;U++)it[k[v+U]]++;for(lt=J,G=15;1<=G&&it[G]===0;G--);if(G<lt&&(lt=G),G===0)return b[f++]=20971520,b[f++]=20971520,h.bits=1,0;for(s=1;s<G&&it[s]===0;s++);for(lt<s&&(lt=s),g=tt=1;g<=15;g++)if(tt<<=1,(tt-=it[g])<0)return-1;if(0<tt&&(T===0||G!==1))return-1;for(et[1]=0,g=1;g<15;g++)et[g+1]=et[g]+it[g];for(U=0;U<c;U++)k[v+U]!==0&&(_[et[k[v+U]]++]=U);if(C=T===0?(P=Tt=_,19):T===1?(P=l,ut-=257,Tt=u,Nt-=257,256):(P=m,Tt=r,-1),g=s,B=f,pt=U=F=0,R=-1,O=(ot=1<<(X=lt))-1,T===1&&852<ot||T===2&&592<ot)return 1;for(;;){for(j=g-pt,W=_[U]<C?(D=0,_[U]):_[U]>C?(D=Tt[Nt+_[U]],P[ut+_[U]]):(D=96,0),E=1<<g-pt,s=x=1<<X;b[B+(F>>pt)+(x-=E)]=j<<24|D<<16|W|0,x!==0;);for(E=1<<g-1;F&E;)E>>=1;if(E!==0?(F&=E-1,F+=E):F=0,U++,--it[g]==0){if(g===G)break;g=k[v+_[U]]}if(lt<g&&(F&O)!==R){for(pt===0&&(pt=lt),B+=s,tt=1<<(X=g-pt);X+pt<G&&!((tt-=it[X+pt])<=0);)X++,tt<<=1;if(ot+=1<<X,T===1&&852<ot||T===2&&592<ot)return 1;b[R=F&O]=lt<<24|X<<16|B-f|0}}return F!==0&&(b[B+F]=g-pt<<24|64<<16|0),h.bits=lt,0}},{"../utils/common":41}],51:[function(o,N,p){N.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,N,p){var a=o("../utils/common"),l=0,u=1;function m(y){for(var L=y.length;0<=--L;)y[L]=0}var r=0,T=29,k=256,v=k+1+T,c=30,b=19,f=2*v+1,_=15,h=16,E=7,x=256,R=16,O=17,B=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(v+2));m(J);var g=new Array(2*c);m(g);var U=new Array(512);m(U);var s=new Array(256);m(s);var G=new Array(T);m(G);var lt,X,pt,tt=new Array(c);function ot(y,L,K,Q,$){this.static_tree=y,this.extra_bits=L,this.extra_base=K,this.elems=Q,this.max_length=$,this.has_stree=y&&y.length}function F(y,L){this.dyn_tree=y,this.max_code=0,this.stat_desc=L}function P(y){return y<256?U[y]:U[256+(y>>>7)]}function ut(y,L){y.pending_buf[y.pending++]=255&L,y.pending_buf[y.pending++]=L>>>8&255}function it(y,L,K){y.bi_valid>h-K?(y.bi_buf|=L<<y.bi_valid&65535,ut(y,y.bi_buf),y.bi_buf=L>>h-y.bi_valid,y.bi_valid+=K-h):(y.bi_buf|=L<<y.bi_valid&65535,y.bi_valid+=K)}function et(y,L,K){it(y,K[2*L],K[2*L+1])}function Tt(y,L){for(var K=0;K|=1&y,y>>>=1,K<<=1,0<--L;);return K>>>1}function Nt(y,L,K){var Q,$,rt=new Array(_+1),at=0;for(Q=1;Q<=_;Q++)rt[Q]=at=at+K[Q-1]<<1;for($=0;$<=L;$++){var nt=y[2*$+1];nt!==0&&(y[2*$]=Tt(rt[nt]++,nt))}}function bt(y){var L;for(L=0;L<v;L++)y.dyn_ltree[2*L]=0;for(L=0;L<c;L++)y.dyn_dtree[2*L]=0;for(L=0;L<b;L++)y.bl_tree[2*L]=0;y.dyn_ltree[2*x]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function kt(y){8<y.bi_valid?ut(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function It(y,L,K,Q){var $=2*L,rt=2*K;return y[$]<y[rt]||y[$]===y[rt]&&Q[L]<=Q[K]}function Rt(y,L,K){for(var Q=y.heap[K],$=K<<1;$<=y.heap_len&&($<y.heap_len&&It(L,y.heap[$+1],y.heap[$],y.depth)&&$++,!It(L,Q,y.heap[$],y.depth));)y.heap[K]=y.heap[$],K=$,$<<=1;y.heap[K]=Q}function Ct(y,L,K){var Q,$,rt,at,nt=0;if(y.last_lit!==0)for(;Q=y.pending_buf[y.d_buf+2*nt]<<8|y.pending_buf[y.d_buf+2*nt+1],$=y.pending_buf[y.l_buf+nt],nt++,Q===0?et(y,$,L):(et(y,(rt=s[$])+k+1,L),(at=C[rt])!==0&&it(y,$-=G[rt],at),et(y,rt=P(--Q),K),(at=j[rt])!==0&&it(y,Q-=tt[rt],at)),nt<y.last_lit;);et(y,x,L)}function Dt(y,L){var K,Q,$,rt=L.dyn_tree,at=L.stat_desc.static_tree,nt=L.stat_desc.has_stree,dt=L.stat_desc.elems,Et=-1;for(y.heap_len=0,y.heap_max=f,K=0;K<dt;K++)rt[2*K]!==0?(y.heap[++y.heap_len]=Et=K,y.depth[K]=0):rt[2*K+1]=0;for(;y.heap_len<2;)rt[2*($=y.heap[++y.heap_len]=Et<2?++Et:0)]=1,y.depth[$]=0,y.opt_len--,nt&&(y.static_len-=at[2*$+1]);for(L.max_code=Et,K=y.heap_len>>1;1<=K;K--)Rt(y,rt,K);for($=dt;K=y.heap[1],y.heap[1]=y.heap[y.heap_len--],Rt(y,rt,1),Q=y.heap[1],y.heap[--y.heap_max]=K,y.heap[--y.heap_max]=Q,rt[2*$]=rt[2*K]+rt[2*Q],y.depth[$]=(y.depth[K]>=y.depth[Q]?y.depth[K]:y.depth[Q])+1,rt[2*K+1]=rt[2*Q+1]=$,y.heap[1]=$++,Rt(y,rt,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],function(wt,Lt){var ee,$t,ue,xt,_t,me,Pt=Lt.dyn_tree,be=Lt.max_code,re=Lt.stat_desc.static_tree,Ge=Lt.stat_desc.has_stree,Kt=Lt.stat_desc.extra_bits,ve=Lt.stat_desc.extra_base,ne=Lt.stat_desc.max_length,ce=0;for(xt=0;xt<=_;xt++)wt.bl_count[xt]=0;for(Pt[2*wt.heap[wt.heap_max]+1]=0,ee=wt.heap_max+1;ee<f;ee++)ne<(xt=Pt[2*Pt[2*($t=wt.heap[ee])+1]+1]+1)&&(xt=ne,ce++),Pt[2*$t+1]=xt,be<$t||(wt.bl_count[xt]++,_t=0,ve<=$t&&(_t=Kt[$t-ve]),me=Pt[2*$t],wt.opt_len+=me*(xt+_t),Ge&&(wt.static_len+=me*(re[2*$t+1]+_t)));if(ce!==0){do{for(xt=ne-1;wt.bl_count[xt]===0;)xt--;wt.bl_count[xt]--,wt.bl_count[xt+1]+=2,wt.bl_count[ne]--,ce-=2}while(0<ce);for(xt=ne;xt!==0;xt--)for($t=wt.bl_count[xt];$t!==0;)be<(ue=wt.heap[--ee])||(Pt[2*ue+1]!==xt&&(wt.opt_len+=(xt-Pt[2*ue+1])*Pt[2*ue],Pt[2*ue+1]=xt),$t--)}}(y,L),Nt(rt,Et,y.bl_count)}function n(y,L,K){var Q,$,rt=-1,at=L[1],nt=0,dt=7,Et=4;for(at===0&&(dt=138,Et=3),L[2*(K+1)+1]=65535,Q=0;Q<=K;Q++)$=at,at=L[2*(Q+1)+1],++nt<dt&&$===at||(nt<Et?y.bl_tree[2*$]+=nt:$!==0?($!==rt&&y.bl_tree[2*$]++,y.bl_tree[2*R]++):nt<=10?y.bl_tree[2*O]++:y.bl_tree[2*B]++,rt=$,Et=(nt=0)===at?(dt=138,3):$===at?(dt=6,3):(dt=7,4))}function Y(y,L,K){var Q,$,rt=-1,at=L[1],nt=0,dt=7,Et=4;for(at===0&&(dt=138,Et=3),Q=0;Q<=K;Q++)if($=at,at=L[2*(Q+1)+1],!(++nt<dt&&$===at)){if(nt<Et)for(;et(y,$,y.bl_tree),--nt!=0;);else $!==0?($!==rt&&(et(y,$,y.bl_tree),nt--),et(y,R,y.bl_tree),it(y,nt-3,2)):nt<=10?(et(y,O,y.bl_tree),it(y,nt-3,3)):(et(y,B,y.bl_tree),it(y,nt-11,7));rt=$,Et=(nt=0)===at?(dt=138,3):$===at?(dt=6,3):(dt=7,4)}}m(tt);var q=!1;function S(y,L,K,Q){it(y,(r<<1)+(Q?1:0),3),function($,rt,at,nt){kt($),ut($,at),ut($,~at),a.arraySet($.pending_buf,$.window,rt,at,$.pending),$.pending+=at}(y,L,K)}p._tr_init=function(y){q||(function(){var L,K,Q,$,rt,at=new Array(_+1);for($=Q=0;$<T-1;$++)for(G[$]=Q,L=0;L<1<<C[$];L++)s[Q++]=$;for(s[Q-1]=$,$=rt=0;$<16;$++)for(tt[$]=rt,L=0;L<1<<j[$];L++)U[rt++]=$;for(rt>>=7;$<c;$++)for(tt[$]=rt<<7,L=0;L<1<<j[$]-7;L++)U[256+rt++]=$;for(K=0;K<=_;K++)at[K]=0;for(L=0;L<=143;)J[2*L+1]=8,L++,at[8]++;for(;L<=255;)J[2*L+1]=9,L++,at[9]++;for(;L<=279;)J[2*L+1]=7,L++,at[7]++;for(;L<=287;)J[2*L+1]=8,L++,at[8]++;for(Nt(J,v+1,at),L=0;L<c;L++)g[2*L+1]=5,g[2*L]=Tt(L,5);lt=new ot(J,C,k+1,v,_),X=new ot(g,j,0,c,_),pt=new ot(new Array(0),D,0,b,E)}(),q=!0),y.l_desc=new F(y.dyn_ltree,lt),y.d_desc=new F(y.dyn_dtree,X),y.bl_desc=new F(y.bl_tree,pt),y.bi_buf=0,y.bi_valid=0,bt(y)},p._tr_stored_block=S,p._tr_flush_block=function(y,L,K,Q){var $,rt,at=0;0<y.level?(y.strm.data_type===2&&(y.strm.data_type=function(nt){var dt,Et=4093624447;for(dt=0;dt<=31;dt++,Et>>>=1)if(1&Et&&nt.dyn_ltree[2*dt]!==0)return l;if(nt.dyn_ltree[18]!==0||nt.dyn_ltree[20]!==0||nt.dyn_ltree[26]!==0)return u;for(dt=32;dt<k;dt++)if(nt.dyn_ltree[2*dt]!==0)return u;return l}(y)),Dt(y,y.l_desc),Dt(y,y.d_desc),at=function(nt){var dt;for(n(nt,nt.dyn_ltree,nt.l_desc.max_code),n(nt,nt.dyn_dtree,nt.d_desc.max_code),Dt(nt,nt.bl_desc),dt=b-1;3<=dt&&nt.bl_tree[2*W[dt]+1]===0;dt--);return nt.opt_len+=3*(dt+1)+5+5+4,dt}(y),$=y.opt_len+3+7>>>3,(rt=y.static_len+3+7>>>3)<=$&&($=rt)):$=rt=K+5,K+4<=$&&L!==-1?S(y,L,K,Q):y.strategy===4||rt===$?(it(y,2+(Q?1:0),3),Ct(y,J,g)):(it(y,4+(Q?1:0),3),function(nt,dt,Et,wt){var Lt;for(it(nt,dt-257,5),it(nt,Et-1,5),it(nt,wt-4,4),Lt=0;Lt<wt;Lt++)it(nt,nt.bl_tree[2*W[Lt]+1],3);Y(nt,nt.dyn_ltree,dt-1),Y(nt,nt.dyn_dtree,Et-1)}(y,y.l_desc.max_code+1,y.d_desc.max_code+1,at+1),Ct(y,y.dyn_ltree,y.dyn_dtree)),bt(y),Q&&kt(y)},p._tr_tally=function(y,L,K){return y.pending_buf[y.d_buf+2*y.last_lit]=L>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&L,y.pending_buf[y.l_buf+y.last_lit]=255&K,y.last_lit++,L===0?y.dyn_ltree[2*K]++:(y.matches++,L--,y.dyn_ltree[2*(s[K]+k+1)]++,y.dyn_dtree[2*P(L)]++),y.last_lit===y.lit_bufsize-1},p._tr_align=function(y){it(y,2,3),et(y,x,J),function(L){L.bi_valid===16?(ut(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)}(y)}},{"../utils/common":41}],53:[function(o,N,p){N.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,N,p){(function(a){(function(l,u){if(!l.setImmediate){var m,r,T,k,v=1,c={},b=!1,f=l.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(l);_=_&&_.setTimeout?_:l,m={}.toString.call(l.process)==="[object process]"?function(R){process.nextTick(function(){E(R)})}:function(){if(l.postMessage&&!l.importScripts){var R=!0,O=l.onmessage;return l.onmessage=function(){R=!1},l.postMessage("","*"),l.onmessage=O,R}}()?(k="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",x,!1):l.attachEvent("onmessage",x),function(R){l.postMessage(k+R,"*")}):l.MessageChannel?((T=new MessageChannel).port1.onmessage=function(R){E(R.data)},function(R){T.port2.postMessage(R)}):f&&"onreadystatechange"in f.createElement("script")?(r=f.documentElement,function(R){var O=f.createElement("script");O.onreadystatechange=function(){E(R),O.onreadystatechange=null,r.removeChild(O),O=null},r.appendChild(O)}):function(R){setTimeout(E,0,R)},_.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var O=new Array(arguments.length-1),B=0;B<O.length;B++)O[B]=arguments[B+1];var C={callback:R,args:O};return c[v]=C,m(v),v++},_.clearImmediate=h}function h(R){delete c[R]}function E(R){if(b)setTimeout(E,0,R);else{var O=c[R];if(O){b=!0;try{(function(B){var C=B.callback,j=B.args;switch(j.length){case 0:C();break;case 1:C(j[0]);break;case 2:C(j[0],j[1]);break;case 3:C(j[0],j[1],j[2]);break;default:C.apply(u,j)}})(O)}finally{h(R),b=!1}}}}function x(R){R.source===l&&typeof R.data=="string"&&R.data.indexOf(k)===0&&E(+R.data.slice(k.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Kr);var ui=Kr.exports;const ur=Yr(ui),Ht=0,ci={content_country:"US",content_language:"en",theme:"DARK"};function Vr(){const w=new Date,A=o=>String(o).padStart(2,"0");return`${w.getFullYear()}-${A(w.getMonth()+1)}-${A(w.getDate())}-${A(w.getHours())}-${A(w.getMinutes())}-${A(w.getSeconds())}`}function dr(w,A,o=null){let N=A;o&&(A.endsWith(".zip")?N=A.replace(".zip",`-${o}.zip`):A.endsWith(".json")&&(N=A.replace(".json",`-${o}.json`)));const p=URL.createObjectURL(w),a=document.createElement("a");a.href=p,a.download=N,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(p)}function Ie(w){if(!w)return"";const A=String(w);let o=A.match(/[?&]v=([^&]+)/);return o&&o[1]||(o=A.match(/youtu\.be\/([^?&/]+)/),o&&o[1])||(o=A.match(/\/shorts\/([^?&/]+)/),o&&o[1])||(o=A.match(/\/embed\/([^?&/]+)/),o&&o[1])?o[1]:""}const $e=Number.MAX_SAFE_INTEGER;function le(w){const A=Number(w||0);return!Number.isFinite(A)||isNaN(A)?0:A>$e?$e:A<-$e?-$e:Math.trunc(A)}function Wr(w){if(!w&&w!==0)return"1970-01-01";const A=String(w).trim();if(/^\d{4}-\d{2}-\d{2}/.test(A))return A.split("T")[0];const o=Number(A);if(!Number.isFinite(o))return"1970-01-01";const N=Math.abs(o);if(N>=1e7&&N<=99999999){const p=String(Math.trunc(o)),a=p.slice(0,4),l=p.slice(4,6),u=p.slice(6,8);return`${a}-${l}-${u}`}return N>1e12?new Date(o).toISOString().split("T")[0]:N>=1e9?new Date(o*1e3).toISOString().split("T")[0]:new Date(o).toISOString().split("T")[0]}function Hr(w){if(w==null)return 0;if(typeof w=="number")return w>1e12?Math.floor(w):Math.floor(w*1e3);const A=String(w).trim();if(!A)return 0;const o=Date.parse(A);if(!isNaN(o))return o;const N=Number(A);return Number.isFinite(N)?N>1e12?Math.floor(N):Math.floor(N*1e3):0}async function di(w,A,o,N,p){H("Starting conversion to NewPipe format...");let a,l=new ur,u="",m=null,r=null;const T=p||null;let k=!1;if(o==="merge"&&w){H("Loading existing NewPipe backup...");const h=await w.arrayBuffer(),E=await ur.loadAsync(h),x=E.file("newpipe.db");if(x){const B=await x.async("uint8array");a=new N.Database(B),H("Database loaded. Running integrity check...");const C=a.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");C&&C[0]&&C[0].values&&H(`Existing NewPipe database contains: ${C[0].values.flat().join(", ")} tables.`,"schema");try{li(a),u=lr(a)}catch(j){H("Warning: failed to ensure stream_state schema: "+(j.message||j.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const R=E.file("preferences.json");R&&(m=await R.async("string"));const O=E.file("newpipe.settings");O&&(r=await O.async("blob"))}else H("Creating new NewPipe database..."),a=new N.Database,oi(a),u=lr(a);H("Parsing LibreTube JSON...");const v=await A.text(),c=JSON.parse(v);a.run("BEGIN TRANSACTION");try{H("Processing Subscriptions..."),o==="merge"&&a.run(`DELETE FROM subscriptions WHERE service_id = ${Ht}`);let h=0;if(c.subscriptions){const E=a.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");c.subscriptions.forEach(x=>{try{const R=x.url||`https://www.youtube.com/channel/${x.channelId}`,O=x.name||"Unknown",B=x.avatar||x.avatarUrl||null;if(!R.includes("youtube.com")&&!R.includes("youtu.be")){H(`Dropped non-YouTube subscription: ${O} (${R})`,"warn");return}E.run([Ht,R,O,B,0,"",0]),h++}catch(R){H(`ERROR inserting subscription ${x.name}: ${R.message||R.toString()}`,"err")}}),E.free()}H(`Inserted ${h} subscriptions.`)}catch(h){throw H(`FATAL ERROR during Subscriptions phase: ${h.message||h.toString()}`,"err"),h}try{H("Processing Playlists..."),o==="merge"&&(T==="only_libretube"?(a.run("DELETE FROM playlist_stream_join"),a.run("DELETE FROM playlists"),a.run("DELETE FROM remote_playlists"),H("Cleared existing playlists; will import only LibreTube playlists.")):T==="only_newpipe"?(k=!0,H("Preserving existing NewPipe playlists; skipping import from LibreTube.")):H(`Merging playlists with behavior: ${T||"default (LibreTube precedence)"}`));let h=0;if(c.localPlaylists&&!k){const E=a.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),x=a.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),R=a.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)"),O=c.localPlaylists;for(const B of O){const C=B.playlist.name||"Untitled";try{const j=a.exec(`SELECT uid FROM playlists WHERE name = '${C.replace(/'/g,"''")}'`);if(j.length>0)if(T==="merge_lt_precedence"){const g=j[0].values[0][0];try{a.run(`DELETE FROM playlist_stream_join WHERE playlist_id = ${g}`),a.run(`DELETE FROM playlists WHERE uid = ${g}`),H(`Replaced existing local playlist: ${C}`,"schema")}catch(U){H(`WARN: failed to replace playlist ${C}: ${U.message||U.toString()}`,"warn")}}else{H(`Skipping duplicate local playlist: ${C}`,"warn");continue}x.run([C,0,-1,h]);const W=a.exec("SELECT last_insert_rowid()")[0].values[0][0];let J=0;for(const g of B.videos){const U=g.videoId||(g.url?Ie(g.url):null);if(!U){H(`Skipped video in playlist ${C} due to missing videoId.`,"warn");continue}const s=`https://www.youtube.com/watch?v=${U}`;try{const G=g.title||"Unknown",lt=g.uploader||"Unknown",X=g.duration||0,pt=g.uploadDate?new Date(g.uploadDate).getTime()/1e3:null,tt=g.thumbnailUrl||null;E.run([Ht,s,G,"VIDEO_STREAM",X,lt,pt,tt]);const ot=a.exec(`SELECT uid FROM streams WHERE service_id=${Ht} AND url='${s.replace(/'/g,"''")}'`);if(ot.length>0&&ot[0].values.length>0){const F=ot[0].values[0][0],P=J;if(R.run([W,F,J++]),P===0)try{a.run(`UPDATE playlists SET thumbnail_stream_id = ${F} WHERE uid = ${W}`)}catch(ut){H(`WARN: failed to set playlist thumbnail for ${C}: ${ut.message||ut.toString()}`,"warn")}}else H(`Warning: Could not find/insert stream for video ${G}`,"warn")}catch(G){H(`ERROR processing video "${g.title}" in playlist "${C}": ${G.message||G.toString()}`,"err")}}h++}catch(j){throw H(`FATAL ERROR processing playlist "${C}": ${j.message||j.toString()}`,"err"),j}}E.free(),x.free(),R.free()}H(`Processed ${h} local playlists.`)}catch(h){throw H(`FATAL ERROR during Local Playlists phase: ${h.message||h.toString()}`,"err"),h}try{H("Processing Remote Playlist Bookmarks...");let h=0;const E=a.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)");if(c.playlistBookmarks&&!k){const x=c.playlistBookmarks;for(const R of x)try{const O=R.url||(R.playlistId?`https://www.youtube.com/playlist?list=${R.playlistId}`:null);if(!O||!O.includes("youtube.com")&&!O.includes("youtu.be")){H(`Dropped non-YouTube remote playlist: ${R.playlistName||"Untitled"}`,"warn");continue}const B=R.playlistName||R.name||"Untitled",C=R.thumbnailUrl||null,j=R.uploader||"Unknown",D=typeof R.videos=="number"?R.videos:0;try{const W=a.exec(`SELECT uid FROM remote_playlists WHERE url = '${O.replace(/'/g,"''")}' OR name = '${B.replace(/'/g,"''")}'`);if(W&&W.length>0&&W[0].values.length>0){if(T==="merge_np_precedence")continue;if(T==="merge_lt_precedence"){const J=W[0].values[0][0];a.run(`DELETE FROM remote_playlists WHERE uid = ${J}`)}}}catch{}E.run([Ht,B,O,C,j,h++,D])}catch(O){H(`ERROR inserting remote playlist ${R.playlistName||"Untitled"}: ${O.message||O.toString()}`,"err")}E.free()}H(`Processed ${h} remote playlist bookmarks.`)}catch(h){throw H(`FATAL ERROR during Remote Playlists phase: ${h.message||h.toString()}`,"err"),h}try{H("Processing Watch History...");let h=0,E=0,x=0;const R=c.history||c.watchHistory||c.watch_history||c.watch_history_items||[],O=new Map;if(c.watchPositions&&Array.isArray(c.watchPositions)){const B=c.watchPositions;for(const C of B)if(C&&C.videoId){const j=Number(C.position||0);O.set(String(C.videoId),j)}}if(R&&R.length>0){const B=a.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),C=a.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),j=a.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const D of R)try{const W=D.videoId||D.videoIdStr||D.id||(D.url?Ie(D.url):"")||"";if(!W)continue;const J=`https://www.youtube.com/watch?v=${W}`,g=D.title||D.name||"Unknown",U=D.uploader||D.uploaderName||"Unknown",s=D.duration||D.length||0,G=D.uploadDate?isNaN(Number(D.uploadDate))?Math.floor(new Date(D.uploadDate).getTime()/1e3):Math.floor(Number(D.uploadDate)):null,lt=D.thumbnailUrl||D.thumbnail||null;let X=0;const pt=O.get(W),tt="9223372036854775807";if(pt!=null)String(pt)===tt?X=0:X=Math.floor(Number(pt)||0);else{const it=D.currentTime||D.position||D.progress||0;X=Math.floor(Number(it||0)*1e3)}let ot=D.accessDate||D.accessedAt||D.lastWatched||D.timestamp||D.date||D.time,F;if(!ot)F=Date.now();else if(typeof ot=="number")F=ot>1e12?Math.floor(ot):Math.floor(ot*1e3);else{const it=Date.parse(String(ot));F=isNaN(it)?Date.now():it}const P=Number(D.repeatCount||D.watchCount||D.playCount||D.repeat_count||1);B.run([Ht,J,g,"VIDEO_STREAM",s,U,G,lt]);const ut=a.exec(`SELECT uid FROM streams WHERE service_id=${Ht} AND url='${J.replace(/'/g,"''")}'`);if(ut.length>0&&ut[0].values.length>0){const it=ut[0].values[0][0];try{C.run([X,it])}catch(et){H(`WARN: failed to write stream_state for ${W}: ${et.message||et.toString()}`,"warn")}try{if(o==="merge"){const et=F-1e3,Tt=F+1e3,Nt=a.exec(`SELECT access_date, repeat_count FROM stream_history WHERE stream_id = ${it} AND access_date BETWEEN ${et} AND ${Tt}`);if(Nt&&Nt.length>0&&Nt[0].values.length>0){const bt=Number(Nt[0].values[0][0]),It=(Number(Nt[0].values[0][1])||0)+P;a.run(`UPDATE stream_history SET repeat_count = ${It} WHERE stream_id = ${it} AND access_date = ${bt}`),x++}else j.run([it,F,P]),E++}else j.run([it,F,P]),E++}catch(et){H(`WARN: failed to write stream_history for ${W}: ${et.message||et.toString()}`,"warn")}h++}}catch(W){H(`ERROR processing history item: ${W.message||W.toString()}`,"warn")}B.free(),C.free(),j.free()}H(`Processed ${h} history items (added: ${E}, duplicates merged: ${x}).`)}catch(h){H(`Error processing history: ${h.message}`,"err")}try{a.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),H("Inserted room_master_table identity.")}catch(h){H("Error inserting room_master_table: "+h.message,"warn")}try{H("Committing transaction..."),a.run("COMMIT")}catch(h){throw H(`FATAL ERROR on COMMIT: ${h.message||h.toString()}`,"err"),h}H("Exporting database...");const b=a.export();if(l.file("newpipe.db",b),m?(l.file("preferences.json",m),H("Preserved existing preferences.json.")):(l.file("preferences.json",JSON.stringify(ci,null,2)),H("Created default preferences.json.")),r&&(l.file("newpipe.settings",r),H("Preserved existing newpipe.settings.")),l.file("stream_state_debug.txt",u||"No stream_state debug information collected."),H("Attached stream_state_debug.txt to zip for inspection.","schema"),u){const h=u.split(`
`).slice(0,12).join(`
`);H(`stream_state_debug preview:
`+h,"schema")}const f=await l.generateAsync({type:"blob"}),_=Vr();dr(f,"newpipe_converted.zip",_),H("Done! File downloaded.","info")}async function fi(w,A,o,N,p,a){H("Starting conversion to LibreTube format...");let l={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[],watchPositions:[]};const u=p||null;let m=!1,r;if(o==="merge"&&A){H("Reading target LibreTube file...");const B=await A.text(),C=JSON.parse(B);l=C,r={playlistBookmarks:Array.isArray(C.playlistBookmarks)?JSON.parse(JSON.stringify(C.playlistBookmarks)):C.playlistBookmarks,localPlaylists:Array.isArray(C.localPlaylists)?JSON.parse(JSON.stringify(C.localPlaylists)):C.localPlaylists,otherPlaylistKeys:{}},Object.keys(C).forEach(j=>{if(j!=="playlistBookmarks"&&j!=="localPlaylists"&&/playlist/i.test(j))try{r.otherPlaylistKeys||(r.otherPlaylistKeys={}),r.otherPlaylistKeys[j]=JSON.parse(JSON.stringify(C[j]))}catch{r.otherPlaylistKeys||(r.otherPlaylistKeys={}),r.otherPlaylistKeys[j]=C[j]}}),u==="only_newpipe"?(l.subscriptions=[],l.playlistBookmarks=[],l.localPlaylists=[],H("Cleared target LibreTube playlists; will import only NewPipe playlists.")):u==="only_libretube"?(m=!0,H("Preserving existing LibreTube playlists; will skip importing NewPipe playlists.")):(l.subscriptions=l.subscriptions||[],l.playlistBookmarks=l.playlistBookmarks||[],l.localPlaylists=l.localPlaylists||[],H(`Merging playlists with behavior: ${u||"default (NewPipe precedence)"}`))}H("Reading NewPipe backup...");const T=await w.arrayBuffer(),v=(await ur.loadAsync(T)).file("newpipe.db");if(!v)throw new Error("NewPipe ZIP must contain newpipe.db");const c=await v.async("uint8array"),b=new N.Database(c);H("NewPipe database loaded.");try{const B=lr(b);H(`Stream state debug (input NewPipe DB):
`+(B||"No stream_state debug info collected."),"schema")}catch(B){H("Failed to collect input stream_state debug: "+(B.message||B.toString()),"warn")}H("Extracting Subscriptions...");const f=b.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${Ht}`);f.length>0&&f[0].values.forEach(C=>{const j=String(C[0]);if(!j||!j.includes("youtube.com")&&!j.includes("youtu.be")){H(`Dropped non-YouTube subscription URL: ${C[1]}`,"warn");return}let D="";const W=j.match(/channel\/([\w-]+)/),J=j.match(/user\/([\w-]+)/);W?D=W[1]:J&&(D=J[1]),l.subscriptions.push({channelId:D,url:j,name:String(C[1]),avatar:C[2]?String(C[2]):void 0,verified:!1})}),H(`Extracted ${l.subscriptions.length} YouTube subscriptions.`),H("Extracting Remote Playlists...");const _=b.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${Ht}`);_.length>0&&!m&&_[0].values.forEach(C=>{const j=String(C[1]);if(!j||!j.includes("youtube.com")&&!j.includes("youtu.be")){H(`Dropped non-YouTube remote playlist URL: ${C[0]}`,"warn");return}const D=j.match(/[?&]list=([^&]+)/),W=D?D[1]:"";l.playlistBookmarks.push({playlistId:W,playlistName:String(C[0]),thumbnailUrl:C[3]?String(C[3]):void 0,uploader:C[2]?String(C[2]):void 0,uploaderUrl:"",videos:le(C[4])})}),H(`Extracted ${l.playlistBookmarks.length} remote playlist bookmarks.`),H("Extracting Local Playlists...");const h=b.exec("SELECT uid, name FROM playlists");if(h.length>0&&!m)for(const B of h[0].values){const C=Number(B[0]),j=String(B[1]),D=[];let W=0;const J=b.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${C} AND s.service_id = ${Ht}
                    ORDER BY j.join_index ASC
                `);if(J.length>0&&J[0].values.forEach(g=>{const U=String(g[0]),s=Ie(U);if(!s){H(`Warning: Skipped stream in playlist "${j}" due to unparseable URL: ${U}`,"warn");return}D.push({id:W++,playlistId:le(C),videoId:s,title:String(g[1]),uploadDate:Wr(g[4]),uploader:String(g[3]),thumbnailUrl:g[5]?String(g[5]):void 0,duration:le(g[2])})}),D.length>0||j){const g=l.localPlaylists.findIndex(U=>U.playlist&&U.playlist.name===j);if(g>=0)if(u==="merge_np_precedence")l.localPlaylists.splice(g,1);else continue;l.localPlaylists.push({playlist:{id:le(C),name:j,thumbnailUrl:D.length>0?D[0].thumbnailUrl:""},videos:D})}}if(H(`Extracted ${l.localPlaylists.length} local playlists.`),o==="merge"&&p==="only_libretube"&&r)try{l.playlistBookmarks=r.playlistBookmarks,l.localPlaylists=r.localPlaylists,Object.keys(r.otherPlaylistKeys||{}).forEach(B=>{l[B]=r.otherPlaylistKeys[B]}),H("Restored original LibreTube playlist data (only_libretube).")}catch(B){H("Failed to restore preserved LibreTube playlists: "+(B.message||B.toString()),"warn")}if(l&&Array.isArray(l.watchPositions)&&(l.watchPositions=l.watchPositions.map(B=>B&&B.position!==void 0&&B.position!==null?{...B,position:le(B.position)}:B)),(a===void 0?!0:!!a)&&w)try{const B=b.exec(`SELECT s.url, s.title, s.duration, s.uploader, s.uploader_url, s.thumbnail_url, s.upload_date, sh.access_date, sh.repeat_count FROM stream_history sh JOIN streams s ON sh.stream_id = s.uid WHERE s.service_id = ${Ht}`)||[],C=b.exec(`SELECT s.url, ss.progress_time FROM stream_state ss JOIN streams s ON ss.stream_id = s.uid WHERE s.service_id = ${Ht}`)||[];l.watchHistory=l.watchHistory||[],l.watchPositions=l.watchPositions||[];const j=new Map;for(const D of l.watchPositions)D&&D.videoId&&j.set(String(D.videoId),le(D.position));if(C.length>0){const D=C[0].values;for(const W of D){const J=String(W[0]),g=W[1]||0,U=Number(g),s=Ie(J);if(!s)continue;const G=j.get(s)||0,lt=le(U);lt>G&&j.set(s,lt)}}if(l.watchPositions=Array.from(j.entries()).map(([D,W])=>({videoId:D,position:W})),B.length>0){const D=B[0].values,W=Array.isArray(l.watchHistory)?l.watchHistory.map(g=>({...g,accessDate:Hr(g&&(g.accessDate||g.accessedAt||g.lastWatched||g.timestamp||g.date||g.time)||0)})):[],J=new Map;for(const g of W)g&&g.videoId&&J.set(String(g.videoId),g);for(const g of D){const U=String(g[0]),s=g[1]?String(g[1]):"",G=le(g[2]),lt=g[3]?String(g[3]):"",X=g[4]?String(g[4]):"",pt=g[5]?String(g[5]):"",tt=g[6],ot=g[7],F=Ie(U);if(!F)continue;let P="";try{const et=String(X).match(/channel\/([\w-]+)/),Tt=String(X).match(/user\/([\w-]+)/);et?P=et[1]:Tt?P=Tt[1]:/^[UC][A-Za-z0-9_-]{20,}$/.test(X)&&(P=X)}catch{P=""}const ut=Wr(tt);if(J.has(F))continue;const it=Hr(ot);W.push({videoId:F,title:s,uploadDate:ut,uploader:lt,uploaderUrl:P,uploaderAvatar:"",thumbnailUrl:pt,duration:G,accessDate:it})}W.sort((g,U)=>Number(U&&U.accessDate?U.accessDate:0)-Number(g&&g.accessDate?g.accessDate:0)),l.watchHistory=W}}catch(B){H("Failed to import watch history from NewPipe DB: "+(B.message||B.toString()),"warn")}const x=JSON.stringify(l,null,2),R=new Blob([x],{type:"application/json"}),O=Vr();dr(R,"libretube_converted.json",O),H("Done! File downloaded.","info")}async function Qr(w){H("Parsing STT backup file...","info");const A=await w.text(),o=new Map,N=[],p=new Map,a=new Map,l=A.split(`
`);let u=0;for(const m of l){const r=m.trim();if(!r)continue;const T=r.split("	");if(T.length===0)continue;u++;const k=T[0];if(k==="recordType"){const v={id:parseInt(T[1],10),name:T[2]||"",emoji:T[3]||"",color:parseInt(T[4],10)||0,category_id:parseInt(T[5],10)||0};isNaN(v.id)||o.set(v.id,v)}else if(k==="record"){let v=parseInt(T[4],10);if(isNaN(v)){const b=T[4];b&&b.endsWith("f")&&(v=parseInt(b.slice(0,-1),10))}const c={id:parseInt(T[1],10),type_id:parseInt(T[2],10),start_timestamp:parseInt(T[3],10),end_timestamp:v,comment:T.slice(5).join("	")||void 0};if(isNaN(c.id)||isNaN(c.type_id)||isNaN(c.start_timestamp)||isNaN(c.end_timestamp)){H(`Skipping invalid record: ${T.join("	")}`,"warn");continue}N.push(c)}else if(k==="category"){const v={id:parseInt(T[1],10),name:T[2]||"",color:parseInt(T[3],10)||0};isNaN(v.id)||p.set(v.id,v)}else if(k==="recordTag"){const v={id:parseInt(T[1],10),name:T[3]||"",emoji:T[7]||"",color:parseInt(T[4],10)||0,type_id:parseInt(T[5],10)||0};isNaN(v.id)||a.set(v.id,v)}}return H(`Parsed ${o.size} record types, ${N.length} records (${u} rows total)`,"info"),{recordTypes:o,records:N,categories:p,recordTags:a}}function fr(w,A){if(A<=0)return w;const o=A*60*1e3;return w.filter(N=>N.end_timestamp-N.start_timestamp>=o)}function hr(w){const A=new Map;for(const o of w){const p=new Date(o.start_timestamp).toISOString().split("T")[0];A.has(p)||A.set(p,[]),A.get(p).push(o)}return A}function pr(w,A){return w.filter(o=>o.type_id===A)}async function Jr(w,A){H("Parsing uHabits backup file...","info");const o=await w.arrayBuffer(),N=new A.Database(new Uint8Array(o)),p=new Map,a=[];try{const l=N.exec(`
			SELECT id, archived, color, description, freq_den, freq_num, highlight, 
			       name, position, reminder_hour, reminder_min, reminder_days, 
			       type, target_type, target_value, unit, question, uuid
			FROM Habits 
			WHERE type = 0
		`);if(l.length>0){const m=l[0].values;for(const r of m){const T={id:r[0],archived:r[1],color:r[2],description:r[3],freq_den:r[4],freq_num:r[5],highlight:r[6],name:r[7],position:r[8],reminder_hour:r[9],reminder_min:r[10],reminder_days:r[11],type:r[12],target_type:r[13],target_value:r[14],unit:r[15],question:r[16],uuid:r[17]};p.set(T.id,T)}H(`Loaded ${p.size} boolean habits from uHabits`,"info")}const u=N.exec(`
			SELECT id, habit, timestamp, value, notes
			FROM Repetitions
		`);if(u.length>0){const m=u[0].values;for(const r of m)a.push({id:r[0],habit_id:r[1],timestamp:r[2],value:r[3],notes:r[4]});H(`Loaded ${a.length} repetitions from uHabits`,"info")}}finally{N.close()}return{habits:p,repetitions:a}}function hi(w){const A=new w.Database;return A.run(`
		CREATE TABLE Habits (
			id integer primary key autoincrement,
			archived integer,
			color integer,
			description text,
			freq_den integer,
			freq_num integer,
			highlight integer,
			name text,
			position integer,
			reminder_hour integer,
			reminder_min integer,
			reminder_days integer not null default 127,
			type integer not null default 0,
			target_type integer not null default 0,
			target_value real not null default 0,
			unit text not null default "",
			question text,
			uuid text
		)
	`),A.run(`
		CREATE TABLE Repetitions (
			id integer primary key autoincrement,
			habit integer not null references habits(id),
			timestamp integer not null,
			value integer not null,
			notes text
		)
	`),A.run(`
		CREATE UNIQUE INDEX idx_repetitions_habit_timestamp 
		ON Repetitions(habit, timestamp)
	`),A.run("CREATE TABLE android_metadata (locale TEXT)"),A.run("INSERT INTO android_metadata VALUES ('en_US')"),A.run("CREATE TABLE sqlite_sequence(name, seq)"),H("Created uHabits database schema","info"),A}function pi(w){const A=new Date(w);return A.setHours(0,0,0,0),A.getTime()}function mi(w){return w.export()}async function _i(w,A,o,N){H("=== Starting STT  uHabits Conversion ===","info"),H(`Number of mappings: ${o.length}`,"info");const p=await Qr(w);H(`Loaded ${p.recordTypes.size} STT activity types`,"info"),H(`Loaded ${p.records.length} total STT records`,"info");const a=await Jr(A,N);H(`Loaded ${a.habits.size} uHabits habits (boolean only)`,"info"),H(`Loaded ${a.repetitions.length} existing repetitions`,"info");const l=hi(N);H("Copying existing habits to new database...","info");for(const[v,c]of a.habits)l.run(`
			INSERT INTO Habits (
				id, name, question, color, archived, type, 
				freq_num, freq_den, position, description, uuid, highlight, 
				reminder_hour, reminder_min, reminder_days, 
				target_type, target_value, unit
			) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
		`,[c.id,c.name,c.question,c.color,c.archived,c.type,c.freq_num,c.freq_den,c.position,c.description||null,c.uuid||null,c.highlight,c.reminder_hour,c.reminder_min,c.reminder_days,c.target_type,c.target_value,c.unit]);const u=new Set;H("Copying existing repetitions to new database...","info");for(const v of a.repetitions)l.run(`
			INSERT INTO Repetitions (habit, timestamp, value, notes)
			VALUES (?, ?, ?, ?)
		`,[v.habit_id,v.timestamp,v.value,v.notes||null]),u.add(`${v.habit_id}:${v.timestamp}`);let m=0;for(const v of o){const c=p.recordTypes.get(v.sttTypeId),b=a.habits.get(v.uhabitsHabitId);if(!c){H(`Warning: STT activity type ${v.sttTypeId} not found`,"warn");continue}if(!b){H(`Warning: uHabits habit ${v.uhabitsHabitId} not found`,"warn");continue}H(`
Processing mapping: "${c.emoji} ${c.name}"  "${b.name}"`,"info");const f=v.minDuration||0;f>0&&H(`  Minimum duration: ${f} minutes`,"info");const _=fr(p.records,f),h=pr(_,v.sttTypeId);if(H(`  Found ${h.length} records for this activity`,"info"),h.length===0){H("  No records to convert","info");continue}const E=hr(h);H(`  Records span ${E.size} unique days`,"info");let x=0,R=0;for(const[O,B]of E){const C=pi(B[0].start_timestamp),j=`${v.uhabitsHabitId}:${C}`;if(u.has(j)){R++;continue}const D=B.reduce((g,U)=>g+(U.end_timestamp-U.start_timestamp),0),W=Math.round(D/6e4),J=`Converted from STT: ${B.length} session${B.length>1?"s":""}, ${W}min total`;l.run(`
				INSERT INTO Repetitions (habit, timestamp, value, notes)
				VALUES (?, ?, ?, ?)
			`,[v.uhabitsHabitId,C,2,J]),u.add(j),x++,m++}H(`   Added ${x} new repetitions`,"info"),R>0&&H(`   Skipped ${R} existing days`,"info")}const r=Math.max(...Array.from(a.habits.keys()),0),T=a.repetitions.length>0?Math.max(...a.repetitions.map(v=>v.id)):0;l.run("INSERT INTO sqlite_sequence (name, seq) VALUES ('Habits', ?)",[r]),l.run("INSERT INTO sqlite_sequence (name, seq) VALUES ('Repetitions', ?)",[T+m]),H(`
=== Conversion Complete ===`,"info"),H(`Total new repetitions added: ${m}`,"info"),H("Exporting database...","info");const k=mi(l);return l.close(),new Blob([k],{type:"application/x-sqlite3"})}let Ft=null,qt=null,gi=0;const Jt=new Map;function yi(w){const A=document.getElementById("file-left"),o=document.getElementById("file-right"),N=document.getElementById("add-mapping"),p=document.getElementById("btn-convert-stt");!A||!o||!N||!p||(A.addEventListener("change",async()=>{var l;const a=(l=A.files)==null?void 0:l[0];if(a)try{Ft=await Qr(a),H(`Loaded ${Ft.recordTypes.size} STT activity types`,"info"),bi(),cr()}catch(u){H(`Error loading STT file: ${u.message}`,"err"),Ft=null}}),o.addEventListener("change",async()=>{var l;const a=(l=o.files)==null?void 0:l[0];if(a)try{qt=await Jr(a,w),H(`Loaded ${qt.habits.size} uHabits habits (boolean only)`,"info"),vi(),cr()}catch(u){H(`Error loading uHabits file: ${u.message}`,"err"),qt=null}}),N.addEventListener("click",()=>Gr()),p.addEventListener("click",async()=>await wi(w)),Gr())}function Gr(){const w=document.getElementById("mapping-list");if(!w)return;const A=gi++,o=document.createElement("div");o.className="mapping-item",o.setAttribute("data-mapping-id",A.toString()),o.innerHTML=`
		<div class="mapping-selects">
			<select class="stt-activity-select" data-mapping-id="${A}">
				<option value="">Select STT activity...</option>
			</select>
			<span class="mapping-arrow"></span>
			<select class="uhabits-habit-select" data-mapping-id="${A}">
				<option value="">Select uHabits habit...</option>
			</select>
			<label class="min-duration-label">
				Min:
				<input type="number" class="min-duration-input" value="5" min="0" step="1" title="Minimum duration in minutes">
				min
			</label>
			<button class="remove-button remove-mapping" aria-label="Remove mapping">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><!-- Icon from Lucide by Lucide Contributors - https://github.com/lucide-icons/lucide/blob/main/LICENSE --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"/></svg>
			</button>
		</div>
		<div class="activity-grid-container" style="display: none;">
			<div class="grid-year-nav">
				<button class="year-prev" data-mapping-id="${A}" title="Previous year"></button>
				<span class="grid-year-display"></span>
				<button class="year-next" data-mapping-id="${A}" title="Next year"></button>
			</div>
			<activity-grid start-week-on-monday class="habit-preview-grid" dark-mode color-theme="purple"></activity-grid>
		</div>
	`,w.appendChild(o);const N=o.querySelector(".stt-activity-select"),p=o.querySelector(".uhabits-habit-select");Ft&&tn(N),qt&&en(p),N.addEventListener("change",()=>{Ne(A),je()}),p.addEventListener("change",()=>{Ne(A),je()});const a=o.querySelector(".min-duration-input");a&&a.addEventListener("change",()=>{Ne(A),je()}),o.querySelector(".remove-mapping").addEventListener("click",()=>{Jt.delete(A),o.remove(),je(),cr()});const u=o.querySelector(".year-prev"),m=o.querySelector(".year-next");u&&u.addEventListener("click",()=>{const r=Jt.get(A)||new Date().getFullYear();Jt.set(A,r-1),Ne(A)}),m&&m.addEventListener("click",()=>{const r=Jt.get(A)||new Date().getFullYear();Jt.set(A,r+1),Ne(A)})}function tn(w){if(Ft){w.innerHTML='<option value="">Select STT activity...</option>';for(const[A,o]of Ft.recordTypes){const N=document.createElement("option");N.value=A.toString(),N.textContent=`${o.emoji} ${o.name} (id: ${A})`,w.appendChild(N)}}}function en(w){if(!qt)return;w.innerHTML='<option value="">Select uHabits habit...</option>';const A=[],o=[];for(const[N,p]of qt.habits)p.archived?o.push([N,p]):A.push([N,p]);for(const[N,p]of A){const a=document.createElement("option");a.value=N.toString(),a.textContent=`${p.name} (id: ${N})`,w.appendChild(a)}if(o.length>0){const N=document.createElement("option");N.disabled=!0,N.textContent=" Archived ",N.style.color="#888",w.appendChild(N);for(const[p,a]of o){const l=document.createElement("option");l.value=p.toString(),l.textContent=`${a.name} (id: ${p})`,l.style.fontStyle="italic",l.style.opacity="0.7",w.appendChild(l)}}}function bi(){document.querySelectorAll(".stt-activity-select").forEach(w=>{tn(w)})}function vi(){document.querySelectorAll(".uhabits-habit-select").forEach(w=>{en(w)})}function Ne(w){const A=document.querySelector(`[data-mapping-id="${w}"]`);if(!A||!Ft||!qt)return;const o=A.querySelector(".stt-activity-select"),N=A.querySelector(".uhabits-habit-select"),p=A.querySelector(".activity-grid-container"),a=A.querySelector("activity-grid"),l=parseInt(o.value),u=parseInt(N.value);if(!l||!u){p.style.display="none";return}p.style.display="block";const m=A.querySelector(".min-duration-input"),r=m&&parseInt(m.value)||0,T=[],k=new Set;for(const R of qt.repetitions)if(R.habit_id===u&&R.value>0){const O=new Date(R.timestamp).toISOString().split("T")[0];k.add(O),T.push({date:O,count:2})}const v=fr(Ft.records,r),c=pr(v,l),b=hr(c),f=[];for(const[R,O]of b)k.has(R)||f.push({date:R,count:1});if(a.data=[...T,...f],!Jt.has(w)){const R=[...T.map(O=>O.date),...f.map(O=>O.date)];if(R.length>0){R.sort();const O=R[R.length-1],B=new Date(O).getFullYear();Jt.set(w,B)}else Jt.set(w,new Date().getFullYear())}const _=Jt.get(w)||new Date().getFullYear(),h=new Date(_,0,1),E=new Date(_,11,31);a.endDate=E.toISOString().split("T")[0],a.startDate=h.toISOString().split("T")[0];const x=p.querySelector(".grid-year-display");x&&(x.textContent=_.toString())}function je(){const w=document.getElementById("conversion-summary");if(!w||!Ft||!qt)return;const A=document.querySelectorAll(".mapping-item");let o=0,N=0;const p=[];for(let a=0;a<A.length;a++){const l=A[a],u=l.querySelector(".stt-activity-select"),m=l.querySelector(".uhabits-habit-select"),r=l.querySelector(".min-duration-input"),T=parseInt(u.value),k=parseInt(m.value);if(T&&k){o++;const v=Ft.recordTypes.get(T),c=qt.habits.get(k);if(v&&c){const b=r&&parseInt(r.value)||0,f=fr(Ft.records,b),_=pr(f,T),h=hr(_),E=new Set;for(const R of qt.repetitions)R.habit_id===k&&R.value>0&&E.add(new Date(R.timestamp).toISOString().split("T")[0]);let x=0;for(const R of h.keys())E.has(R)||x++;N+=x,p.push(`"${v.emoji} ${v.name}"  "${c.name}": ${x} new days`)}}}o>0?(w.style.display="block",w.innerHTML=`
			<h4>Conversion Summary</h4>
			<ul>
				<li>${o} mapping(s) configured</li>
				<li>${N} new repetitions will be added</li>
				${p.map(a=>`<li>${a}</li>`).join("")}
			</ul>
		`):w.style.display="none"}function cr(){var a,l;const w=document.getElementById("btn-convert-stt");if(!w)return;const A=document.getElementById("file-left"),o=document.getElementById("file-right"),N=document.querySelectorAll(".mapping-item").length>0,p=Ft&&qt&&((a=A==null?void 0:A.files)==null?void 0:a[0])&&((l=o==null?void 0:o.files)==null?void 0:l[0])&&N;w.disabled=!p}async function wi(w){var u,m;if(!Ft||!qt)return;const A=document.getElementById("file-left"),o=document.getElementById("file-right"),N=(u=A==null?void 0:A.files)==null?void 0:u[0],p=(m=o==null?void 0:o.files)==null?void 0:m[0];if(!N||!p){H("Missing required files","err");return}const a=[],l=document.querySelectorAll(".mapping-item");for(let r=0;r<l.length;r++){const T=l[r],k=T.querySelector(".stt-activity-select"),v=T.querySelector(".uhabits-habit-select"),c=T.querySelector(".min-duration-input"),b=parseInt(k.value),f=parseInt(v.value),_=c&&parseInt(c.value)||0;b&&f&&a.push({sttTypeId:b,uhabitsHabitId:f,minDuration:_})}if(a.length===0){H("No valid mappings configured","err");return}try{const r=document.getElementById("btn-convert-stt");r&&(r.disabled=!0),H("Starting conversion...","info");const T=await _i(N,p,a,w);dr(T,"uhabits_with_stt.backup",null),H(" Conversion complete! Download started.","info")}catch(r){H(`Conversion failed: ${r.message}`,"err"),console.error(r)}finally{const r=document.getElementById("btn-convert-stt");r&&(r.disabled=!1)}}let He;function Zr(w){return w==="merge"||w==="convert"}window.onload=async()=>{H("Initializing SQL.js...");try{He=await ai(),H("SQL.js ready.")}catch(w){H("Error loading SQL.js: "+(w.message||w.toString()),"err")}rn(),ki(),yi(He)};const Ei={"action-newpipe-libretube-merge":["merge"],"action-newpipe-libretube-convert":["convert"],"action-stt-uhabits-fill":["stt"],"global-options":["convert","merge"],"main-file-area":["convert","merge","stt"]};function rn(){const w=document.querySelector('input[name="mode"]:checked'),A=w?w.value:"convert",o=document.getElementById("action-newpipe-libretube-merge"),N=document.getElementById("action-newpipe-libretube-convert"),p=document.getElementById("action-stt-uhabits-fill"),a=document.getElementById("global-options"),l=document.getElementById("main-file-area");if(!o||!N||!p||!a||!l)return;for(const[c,b]of Object.entries(Ei)){const f=document.getElementById(c);f&&(f.style.display=b.includes(A)?"":"none")}document.querySelectorAll(".zone-title, .zone-hint").forEach(c=>{const b=c.getAttribute(`data-${A}`);b&&(c.innerHTML=b)});const u=window.prevMode,m=Zr(u),r=Zr(A),T=u&&m!==r,k=document.getElementById("file-left"),v=document.getElementById("file-right");if(k){const c=k.getAttribute(`data-${A}`);c&&(k.accept=c),T&&(k.value="",k.dispatchEvent(new Event("change",{bubbles:!0})))}if(v){const c=v.getAttribute(`data-${A}`);c&&(v.accept=c),T&&(v.value="",v.dispatchEvent(new Event("change",{bubbles:!0})))}window.prevMode=A}async function nn(w){var u,m;const A=document.querySelector('input[name="mode"]:checked'),o=A?A.value:"convert",N=(u=document.getElementById("file-left").files)==null?void 0:u[0],p=(m=document.getElementById("file-right").files)==null?void 0:m[0],a=N,l=p;if(o==="merge"&&(!N||!p))return H("Merge mode requires BOTH files.","err");if(o==="convert"){if(w==="to_newpipe"&&!p)return H("Missing LibreTube source file.","err");if(w==="to_libretube"&&!N)return H("Missing NewPipe source file.","err")}try{document.querySelectorAll(".controls button").forEach(c=>c.disabled=!0);const r=document.getElementById("playlist-behavior"),T=r?r.value:void 0,k=document.getElementById("include-watch-history"),v=k?k.checked:!0;w==="to_newpipe"?await di(a,l,o,He,T):await fi(a,l,o,He,T,v)}catch(r){H(`FATAL ERROR: ${r.message||r.toString()||"An unknown error occurred"}`,"err"),r.stack?H(`Stack Trace: ${r.stack}`,"err"):H(`Error Object: ${r.toString()}`,"err"),console.error(r)}finally{document.querySelectorAll(".controls button").forEach(r=>r.disabled=!1)}}window.processBackup=nn;window.updateUI=rn;window.addEventListener("DOMContentLoaded",()=>{const w=document.getElementById("btn-merge"),A=document.getElementById("merge-direction"),o=document.getElementById("playlist-behavior");w&&A&&o&&(o.value=A.checked?"merge_np_precedence":"merge_lt_precedence",A.addEventListener("change",()=>{A.checked?o.value="merge_np_precedence":o.value="merge_lt_precedence"}),w.addEventListener("click",async()=>{const N=A.checked?"to_libretube":"to_newpipe";await nn(N)}))});function ki(){document.querySelectorAll(".drop-zone").forEach(w=>{const A=w.querySelector('input[type="file"]'),o=w.querySelector(".file-name"),N=w.querySelector(".clear-file");A&&(w.addEventListener("click",p=>{p.target===A||p.target===N||A.click()}),w.addEventListener("keydown",p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),A.click())}),w.addEventListener("dragover",p=>{p.preventDefault(),w.classList.add("active")}),w.addEventListener("dragleave",()=>{w.classList.remove("active")}),w.addEventListener("drop",p=>{p.preventDefault(),w.classList.remove("active");const a=p.dataTransfer&&p.dataTransfer.files;if(a&&a.length)try{const l=new DataTransfer;for(let u=0;u<a.length;u++)l.items.add(a[u]);A.files=l.files,A.dispatchEvent(new Event("change",{bubbles:!0}))}catch(l){console.warn("Could not set input.files programmatically",l)}}),A.addEventListener("change",()=>{const p=A.files&&A.files[0];if(p){const a=document.querySelector('input[name="mode"]:checked'),l=a?a.value:"convert",u=A.getAttribute(`data-${l}`);if(u){const m=u.split(",").map(k=>k.trim().toLowerCase()),r=p.name.toLowerCase();if(!m.some(k=>r.endsWith(k))){H(`Invalid file type. Expected: ${m.join(", ")}`,"err"),A.value="",o&&(o.textContent=""),N&&(N.style.display="none");return}}}o&&(o.textContent=p?p.name:""),N&&(N.style.display=p?"flex":"none")}),N&&N.addEventListener("click",p=>{p.stopPropagation(),A.value="",A.dispatchEvent(new Event("change",{bubbles:!0}))}))})}
//# sourceMappingURL=index-DnQ5JkNo.js.map

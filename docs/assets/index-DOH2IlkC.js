var $n=Object.defineProperty;var Hn=(v,A,o)=>A in v?$n(v,A,{enumerable:!0,configurable:!0,writable:!0,value:o}):v[A]=o;var oe=(v,A,o)=>Hn(v,typeof A!="symbol"?A+"":A,o);(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))N(p);new MutationObserver(p=>{for(const a of p)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&N(u)}).observe(document,{childList:!0,subtree:!0});function o(p){const a={};return p.integrity&&(a.integrity=p.integrity),p.referrerPolicy&&(a.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?a.credentials="include":p.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function N(p){if(p.ep)return;p.ep=!0;const a=o(p);fetch(p.href,a)}})();function Gn(v){return A=>{customElements.define(v,A)}}function te(v={type:String}){return function(A,o){const N=A.constructor;N.observedAttributes||(N.observedAttributes=[]);const p=v.attribute||o.toLowerCase();N.observedAttributes.includes(p)||N.observedAttributes.push(p);const a=Symbol(o);Object.defineProperty(A,o,{get(){return this[a]},set(u){const l=this[a];v.type===Boolean?this[a]=u===""||u==="true"||u===!0:this[a]=u,this.requestUpdate&&this.requestUpdate(o,l,this[a])},enumerable:!0,configurable:!0})}}function Zn(){return function(v,A){const o=Symbol(A);Object.defineProperty(v,A,{get(){return this[o]},set(N){const p=this[o];this[o]=N,this.requestUpdate&&this.requestUpdate(A,p,N)},enumerable:!0,configurable:!0})}}function Yn(v){if(!v||typeof v!="object"||!("date"in v)||!("count"in v))return!1;const A=v,o=new Date(A.date);return!(isNaN(o.getTime())||typeof A.count!="number"||A.count<0)}const Ie={default:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],green:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],red:["#ebedf0","#ffcdd2","#ef5350","#e53935","#b71c1c"],blue:["#ebedf0","#bbdefb","#64b5f6","#1e88e5","#0d47a1"],yellow:["#ebedf0","#fff9c4","#ffee58","#fdd835","#f57f17"],purple:["#ebedf0","#e1bee7","#ab47bc","#8e24aa","#4a148c"]},Xn=v=>v in Ie&&v!=="default",Kn=`
  <style>
    :host {
      display: inline-block;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
    }

    /* Dark mode styles */
    :host([dark-mode]) {
      color: #c9d1d9;
      background-color: transparent;
    }

    .container {
      display: inline-grid;
      grid-template-rows: auto 1fr;
    }

    .months {
      display: flex;
      padding-left: 32px;
      font-size: 12px;
      color: #767676;
      height: 20px;
    }

    :host([dark-mode]) .months {
      color: #8b949e;
    }

    .months-spacer {
      width: 30px;
    }

    .months-container {
      display: flex;
      justify-content: space-between;
      flex: 1;
    }

    .months span {
      padding: 0 4px;
    }

    .grid-wrapper {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 4px;
    }

    .weekdays {
      display: grid;
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
      text-align: right;
      padding-left: 6px;
      padding-right: 2px;
      font-size: 12px;
      color: #767676;
      margin-top: -1px;
      height: calc(7 * 10px + 6 * 2px);
    }

    :host([dark-mode]) .weekdays {
      color: #8b949e;
    }

    .weekdays div {
      height: 10px;
      line-height: 10px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(var(--grid-columns), 1fr);
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
    }

    .cell {
      width: 10px;
      height: 10px;
      border-radius: 2px;
    }
  </style>
`,Vn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],jr={mondayStart:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],sundayStart:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},ge={light:"#ebedf0",dark:"#161b22"},$e=v=>`${v.getFullYear()}-${(v.getMonth()+1).toString().padStart(2,"0")}-${v.getDate().toString().padStart(2,"0")}`;class Qn{createMonthLabels(A,o){const N=[],p=new Date(A);for(p.setDate(1);p<=o;)N.push(Vn[p.getMonth()]),p.setMonth(p.getMonth()+1);return`
            <div class="months-container">
                ${N.map(a=>`<span>${a}</span>`).join("")}
            </div>
        `}createWeekLabels(A,o=[0,1,2,3,4,5,6]){return`
            <div class="weekdays">
                ${(A?jr.mondayStart:jr.sundayStart).map((N,p)=>`<div>${o.includes(p)?N:""}</div>`).join(`
`)}
            </div>
        `}getWeeksBetweenDates(A,o){const N=Math.abs(o.getTime()-A.getTime());return Math.ceil(N/6048e5)}defaultTitleFormatter(A,o,N){const p=o===1?"activity":"activities";return`${A.toDateString()}: ${o} ${p}`}createGridCells(A,o,N,p,a,u,l,m){let r="";const w=u?5:7,E=new Date(N),k=new Date(o);k.setHours(0,0,0,0);let c=u?5-N.getDay():7-N.getDay();l&&(c+=1),E.setDate(E.getDate()+c);const y=new Date(o),h=l?(o.getDay()||7)-1:o.getDay();h!==0&&y.setDate(o.getDate()-h);const _=this.getWeeksBetweenDates(E,o);for(let f=0;f<w;f++){const S=f>4;if(!(u&&S))for(let R=0;R<_;R++){const x=new Date(y);x.setDate(x.getDate()+f+R*7),x.setHours(0,0,0,0);const O=$e(x),z=A[O];if(x<k)r+=`
                        <div class="cell" 
                            style="background-color: transparent">
                        </div>`;else if(x<=N)if(z){const B=m?m(x,z.count,z.id):this.defaultTitleFormatter(x,z.count,z.id);r+=`
                            <div class="cell" 
                                style="background-color: ${p[z.level]||a}"
                                title="${B}"
                                data-date="${O}"
                                data-count="${z.count}"
            					${z.id?`cell-id="${z.id}"`:""}>
                            </div>`}else{const B=m?m(x,0):this.defaultTitleFormatter(x,0);r+=`
                            <div class="cell" 
                                style="background-color: ${a}"
                                title="${B}"
                                data-date="${O}"
                                data-count="0">
                            </div>`}else x<=E&&(r+=`
                        <div class="cell" 
                            style="background-color: transparent">
                        </div>`)}}return r}render(A,o,N,p){const a=new Date(N);let u=p.skipWeekends?5-N.getDay():7-N.getDay();p.startWeekOnMonday&&(u+=1),a.setDate(a.getDate()+u);const l=this.getWeeksBetweenDates(a,o),m=this.createMonthLabels(o,N),r=this.createWeekLabels(p.startWeekOnMonday,p.startWeekOnMonday?[0,2,4]:[1,3,5]),w=this.createGridCells(A,o,N,p.colors,p.emptyColor,p.skipWeekends,p.startWeekOnMonday,p.titleFormatter);return{html:`
            <div class="container">
                <div class="months">${m}</div>
                <div class="grid-wrapper">
                    ${r}
                    <div class="grid">
                        ${w}
                    </div>
                </div>
            </div>
        `,numOfWeeks:l}}}function Jn(v){return new CustomEvent("cell-click",{detail:v,bubbles:!0,composed:!0})}var ti=Object.defineProperty,ei=Object.getOwnPropertyDescriptor,Xt=(v,A,o,N)=>{for(var p=N>1?void 0:N?ei(A,o):A,a=v.length-1,u;a>=0;a--)(u=v[a])&&(p=(N?u(A,o,p):u(p))||p);return N&&p&&ti(A,o,p),p};let Gt=class extends HTMLElement{constructor(){super(),this.gridRenderer=new Qn,this._data=[],this._colors=Ie.default,this._colorTheme=null,this._darkMode=!1,this._emptyColor=this._darkMode?ge.dark:ge.light,this._skipWeekends=!1,this._startWeekOnMonday=!1,this._endDate=new Date,this._titleFormatter=null,this.cells={},this.attachShadow({mode:"open"}),this._startDate=null}set data(v){this.validateActivityData(v)&&(this._data=v,this.updateGrid())}get data(){return this._data}set colors(v){if(!v||!Array.isArray(v)||v.length===0){console.warn("Invalid or empty colors array provided. Using default theme."),this._colors=Ie.default,this.updateGrid();return}const A=v.filter(o=>!this.validateColor(o));if(A.length>0){console.warn(`Invalid colors found when trying to set color theme: ${A.join(", ")}. Using default theme.`),this._colors=Ie.default,this.updateGrid();return}this._colorTheme||(this._colors=v,this.updateGrid())}get colors(){return this._colorTheme?Ie[this._colorTheme]:this._colors}set colorTheme(v){v?Xn(v)?this._colorTheme=v:(console.warn(`Invalid color theme "${v}". Using default theme.`),this._colorTheme=null):this._colorTheme=null,this.updateGrid()}get colorTheme(){return this._colorTheme||""}set darkMode(v){this._darkMode=v,this.emptyColor=v?ge.dark:ge.light,this.updateGrid()}get darkMode(){return this._darkMode}set emptyColor(v){if(v===null||!this.validateColor(v)){this._emptyColor=this._darkMode?ge.dark:ge.light;return}this._emptyColor=v,this.updateGrid()}get emptyColor(){return this._emptyColor}set skipWeekends(v){this._skipWeekends=v,v&&(this.startWeekOnMonday=!0),this.updateGrid()}get skipWeekends(){return this._skipWeekends}set startWeekOnMonday(v){this._startWeekOnMonday=this.skipWeekends?!0:v,this.updateGrid()}get startWeekOnMonday(){return this._startWeekOnMonday}set endDate(v){const A=v?new Date(v):new Date;isNaN(A.getTime())?(console.warn("Invalid end-date provided. Using current date instead."),this._endDate=new Date):this._endDate=A,this.updateGrid()}get endDate(){return $e(this._endDate)}set startDate(v){const A=v?new Date(v):null;A&&!isNaN(A.getTime())?A>this._endDate?(console.warn("Start date cannot be after end date. Using one year before end date instead."),this._startDate=this.createDefaultStartDate()):this._startDate=A:this._startDate||(console.warn("Invalid start-date provided. Using one year before end date instead."),this._startDate=this.createDefaultStartDate()),this.isConnected&&this.updateGrid()}get startDate(){return this._startDate?$e(this._startDate):$e(this.createDefaultStartDate())}set titleFormatter(v){this._titleFormatter=v,this.updateGrid()}get titleFormatter(){return this._titleFormatter}connectedCallback(){this._startDate||(this._startDate=this.createDefaultStartDate()),this.updateGrid()}attributeChangedCallback(v,A,o){const N=v.replace(/-([a-z])/g,p=>p[1].toUpperCase());if(this[N]!==void 0){const p=this[N];if(typeof p=="boolean")this[N]=o!==null;else if(typeof p=="number")this[N]=Number(o);else if(Array.isArray(p))try{this[N]=JSON.parse(o||"[]")}catch(a){console.warn(`Invalid array value for ${v}:`,a)}else this[N]=o}}static get observedAttributes(){return["start-week-on-monday","skip-weekends","data","colors","color-theme","empty-color","max-level","end-date","start-date","dark-mode"]}createDefaultStartDate(){const v=new Date(this._endDate);v.setFullYear(v.getFullYear()-1);const A=this.startWeekOnMonday?(v.getDay()||7)-1:v.getDay();return A!==0&&v.setDate(v.getDate()-A),v}generateGridCells(){const v={};return this.data.forEach(A=>{v[A.date]={date:new Date(A.date),count:A.count,level:this.calculateLevel(A.count),ignore:!1,id:A.id}}),v}validateActivityData(v){if(!v||!Array.isArray(v))return console.warn("Invalid activity data: must be an array. Using empty array instead."),this._data=[],!1;const A=v.filter(o=>!Yn(o));return A.length>0&&console.warn("Invalid items found in activity data. They will be filtered out:",A),!0}validateColor(v){return CSS.supports("color",v)}calculateLevel(v){if(v===0)return 0;const A=this.colors.length-1,o=Math.max(...this.data.map(N=>N.count));return Math.ceil(v/o*A)}updateGrid(){if(!this.shadowRoot)return;this.cells=this.generateGridCells(),this._startDate||(this._startDate=this.createDefaultStartDate());const{html:v,numOfWeeks:A}=this.gridRenderer.render(this.cells,this._startDate,this._endDate,{colors:this.colors,emptyColor:this.emptyColor,skipWeekends:this.skipWeekends,startWeekOnMonday:this.startWeekOnMonday,titleFormatter:this.titleFormatter});this.style.setProperty("--grid-columns",A.toString()),this.shadowRoot.innerHTML=`${Kn}${v}`,this.attachEventListeners()}attachEventListeners(){this.shadowRoot&&this.shadowRoot.querySelectorAll(".cell[data-date]").forEach(v=>{v.addEventListener("click",A=>{const o=v.getAttribute("data-date"),N=parseInt(v.getAttribute("data-count")||"0",10),p=v.getAttribute("cell-id")||void 0;o&&this.dispatchEvent(Jn({date:o,count:N,id:p}))})})}};Xt([te({type:Array})],Gt.prototype,"data",1);Xt([te({type:Array})],Gt.prototype,"colors",1);Xt([te({type:String,attribute:"color-theme"})],Gt.prototype,"colorTheme",1);Xt([te({type:Boolean,attribute:"dark-mode"})],Gt.prototype,"darkMode",1);Xt([te({type:String,attribute:"empty-color"})],Gt.prototype,"emptyColor",1);Xt([te({type:Boolean})],Gt.prototype,"skipWeekends",1);Xt([te({type:Boolean})],Gt.prototype,"startWeekOnMonday",1);Xt([te({type:String,attribute:"end-date"})],Gt.prototype,"endDate",1);Xt([te({type:String,attribute:"start-date"})],Gt.prototype,"startDate",1);Xt([Zn()],Gt.prototype,"cells",2);Gt=Xt([Gn("activity-grid")],Gt);function Y(v,A="info"){const o=document.getElementById("debug-console");if(!o)return;const N=document.createElement("div");N.textContent=`[${new Date().toLocaleTimeString()}] ${v}`,A==="err"?N.className="log-err":A==="warn"?N.className="log-warn":A==="schema"?N.className="log-schema":N.className="log-info",o.appendChild(N),o.scrollTop=o.scrollHeight}var je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xr(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}function ri(v){if(v.__esModule)return v;var A=v.default;if(typeof A=="function"){var o=function N(){return this instanceof N?Reflect.construct(A,arguments,this.constructor):A.apply(this,arguments)};o.prototype=A.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(v).forEach(function(N){var p=Object.getOwnPropertyDescriptor(v,N);Object.defineProperty(o,N,p.get?p:{enumerable:!0,get:function(){return v[N]}})}),o}var Kr={exports:{}};const ni={},ii=Object.freeze(Object.defineProperty({__proto__:null,default:ni},Symbol.toStringTag,{value:"Module"})),qr=ri(ii);(function(v,A){var o=void 0,N=function(p){return o||(o=new Promise(function(a,u){var l=typeof p<"u"?p:{},m=l.onAbort;l.onAbort=function(t){u(new Error(t)),m&&m(t)},l.postRun=l.postRun||[],l.postRun.push(function(){a(l)}),v=void 0;var r;r||(r=typeof l<"u"?l:{});var w=typeof window=="object",E=typeof WorkerGlobalScope<"u",k=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";r.onRuntimeInitialized=function(){function t(P,Q){switch(typeof Q){case"boolean":qn(P,Q?1:0);break;case"number":Un(P,Q);break;case"string":Mn(P,Q,-1,-1);break;case"object":if(Q===null)Fr(P);else if(Q.length!=null){var ct=Pe(Q,Fe);jn(P,ct,Q.length,-1),Ue(ct)}else Me(P,"Wrong API use : tried to return a value of an unknown type ("+Q+").",-1);break;default:Fr(P)}}function e(P,Q){for(var ct=[],mt=0;mt<P;mt+=1){var yt=Rt(Q+4*mt,"i32"),kt=Ln(yt);if(kt===1||kt===2)yt=Pn(yt);else if(kt===3)yt=zn(yt);else if(kt===4){kt=yt,yt=Bn(kt),kt=Fn(kt);for(var Zt=new Uint8Array(yt),$t=0;$t<yt;$t+=1)Zt[$t]=$[kt+$t];yt=Zt}else yt=null;ct.push(yt)}return ct}function i(P,Q){this.Qa=P,this.db=Q,this.Oa=1,this.lb=[]}function d(P,Q){if(this.db=Q,Q=dt(P)+1,this.eb=sr(Q),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Et(P,K,this.eb,Q),this.kb=this.eb,this.Za=this.pb=null}function I(P){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),P!=null){var Q=this.filename,ct="/",mt=Q;if(ct&&(ct=typeof ct=="string"?ct:Ze(ct),mt=Q?L(ct+"/"+Q):ct),Q=me(!0,!0),mt=cn(mt,Q),P){if(typeof P=="string"){ct=Array(P.length);for(var yt=0,kt=P.length;yt<kt;++yt)ct[yt]=P.charCodeAt(yt);P=ct}De(mt,Q|146),ct=ye(mt,577),Ar(ct,P,0,P.length,0),Je(ct),De(mt,Q)}}this.handleError(ft(this.filename,U)),this.db=Rt(U,"i32"),Ur(this.db),this.fb={},this.Sa={}}var U=ae(4),G=r.cwrap,ft=G("sqlite3_open","number",["string","number"]),vt=G("sqlite3_close_v2","number",["number"]),bt=G("sqlite3_exec","number",["number","string","number","number","number"]),Ct=G("sqlite3_changes","number",["number"]),Pt=G("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Cr=G("sqlite3_sql","string",["number"]),yn=G("sqlite3_normalized_sql","string",["number"]),Dr=G("sqlite3_prepare_v2","number",["number","number","number","number","number"]),gn=G("sqlite3_bind_text","number",["number","number","number","number","number"]),Lr=G("sqlite3_bind_blob","number",["number","number","number","number","number"]),bn=G("sqlite3_bind_double","number",["number","number","number"]),vn=G("sqlite3_bind_int","number",["number","number","number"]),wn=G("sqlite3_bind_parameter_index","number",["number","string"]),En=G("sqlite3_step","number",["number"]),Sn=G("sqlite3_errmsg","string",["number"]),kn=G("sqlite3_column_count","number",["number"]),Tn=G("sqlite3_data_count","number",["number"]),Nn=G("sqlite3_column_double","number",["number","number"]),Br=G("sqlite3_column_text","string",["number","number"]),An=G("sqlite3_column_blob","number",["number","number"]),In=G("sqlite3_column_bytes","number",["number","number"]),Rn=G("sqlite3_column_type","number",["number","number"]),xn=G("sqlite3_column_name","string",["number","number"]),On=G("sqlite3_reset","number",["number"]),Cn=G("sqlite3_clear_bindings","number",["number"]),Dn=G("sqlite3_finalize","number",["number"]),zr=G("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Ln=G("sqlite3_value_type","number",["number"]),Bn=G("sqlite3_value_bytes","number",["number"]),zn=G("sqlite3_value_text","string",["number"]),Fn=G("sqlite3_value_blob","number",["number"]),Pn=G("sqlite3_value_double","number",["number"]),Un=G("sqlite3_result_double","",["number","number"]),Fr=G("sqlite3_result_null","",["number"]),Mn=G("sqlite3_result_text","",["number","string","number","number"]),jn=G("sqlite3_result_blob","",["number","number","number","number"]),qn=G("sqlite3_result_int","",["number","number"]),Me=G("sqlite3_result_error","",["number","string","number"]),Pr=G("sqlite3_aggregate_context","number",["number","number"]),Ur=G("RegisterExtensionFunctions","number",["number"]),Mr=G("sqlite3_update_hook","number",["number","number","number"]);i.prototype.bind=function(P){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(P)?this.Cb(P):P!=null&&typeof P=="object"?this.Db(P):!0},i.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var P=En(this.Qa);switch(P){case 100:return!0;case 101:return!1;default:throw this.db.handleError(P)}},i.prototype.wb=function(P){return P==null&&(P=this.Oa,this.Oa+=1),Nn(this.Qa,P)},i.prototype.Gb=function(P){if(P==null&&(P=this.Oa,this.Oa+=1),P=Br(this.Qa,P),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(P)},i.prototype.Hb=function(P){return P==null&&(P=this.Oa,this.Oa+=1),Br(this.Qa,P)},i.prototype.getBlob=function(P){P==null&&(P=this.Oa,this.Oa+=1);var Q=In(this.Qa,P);P=An(this.Qa,P);for(var ct=new Uint8Array(Q),mt=0;mt<Q;mt+=1)ct[mt]=$[P+mt];return ct},i.prototype.get=function(P,Q){Q=Q||{},P!=null&&this.bind(P)&&this.step(),P=[];for(var ct=Tn(this.Qa),mt=0;mt<ct;mt+=1)switch(Rn(this.Qa,mt)){case 1:var yt=Q.useBigInt?this.Gb(mt):this.wb(mt);P.push(yt);break;case 2:P.push(this.wb(mt));break;case 3:P.push(this.Hb(mt));break;case 4:P.push(this.getBlob(mt));break;default:P.push(null)}return P},i.prototype.getColumnNames=function(){for(var P=[],Q=kn(this.Qa),ct=0;ct<Q;ct+=1)P.push(xn(this.Qa,ct));return P},i.prototype.getAsObject=function(P,Q){P=this.get(P,Q),Q=this.getColumnNames();for(var ct={},mt=0;mt<Q.length;mt+=1)ct[Q[mt]]=P[mt];return ct},i.prototype.getSQL=function(){return Cr(this.Qa)},i.prototype.getNormalizedSQL=function(){return yn(this.Qa)},i.prototype.run=function(P){return P!=null&&this.bind(P),this.step(),this.reset()},i.prototype.sb=function(P,Q){Q==null&&(Q=this.Oa,this.Oa+=1),P=wt(P);var ct=Pe(P,Fe);this.lb.push(ct),this.db.handleError(gn(this.Qa,Q,ct,P.length-1,0))},i.prototype.Bb=function(P,Q){Q==null&&(Q=this.Oa,this.Oa+=1);var ct=Pe(P,Fe);this.lb.push(ct),this.db.handleError(Lr(this.Qa,Q,ct,P.length,0))},i.prototype.rb=function(P,Q){Q==null&&(Q=this.Oa,this.Oa+=1),this.db.handleError((P===(P|0)?vn:bn)(this.Qa,Q,P))},i.prototype.Eb=function(P){P==null&&(P=this.Oa,this.Oa+=1),Lr(this.Qa,P,0,0,0)},i.prototype.tb=function(P,Q){switch(Q==null&&(Q=this.Oa,this.Oa+=1),typeof P){case"string":this.sb(P,Q);return;case"number":this.rb(P,Q);return;case"bigint":this.sb(P.toString(),Q);return;case"boolean":this.rb(P+0,Q);return;case"object":if(P===null){this.Eb(Q);return}if(P.length!=null){this.Bb(P,Q);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+P+")."},i.prototype.Db=function(P){var Q=this;return Object.keys(P).forEach(function(ct){var mt=wn(Q.Qa,ct);mt!==0&&Q.tb(P[ct],mt)}),!0},i.prototype.Cb=function(P){for(var Q=0;Q<P.length;Q+=1)this.tb(P[Q],Q+1);return!0},i.prototype.reset=function(){return this.freemem(),Cn(this.Qa)===0&&On(this.Qa)===0},i.prototype.freemem=function(){for(var P;(P=this.lb.pop())!==void 0;)Ue(P)},i.prototype.free=function(){this.freemem();var P=Dn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,P},d.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var P=Ne(),Q=ae(4);n(U),n(Q);try{this.db.handleError(Dr(this.db.db,this.kb,-1,U,Q)),this.kb=Rt(Q,"i32");var ct=Rt(U,"i32");return ct===0?(this.mb(),{done:!0}):(this.Za=new i(ct,this.db),this.db.fb[ct]=this.Za,{value:this.Za,done:!1})}catch(mt){throw this.pb=T(this.kb),this.mb(),mt}finally{Te(P)}},d.prototype.mb=function(){Ue(this.eb),this.eb=null},d.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:T(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(d.prototype[Symbol.iterator]=function(){return this}),I.prototype.run=function(P,Q){if(!this.db)throw"Database closed";if(Q){P=this.prepare(P,Q);try{P.step()}finally{P.free()}}else this.handleError(bt(this.db,P,0,0,U));return this},I.prototype.exec=function(P,Q,ct){if(!this.db)throw"Database closed";var mt=Ne(),yt=null;try{var kt=nr(P),Zt=ae(4);for(P=[];Rt(kt,"i8")!==0;){n(U),n(Zt),this.handleError(Dr(this.db,kt,-1,U,Zt));var $t=Rt(U,"i32");if(kt=Rt(Zt,"i32"),$t!==0){var jt=null;for(yt=new i($t,this),Q!=null&&yt.bind(Q);yt.step();)jt===null&&(jt={columns:yt.getColumnNames(),values:[]},P.push(jt)),jt.values.push(yt.get(null,ct));yt.free()}}return P}catch(Yt){throw yt&&yt.free(),Yt}finally{Te(mt)}},I.prototype.each=function(P,Q,ct,mt,yt){typeof Q=="function"&&(mt=ct,ct=Q,Q=void 0),P=this.prepare(P,Q);try{for(;P.step();)ct(P.getAsObject(null,yt))}finally{P.free()}if(typeof mt=="function")return mt()},I.prototype.prepare=function(P,Q){if(n(U),this.handleError(Pt(this.db,P,-1,U,0)),P=Rt(U,"i32"),P===0)throw"Nothing to prepare";var ct=new i(P,this);return Q!=null&&ct.bind(Q),this.fb[P]=ct},I.prototype.iterateStatements=function(P){return new d(P,this)},I.prototype.export=function(){Object.values(this.fb).forEach(function(Q){Q.free()}),Object.values(this.Sa).forEach(se),this.Sa={},this.handleError(vt(this.db));var P=dn(this.filename);return this.handleError(ft(this.filename,U)),this.db=Rt(U,"i32"),Ur(this.db),P},I.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(P){P.free()}),Object.values(this.Sa).forEach(se),this.Sa={},this.Ya&&(se(this.Ya),this.Ya=void 0),this.handleError(vt(this.db)),Er("/"+this.filename),this.db=null)},I.prototype.handleError=function(P){if(P===0)return null;throw P=Sn(this.db),Error(P)},I.prototype.getRowsModified=function(){return Ct(this.db)},I.prototype.create_function=function(P,Q){Object.prototype.hasOwnProperty.call(this.Sa,P)&&(se(this.Sa[P]),delete this.Sa[P]);var ct=ke(function(mt,yt,kt){yt=e(yt,kt);try{var Zt=Q.apply(null,yt)}catch($t){Me(mt,$t,-1);return}t(mt,Zt)},"viii");return this.Sa[P]=ct,this.handleError(zr(this.db,P,Q.length,1,0,ct,0,0,0)),this},I.prototype.create_aggregate=function(P,Q){var ct=Q.init||function(){return null},mt=Q.finalize||function(jt){return jt},yt=Q.step;if(!yt)throw"An aggregate function must have a step function in "+P;var kt={};Object.hasOwnProperty.call(this.Sa,P)&&(se(this.Sa[P]),delete this.Sa[P]),Q=P+"__finalize",Object.hasOwnProperty.call(this.Sa,Q)&&(se(this.Sa[Q]),delete this.Sa[Q]);var Zt=ke(function(jt,Yt,or){var pe=Pr(jt,1);Object.hasOwnProperty.call(kt,pe)||(kt[pe]=ct()),Yt=e(Yt,or),Yt=[kt[pe]].concat(Yt);try{kt[pe]=yt.apply(null,Yt)}catch(Wn){delete kt[pe],Me(jt,Wn,-1)}},"viii"),$t=ke(function(jt){var Yt=Pr(jt,1);try{var or=mt(kt[Yt])}catch(pe){delete kt[Yt],Me(jt,pe,-1);return}t(jt,or),delete kt[Yt]},"vi");return this.Sa[P]=Zt,this.Sa[Q]=$t,this.handleError(zr(this.db,P,yt.length-1,1,0,0,Zt,$t,0)),this},I.prototype.updateHook=function(P){this.Ya&&(Mr(this.db,0,0),se(this.Ya),this.Ya=void 0),P&&(this.Ya=ke(function(Q,ct,mt,yt,kt){switch(ct){case 18:Q="insert";break;case 23:Q="update";break;case 9:Q="delete";break;default:throw"unknown operationCode in updateHook callback: "+ct}if(mt=mt?j(K,mt):"",yt=yt?j(K,yt):"",kt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";P(Q,mt,yt,Number(kt))},"viiiij"),Mr(this.db,this.Ya,0))},r.Database=I};var c={...r},y="./this.program",h=(t,e)=>{throw e},_="",f,S;if(k){var R=qr;_=__dirname+"/",S=t=>(t=pt(t)?new URL(t):t,R.readFileSync(t)),f=async t=>(t=pt(t)?new URL(t):t,R.readFileSync(t,void 0)),!r.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),v.exports=r,h=(t,e)=>{throw process.exitCode=t,e}}else(w||E)&&(E?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),_=_.startsWith("blob:")?"":_.slice(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),E&&(S=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=async t=>{if(pt(t))return new Promise((i,d)=>{var I=new XMLHttpRequest;I.open("GET",t,!0),I.responseType="arraybuffer",I.onload=()=>{I.status==200||I.status==0&&I.response?i(I.response):d(I.status)},I.onerror=d,I.send(null)});var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw Error(e.status+" : "+e.url)});var x=r.print||console.log.bind(console),O=r.printErr||console.error.bind(console);Object.assign(r,c),c=null,r.thisProgram&&(y=r.thisProgram);var z=r.wasmBinary,B,W=!1,C,$,K,g,D,s,H,at,X,pt=t=>t.startsWith("file://");function tt(){var t=B.buffer;r.HEAP8=$=new Int8Array(t),r.HEAP16=g=new Int16Array(t),r.HEAPU8=K=new Uint8Array(t),r.HEAPU16=new Uint16Array(t),r.HEAP32=D=new Int32Array(t),r.HEAPU32=s=new Uint32Array(t),r.HEAPF32=H=new Float32Array(t),r.HEAPF64=X=new Float64Array(t),r.HEAP64=at=new BigInt64Array(t),r.HEAPU64=new BigUint64Array(t)}var lt=0,M=null;function F(t){var e;throw(e=r.onAbort)==null||e.call(r,t),t="Aborted("+t+")",O(t),W=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var ut;async function it(t){if(!z)try{var e=await f(t);return new Uint8Array(e)}catch{}if(t==ut&&z)t=new Uint8Array(z);else if(S)t=S(t);else throw"both async and sync fetching of the wasm failed";return t}async function et(t,e){try{var i=await it(t);return await WebAssembly.instantiate(i,e)}catch(d){O(`failed to asynchronously prepare wasm: ${d}`),F(d)}}async function Tt(t){var e=ut;if(!z&&typeof WebAssembly.instantiateStreaming=="function"&&!pt(e)&&!k)try{var i=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(i,t)}catch(d){O(`wasm streaming compile failed: ${d}`),O("falling back to ArrayBuffer instantiation")}return et(e,t)}class Nt{constructor(e){oe(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var gt=t=>{for(;0<t.length;)t.shift()(r)},St=[],Ot=[],At=()=>{var t=r.preRun.shift();Ot.unshift(t)};function Rt(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return $[t];case"i8":return $[t];case"i16":return g[t>>1];case"i32":return D[t>>2];case"i64":return at[t>>3];case"float":return H[t>>2];case"double":return X[t>>3];case"*":return s[t>>2];default:F(`invalid type for getValue: ${e}`)}}var Lt=r.noExitRuntime||!0;function n(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":$[t]=0;break;case"i8":$[t]=0;break;case"i16":g[t>>1]=0;break;case"i32":D[t>>2]=0;break;case"i64":at[t>>3]=BigInt(0);break;case"float":H[t>>2]=0;break;case"double":X[t>>3]=0;break;case"*":s[t>>2]=0;break;default:F(`invalid type for setValue: ${e}`)}}var Z=typeof TextDecoder<"u"?new TextDecoder:void 0,j=(t,e=0,i=NaN)=>{var d=e+i;for(i=e;t[i]&&!(i>=d);)++i;if(16<i-e&&t.buffer&&Z)return Z.decode(t.subarray(e,i));for(d="";e<i;){var I=t[e++];if(I&128){var U=t[e++]&63;if((I&224)==192)d+=String.fromCharCode((I&31)<<6|U);else{var G=t[e++]&63;I=(I&240)==224?(I&15)<<12|U<<6|G:(I&7)<<18|U<<12|G<<6|t[e++]&63,65536>I?d+=String.fromCharCode(I):(I-=65536,d+=String.fromCharCode(55296|I>>10,56320|I&1023))}}else d+=String.fromCharCode(I)}return d},T=(t,e)=>t?j(K,t,e):"",b=(t,e)=>{for(var i=0,d=t.length-1;0<=d;d--){var I=t[d];I==="."?t.splice(d,1):I===".."?(t.splice(d,1),i++):i&&(t.splice(d,1),i--)}if(e)for(;i;i--)t.unshift("..");return t},L=t=>{var e=t.charAt(0)==="/",i=t.slice(-1)==="/";return(t=b(t.split("/").filter(d=>!!d),!e).join("/"))||e||(t="."),t&&i&&(t+="/"),(e?"/":"")+t},V=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.slice(0,-1)),t+e)},J=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],q=()=>{if(k){var t=qr;return e=>t.randomFillSync(e)}return e=>crypto.getRandomValues(e)},rt=t=>{(rt=q())(t)},ot=(...t)=>{for(var e="",i=!1,d=t.length-1;-1<=d&&!i;d--){if(i=0<=d?t[d]:"/",typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,i=i.charAt(0)==="/"}return e=b(e.split("/").filter(I=>!!I),!i).join("/"),(i?"/":"")+e||"."},nt=[],dt=t=>{for(var e=0,i=0;i<t.length;++i){var d=t.charCodeAt(i);127>=d?e++:2047>=d?e+=2:55296<=d&&57343>=d?(e+=4,++i):e+=3}return e},Et=(t,e,i,d)=>{if(!(0<d))return 0;var I=i;d=i+d-1;for(var U=0;U<t.length;++U){var G=t.charCodeAt(U);if(55296<=G&&57343>=G){var ft=t.charCodeAt(++U);G=65536+((G&1023)<<10)|ft&1023}if(127>=G){if(i>=d)break;e[i++]=G}else{if(2047>=G){if(i+1>=d)break;e[i++]=192|G>>6}else{if(65535>=G){if(i+2>=d)break;e[i++]=224|G>>12}else{if(i+3>=d)break;e[i++]=240|G>>18,e[i++]=128|G>>12&63}e[i++]=128|G>>6&63}e[i++]=128|G&63}}return e[i]=0,i-I},wt=(t,e)=>{var i=Array(dt(t)+1);return t=Et(t,i,0,i.length),e&&(i.length=t),i},Bt=[];function ee(t,e){Bt[t]={input:[],output:[],cb:e},Ve(t,qt)}var qt={open(t){var e=Bt[t.node.rdev];if(!e)throw new st(43);t.tty=e,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,e,i,d){if(!t.tty||!t.tty.cb.xb)throw new st(60);for(var I=0,U=0;U<d;U++){try{var G=t.tty.cb.xb(t.tty)}catch{throw new st(29)}if(G===void 0&&I===0)throw new st(6);if(G==null)break;I++,e[i+U]=G}return I&&(t.node.atime=Date.now()),I},write(t,e,i,d){if(!t.tty||!t.tty.cb.qb)throw new st(60);try{for(var I=0;I<d;I++)t.tty.cb.qb(t.tty,e[i+I])}catch{throw new st(29)}return d&&(t.node.mtime=t.node.ctime=Date.now()),I}},ue={xb(){t:{if(!nt.length){var t=null;if(k){var e=Buffer.alloc(256),i=0,d=process.stdin.fd;try{i=R.readSync(d,e,0,256)}catch(I){if(I.toString().includes("EOF"))i=0;else throw I}0<i&&(t=e.slice(0,i).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break t}nt=wt(t,!0)}t=nt.shift()}return t},qb(t,e){e===null||e===10?(x(j(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(x(j(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},xt={qb(t,e){e===null||e===10?(O(j(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(O(j(t.output)),t.output=[])}},_t={Wa:null,Xa(){return _t.createNode(null,"/",16895,0)},createNode(t,e,i,d){if((i&61440)===24576||(i&61440)===4096)throw new st(63);return _t.Wa||(_t.Wa={dir:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,lookup:_t.La.lookup,hb:_t.La.hb,rename:_t.La.rename,unlink:_t.La.unlink,rmdir:_t.La.rmdir,readdir:_t.La.readdir,symlink:_t.La.symlink},stream:{Va:_t.Ma.Va}},file:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:{Va:_t.Ma.Va,read:_t.Ma.read,write:_t.Ma.write,ib:_t.Ma.ib,jb:_t.Ma.jb}},link:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,readlink:_t.La.readlink},stream:{}},ub:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:un}}),i=mr(t,e,i,d),Ft(i.mode)?(i.La=_t.Wa.dir.node,i.Ma=_t.Wa.dir.stream,i.Na={}):(i.mode&61440)===32768?(i.La=_t.Wa.file.node,i.Ma=_t.Wa.file.stream,i.Ra=0,i.Na=null):(i.mode&61440)===40960?(i.La=_t.Wa.link.node,i.Ma=_t.Wa.link.stream):(i.mode&61440)===8192&&(i.La=_t.Wa.ub.node,i.Ma=_t.Wa.ub.stream),i.atime=i.mtime=i.ctime=Date.now(),t&&(t.Na[e]=i,t.atime=t.mtime=t.ctime=i.atime),i},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Ft(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.atime),e.mtime=new Date(t.mtime),e.ctime=new Date(t.ctime),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},Ua(t,e){for(var i of["mode","atime","mtime","ctime"])e[i]!=null&&(t[i]=e[i]);e.size!==void 0&&(e=e.size,t.Ra!=e&&(e==0?(t.Na=null,t.Ra=0):(i=t.Na,t.Na=new Uint8Array(e),i&&t.Na.set(i.subarray(0,Math.min(e,t.Ra))),t.Ra=e)))},lookup(){throw _t.vb},hb(t,e,i,d){return _t.createNode(t,e,i,d)},rename(t,e,i){try{var d=de(e,i)}catch{}if(d){if(Ft(t.mode))for(var I in d.Na)throw new st(55);Xe(d)}delete t.parent.Na[t.name],e.Na[i]=t,t.name=i,e.ctime=e.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,e){delete t.Na[e],t.ctime=t.mtime=Date.now()},rmdir(t,e){var i=de(t,e),d;for(d in i.Na)throw new st(55);delete t.Na[e],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,e,i){return t=_t.createNode(t,e,41471,0),t.link=i,t},readlink(t){if((t.mode&61440)!==40960)throw new st(28);return t.link}},Ma:{read(t,e,i,d,I){var U=t.node.Na;if(I>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-I,d),8<t&&U.subarray)e.set(U.subarray(I,I+t),i);else for(d=0;d<t;d++)e[i+d]=U[I+d];return t},write(t,e,i,d,I,U){if(e.buffer===$.buffer&&(U=!1),!d)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(U)return t.Na=e.subarray(i,i+d),t.Ra=d;if(t.Ra===0&&I===0)return t.Na=e.slice(i,i+d),t.Ra=d;if(I+d<=t.Ra)return t.Na.set(e.subarray(i,i+d),I),d}U=I+d;var G=t.Na?t.Na.length:0;if(G>=U||(U=Math.max(U,G*(1048576>G?2:1.125)>>>0),G!=0&&(U=Math.max(U,256)),G=t.Na,t.Na=new Uint8Array(U),0<t.Ra&&t.Na.set(G.subarray(0,t.Ra),0)),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(i,i+d),I);else for(U=0;U<d;U++)t.Na[I+U]=e[i+U];return t.Ra=Math.max(t.Ra,I+d),d},Va(t,e,i){if(i===1?e+=t.position:i===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new st(28);return e},ib(t,e,i,d,I){if((t.node.mode&61440)!==32768)throw new st(43);if(t=t.node.Na,I&2||!t||t.buffer!==$.buffer){I=!0,d=65536*Math.ceil(e/65536);var U=xr(65536,d);if(U&&K.fill(0,U,U+d),d=U,!d)throw new st(48);t&&((0<i||i+e<t.length)&&(t.subarray?t=t.subarray(i,i+e):t=Array.prototype.slice.call(t,i,i+e)),$.set(t,d))}else I=!1,d=t.byteOffset;return{Kb:d,Ab:I}},jb(t,e,i,d){return _t.Ma.write(t,e,0,d,i,!1),0}}},me=(t,e)=>{var i=0;return t&&(i|=365),e&&(i|=146),i},Mt=null,ve={},re=[],Ge=1,Kt=null,we=!1,ne=!0,ce={},st=class{constructor(t){oe(this,"name","ErrnoError");this.Pa=t}},an=class{constructor(){oe(this,"gb",{});oe(this,"node",null)}get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},on=class{constructor(t,e,i,d){oe(this,"La",{});oe(this,"Ma",{});oe(this,"ab",null);t||(t=this),this.parent=t,this.Xa=t.Xa,this.id=Ge++,this.name=e,this.mode=i,this.rdev=d,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function Wt(t,e={}){if(!t)throw new st(44);e.nb??(e.nb=!0),t.charAt(0)==="/"||(t="//"+t);var i=0;t:for(;40>i;i++){t=t.split("/").filter(ft=>!!ft);for(var d=Mt,I="/",U=0;U<t.length;U++){var G=U===t.length-1;if(G&&e.parent)break;if(t[U]!==".")if(t[U]==="..")I=V(I),d=d.parent;else{I=L(I+"/"+t[U]);try{d=de(d,t[U])}catch(ft){if((ft==null?void 0:ft.Pa)===44&&G&&e.Jb)return{path:I};throw ft}if(!d.ab||G&&!e.nb||(d=d.ab.root),(d.mode&61440)===40960&&(!G||e.$a)){if(!d.La.readlink)throw new st(52);d=d.La.readlink(d),d.charAt(0)==="/"||(d=V(I)+"/"+d),t=d+"/"+t.slice(U+1).join("/");continue t}}}return{path:I,node:d}}throw new st(32)}function Ze(t){for(var e;;){if(t===t.parent)return t=t.Xa.zb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function Ye(t,e){for(var i=0,d=0;d<e.length;d++)i=(i<<5)-i+e.charCodeAt(d)|0;return(t+i>>>0)%Kt.length}function Xe(t){var e=Ye(t.parent.id,t.name);if(Kt[e]===t)Kt[e]=t.bb;else for(e=Kt[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function de(t,e){var i=Ft(t.mode)?(i=_e(t,"x"))?i:t.La.lookup?0:2:54;if(i)throw new st(i);for(i=Kt[Ye(t.id,e)];i;i=i.bb){var d=i.name;if(i.parent.id===t.id&&d===e)return i}return t.La.lookup(t,e)}function mr(t,e,i,d){return t=new on(t,e,i,d),e=Ye(t.parent.id,t.name),t.bb=Kt[e],Kt[e]=t}function Ft(t){return(t&61440)===16384}function _r(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function _e(t,e){if(ne)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function yr(t,e){if(!Ft(t.mode))return 54;try{return de(t,e),20}catch{}return _e(t,"wx")}function gr(t,e,i){try{var d=de(t,e)}catch(I){return I.Pa}if(t=_e(t,"wx"))return t;if(i){if(!Ft(d.mode))return 54;if(d===d.parent||Ze(d)==="/")return 10}else if(Ft(d.mode))return 31;return 0}function xe(t){if(!t)throw new st(63);return t}function zt(t){if(t=re[t],!t)throw new st(8);return t}function br(t,e=-1){if(t=Object.assign(new an,t),e==-1)t:{for(e=0;4096>=e;e++)if(!re[e])break t;throw new st(33)}return t.fd=e,re[e]=t}function ln(t,e=-1){var i,d;return t=br(t,e),(d=(i=t.Ma)==null?void 0:i.Rb)==null||d.call(i,t),t}function Ke(t,e,i){var d=t==null?void 0:t.Ma.Ua;t=d?t:e,d??(d=e.La.Ua),xe(d),d(t,i)}var un={open(t){var e,i;t.Ma=ve[t.node.rdev].Ma,(i=(e=t.Ma).open)==null||i.call(e,t)},Va(){throw new st(70)}};function Ve(t,e){ve[t]={Ma:e}}function vr(t,e){var i=e==="/";if(i&&Mt)throw new st(10);if(!i&&e){var d=Wt(e,{nb:!1});if(e=d.path,d=d.node,d.ab)throw new st(10);if(!Ft(d.mode))throw new st(54)}e={type:t,Wb:{},zb:e,Ib:[]},t=t.Xa(e),t.Xa=e,e.root=t,i?Mt=t:d&&(d.ab=e,d.Xa&&d.Xa.Ib.push(e))}function Oe(t,e,i){var d=Wt(t,{parent:!0}).node;if(t=J(t),!t)throw new st(28);if(t==="."||t==="..")throw new st(20);var I=yr(d,t);if(I)throw new st(I);if(!d.La.hb)throw new st(63);return d.La.hb(d,t,e,i)}function cn(t,e=438){return Oe(t,e&4095|32768,0)}function Vt(t,e=511){return Oe(t,e&1023|16384,0)}function Ce(t,e,i){typeof i>"u"&&(i=e,e=438),Oe(t,e|8192,i)}function Qe(t,e){if(!ot(t))throw new st(44);var i=Wt(e,{parent:!0}).node;if(!i)throw new st(44);e=J(e);var d=yr(i,e);if(d)throw new st(d);if(!i.La.symlink)throw new st(63);i.La.symlink(i,e,t)}function wr(t){var e=Wt(t,{parent:!0}).node;t=J(t);var i=de(e,t),d=gr(e,t,!0);if(d)throw new st(d);if(!e.La.rmdir)throw new st(63);if(i.ab)throw new st(10);e.La.rmdir(e,t),Xe(i)}function Er(t){var e=Wt(t,{parent:!0}).node;if(!e)throw new st(44);t=J(t);var i=de(e,t),d=gr(e,t,!1);if(d)throw new st(d);if(!e.La.unlink)throw new st(63);if(i.ab)throw new st(10);e.La.unlink(e,t),Xe(i)}function Ee(t,e){return t=Wt(t,{$a:!e}).node,xe(t.La.Ta)(t)}function Sr(t,e,i,d){Ke(t,e,{mode:i&4095|e.mode&-4096,ctime:Date.now(),Fb:d})}function De(t,e){t=typeof t=="string"?Wt(t,{$a:!0}).node:t,Sr(null,t,e)}function kr(t,e,i){if(Ft(e.mode))throw new st(31);if((e.mode&61440)!==32768)throw new st(28);var d=_e(e,"w");if(d)throw new st(d);Ke(t,e,{size:i,timestamp:Date.now()})}function ye(t,e,i=438){if(t==="")throw new st(44);if(typeof e=="string"){var d={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof d>"u")throw Error(`Unknown file open mode: ${e}`);e=d}if(i=e&64?i&4095|32768:0,typeof t=="object")d=t;else{var I=t.endsWith("/");t=Wt(t,{$a:!(e&131072),Jb:!0}),d=t.node,t=t.path}var U=!1;if(e&64)if(d){if(e&128)throw new st(20)}else{if(I)throw new st(31);d=Oe(t,i|511,0),U=!0}if(!d)throw new st(44);if((d.mode&61440)===8192&&(e&=-513),e&65536&&!Ft(d.mode))throw new st(54);if(!U&&(I=d?(d.mode&61440)===40960?32:Ft(d.mode)&&(_r(e)!=="r"||e&576)?31:_e(d,_r(e)):44))throw new st(I);return e&512&&!U&&(I=d,I=typeof I=="string"?Wt(I,{$a:!0}).node:I,kr(null,I,0)),e&=-131713,I=br({node:d,path:Ze(d),flags:e,seekable:!0,position:0,Ma:d.Ma,Lb:[],error:!1}),I.Ma.open&&I.Ma.open(I),U&&De(d,i&511),!r.logReadFiles||e&1||t in ce||(ce[t]=1),I}function Je(t){if(t.fd===null)throw new st(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{re[t.fd]=null}t.fd=null}function Tr(t,e,i){if(t.fd===null)throw new st(8);if(!t.seekable||!t.Ma.Va)throw new st(70);if(i!=0&&i!=1&&i!=2)throw new st(28);t.position=t.Ma.Va(t,e,i),t.Lb=[]}function Nr(t,e,i,d,I){if(0>d||0>I)throw new st(28);if(t.fd===null)throw new st(8);if((t.flags&2097155)===1)throw new st(8);if(Ft(t.node.mode))throw new st(31);if(!t.Ma.read)throw new st(28);var U=typeof I<"u";if(!U)I=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.read(t,e,i,d,I),U||(t.position+=e),e}function Ar(t,e,i,d,I){if(0>d||0>I)throw new st(28);if(t.fd===null)throw new st(8);if(!(t.flags&2097155))throw new st(8);if(Ft(t.node.mode))throw new st(31);if(!t.Ma.write)throw new st(28);t.seekable&&t.flags&1024&&Tr(t,0,2);var U=typeof I<"u";if(!U)I=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.write(t,e,i,d,I,void 0),U||(t.position+=e),e}function dn(t){var e,i=ye(t,i||0);t=Ee(t).size;var d=new Uint8Array(t);return Nr(i,d,0,t,0),e=d,Je(i),e}function ie(t,e,i){t=L("/dev/"+t);var d=me(!!e,!!i);ie.yb??(ie.yb=64);var I=ie.yb++<<8|0;Ve(I,{open(U){U.seekable=!1},close(){var U;(U=i==null?void 0:i.buffer)!=null&&U.length&&i(10)},read(U,G,ft,vt){for(var bt=0,Ct=0;Ct<vt;Ct++){try{var Pt=e()}catch{throw new st(29)}if(Pt===void 0&&bt===0)throw new st(6);if(Pt==null)break;bt++,G[ft+Ct]=Pt}return bt&&(U.node.atime=Date.now()),bt},write(U,G,ft,vt){for(var bt=0;bt<vt;bt++)try{i(G[ft+bt])}catch{throw new st(29)}return vt&&(U.node.mtime=U.node.ctime=Date.now()),bt}}),Ce(t,d,I)}var It={};function fe(t,e,i){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":zt(t).path,e.length==0){if(!i)throw new st(44);return t}return t+"/"+e}function Le(t,e){D[t>>2]=e.dev,D[t+4>>2]=e.mode,s[t+8>>2]=e.nlink,D[t+12>>2]=e.uid,D[t+16>>2]=e.gid,D[t+20>>2]=e.rdev,at[t+24>>3]=BigInt(e.size),D[t+32>>2]=4096,D[t+36>>2]=e.blocks;var i=e.atime.getTime(),d=e.mtime.getTime(),I=e.ctime.getTime();return at[t+40>>3]=BigInt(Math.floor(i/1e3)),s[t+48>>2]=i%1e3*1e6,at[t+56>>3]=BigInt(Math.floor(d/1e3)),s[t+64>>2]=d%1e3*1e6,at[t+72>>3]=BigInt(Math.floor(I/1e3)),s[t+80>>2]=I%1e3*1e6,at[t+88>>3]=BigInt(e.ino),0}var Be=void 0,ze=()=>{var t=D[+Be>>2];return Be+=4,t},tr=0,fn=[0,31,60,91,121,152,182,213,244,274,305,335],hn=[0,31,59,90,120,151,181,212,243,273,304,334],Se={},Ir=t=>{var e;C=t,Lt||0<tr||((e=r.onExit)==null||e.call(r,t),W=!0),h(t,new Nt(t))},pn=t=>{if(!W)try{if(t(),!(Lt||0<tr))try{C=t=C,Ir(t)}catch(e){e instanceof Nt||e=="unwind"||h(1,e)}}catch(e){e instanceof Nt||e=="unwind"||h(1,e)}},er={},Rr=()=>{if(!rr){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},e;for(e in er)er[e]===void 0?delete t[e]:t[e]=er[e];var i=[];for(e in t)i.push(`${e}=${t[e]}`);rr=i}return rr},rr,nr=t=>{var e=dt(t)+1,i=ae(e);return Et(t,K,i,e),i},mn=(t,e,i,d)=>{var I={string:bt=>{var Ct=0;return bt!=null&&bt!==0&&(Ct=nr(bt)),Ct},array:bt=>{var Ct=ae(bt.length);return $.set(bt,Ct),Ct}};t=r["_"+t];var U=[],G=0;if(d)for(var ft=0;ft<d.length;ft++){var vt=I[i[ft]];vt?(G===0&&(G=Ne()),U[ft]=vt(d[ft])):U[ft]=d[ft]}return i=t(...U),i=function(bt){return G!==0&&Te(G),e==="string"?bt?j(K,bt):"":e==="boolean"?!!bt:bt}(i)},Fe=0,Pe=(t,e)=>(e=e==1?ae(t.length):sr(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),K.set(t,e),e),he,ir=[],Qt,se=t=>{he.delete(Qt.get(t)),Qt.set(t,null),ir.push(t)},ke=(t,e)=>{if(!he){he=new WeakMap;var i=Qt.length;if(he)for(var d=0;d<0+i;d++){var I=Qt.get(d);I&&he.set(I,d)}}if(i=he.get(t)||0)return i;if(ir.length)i=ir.pop();else{try{Qt.grow(1)}catch(vt){throw vt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":vt}i=Qt.length-1}try{Qt.set(i,t)}catch(vt){if(!(vt instanceof TypeError))throw vt;if(typeof WebAssembly.Function=="function"){var U=WebAssembly.Function;d={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},I={parameters:[],results:e[0]=="v"?[]:[d[e[0]]]};for(var G=1;G<e.length;++G)I.parameters.push(d[e[G]]);e=new U(I,t)}else{d=[1],I=e.slice(0,1),e=e.slice(1),G={i:127,p:127,j:126,f:125,d:124,e:111},d.push(96);var ft=e.length;128>ft?d.push(ft):d.push(ft%128|128,ft>>7);for(U of e)d.push(G[U]);I=="v"?d.push(0):d.push(1,G[I]),e=[0,97,115,109,1,0,0,0,1],U=d.length,128>U?e.push(U):e.push(U%128|128,U>>7),e.push(...d),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}Qt.set(i,e)}return he.set(t,i),i};Kt=Array(4096),vr(_t,"/"),Vt("/tmp"),Vt("/home"),Vt("/home/web_user"),function(){Vt("/dev"),Ve(259,{read:()=>0,write:(d,I,U,G)=>G,Va:()=>0}),Ce("/dev/null",259),ee(1280,ue),ee(1536,xt),Ce("/dev/tty",1280),Ce("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,i=()=>(e===0&&(rt(t),e=t.byteLength),t[--e]);ie("random",i),ie("urandom",i),Vt("/dev/shm"),Vt("/dev/shm/tmp")}(),function(){Vt("/proc");var t=Vt("/proc/self");Vt("/proc/self/fd"),vr({Xa(){var e=mr(t,"fd",16895,73);return e.Ma={Va:_t.Ma.Va},e.La={lookup(i,d){i=+d;var I=zt(i);return i={parent:null,Xa:{zb:"fake"},La:{readlink:()=>I.path},id:i+1},i.parent=i},readdir(){return Array.from(re.entries()).filter(([,i])=>i).map(([i])=>i.toString())}},e}},"/proc/self/fd")}(),_t.vb=new st(44),_t.vb.stack="<generic error, no stack>";var _n={a:(t,e,i,d)=>F(`Assertion failed: ${t?j(K,t):""}, at: `+[e?e?j(K,e):"":"unknown filename",i,d?d?j(K,d):"":"unknown function"]),i:function(t,e){try{return t=t?j(K,t):"",De(t,e),0}catch(i){if(typeof It>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},L:function(t,e,i){try{if(e=e?j(K,e):"",e=fe(t,e),i&-8)return-28;var d=Wt(e,{$a:!0}).node;return d?(t="",i&4&&(t+="r"),i&2&&(t+="w"),i&1&&(t+="x"),t&&_e(d,t)?-2:0):-44}catch(I){if(typeof It>"u"||I.name!=="ErrnoError")throw I;return-I.Pa}},j:function(t,e){try{var i=zt(t);return Sr(i,i.node,e,!1),0}catch(d){if(typeof It>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},h:function(t){try{var e=zt(t);return Ke(e,e.node,{timestamp:Date.now(),Fb:!1}),0}catch(i){if(typeof It>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},b:function(t,e,i){Be=i;try{var d=zt(t);switch(e){case 0:var I=ze();if(0>I)break;for(;re[I];)I++;return ln(d,I).fd;case 1:case 2:return 0;case 3:return d.flags;case 4:return I=ze(),d.flags|=I,0;case 12:return I=ze(),g[I+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(U){if(typeof It>"u"||U.name!=="ErrnoError")throw U;return-U.Pa}},g:function(t,e){try{var i=zt(t),d=i.node,I=i.Ma.Ta;t=I?i:d,I??(I=d.La.Ta),xe(I);var U=I(t);return Le(e,U)}catch(G){if(typeof It>"u"||G.name!=="ErrnoError")throw G;return-G.Pa}},H:function(t,e){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var i=zt(t);if(0>e||!(i.flags&2097155))throw new st(28);return kr(i,i.node,e),0}catch(d){if(typeof It>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},G:function(t,e){try{if(e===0)return-28;var i=dt("/")+1;return e<i?-68:(Et("/",K,t,e),i)}catch(d){if(typeof It>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},K:function(t,e){try{return t=t?j(K,t):"",Le(e,Ee(t,!0))}catch(i){if(typeof It>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},C:function(t,e,i){try{return e=e?j(K,e):"",e=fe(t,e),Vt(e,i),0}catch(d){if(typeof It>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},J:function(t,e,i,d){try{e=e?j(K,e):"";var I=d&256;return e=fe(t,e,d&4096),Le(i,I?Ee(e,!0):Ee(e))}catch(U){if(typeof It>"u"||U.name!=="ErrnoError")throw U;return-U.Pa}},x:function(t,e,i,d){Be=d;try{e=e?j(K,e):"",e=fe(t,e);var I=d?ze():0;return ye(e,i,I).fd}catch(U){if(typeof It>"u"||U.name!=="ErrnoError")throw U;return-U.Pa}},v:function(t,e,i,d){try{if(e=e?j(K,e):"",e=fe(t,e),0>=d)return-28;var I=Wt(e).node;if(!I)throw new st(44);if(!I.La.readlink)throw new st(28);var U=I.La.readlink(I),G=Math.min(d,dt(U)),ft=$[i+G];return Et(U,K,i,d+1),$[i+G]=ft,G}catch(vt){if(typeof It>"u"||vt.name!=="ErrnoError")throw vt;return-vt.Pa}},u:function(t){try{return t=t?j(K,t):"",wr(t),0}catch(e){if(typeof It>"u"||e.name!=="ErrnoError")throw e;return-e.Pa}},f:function(t,e){try{return t=t?j(K,t):"",Le(e,Ee(t))}catch(i){if(typeof It>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},r:function(t,e,i){try{return e=e?j(K,e):"",e=fe(t,e),i===0?Er(e):i===512?wr(e):F("Invalid flags passed to unlinkat"),0}catch(d){if(typeof It>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},q:function(t,e,i){try{e=e?j(K,e):"",e=fe(t,e,!0);var d=Date.now(),I,U;if(i){var G=s[i>>2]+4294967296*D[i+4>>2],ft=D[i+8>>2];ft==1073741823?I=d:ft==1073741822?I=null:I=1e3*G+ft/1e6,i+=16,G=s[i>>2]+4294967296*D[i+4>>2],ft=D[i+8>>2],ft==1073741823?U=d:ft==1073741822?U=null:U=1e3*G+ft/1e6}else U=I=d;if((U??I)!==null){t=I;var vt=Wt(e,{$a:!0}).node;xe(vt.La.Ua)(vt,{atime:t,mtime:U})}return 0}catch(bt){if(typeof It>"u"||bt.name!=="ErrnoError")throw bt;return-bt.Pa}},m:()=>F(""),l:()=>{Lt=!1,tr=0},A:function(t,e){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),D[e>>2]=t.getSeconds(),D[e+4>>2]=t.getMinutes(),D[e+8>>2]=t.getHours(),D[e+12>>2]=t.getDate(),D[e+16>>2]=t.getMonth(),D[e+20>>2]=t.getFullYear()-1900,D[e+24>>2]=t.getDay();var i=t.getFullYear();D[e+28>>2]=(i%4!==0||i%100===0&&i%400!==0?hn:fn)[t.getMonth()]+t.getDate()-1|0,D[e+36>>2]=-(60*t.getTimezoneOffset()),i=new Date(t.getFullYear(),6,1).getTimezoneOffset();var d=new Date(t.getFullYear(),0,1).getTimezoneOffset();D[e+32>>2]=(i!=d&&t.getTimezoneOffset()==Math.min(d,i))|0},y:function(t,e,i,d,I,U,G){I=-9007199254740992>I||9007199254740992<I?NaN:Number(I);try{if(isNaN(I))return 61;var ft=zt(d);if(e&2&&!(i&2)&&(ft.flags&2097155)!==2)throw new st(2);if((ft.flags&2097155)===1)throw new st(2);if(!ft.Ma.ib)throw new st(43);if(!t)throw new st(28);var vt=ft.Ma.ib(ft,t,I,e,i),bt=vt.Kb;return D[U>>2]=vt.Ab,s[G>>2]=bt,0}catch(Ct){if(typeof It>"u"||Ct.name!=="ErrnoError")throw Ct;return-Ct.Pa}},z:function(t,e,i,d,I,U){U=-9007199254740992>U||9007199254740992<U?NaN:Number(U);try{var G=zt(I);if(i&2){if(i=U,(G.node.mode&61440)!==32768)throw new st(43);if(!(d&2)){var ft=K.slice(t,t+e);G.Ma.jb&&G.Ma.jb(G,ft,i,e,d)}}}catch(vt){if(typeof It>"u"||vt.name!=="ErrnoError")throw vt;return-vt.Pa}},n:(t,e)=>{if(Se[t]&&(clearTimeout(Se[t].id),delete Se[t]),!e)return 0;var i=setTimeout(()=>{delete Se[t],pn(()=>Or(t,performance.now()))},e);return Se[t]={id:i,Xb:e},0},B:(t,e,i,d)=>{var I=new Date().getFullYear(),U=new Date(I,0,1).getTimezoneOffset();I=new Date(I,6,1).getTimezoneOffset(),s[t>>2]=60*Math.max(U,I),D[e>>2]=+(U!=I),e=G=>{var ft=Math.abs(G);return`UTC${0<=G?"-":"+"}${String(Math.floor(ft/60)).padStart(2,"0")}${String(ft%60).padStart(2,"0")}`},t=e(U),e=e(I),I<U?(Et(t,K,i,17),Et(e,K,d,17)):(Et(t,K,d,17),Et(e,K,i,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var e=K.length;if(t>>>=0,2147483648<t)return!1;for(var i=1;4>=i;i*=2){var d=e*(1+.2/i);d=Math.min(d,t+100663296);t:{d=(Math.min(2147483648,65536*Math.ceil(Math.max(t,d)/65536))-B.buffer.byteLength+65535)/65536|0;try{B.grow(d),tt();var I=1;break t}catch{}I=void 0}if(I)return!0}return!1},E:(t,e)=>{var i=0;return Rr().forEach((d,I)=>{var U=e+i;for(I=s[t+4*I>>2]=U,U=0;U<d.length;++U)$[I++]=d.charCodeAt(U);$[I]=0,i+=d.length+1}),0},F:(t,e)=>{var i=Rr();s[t>>2]=i.length;var d=0;return i.forEach(I=>d+=I.length+1),s[e>>2]=d,0},e:function(t){try{var e=zt(t);return Je(e),0}catch(i){if(typeof It>"u"||i.name!=="ErrnoError")throw i;return i.Pa}},p:function(t,e){try{var i=zt(t);return $[e]=i.tty?2:Ft(i.mode)?3:(i.mode&61440)===40960?7:4,g[e+2>>1]=0,at[e+8>>3]=BigInt(0),at[e+16>>3]=BigInt(0),0}catch(d){if(typeof It>"u"||d.name!=="ErrnoError")throw d;return d.Pa}},w:function(t,e,i,d){try{t:{var I=zt(t);t=e;for(var U,G=e=0;G<i;G++){var ft=s[t>>2],vt=s[t+4>>2];t+=8;var bt=Nr(I,$,ft,vt,U);if(0>bt){var Ct=-1;break t}if(e+=bt,bt<vt)break;typeof U<"u"&&(U+=bt)}Ct=e}return s[d>>2]=Ct,0}catch(Pt){if(typeof It>"u"||Pt.name!=="ErrnoError")throw Pt;return Pt.Pa}},D:function(t,e,i,d){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var I=zt(t);return Tr(I,e,i),at[d>>3]=BigInt(I.position),I.ob&&e===0&&i===0&&(I.ob=null),0}catch(U){if(typeof It>"u"||U.name!=="ErrnoError")throw U;return U.Pa}},I:function(t){var i;try{var e=zt(t);return(i=e.Ma)!=null&&i.fsync?e.Ma.fsync(e):0}catch(d){if(typeof It>"u"||d.name!=="ErrnoError")throw d;return d.Pa}},t:function(t,e,i,d){try{t:{var I=zt(t);t=e;for(var U,G=e=0;G<i;G++){var ft=s[t>>2],vt=s[t+4>>2];t+=8;var bt=Ar(I,$,ft,vt,U);if(0>bt){var Ct=-1;break t}if(e+=bt,bt<vt)break;typeof U<"u"&&(U+=bt)}Ct=e}return s[d>>2]=Ct,0}catch(Pt){if(typeof It>"u"||Pt.name!=="ErrnoError")throw Pt;return Pt.Pa}},k:Ir},ht;(async function(){var i;function t(d){var I;return ht=d.exports,B=ht.M,tt(),Qt=ht.O,lt--,(I=r.monitorRunDependencies)==null||I.call(r,lt),lt==0&&M&&(d=M,M=null,d()),ht}lt++,(i=r.monitorRunDependencies)==null||i.call(r,lt);var e={a:_n};return r.instantiateWasm?new Promise(d=>{r.instantiateWasm(e,(I,U)=>{t(I),d(I.exports)})}):(ut??(ut=r.locateFile?r.locateFile("sql-wasm.wasm",_):_+"sql-wasm.wasm"),t((await Tt(e)).instance))})(),r._sqlite3_free=t=>(r._sqlite3_free=ht.P)(t),r._sqlite3_value_text=t=>(r._sqlite3_value_text=ht.Q)(t),r._sqlite3_prepare_v2=(t,e,i,d,I)=>(r._sqlite3_prepare_v2=ht.R)(t,e,i,d,I),r._sqlite3_step=t=>(r._sqlite3_step=ht.S)(t),r._sqlite3_reset=t=>(r._sqlite3_reset=ht.T)(t),r._sqlite3_exec=(t,e,i,d,I)=>(r._sqlite3_exec=ht.U)(t,e,i,d,I),r._sqlite3_finalize=t=>(r._sqlite3_finalize=ht.V)(t),r._sqlite3_column_name=(t,e)=>(r._sqlite3_column_name=ht.W)(t,e),r._sqlite3_column_text=(t,e)=>(r._sqlite3_column_text=ht.X)(t,e),r._sqlite3_column_type=(t,e)=>(r._sqlite3_column_type=ht.Y)(t,e),r._sqlite3_errmsg=t=>(r._sqlite3_errmsg=ht.Z)(t),r._sqlite3_clear_bindings=t=>(r._sqlite3_clear_bindings=ht._)(t),r._sqlite3_value_blob=t=>(r._sqlite3_value_blob=ht.$)(t),r._sqlite3_value_bytes=t=>(r._sqlite3_value_bytes=ht.aa)(t),r._sqlite3_value_double=t=>(r._sqlite3_value_double=ht.ba)(t),r._sqlite3_value_int=t=>(r._sqlite3_value_int=ht.ca)(t),r._sqlite3_value_type=t=>(r._sqlite3_value_type=ht.da)(t),r._sqlite3_result_blob=(t,e,i,d)=>(r._sqlite3_result_blob=ht.ea)(t,e,i,d),r._sqlite3_result_double=(t,e)=>(r._sqlite3_result_double=ht.fa)(t,e),r._sqlite3_result_error=(t,e,i)=>(r._sqlite3_result_error=ht.ga)(t,e,i),r._sqlite3_result_int=(t,e)=>(r._sqlite3_result_int=ht.ha)(t,e),r._sqlite3_result_int64=(t,e)=>(r._sqlite3_result_int64=ht.ia)(t,e),r._sqlite3_result_null=t=>(r._sqlite3_result_null=ht.ja)(t),r._sqlite3_result_text=(t,e,i,d)=>(r._sqlite3_result_text=ht.ka)(t,e,i,d),r._sqlite3_aggregate_context=(t,e)=>(r._sqlite3_aggregate_context=ht.la)(t,e),r._sqlite3_column_count=t=>(r._sqlite3_column_count=ht.ma)(t),r._sqlite3_data_count=t=>(r._sqlite3_data_count=ht.na)(t),r._sqlite3_column_blob=(t,e)=>(r._sqlite3_column_blob=ht.oa)(t,e),r._sqlite3_column_bytes=(t,e)=>(r._sqlite3_column_bytes=ht.pa)(t,e),r._sqlite3_column_double=(t,e)=>(r._sqlite3_column_double=ht.qa)(t,e),r._sqlite3_bind_blob=(t,e,i,d,I)=>(r._sqlite3_bind_blob=ht.ra)(t,e,i,d,I),r._sqlite3_bind_double=(t,e,i)=>(r._sqlite3_bind_double=ht.sa)(t,e,i),r._sqlite3_bind_int=(t,e,i)=>(r._sqlite3_bind_int=ht.ta)(t,e,i),r._sqlite3_bind_text=(t,e,i,d,I)=>(r._sqlite3_bind_text=ht.ua)(t,e,i,d,I),r._sqlite3_bind_parameter_index=(t,e)=>(r._sqlite3_bind_parameter_index=ht.va)(t,e),r._sqlite3_sql=t=>(r._sqlite3_sql=ht.wa)(t),r._sqlite3_normalized_sql=t=>(r._sqlite3_normalized_sql=ht.xa)(t),r._sqlite3_changes=t=>(r._sqlite3_changes=ht.ya)(t),r._sqlite3_close_v2=t=>(r._sqlite3_close_v2=ht.za)(t),r._sqlite3_create_function_v2=(t,e,i,d,I,U,G,ft,vt)=>(r._sqlite3_create_function_v2=ht.Aa)(t,e,i,d,I,U,G,ft,vt),r._sqlite3_update_hook=(t,e,i)=>(r._sqlite3_update_hook=ht.Ba)(t,e,i),r._sqlite3_open=(t,e)=>(r._sqlite3_open=ht.Ca)(t,e);var sr=r._malloc=t=>(sr=r._malloc=ht.Da)(t),Ue=r._free=t=>(Ue=r._free=ht.Ea)(t);r._RegisterExtensionFunctions=t=>(r._RegisterExtensionFunctions=ht.Fa)(t);var xr=(t,e)=>(xr=ht.Ga)(t,e),Or=(t,e)=>(Or=ht.Ha)(t,e),Te=t=>(Te=ht.Ia)(t),ae=t=>(ae=ht.Ja)(t),Ne=()=>(Ne=ht.Ka)();r.stackSave=()=>Ne(),r.stackRestore=t=>Te(t),r.stackAlloc=t=>ae(t),r.cwrap=(t,e,i,d)=>{var I=!i||i.every(U=>U==="number"||U==="boolean");return e!=="string"&&I&&!d?r["_"+t]:(...U)=>mn(t,e,i,U)},r.addFunction=ke,r.removeFunction=se,r.UTF8ToString=T,r.ALLOC_NORMAL=Fe,r.allocate=Pe,r.allocateUTF8OnStack=nr;function ar(){function t(){var I;if(r.calledRun=!0,!W){if(!r.noFSInit&&!we){var e,i;we=!0,d??(d=r.stdin),e??(e=r.stdout),i??(i=r.stderr),d?ie("stdin",d):Qe("/dev/tty","/dev/stdin"),e?ie("stdout",null,e):Qe("/dev/tty","/dev/stdout"),i?ie("stderr",null,i):Qe("/dev/tty1","/dev/stderr"),ye("/dev/stdin",0),ye("/dev/stdout",1),ye("/dev/stderr",1)}if(ht.N(),ne=!1,(I=r.onRuntimeInitialized)==null||I.call(r),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var d=r.postRun.shift();St.unshift(d)}gt(St)}}if(0<lt)M=ar;else{if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)At();gt(Ot),0<lt?M=ar:r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),t()},1)):t()}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return ar(),l}),o)};v.exports=N,v.exports.default=N})(Kr);var si=Kr.exports;const Wr=Xr(si),ai="/npconv/assets/sql-wasm-C1U8OeUW.wasm";async function oi(){try{return await Wr({locateFile:()=>String(ai)})}catch{try{return await Wr()}catch(v){throw Y("Failed to initialize sql.js: "+(v.message||v.toString()),"err"),v}}}function li(v){Y("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const A=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];v.run("BEGIN TRANSACTION");try{for(const o of A)v.run(o);v.run("COMMIT"),Y("Schema created.","schema")}catch(o){try{v.run("ROLLBACK")}catch{}throw Y("Failed to create schema: "+(o.message||o.toString()),"err"),o}}function ui(v){try{const A=v.exec("PRAGMA foreign_key_list('stream_state')"),o=v.exec("PRAGMA table_info('stream_state')");let N=!1;A&&A.length>0&&A[0].values&&A[0].values.length>0&&(N=!0);let p=!1;if(o&&o.length>0&&o[0].values.length>=2){const a=o[0].values,u=a.map(m=>m[1]),l=a.map(m=>m[5]);u[0]==="progress_time"&&u[1]==="stream_id"&&l[0]===0&&l[1]===1&&(p=!0)}if(!N||!p){Y("Patching stream_state schema to Room-compatible definition...","schema"),v.run("BEGIN TRANSACTION");const a=v.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(a&&a.length>0&&a[0].values.length>0){v.run("ALTER TABLE stream_state RENAME TO stream_state_old"),v.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{v.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(u){Y("Note: could not copy old stream_state rows: "+(u.message||u.toString()),"warn")}v.run("DROP TABLE stream_state_old")}else v.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");v.run("COMMIT"),Y("stream_state schema patched.","schema")}else Y("stream_state schema OK.","schema")}catch(A){Y("Failed to ensure stream_state schema: "+(A.message||A.toString()),"err")}}function lr(v){let A="";try{const o=v.exec("PRAGMA table_info('stream_state')")||[],N=v.exec("PRAGMA foreign_key_list('stream_state')")||[],p=v.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];A+=`PRAGMA table_info("stream_state"):
`,o.length>0&&(A+=JSON.stringify(o[0],null,2)+`
`),A+=`
PRAGMA foreign_key_list("stream_state"):
`,N.length>0&&(A+=JSON.stringify(N[0],null,2)+`
`),A+=`
CREATE statement:
`,p.length>0&&p[0].values&&p[0].values.length>0&&(A+=p[0].values[0][0]+`
`)}catch(o){A+="Failed to collect stream_state debug info: "+(o.message||o.toString())+`
`}return A}function qe(v){throw new Error('Could not dynamically require "'+v+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(v,A){(function(o){v.exports=o()})(function(){return function o(N,p,a){function u(r,w){if(!p[r]){if(!N[r]){var E=typeof qe=="function"&&qe;if(!w&&E)return E(r,!0);if(l)return l(r,!0);var k=new Error("Cannot find module '"+r+"'");throw k.code="MODULE_NOT_FOUND",k}var c=p[r]={exports:{}};N[r][0].call(c.exports,function(y){var h=N[r][1][y];return u(h||y)},c,c.exports,o,N,p,a)}return p[r].exports}for(var l=typeof qe=="function"&&qe,m=0;m<a.length;m++)u(a[m]);return u}({1:[function(o,N,p){var a=o("./utils"),u=o("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(m){for(var r,w,E,k,c,y,h,_=[],f=0,S=m.length,R=S,x=a.getTypeOf(m)!=="string";f<m.length;)R=S-f,E=x?(r=m[f++],w=f<S?m[f++]:0,f<S?m[f++]:0):(r=m.charCodeAt(f++),w=f<S?m.charCodeAt(f++):0,f<S?m.charCodeAt(f++):0),k=r>>2,c=(3&r)<<4|w>>4,y=1<R?(15&w)<<2|E>>6:64,h=2<R?63&E:64,_.push(l.charAt(k)+l.charAt(c)+l.charAt(y)+l.charAt(h));return _.join("")},p.decode=function(m){var r,w,E,k,c,y,h=0,_=0,f="data:";if(m.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var S,R=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===l.charAt(64)&&R--,m.charAt(m.length-2)===l.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=u.uint8array?new Uint8Array(0|R):new Array(0|R);h<m.length;)r=l.indexOf(m.charAt(h++))<<2|(k=l.indexOf(m.charAt(h++)))>>4,w=(15&k)<<4|(c=l.indexOf(m.charAt(h++)))>>2,E=(3&c)<<6|(y=l.indexOf(m.charAt(h++))),S[_++]=r,c!==64&&(S[_++]=w),y!==64&&(S[_++]=E);return S}},{"./support":30,"./utils":32}],2:[function(o,N,p){var a=o("./external"),u=o("./stream/DataWorker"),l=o("./stream/Crc32Probe"),m=o("./stream/DataLengthProbe");function r(w,E,k,c,y){this.compressedSize=w,this.uncompressedSize=E,this.crc32=k,this.compression=c,this.compressedContent=y}r.prototype={getContentWorker:function(){var w=new u(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),E=this;return w.on("end",function(){if(this.streamInfo.data_length!==E.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new u(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},r.createWorkerFrom=function(w,E,k){return w.pipe(new l).pipe(new m("uncompressedSize")).pipe(E.compressWorker(k)).pipe(new m("compressedSize")).withStreamInfo("compression",E)},N.exports=r},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,N,p){var a=o("./stream/GenericWorker");p.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},p.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,N,p){var a=o("./utils"),u=function(){for(var l,m=[],r=0;r<256;r++){l=r;for(var w=0;w<8;w++)l=1&l?3988292384^l>>>1:l>>>1;m[r]=l}return m}();N.exports=function(l,m){return l!==void 0&&l.length?a.getTypeOf(l)!=="string"?function(r,w,E,k){var c=u,y=k+E;r^=-1;for(var h=k;h<y;h++)r=r>>>8^c[255&(r^w[h])];return-1^r}(0|m,l,l.length,0):function(r,w,E,k){var c=u,y=k+E;r^=-1;for(var h=k;h<y;h++)r=r>>>8^c[255&(r^w.charCodeAt(h))];return-1^r}(0|m,l,l.length,0):0}},{"./utils":32}],5:[function(o,N,p){p.base64=!1,p.binary=!1,p.dir=!1,p.createFolders=!0,p.date=null,p.compression=null,p.compressionOptions=null,p.comment=null,p.unixPermissions=null,p.dosPermissions=null},{}],6:[function(o,N,p){var a=null;a=typeof Promise<"u"?Promise:o("lie"),N.exports={Promise:a}},{lie:37}],7:[function(o,N,p){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=o("pako"),l=o("./utils"),m=o("./stream/GenericWorker"),r=a?"uint8array":"array";function w(E,k){m.call(this,"FlateWorker/"+E),this._pako=null,this._pakoAction=E,this._pakoOptions=k,this.meta={}}p.magic="\b\0",l.inherits(w,m),w.prototype.processChunk=function(E){this.meta=E.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(r,E.data),!1)},w.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var E=this;this._pako.onData=function(k){E.push({data:k,meta:E.meta})}},p.compressWorker=function(E){return new w("Deflate",E)},p.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,N,p){function a(c,y){var h,_="";for(h=0;h<y;h++)_+=String.fromCharCode(255&c),c>>>=8;return _}function u(c,y,h,_,f,S){var R,x,O=c.file,z=c.compression,B=S!==r.utf8encode,W=l.transformTo("string",S(O.name)),C=l.transformTo("string",r.utf8encode(O.name)),$=O.comment,K=l.transformTo("string",S($)),g=l.transformTo("string",r.utf8encode($)),D=C.length!==O.name.length,s=g.length!==$.length,H="",at="",X="",pt=O.dir,tt=O.date,lt={crc32:0,compressedSize:0,uncompressedSize:0};y&&!h||(lt.crc32=c.crc32,lt.compressedSize=c.compressedSize,lt.uncompressedSize=c.uncompressedSize);var M=0;y&&(M|=8),B||!D&&!s||(M|=2048);var F=0,ut=0;pt&&(F|=16),f==="UNIX"?(ut=798,F|=function(et,Tt){var Nt=et;return et||(Nt=Tt?16893:33204),(65535&Nt)<<16}(O.unixPermissions,pt)):(ut=20,F|=function(et){return 63&(et||0)}(O.dosPermissions)),R=tt.getUTCHours(),R<<=6,R|=tt.getUTCMinutes(),R<<=5,R|=tt.getUTCSeconds()/2,x=tt.getUTCFullYear()-1980,x<<=4,x|=tt.getUTCMonth()+1,x<<=5,x|=tt.getUTCDate(),D&&(at=a(1,1)+a(w(W),4)+C,H+="up"+a(at.length,2)+at),s&&(X=a(1,1)+a(w(K),4)+g,H+="uc"+a(X.length,2)+X);var it="";return it+=`
\0`,it+=a(M,2),it+=z.magic,it+=a(R,2),it+=a(x,2),it+=a(lt.crc32,4),it+=a(lt.compressedSize,4),it+=a(lt.uncompressedSize,4),it+=a(W.length,2),it+=a(H.length,2),{fileRecord:E.LOCAL_FILE_HEADER+it+W+H,dirRecord:E.CENTRAL_FILE_HEADER+a(ut,2)+it+a(K.length,2)+"\0\0\0\0"+a(F,4)+a(_,4)+W+H+K}}var l=o("../utils"),m=o("../stream/GenericWorker"),r=o("../utf8"),w=o("../crc32"),E=o("../signature");function k(c,y,h,_){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=h,this.encodeFileName=_,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(k,m),k.prototype.push=function(c){var y=c.meta.percent||0,h=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,m.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:h?(y+100*(h-_-1))/h:100}}))},k.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var y=this.streamFiles&&!c.file.dir;if(y){var h=u(c,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(c){this.accumulate=!1;var y=this.streamFiles&&!c.file.dir,h=u(c,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),y)this.push({data:function(_){return E.DATA_DESCRIPTOR+a(_.crc32,4)+a(_.compressedSize,4)+a(_.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var c=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var h=this.bytesWritten-c,_=function(f,S,R,x,O){var z=l.transformTo("string",O(x));return E.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(f,2)+a(f,2)+a(S,4)+a(R,4)+a(z.length,2)+z}(this.dirRecords.length,h,c,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(c){this._sources.push(c);var y=this;return c.on("data",function(h){y.processChunk(h)}),c.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),c.on("error",function(h){y.error(h)}),this},k.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(c){var y=this._sources;if(!m.prototype.error.call(this,c))return!1;for(var h=0;h<y.length;h++)try{y[h].error(c)}catch{}return!0},k.prototype.lock=function(){m.prototype.lock.call(this);for(var c=this._sources,y=0;y<c.length;y++)c[y].lock()},N.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,N,p){var a=o("../compressions"),u=o("./ZipFileWorker");p.generateWorker=function(l,m,r){var w=new u(m.streamFiles,r,m.platform,m.encodeFileName),E=0;try{l.forEach(function(k,c){E++;var y=function(S,R){var x=S||R,O=a[x];if(!O)throw new Error(x+" is not a valid compression method !");return O}(c.options.compression,m.compression),h=c.options.compressionOptions||m.compressionOptions||{},_=c.dir,f=c.date;c._compressWorker(y,h).withStreamInfo("file",{name:k,dir:_,date:f,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(w)}),w.entriesCount=E}catch(k){w.error(k)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,N,p){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new a;for(var l in this)typeof this[l]!="function"&&(u[l]=this[l]);return u}}(a.prototype=o("./object")).loadAsync=o("./load"),a.support=o("./support"),a.defaults=o("./defaults"),a.version="3.10.1",a.loadAsync=function(u,l){return new a().loadAsync(u,l)},a.external=o("./external"),N.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,N,p){var a=o("./utils"),u=o("./external"),l=o("./utf8"),m=o("./zipEntries"),r=o("./stream/Crc32Probe"),w=o("./nodejsUtils");function E(k){return new u.Promise(function(c,y){var h=k.decompressed.getContentWorker().pipe(new r);h.on("error",function(_){y(_)}).on("end",function(){h.streamInfo.crc32!==k.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}N.exports=function(k,c){var y=this;return c=a.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),w.isNode&&w.isStream(k)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",k,!0,c.optimizedBinaryString,c.base64).then(function(h){var _=new m(c);return _.load(h),_}).then(function(h){var _=[u.Promise.resolve(h)],f=h.files;if(c.checkCRC32)for(var S=0;S<f.length;S++)_.push(E(f[S]));return u.Promise.all(_)}).then(function(h){for(var _=h.shift(),f=_.files,S=0;S<f.length;S++){var R=f[S],x=R.fileNameStr,O=a.resolve(R.fileNameStr);y.file(O,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:c.createFolders}),R.dir||(y.file(O).unsafeOriginalName=x)}return _.zipComment.length&&(y.comment=_.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,N,p){var a=o("../utils"),u=o("../stream/GenericWorker");function l(m,r){u.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(r)}a.inherits(l,u),l.prototype._bindStream=function(m){var r=this;(this._stream=m).pause(),m.on("data",function(w){r.push({data:w,meta:{percent:0}})}).on("error",function(w){r.isPaused?this.generatedError=w:r.error(w)}).on("end",function(){r.isPaused?r._upstreamEnded=!0:r.end()})},l.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},N.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,N,p){var a=o("readable-stream").Readable;function u(l,m,r){a.call(this,m),this._helper=l;var w=this;l.on("data",function(E,k){w.push(E)||w._helper.pause(),r&&r(k)}).on("error",function(E){w.emit("error",E)}).on("end",function(){w.push(null)})}o("../utils").inherits(u,a),u.prototype._read=function(){this._helper.resume()},N.exports=u},{"../utils":32,"readable-stream":16}],14:[function(o,N,p){N.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,u);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,u)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var u=new Buffer(a);return u.fill(0),u},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(o,N,p){function a(O,z,B){var W,C=l.getTypeOf(z),$=l.extend(B||{},w);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(O=f(O)),$.createFolders&&(W=_(O))&&S.call(this,W,!0);var K=C==="string"&&$.binary===!1&&$.base64===!1;B&&B.binary!==void 0||($.binary=!K),(z instanceof E&&z.uncompressedSize===0||$.dir||!z||z.length===0)&&($.base64=!1,$.binary=!0,z="",$.compression="STORE",C="string");var g=null;g=z instanceof E||z instanceof m?z:y.isNode&&y.isStream(z)?new h(O,z):l.prepareContent(O,z,$.binary,$.optimizedBinaryString,$.base64);var D=new k(O,g,$);this.files[O]=D}var u=o("./utf8"),l=o("./utils"),m=o("./stream/GenericWorker"),r=o("./stream/StreamHelper"),w=o("./defaults"),E=o("./compressedObject"),k=o("./zipObject"),c=o("./generate"),y=o("./nodejsUtils"),h=o("./nodejs/NodejsStreamInputAdapter"),_=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var z=O.lastIndexOf("/");return 0<z?O.substring(0,z):""},f=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},S=function(O,z){return z=z!==void 0?z:w.createFolders,O=f(O),this.files[O]||a.call(this,O,null,{dir:!0,createFolders:z}),this.files[O]};function R(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var z,B,W;for(z in this.files)W=this.files[z],(B=z.slice(this.root.length,z.length))&&z.slice(0,this.root.length)===this.root&&O(B,W)},filter:function(O){var z=[];return this.forEach(function(B,W){O(B,W)&&z.push(W)}),z},file:function(O,z,B){if(arguments.length!==1)return O=this.root+O,a.call(this,O,z,B),this;if(R(O)){var W=O;return this.filter(function($,K){return!K.dir&&W.test($)})}var C=this.files[this.root+O];return C&&!C.dir?C:null},folder:function(O){if(!O)return this;if(R(O))return this.filter(function(C,$){return $.dir&&O.test(C)});var z=this.root+O,B=S.call(this,z),W=this.clone();return W.root=B.name,W},remove:function(O){O=this.root+O;var z=this.files[O];if(z||(O.slice(-1)!=="/"&&(O+="/"),z=this.files[O]),z&&!z.dir)delete this.files[O];else for(var B=this.filter(function(C,$){return $.name.slice(0,O.length)===O}),W=0;W<B.length;W++)delete this.files[B[W].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var z,B={};try{if((B=l.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");l.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var W=B.comment||this.comment||"";z=c.generateWorker(this,B,W)}catch(C){(z=new m("error")).error(C)}return new r(z,B.type||"string",B.mimeType)},generateAsync:function(O,z){return this.generateInternalStream(O).accumulate(z)},generateNodeStream:function(O,z){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(z)}};N.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,N,p){N.exports=o("stream")},{stream:void 0}],17:[function(o,N,p){var a=o("./DataReader");function u(l){a.call(this,l);for(var m=0;m<this.data.length;m++)l[m]=255&l[m]}o("../utils").inherits(u,a),u.prototype.byteAt=function(l){return this.data[this.zero+l]},u.prototype.lastIndexOfSignature=function(l){for(var m=l.charCodeAt(0),r=l.charCodeAt(1),w=l.charCodeAt(2),E=l.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===m&&this.data[k+1]===r&&this.data[k+2]===w&&this.data[k+3]===E)return k-this.zero;return-1},u.prototype.readAndCheckSignature=function(l){var m=l.charCodeAt(0),r=l.charCodeAt(1),w=l.charCodeAt(2),E=l.charCodeAt(3),k=this.readData(4);return m===k[0]&&r===k[1]&&w===k[2]&&E===k[3]},u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,m},N.exports=u},{"../utils":32,"./DataReader":18}],18:[function(o,N,p){var a=o("../utils");function u(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var m,r=0;for(this.checkOffset(l),m=this.index+l-1;m>=this.index;m--)r=(r<<8)+this.byteAt(m);return this.index+=l,r},readString:function(l){return a.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},N.exports=u},{"../utils":32}],19:[function(o,N,p){var a=o("./Uint8ArrayReader");function u(l){a.call(this,l)}o("../utils").inherits(u,a),u.prototype.readData=function(l){this.checkOffset(l);var m=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,m},N.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,N,p){var a=o("./DataReader");function u(l){a.call(this,l)}o("../utils").inherits(u,a),u.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},u.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},u.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},u.prototype.readData=function(l){this.checkOffset(l);var m=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,m},N.exports=u},{"../utils":32,"./DataReader":18}],21:[function(o,N,p){var a=o("./ArrayReader");function u(l){a.call(this,l)}o("../utils").inherits(u,a),u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,m},N.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(o,N,p){var a=o("../utils"),u=o("../support"),l=o("./ArrayReader"),m=o("./StringReader"),r=o("./NodeBufferReader"),w=o("./Uint8ArrayReader");N.exports=function(E){var k=a.getTypeOf(E);return a.checkSupport(k),k!=="string"||u.uint8array?k==="nodebuffer"?new r(E):u.uint8array?new w(a.transformTo("uint8array",E)):new l(a.transformTo("array",E)):new m(E)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,N,p){p.LOCAL_FILE_HEADER="PK",p.CENTRAL_FILE_HEADER="PK",p.CENTRAL_DIRECTORY_END="PK",p.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",p.ZIP64_CENTRAL_DIRECTORY_END="PK",p.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,N,p){var a=o("./GenericWorker"),u=o("../utils");function l(m){a.call(this,"ConvertWorker to "+m),this.destType=m}u.inherits(l,a),l.prototype.processChunk=function(m){this.push({data:u.transformTo(this.destType,m.data),meta:m.meta})},N.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(o,N,p){var a=o("./GenericWorker"),u=o("../crc32");function l(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(l,a),l.prototype.processChunk=function(m){this.streamInfo.crc32=u(m.data,this.streamInfo.crc32||0),this.push(m)},N.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,N,p){var a=o("../utils"),u=o("./GenericWorker");function l(m){u.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}a.inherits(l,u),l.prototype.processChunk=function(m){if(m){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+m.data.length}u.prototype.processChunk.call(this,m)},N.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(o,N,p){var a=o("../utils"),u=o("./GenericWorker");function l(m){u.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(w){r.dataIsReady=!0,r.data=w,r.max=w&&w.length||0,r.type=a.getTypeOf(w),r.isPaused||r._tickAndRepeat()},function(w){r.error(w)})}a.inherits(l,u),l.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,r=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,r);break;case"uint8array":m=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":m=this.data.slice(this.index,r)}return this.index=r,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},N.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(o,N,p){function a(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,l){return this._listeners[u].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,l){if(this._listeners[u])for(var m=0;m<this._listeners[u].length;m++)this._listeners[u][m].call(this,l)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var l=this;return u.on("data",function(m){l.processChunk(m)}),u.on("end",function(){l.end()}),u.on("error",function(m){l.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,l){return this.extraStreamInfo[u]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},N.exports=a},{}],29:[function(o,N,p){var a=o("../utils"),u=o("./ConvertWorker"),l=o("./GenericWorker"),m=o("../base64"),r=o("../support"),w=o("../external"),E=null;if(r.nodestream)try{E=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function k(y,h){return new w.Promise(function(_,f){var S=[],R=y._internalType,x=y._outputType,O=y._mimeType;y.on("data",function(z,B){S.push(z),h&&h(B)}).on("error",function(z){S=[],f(z)}).on("end",function(){try{var z=function(B,W,C){switch(B){case"blob":return a.newBlob(a.transformTo("arraybuffer",W),C);case"base64":return m.encode(W);default:return a.transformTo(B,W)}}(x,function(B,W){var C,$=0,K=null,g=0;for(C=0;C<W.length;C++)g+=W[C].length;switch(B){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for(K=new Uint8Array(g),C=0;C<W.length;C++)K.set(W[C],$),$+=W[C].length;return K;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+B+"'")}}(R,S),O);_(z)}catch(B){f(B)}S=[]}).resume()})}function c(y,h,_){var f=h;switch(h){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=h,this._mimeType=_,a.checkSupport(f),this._worker=y.pipe(new u(f)),y.lock()}catch(S){this._worker=new l("error"),this._worker.error(S)}}c.prototype={accumulate:function(y){return k(this,y)},on:function(y,h){var _=this;return y==="data"?this._worker.on(y,function(f){h.call(_,f.data,f.meta)}):this._worker.on(y,function(){a.delay(h,arguments,_)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new E(this,{objectMode:this._outputType!=="nodebuffer"},y)}},N.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,N,p){if(p.base64=!0,p.array=!0,p.string=!0,p.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",p.nodebuffer=typeof Buffer<"u",p.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")p.blob=!1;else{var a=new ArrayBuffer(0);try{p.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(a),p.blob=u.getBlob("application/zip").size===0}catch{p.blob=!1}}}try{p.nodestream=!!o("readable-stream").Readable}catch{p.nodestream=!1}},{"readable-stream":16}],31:[function(o,N,p){for(var a=o("./utils"),u=o("./support"),l=o("./nodejsUtils"),m=o("./stream/GenericWorker"),r=new Array(256),w=0;w<256;w++)r[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;r[254]=r[254]=1;function E(){m.call(this,"utf-8 decode"),this.leftOver=null}function k(){m.call(this,"utf-8 encode")}p.utf8encode=function(c){return u.nodebuffer?l.newBufferFrom(c,"utf-8"):function(y){var h,_,f,S,R,x=y.length,O=0;for(S=0;S<x;S++)(64512&(_=y.charCodeAt(S)))==55296&&S+1<x&&(64512&(f=y.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(f-56320),S++),O+=_<128?1:_<2048?2:_<65536?3:4;for(h=u.uint8array?new Uint8Array(O):new Array(O),S=R=0;R<O;S++)(64512&(_=y.charCodeAt(S)))==55296&&S+1<x&&(64512&(f=y.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(f-56320),S++),_<128?h[R++]=_:(_<2048?h[R++]=192|_>>>6:(_<65536?h[R++]=224|_>>>12:(h[R++]=240|_>>>18,h[R++]=128|_>>>12&63),h[R++]=128|_>>>6&63),h[R++]=128|63&_);return h}(c)},p.utf8decode=function(c){return u.nodebuffer?a.transformTo("nodebuffer",c).toString("utf-8"):function(y){var h,_,f,S,R=y.length,x=new Array(2*R);for(h=_=0;h<R;)if((f=y[h++])<128)x[_++]=f;else if(4<(S=r[f]))x[_++]=65533,h+=S-1;else{for(f&=S===2?31:S===3?15:7;1<S&&h<R;)f=f<<6|63&y[h++],S--;1<S?x[_++]=65533:f<65536?x[_++]=f:(f-=65536,x[_++]=55296|f>>10&1023,x[_++]=56320|1023&f)}return x.length!==_&&(x.subarray?x=x.subarray(0,_):x.length=_),a.applyFromCharCode(x)}(c=a.transformTo(u.uint8array?"uint8array":"array",c))},a.inherits(E,m),E.prototype.processChunk=function(c){var y=a.transformTo(u.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var h=y;(y=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),y.set(h,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var _=function(S,R){var x;for((R=R||S.length)>S.length&&(R=S.length),x=R-1;0<=x&&(192&S[x])==128;)x--;return x<0||x===0?R:x+r[S[x]]>R?x:R}(y),f=y;_!==y.length&&(u.uint8array?(f=y.subarray(0,_),this.leftOver=y.subarray(_,y.length)):(f=y.slice(0,_),this.leftOver=y.slice(_,y.length))),this.push({data:p.utf8decode(f),meta:c.meta})},E.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:p.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},p.Utf8DecodeWorker=E,a.inherits(k,m),k.prototype.processChunk=function(c){this.push({data:p.utf8encode(c.data),meta:c.meta})},p.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,N,p){var a=o("./support"),u=o("./base64"),l=o("./nodejsUtils"),m=o("./external");function r(h){return h}function w(h,_){for(var f=0;f<h.length;++f)_[f]=255&h.charCodeAt(f);return _}o("setimmediate"),p.newBlob=function(h,_){p.checkSupport("blob");try{return new Blob([h],{type:_})}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return f.append(h),f.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var E={stringifyByChunk:function(h,_,f){var S=[],R=0,x=h.length;if(x<=f)return String.fromCharCode.apply(null,h);for(;R<x;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,h.slice(R,Math.min(R+f,x)))):S.push(String.fromCharCode.apply(null,h.subarray(R,Math.min(R+f,x)))),R+=f;return S.join("")},stringifyByChar:function(h){for(var _="",f=0;f<h.length;f++)_+=String.fromCharCode(h[f]);return _},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function k(h){var _=65536,f=p.getTypeOf(h),S=!0;if(f==="uint8array"?S=E.applyCanBeUsed.uint8array:f==="nodebuffer"&&(S=E.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return E.stringifyByChunk(h,f,_)}catch{_=Math.floor(_/2)}return E.stringifyByChar(h)}function c(h,_){for(var f=0;f<h.length;f++)_[f]=h[f];return _}p.applyFromCharCode=k;var y={};y.string={string:r,array:function(h){return w(h,new Array(h.length))},arraybuffer:function(h){return y.string.uint8array(h).buffer},uint8array:function(h){return w(h,new Uint8Array(h.length))},nodebuffer:function(h){return w(h,l.allocBuffer(h.length))}},y.array={string:k,array:r,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return l.newBufferFrom(h)}},y.arraybuffer={string:function(h){return k(new Uint8Array(h))},array:function(h){return c(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:r,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return l.newBufferFrom(new Uint8Array(h))}},y.uint8array={string:k,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:r,nodebuffer:function(h){return l.newBufferFrom(h)}},y.nodebuffer={string:k,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return y.nodebuffer.uint8array(h).buffer},uint8array:function(h){return c(h,new Uint8Array(h.length))},nodebuffer:r},p.transformTo=function(h,_){if(_=_||"",!h)return _;p.checkSupport(h);var f=p.getTypeOf(_);return y[f][h](_)},p.resolve=function(h){for(var _=h.split("/"),f=[],S=0;S<_.length;S++){var R=_[S];R==="."||R===""&&S!==0&&S!==_.length-1||(R===".."?f.pop():f.push(R))}return f.join("/")},p.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":a.nodebuffer&&l.isBuffer(h)?"nodebuffer":a.uint8array&&h instanceof Uint8Array?"uint8array":a.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},p.checkSupport=function(h){if(!a[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},p.MAX_VALUE_16BITS=65535,p.MAX_VALUE_32BITS=-1,p.pretty=function(h){var _,f,S="";for(f=0;f<(h||"").length;f++)S+="\\x"+((_=h.charCodeAt(f))<16?"0":"")+_.toString(16).toUpperCase();return S},p.delay=function(h,_,f){setImmediate(function(){h.apply(f||null,_||[])})},p.inherits=function(h,_){function f(){}f.prototype=_.prototype,h.prototype=new f},p.extend=function(){var h,_,f={};for(h=0;h<arguments.length;h++)for(_ in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],_)&&f[_]===void 0&&(f[_]=arguments[h][_]);return f},p.prepareContent=function(h,_,f,S,R){return m.Promise.resolve(_).then(function(x){return a.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new m.Promise(function(O,z){var B=new FileReader;B.onload=function(W){O(W.target.result)},B.onerror=function(W){z(W.target.error)},B.readAsArrayBuffer(x)}):x}).then(function(x){var O=p.getTypeOf(x);return O?(O==="arraybuffer"?x=p.transformTo("uint8array",x):O==="string"&&(R?x=u.decode(x):f&&S!==!0&&(x=function(z){return w(z,a.uint8array?new Uint8Array(z.length):new Array(z.length))}(x))),x):m.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,N,p){var a=o("./reader/readerFor"),u=o("./utils"),l=o("./signature"),m=o("./zipEntry"),r=o("./support");function w(E){this.files=[],this.loadOptions=E}w.prototype={checkSignature:function(E){if(!this.reader.readAndCheckSignature(E)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(k)+", expected "+u.pretty(E)+")")}},isSignature:function(E,k){var c=this.reader.index;this.reader.setIndex(E);var y=this.reader.readString(4)===k;return this.reader.setIndex(c),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var E=this.reader.readData(this.zipCommentLength),k=r.uint8array?"uint8array":"array",c=u.transformTo(k,E);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var E,k,c,y=this.zip64EndOfCentralSize-44;0<y;)E=this.reader.readInt(2),k=this.reader.readInt(4),c=this.reader.readData(k),this.zip64ExtensibleData[E]={id:E,length:k,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var E,k;for(E=0;E<this.files.length;E++)k=this.files[E],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var E;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(E=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(E);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var E=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(E<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(E);var k=E;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(E=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(E),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var y=k-c;if(0<y)this.isSignature(k,l.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(E){this.reader=a(E)},load:function(E){this.prepareReader(E),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},N.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,N,p){var a=o("./reader/readerFor"),u=o("./utils"),l=o("./compressedObject"),m=o("./crc32"),r=o("./utf8"),w=o("./compressions"),E=o("./support");function k(c,y){this.options=c,this.loadOptions=y}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var y,h;if(c.skip(22),this.fileNameLength=c.readInt(2),h=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(_){for(var f in w)if(Object.prototype.hasOwnProperty.call(w,f)&&w[f].magic===_)return w[f];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,y,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var y=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(y),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=a(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var y,h,_,f=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<f;)y=c.readInt(2),h=c.readInt(2),_=c.readData(h),this.extraFields[y]={id:y,length:h,value:_};c.setIndex(f)},handleUTF8:function(){var c=E.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=r.utf8decode(this.fileName),this.fileCommentStr=r.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var h=u.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var f=u.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var y=a(c.value);return y.readInt(1)!==1||m(this.fileName)!==y.readInt(4)?null:r.utf8decode(y.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var y=a(c.value);return y.readInt(1)!==1||m(this.fileComment)!==y.readInt(4)?null:r.utf8decode(y.readData(c.length-5))}return null}},N.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,N,p){function a(y,h,_){this.name=y,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=h,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var u=o("./stream/StreamHelper"),l=o("./stream/DataWorker"),m=o("./utf8"),r=o("./compressedObject"),w=o("./stream/GenericWorker");a.prototype={internalStream:function(y){var h=null,_="string";try{if(!y)throw new Error("No output type specified.");var f=(_=y.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),h=this._decompressWorker();var S=!this._dataBinary;S&&!f&&(h=h.pipe(new m.Utf8EncodeWorker)),!S&&f&&(h=h.pipe(new m.Utf8DecodeWorker))}catch(R){(h=new w("error")).error(R)}return new u(h,_,"")},async:function(y,h){return this.internalStream(y).accumulate(h)},nodeStream:function(y,h){return this.internalStream(y||"nodebuffer").toNodejsStream(h)},_compressWorker:function(y,h){if(this._data instanceof r&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new m.Utf8EncodeWorker)),r.createWorkerFrom(_,y,h)},_decompressWorker:function(){return this._data instanceof r?this._data.getContentWorker():this._data instanceof w?this._data:new l(this._data)}};for(var E=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<E.length;c++)a.prototype[E[c]]=k;N.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,N,p){(function(a){var u,l,m=a.MutationObserver||a.WebKitMutationObserver;if(m){var r=0,w=new m(y),E=a.document.createTextNode("");w.observe(E,{characterData:!0}),u=function(){E.data=r=++r%2}}else if(a.setImmediate||a.MessageChannel===void 0)u="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var h=a.document.createElement("script");h.onreadystatechange=function(){y(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},a.document.documentElement.appendChild(h)}:function(){setTimeout(y,0)};else{var k=new a.MessageChannel;k.port1.onmessage=y,u=function(){k.port2.postMessage(0)}}var c=[];function y(){var h,_;l=!0;for(var f=c.length;f;){for(_=c,c=[],h=-1;++h<f;)_[h]();f=c.length}l=!1}N.exports=function(h){c.push(h)!==1||l||u()}}).call(this,typeof je<"u"?je:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,N,p){var a=o("immediate");function u(){}var l={},m=["REJECTED"],r=["FULFILLED"],w=["PENDING"];function E(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,f!==u&&h(this,f)}function k(f,S,R){this.promise=f,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function c(f,S,R){a(function(){var x;try{x=S(R)}catch(O){return l.reject(f,O)}x===f?l.reject(f,new TypeError("Cannot resolve promise with itself")):l.resolve(f,x)})}function y(f){var S=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof S=="function")return function(){S.apply(f,arguments)}}function h(f,S){var R=!1;function x(B){R||(R=!0,l.reject(f,B))}function O(B){R||(R=!0,l.resolve(f,B))}var z=_(function(){S(O,x)});z.status==="error"&&x(z.value)}function _(f,S){var R={};try{R.value=f(S),R.status="success"}catch(x){R.status="error",R.value=x}return R}(N.exports=E).prototype.finally=function(f){if(typeof f!="function")return this;var S=this.constructor;return this.then(function(R){return S.resolve(f()).then(function(){return R})},function(R){return S.resolve(f()).then(function(){throw R})})},E.prototype.catch=function(f){return this.then(null,f)},E.prototype.then=function(f,S){if(typeof f!="function"&&this.state===r||typeof S!="function"&&this.state===m)return this;var R=new this.constructor(u);return this.state!==w?c(R,this.state===r?f:S,this.outcome):this.queue.push(new k(R,f,S)),R},k.prototype.callFulfilled=function(f){l.resolve(this.promise,f)},k.prototype.otherCallFulfilled=function(f){c(this.promise,this.onFulfilled,f)},k.prototype.callRejected=function(f){l.reject(this.promise,f)},k.prototype.otherCallRejected=function(f){c(this.promise,this.onRejected,f)},l.resolve=function(f,S){var R=_(y,S);if(R.status==="error")return l.reject(f,R.value);var x=R.value;if(x)h(f,x);else{f.state=r,f.outcome=S;for(var O=-1,z=f.queue.length;++O<z;)f.queue[O].callFulfilled(S)}return f},l.reject=function(f,S){f.state=m,f.outcome=S;for(var R=-1,x=f.queue.length;++R<x;)f.queue[R].callRejected(S);return f},E.resolve=function(f){return f instanceof this?f:l.resolve(new this(u),f)},E.reject=function(f){var S=new this(u);return l.reject(S,f)},E.all=function(f){var S=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=f.length,x=!1;if(!R)return this.resolve([]);for(var O=new Array(R),z=0,B=-1,W=new this(u);++B<R;)C(f[B],B);return W;function C($,K){S.resolve($).then(function(g){O[K]=g,++z!==R||x||(x=!0,l.resolve(W,O))},function(g){x||(x=!0,l.reject(W,g))})}},E.race=function(f){var S=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=f.length,x=!1;if(!R)return this.resolve([]);for(var O=-1,z=new this(u);++O<R;)B=f[O],S.resolve(B).then(function(W){x||(x=!0,l.resolve(z,W))},function(W){x||(x=!0,l.reject(z,W))});var B;return z}},{immediate:36}],38:[function(o,N,p){var a={};(0,o("./lib/utils/common").assign)(a,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),N.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,N,p){var a=o("./zlib/deflate"),u=o("./utils/common"),l=o("./utils/strings"),m=o("./zlib/messages"),r=o("./zlib/zstream"),w=Object.prototype.toString,E=0,k=-1,c=0,y=8;function h(f){if(!(this instanceof h))return new h(f);this.options=u.assign({level:k,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},f||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var R=a.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(R!==E)throw new Error(m[R]);if(S.header&&a.deflateSetHeader(this.strm,S.header),S.dictionary){var x;if(x=typeof S.dictionary=="string"?l.string2buf(S.dictionary):w.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(R=a.deflateSetDictionary(this.strm,x))!==E)throw new Error(m[R]);this._dict_set=!0}}function _(f,S){var R=new h(S);if(R.push(f,!0),R.err)throw R.msg||m[R.err];return R.result}h.prototype.push=function(f,S){var R,x,O=this.strm,z=this.options.chunkSize;if(this.ended)return!1;x=S===~~S?S:S===!0?4:0,typeof f=="string"?O.input=l.string2buf(f):w.call(f)==="[object ArrayBuffer]"?O.input=new Uint8Array(f):O.input=f,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new u.Buf8(z),O.next_out=0,O.avail_out=z),(R=a.deflate(O,x))!==1&&R!==E)return this.onEnd(R),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(u.shrinkBuf(O.output,O.next_out))):this.onData(u.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&R!==1);return x===4?(R=a.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===E):x!==2||(this.onEnd(E),!(O.avail_out=0))},h.prototype.onData=function(f){this.chunks.push(f)},h.prototype.onEnd=function(f){f===E&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},p.Deflate=h,p.deflate=_,p.deflateRaw=function(f,S){return(S=S||{}).raw=!0,_(f,S)},p.gzip=function(f,S){return(S=S||{}).gzip=!0,_(f,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,N,p){var a=o("./zlib/inflate"),u=o("./utils/common"),l=o("./utils/strings"),m=o("./zlib/constants"),r=o("./zlib/messages"),w=o("./zlib/zstream"),E=o("./zlib/gzheader"),k=Object.prototype.toString;function c(h){if(!(this instanceof c))return new c(h);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},h||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||h&&h.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var f=a.inflateInit2(this.strm,_.windowBits);if(f!==m.Z_OK)throw new Error(r[f]);this.header=new E,a.inflateGetHeader(this.strm,this.header)}function y(h,_){var f=new c(_);if(f.push(h,!0),f.err)throw f.msg||r[f.err];return f.result}c.prototype.push=function(h,_){var f,S,R,x,O,z,B=this.strm,W=this.options.chunkSize,C=this.options.dictionary,$=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof h=="string"?B.input=l.binstring2buf(h):k.call(h)==="[object ArrayBuffer]"?B.input=new Uint8Array(h):B.input=h,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new u.Buf8(W),B.next_out=0,B.avail_out=W),(f=a.inflate(B,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&C&&(z=typeof C=="string"?l.string2buf(C):k.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,f=a.inflateSetDictionary(this.strm,z)),f===m.Z_BUF_ERROR&&$===!0&&(f=m.Z_OK,$=!1),f!==m.Z_STREAM_END&&f!==m.Z_OK)return this.onEnd(f),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&f!==m.Z_STREAM_END&&(B.avail_in!==0||S!==m.Z_FINISH&&S!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=l.utf8border(B.output,B.next_out),x=B.next_out-R,O=l.buf2string(B.output,R),B.next_out=x,B.avail_out=W-x,x&&u.arraySet(B.output,B.output,R,x,0),this.onData(O)):this.onData(u.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&($=!0)}while((0<B.avail_in||B.avail_out===0)&&f!==m.Z_STREAM_END);return f===m.Z_STREAM_END&&(S=m.Z_FINISH),S===m.Z_FINISH?(f=a.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===m.Z_OK):S!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(B.avail_out=0))},c.prototype.onData=function(h){this.chunks.push(h)},c.prototype.onEnd=function(h){h===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},p.Inflate=c,p.inflate=y,p.inflateRaw=function(h,_){return(_=_||{}).raw=!0,y(h,_)},p.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,N,p){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";p.assign=function(m){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var w=r.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var E in w)w.hasOwnProperty(E)&&(m[E]=w[E])}}return m},p.shrinkBuf=function(m,r){return m.length===r?m:m.subarray?m.subarray(0,r):(m.length=r,m)};var u={arraySet:function(m,r,w,E,k){if(r.subarray&&m.subarray)m.set(r.subarray(w,w+E),k);else for(var c=0;c<E;c++)m[k+c]=r[w+c]},flattenChunks:function(m){var r,w,E,k,c,y;for(r=E=0,w=m.length;r<w;r++)E+=m[r].length;for(y=new Uint8Array(E),r=k=0,w=m.length;r<w;r++)c=m[r],y.set(c,k),k+=c.length;return y}},l={arraySet:function(m,r,w,E,k){for(var c=0;c<E;c++)m[k+c]=r[w+c]},flattenChunks:function(m){return[].concat.apply([],m)}};p.setTyped=function(m){m?(p.Buf8=Uint8Array,p.Buf16=Uint16Array,p.Buf32=Int32Array,p.assign(p,u)):(p.Buf8=Array,p.Buf16=Array,p.Buf32=Array,p.assign(p,l))},p.setTyped(a)},{}],42:[function(o,N,p){var a=o("./common"),u=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var m=new a.Buf8(256),r=0;r<256;r++)m[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function w(E,k){if(k<65537&&(E.subarray&&l||!E.subarray&&u))return String.fromCharCode.apply(null,a.shrinkBuf(E,k));for(var c="",y=0;y<k;y++)c+=String.fromCharCode(E[y]);return c}m[254]=m[254]=1,p.string2buf=function(E){var k,c,y,h,_,f=E.length,S=0;for(h=0;h<f;h++)(64512&(c=E.charCodeAt(h)))==55296&&h+1<f&&(64512&(y=E.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(y-56320),h++),S+=c<128?1:c<2048?2:c<65536?3:4;for(k=new a.Buf8(S),h=_=0;_<S;h++)(64512&(c=E.charCodeAt(h)))==55296&&h+1<f&&(64512&(y=E.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(y-56320),h++),c<128?k[_++]=c:(c<2048?k[_++]=192|c>>>6:(c<65536?k[_++]=224|c>>>12:(k[_++]=240|c>>>18,k[_++]=128|c>>>12&63),k[_++]=128|c>>>6&63),k[_++]=128|63&c);return k},p.buf2binstring=function(E){return w(E,E.length)},p.binstring2buf=function(E){for(var k=new a.Buf8(E.length),c=0,y=k.length;c<y;c++)k[c]=E.charCodeAt(c);return k},p.buf2string=function(E,k){var c,y,h,_,f=k||E.length,S=new Array(2*f);for(c=y=0;c<f;)if((h=E[c++])<128)S[y++]=h;else if(4<(_=m[h]))S[y++]=65533,c+=_-1;else{for(h&=_===2?31:_===3?15:7;1<_&&c<f;)h=h<<6|63&E[c++],_--;1<_?S[y++]=65533:h<65536?S[y++]=h:(h-=65536,S[y++]=55296|h>>10&1023,S[y++]=56320|1023&h)}return w(S,y)},p.utf8border=function(E,k){var c;for((k=k||E.length)>E.length&&(k=E.length),c=k-1;0<=c&&(192&E[c])==128;)c--;return c<0||c===0?k:c+m[E[c]]>k?c:k}},{"./common":41}],43:[function(o,N,p){N.exports=function(a,u,l,m){for(var r=65535&a|0,w=a>>>16&65535|0,E=0;l!==0;){for(l-=E=2e3<l?2e3:l;w=w+(r=r+u[m++]|0)|0,--E;);r%=65521,w%=65521}return r|w<<16|0}},{}],44:[function(o,N,p){N.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,N,p){var a=function(){for(var u,l=[],m=0;m<256;m++){u=m;for(var r=0;r<8;r++)u=1&u?3988292384^u>>>1:u>>>1;l[m]=u}return l}();N.exports=function(u,l,m,r){var w=a,E=r+m;u^=-1;for(var k=r;k<E;k++)u=u>>>8^w[255&(u^l[k])];return-1^u}},{}],46:[function(o,N,p){var a,u=o("../utils/common"),l=o("./trees"),m=o("./adler32"),r=o("./crc32"),w=o("./messages"),E=0,k=4,c=0,y=-2,h=-1,_=4,f=2,S=8,R=9,x=286,O=30,z=19,B=2*x+1,W=15,C=3,$=258,K=$+C+1,g=42,D=113,s=1,H=2,at=3,X=4;function pt(n,Z){return n.msg=w[Z],Z}function tt(n){return(n<<1)-(4<n?9:0)}function lt(n){for(var Z=n.length;0<=--Z;)n[Z]=0}function M(n){var Z=n.state,j=Z.pending;j>n.avail_out&&(j=n.avail_out),j!==0&&(u.arraySet(n.output,Z.pending_buf,Z.pending_out,j,n.next_out),n.next_out+=j,Z.pending_out+=j,n.total_out+=j,n.avail_out-=j,Z.pending-=j,Z.pending===0&&(Z.pending_out=0))}function F(n,Z){l._tr_flush_block(n,0<=n.block_start?n.block_start:-1,n.strstart-n.block_start,Z),n.block_start=n.strstart,M(n.strm)}function ut(n,Z){n.pending_buf[n.pending++]=Z}function it(n,Z){n.pending_buf[n.pending++]=Z>>>8&255,n.pending_buf[n.pending++]=255&Z}function et(n,Z){var j,T,b=n.max_chain_length,L=n.strstart,V=n.prev_length,J=n.nice_match,q=n.strstart>n.w_size-K?n.strstart-(n.w_size-K):0,rt=n.window,ot=n.w_mask,nt=n.prev,dt=n.strstart+$,Et=rt[L+V-1],wt=rt[L+V];n.prev_length>=n.good_match&&(b>>=2),J>n.lookahead&&(J=n.lookahead);do if(rt[(j=Z)+V]===wt&&rt[j+V-1]===Et&&rt[j]===rt[L]&&rt[++j]===rt[L+1]){L+=2,j++;do;while(rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&rt[++L]===rt[++j]&&L<dt);if(T=$-(dt-L),L=dt-$,V<T){if(n.match_start=Z,J<=(V=T))break;Et=rt[L+V-1],wt=rt[L+V]}}while((Z=nt[Z&ot])>q&&--b!=0);return V<=n.lookahead?V:n.lookahead}function Tt(n){var Z,j,T,b,L,V,J,q,rt,ot,nt=n.w_size;do{if(b=n.window_size-n.lookahead-n.strstart,n.strstart>=nt+(nt-K)){for(u.arraySet(n.window,n.window,nt,nt,0),n.match_start-=nt,n.strstart-=nt,n.block_start-=nt,Z=j=n.hash_size;T=n.head[--Z],n.head[Z]=nt<=T?T-nt:0,--j;);for(Z=j=nt;T=n.prev[--Z],n.prev[Z]=nt<=T?T-nt:0,--j;);b+=nt}if(n.strm.avail_in===0)break;if(V=n.strm,J=n.window,q=n.strstart+n.lookahead,rt=b,ot=void 0,ot=V.avail_in,rt<ot&&(ot=rt),j=ot===0?0:(V.avail_in-=ot,u.arraySet(J,V.input,V.next_in,ot,q),V.state.wrap===1?V.adler=m(V.adler,J,ot,q):V.state.wrap===2&&(V.adler=r(V.adler,J,ot,q)),V.next_in+=ot,V.total_in+=ot,ot),n.lookahead+=j,n.lookahead+n.insert>=C)for(L=n.strstart-n.insert,n.ins_h=n.window[L],n.ins_h=(n.ins_h<<n.hash_shift^n.window[L+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[L+C-1])&n.hash_mask,n.prev[L&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=L,L++,n.insert--,!(n.lookahead+n.insert<C)););}while(n.lookahead<K&&n.strm.avail_in!==0)}function Nt(n,Z){for(var j,T;;){if(n.lookahead<K){if(Tt(n),n.lookahead<K&&Z===E)return s;if(n.lookahead===0)break}if(j=0,n.lookahead>=C&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+C-1])&n.hash_mask,j=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),j!==0&&n.strstart-j<=n.w_size-K&&(n.match_length=et(n,j)),n.match_length>=C)if(T=l._tr_tally(n,n.strstart-n.match_start,n.match_length-C),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=C){for(n.match_length--;n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+C-1])&n.hash_mask,j=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart,--n.match_length!=0;);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else T=l._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(T&&(F(n,!1),n.strm.avail_out===0))return s}return n.insert=n.strstart<C-1?n.strstart:C-1,Z===k?(F(n,!0),n.strm.avail_out===0?at:X):n.last_lit&&(F(n,!1),n.strm.avail_out===0)?s:H}function gt(n,Z){for(var j,T,b;;){if(n.lookahead<K){if(Tt(n),n.lookahead<K&&Z===E)return s;if(n.lookahead===0)break}if(j=0,n.lookahead>=C&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+C-1])&n.hash_mask,j=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=C-1,j!==0&&n.prev_length<n.max_lazy_match&&n.strstart-j<=n.w_size-K&&(n.match_length=et(n,j),n.match_length<=5&&(n.strategy===1||n.match_length===C&&4096<n.strstart-n.match_start)&&(n.match_length=C-1)),n.prev_length>=C&&n.match_length<=n.prev_length){for(b=n.strstart+n.lookahead-C,T=l._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-C),n.lookahead-=n.prev_length-1,n.prev_length-=2;++n.strstart<=b&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+C-1])&n.hash_mask,j=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),--n.prev_length!=0;);if(n.match_available=0,n.match_length=C-1,n.strstart++,T&&(F(n,!1),n.strm.avail_out===0))return s}else if(n.match_available){if((T=l._tr_tally(n,0,n.window[n.strstart-1]))&&F(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return s}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(T=l._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<C-1?n.strstart:C-1,Z===k?(F(n,!0),n.strm.avail_out===0?at:X):n.last_lit&&(F(n,!1),n.strm.avail_out===0)?s:H}function St(n,Z,j,T,b){this.good_length=n,this.max_lazy=Z,this.nice_length=j,this.max_chain=T,this.func=b}function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*B),this.dyn_dtree=new u.Buf16(2*(2*O+1)),this.bl_tree=new u.Buf16(2*(2*z+1)),lt(this.dyn_ltree),lt(this.dyn_dtree),lt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(W+1),this.heap=new u.Buf16(2*x+1),lt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*x+1),lt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function At(n){var Z;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=f,(Z=n.state).pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?g:D,n.adler=Z.wrap===2?0:1,Z.last_flush=E,l._tr_init(Z),c):pt(n,y)}function Rt(n){var Z=At(n);return Z===c&&function(j){j.window_size=2*j.w_size,lt(j.head),j.max_lazy_match=a[j.level].max_lazy,j.good_match=a[j.level].good_length,j.nice_match=a[j.level].nice_length,j.max_chain_length=a[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=C-1,j.match_available=0,j.ins_h=0}(n.state),Z}function Lt(n,Z,j,T,b,L){if(!n)return y;var V=1;if(Z===h&&(Z=6),T<0?(V=0,T=-T):15<T&&(V=2,T-=16),b<1||R<b||j!==S||T<8||15<T||Z<0||9<Z||L<0||_<L)return pt(n,y);T===8&&(T=9);var J=new Ot;return(n.state=J).strm=n,J.wrap=V,J.gzhead=null,J.w_bits=T,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=b+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+C-1)/C),J.window=new u.Buf8(2*J.w_size),J.head=new u.Buf16(J.hash_size),J.prev=new u.Buf16(J.w_size),J.lit_bufsize=1<<b+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new u.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=Z,J.strategy=L,J.method=j,Rt(n)}a=[new St(0,0,0,0,function(n,Z){var j=65535;for(j>n.pending_buf_size-5&&(j=n.pending_buf_size-5);;){if(n.lookahead<=1){if(Tt(n),n.lookahead===0&&Z===E)return s;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var T=n.block_start+j;if((n.strstart===0||n.strstart>=T)&&(n.lookahead=n.strstart-T,n.strstart=T,F(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-K&&(F(n,!1),n.strm.avail_out===0))return s}return n.insert=0,Z===k?(F(n,!0),n.strm.avail_out===0?at:X):(n.strstart>n.block_start&&(F(n,!1),n.strm.avail_out),s)}),new St(4,4,8,4,Nt),new St(4,5,16,8,Nt),new St(4,6,32,32,Nt),new St(4,4,16,16,gt),new St(8,16,32,32,gt),new St(8,16,128,128,gt),new St(8,32,128,256,gt),new St(32,128,258,1024,gt),new St(32,258,258,4096,gt)],p.deflateInit=function(n,Z){return Lt(n,Z,S,15,8,0)},p.deflateInit2=Lt,p.deflateReset=Rt,p.deflateResetKeep=At,p.deflateSetHeader=function(n,Z){return n&&n.state?n.state.wrap!==2?y:(n.state.gzhead=Z,c):y},p.deflate=function(n,Z){var j,T,b,L;if(!n||!n.state||5<Z||Z<0)return n?pt(n,y):y;if(T=n.state,!n.output||!n.input&&n.avail_in!==0||T.status===666&&Z!==k)return pt(n,n.avail_out===0?-5:y);if(T.strm=n,j=T.last_flush,T.last_flush=Z,T.status===g)if(T.wrap===2)n.adler=0,ut(T,31),ut(T,139),ut(T,8),T.gzhead?(ut(T,(T.gzhead.text?1:0)+(T.gzhead.hcrc?2:0)+(T.gzhead.extra?4:0)+(T.gzhead.name?8:0)+(T.gzhead.comment?16:0)),ut(T,255&T.gzhead.time),ut(T,T.gzhead.time>>8&255),ut(T,T.gzhead.time>>16&255),ut(T,T.gzhead.time>>24&255),ut(T,T.level===9?2:2<=T.strategy||T.level<2?4:0),ut(T,255&T.gzhead.os),T.gzhead.extra&&T.gzhead.extra.length&&(ut(T,255&T.gzhead.extra.length),ut(T,T.gzhead.extra.length>>8&255)),T.gzhead.hcrc&&(n.adler=r(n.adler,T.pending_buf,T.pending,0)),T.gzindex=0,T.status=69):(ut(T,0),ut(T,0),ut(T,0),ut(T,0),ut(T,0),ut(T,T.level===9?2:2<=T.strategy||T.level<2?4:0),ut(T,3),T.status=D);else{var V=S+(T.w_bits-8<<4)<<8;V|=(2<=T.strategy||T.level<2?0:T.level<6?1:T.level===6?2:3)<<6,T.strstart!==0&&(V|=32),V+=31-V%31,T.status=D,it(T,V),T.strstart!==0&&(it(T,n.adler>>>16),it(T,65535&n.adler)),n.adler=1}if(T.status===69)if(T.gzhead.extra){for(b=T.pending;T.gzindex<(65535&T.gzhead.extra.length)&&(T.pending!==T.pending_buf_size||(T.gzhead.hcrc&&T.pending>b&&(n.adler=r(n.adler,T.pending_buf,T.pending-b,b)),M(n),b=T.pending,T.pending!==T.pending_buf_size));)ut(T,255&T.gzhead.extra[T.gzindex]),T.gzindex++;T.gzhead.hcrc&&T.pending>b&&(n.adler=r(n.adler,T.pending_buf,T.pending-b,b)),T.gzindex===T.gzhead.extra.length&&(T.gzindex=0,T.status=73)}else T.status=73;if(T.status===73)if(T.gzhead.name){b=T.pending;do{if(T.pending===T.pending_buf_size&&(T.gzhead.hcrc&&T.pending>b&&(n.adler=r(n.adler,T.pending_buf,T.pending-b,b)),M(n),b=T.pending,T.pending===T.pending_buf_size)){L=1;break}L=T.gzindex<T.gzhead.name.length?255&T.gzhead.name.charCodeAt(T.gzindex++):0,ut(T,L)}while(L!==0);T.gzhead.hcrc&&T.pending>b&&(n.adler=r(n.adler,T.pending_buf,T.pending-b,b)),L===0&&(T.gzindex=0,T.status=91)}else T.status=91;if(T.status===91)if(T.gzhead.comment){b=T.pending;do{if(T.pending===T.pending_buf_size&&(T.gzhead.hcrc&&T.pending>b&&(n.adler=r(n.adler,T.pending_buf,T.pending-b,b)),M(n),b=T.pending,T.pending===T.pending_buf_size)){L=1;break}L=T.gzindex<T.gzhead.comment.length?255&T.gzhead.comment.charCodeAt(T.gzindex++):0,ut(T,L)}while(L!==0);T.gzhead.hcrc&&T.pending>b&&(n.adler=r(n.adler,T.pending_buf,T.pending-b,b)),L===0&&(T.status=103)}else T.status=103;if(T.status===103&&(T.gzhead.hcrc?(T.pending+2>T.pending_buf_size&&M(n),T.pending+2<=T.pending_buf_size&&(ut(T,255&n.adler),ut(T,n.adler>>8&255),n.adler=0,T.status=D)):T.status=D),T.pending!==0){if(M(n),n.avail_out===0)return T.last_flush=-1,c}else if(n.avail_in===0&&tt(Z)<=tt(j)&&Z!==k)return pt(n,-5);if(T.status===666&&n.avail_in!==0)return pt(n,-5);if(n.avail_in!==0||T.lookahead!==0||Z!==E&&T.status!==666){var J=T.strategy===2?function(q,rt){for(var ot;;){if(q.lookahead===0&&(Tt(q),q.lookahead===0)){if(rt===E)return s;break}if(q.match_length=0,ot=l._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,ot&&(F(q,!1),q.strm.avail_out===0))return s}return q.insert=0,rt===k?(F(q,!0),q.strm.avail_out===0?at:X):q.last_lit&&(F(q,!1),q.strm.avail_out===0)?s:H}(T,Z):T.strategy===3?function(q,rt){for(var ot,nt,dt,Et,wt=q.window;;){if(q.lookahead<=$){if(Tt(q),q.lookahead<=$&&rt===E)return s;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=C&&0<q.strstart&&(nt=wt[dt=q.strstart-1])===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]){Et=q.strstart+$;do;while(nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&nt===wt[++dt]&&dt<Et);q.match_length=$-(Et-dt),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=C?(ot=l._tr_tally(q,1,q.match_length-C),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(ot=l._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),ot&&(F(q,!1),q.strm.avail_out===0))return s}return q.insert=0,rt===k?(F(q,!0),q.strm.avail_out===0?at:X):q.last_lit&&(F(q,!1),q.strm.avail_out===0)?s:H}(T,Z):a[T.level].func(T,Z);if(J!==at&&J!==X||(T.status=666),J===s||J===at)return n.avail_out===0&&(T.last_flush=-1),c;if(J===H&&(Z===1?l._tr_align(T):Z!==5&&(l._tr_stored_block(T,0,0,!1),Z===3&&(lt(T.head),T.lookahead===0&&(T.strstart=0,T.block_start=0,T.insert=0))),M(n),n.avail_out===0))return T.last_flush=-1,c}return Z!==k?c:T.wrap<=0?1:(T.wrap===2?(ut(T,255&n.adler),ut(T,n.adler>>8&255),ut(T,n.adler>>16&255),ut(T,n.adler>>24&255),ut(T,255&n.total_in),ut(T,n.total_in>>8&255),ut(T,n.total_in>>16&255),ut(T,n.total_in>>24&255)):(it(T,n.adler>>>16),it(T,65535&n.adler)),M(n),0<T.wrap&&(T.wrap=-T.wrap),T.pending!==0?c:1)},p.deflateEnd=function(n){var Z;return n&&n.state?(Z=n.state.status)!==g&&Z!==69&&Z!==73&&Z!==91&&Z!==103&&Z!==D&&Z!==666?pt(n,y):(n.state=null,Z===D?pt(n,-3):c):y},p.deflateSetDictionary=function(n,Z){var j,T,b,L,V,J,q,rt,ot=Z.length;if(!n||!n.state||(L=(j=n.state).wrap)===2||L===1&&j.status!==g||j.lookahead)return y;for(L===1&&(n.adler=m(n.adler,Z,ot,0)),j.wrap=0,ot>=j.w_size&&(L===0&&(lt(j.head),j.strstart=0,j.block_start=0,j.insert=0),rt=new u.Buf8(j.w_size),u.arraySet(rt,Z,ot-j.w_size,j.w_size,0),Z=rt,ot=j.w_size),V=n.avail_in,J=n.next_in,q=n.input,n.avail_in=ot,n.next_in=0,n.input=Z,Tt(j);j.lookahead>=C;){for(T=j.strstart,b=j.lookahead-(C-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[T+C-1])&j.hash_mask,j.prev[T&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=T,T++,--b;);j.strstart=T,j.lookahead=C-1,Tt(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=C-1,j.match_available=0,n.next_in=J,n.input=q,n.avail_in=V,j.wrap=L,c},p.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,N,p){N.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,N,p){N.exports=function(a,u){var l,m,r,w,E,k,c,y,h,_,f,S,R,x,O,z,B,W,C,$,K,g,D,s,H;l=a.state,m=a.next_in,s=a.input,r=m+(a.avail_in-5),w=a.next_out,H=a.output,E=w-(u-a.avail_out),k=w+(a.avail_out-257),c=l.dmax,y=l.wsize,h=l.whave,_=l.wnext,f=l.window,S=l.hold,R=l.bits,x=l.lencode,O=l.distcode,z=(1<<l.lenbits)-1,B=(1<<l.distbits)-1;t:do{R<15&&(S+=s[m++]<<R,R+=8,S+=s[m++]<<R,R+=8),W=x[S&z];e:for(;;){if(S>>>=C=W>>>24,R-=C,(C=W>>>16&255)===0)H[w++]=65535&W;else{if(!(16&C)){if(!(64&C)){W=x[(65535&W)+(S&(1<<C)-1)];continue e}if(32&C){l.mode=12;break t}a.msg="invalid literal/length code",l.mode=30;break t}$=65535&W,(C&=15)&&(R<C&&(S+=s[m++]<<R,R+=8),$+=S&(1<<C)-1,S>>>=C,R-=C),R<15&&(S+=s[m++]<<R,R+=8,S+=s[m++]<<R,R+=8),W=O[S&B];r:for(;;){if(S>>>=C=W>>>24,R-=C,!(16&(C=W>>>16&255))){if(!(64&C)){W=O[(65535&W)+(S&(1<<C)-1)];continue r}a.msg="invalid distance code",l.mode=30;break t}if(K=65535&W,R<(C&=15)&&(S+=s[m++]<<R,(R+=8)<C&&(S+=s[m++]<<R,R+=8)),c<(K+=S&(1<<C)-1)){a.msg="invalid distance too far back",l.mode=30;break t}if(S>>>=C,R-=C,(C=w-E)<K){if(h<(C=K-C)&&l.sane){a.msg="invalid distance too far back",l.mode=30;break t}if(D=f,(g=0)===_){if(g+=y-C,C<$){for($-=C;H[w++]=f[g++],--C;);g=w-K,D=H}}else if(_<C){if(g+=y+_-C,(C-=_)<$){for($-=C;H[w++]=f[g++],--C;);if(g=0,_<$){for($-=C=_;H[w++]=f[g++],--C;);g=w-K,D=H}}}else if(g+=_-C,C<$){for($-=C;H[w++]=f[g++],--C;);g=w-K,D=H}for(;2<$;)H[w++]=D[g++],H[w++]=D[g++],H[w++]=D[g++],$-=3;$&&(H[w++]=D[g++],1<$&&(H[w++]=D[g++]))}else{for(g=w-K;H[w++]=H[g++],H[w++]=H[g++],H[w++]=H[g++],2<($-=3););$&&(H[w++]=H[g++],1<$&&(H[w++]=H[g++]))}break}}break}}while(m<r&&w<k);m-=$=R>>3,S&=(1<<(R-=$<<3))-1,a.next_in=m,a.next_out=w,a.avail_in=m<r?r-m+5:5-(m-r),a.avail_out=w<k?k-w+257:257-(w-k),l.hold=S,l.bits=R}},{}],49:[function(o,N,p){var a=o("../utils/common"),u=o("./adler32"),l=o("./crc32"),m=o("./inffast"),r=o("./inftrees"),w=1,E=2,k=0,c=-2,y=1,h=852,_=592;function f(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(g){var D;return g&&g.state?(D=g.state,g.total_in=g.total_out=D.total=0,g.msg="",D.wrap&&(g.adler=1&D.wrap),D.mode=y,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new a.Buf32(h),D.distcode=D.distdyn=new a.Buf32(_),D.sane=1,D.back=-1,k):c}function x(g){var D;return g&&g.state?((D=g.state).wsize=0,D.whave=0,D.wnext=0,R(g)):c}function O(g,D){var s,H;return g&&g.state?(H=g.state,D<0?(s=0,D=-D):(s=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?c:(H.window!==null&&H.wbits!==D&&(H.window=null),H.wrap=s,H.wbits=D,x(g))):c}function z(g,D){var s,H;return g?(H=new S,(g.state=H).window=null,(s=O(g,D))!==k&&(g.state=null),s):c}var B,W,C=!0;function $(g){if(C){var D;for(B=new a.Buf32(512),W=new a.Buf32(32),D=0;D<144;)g.lens[D++]=8;for(;D<256;)g.lens[D++]=9;for(;D<280;)g.lens[D++]=7;for(;D<288;)g.lens[D++]=8;for(r(w,g.lens,0,288,B,0,g.work,{bits:9}),D=0;D<32;)g.lens[D++]=5;r(E,g.lens,0,32,W,0,g.work,{bits:5}),C=!1}g.lencode=B,g.lenbits=9,g.distcode=W,g.distbits=5}function K(g,D,s,H){var at,X=g.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new a.Buf8(X.wsize)),H>=X.wsize?(a.arraySet(X.window,D,s-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(H<(at=X.wsize-X.wnext)&&(at=H),a.arraySet(X.window,D,s-H,at,X.wnext),(H-=at)?(a.arraySet(X.window,D,s-H,H,0),X.wnext=H,X.whave=X.wsize):(X.wnext+=at,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=at))),0}p.inflateReset=x,p.inflateReset2=O,p.inflateResetKeep=R,p.inflateInit=function(g){return z(g,15)},p.inflateInit2=z,p.inflate=function(g,D){var s,H,at,X,pt,tt,lt,M,F,ut,it,et,Tt,Nt,gt,St,Ot,At,Rt,Lt,n,Z,j,T,b=0,L=new a.Buf8(4),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&g.avail_in!==0)return c;(s=g.state).mode===12&&(s.mode=13),pt=g.next_out,at=g.output,lt=g.avail_out,X=g.next_in,H=g.input,tt=g.avail_in,M=s.hold,F=s.bits,ut=tt,it=lt,Z=k;t:for(;;)switch(s.mode){case y:if(s.wrap===0){s.mode=13;break}for(;F<16;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(2&s.wrap&&M===35615){L[s.check=0]=255&M,L[1]=M>>>8&255,s.check=l(s.check,L,2,0),F=M=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&M)<<8)+(M>>8))%31){g.msg="incorrect header check",s.mode=30;break}if((15&M)!=8){g.msg="unknown compression method",s.mode=30;break}if(F-=4,n=8+(15&(M>>>=4)),s.wbits===0)s.wbits=n;else if(n>s.wbits){g.msg="invalid window size",s.mode=30;break}s.dmax=1<<n,g.adler=s.check=1,s.mode=512&M?10:12,F=M=0;break;case 2:for(;F<16;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(s.flags=M,(255&s.flags)!=8){g.msg="unknown compression method",s.mode=30;break}if(57344&s.flags){g.msg="unknown header flags set",s.mode=30;break}s.head&&(s.head.text=M>>8&1),512&s.flags&&(L[0]=255&M,L[1]=M>>>8&255,s.check=l(s.check,L,2,0)),F=M=0,s.mode=3;case 3:for(;F<32;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}s.head&&(s.head.time=M),512&s.flags&&(L[0]=255&M,L[1]=M>>>8&255,L[2]=M>>>16&255,L[3]=M>>>24&255,s.check=l(s.check,L,4,0)),F=M=0,s.mode=4;case 4:for(;F<16;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}s.head&&(s.head.xflags=255&M,s.head.os=M>>8),512&s.flags&&(L[0]=255&M,L[1]=M>>>8&255,s.check=l(s.check,L,2,0)),F=M=0,s.mode=5;case 5:if(1024&s.flags){for(;F<16;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}s.length=M,s.head&&(s.head.extra_len=M),512&s.flags&&(L[0]=255&M,L[1]=M>>>8&255,s.check=l(s.check,L,2,0)),F=M=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&(tt<(et=s.length)&&(et=tt),et&&(s.head&&(n=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),a.arraySet(s.head.extra,H,X,et,n)),512&s.flags&&(s.check=l(s.check,H,et,X)),tt-=et,X+=et,s.length-=et),s.length))break t;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(tt===0)break t;for(et=0;n=H[X+et++],s.head&&n&&s.length<65536&&(s.head.name+=String.fromCharCode(n)),n&&et<tt;);if(512&s.flags&&(s.check=l(s.check,H,et,X)),tt-=et,X+=et,n)break t}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(tt===0)break t;for(et=0;n=H[X+et++],s.head&&n&&s.length<65536&&(s.head.comment+=String.fromCharCode(n)),n&&et<tt;);if(512&s.flags&&(s.check=l(s.check,H,et,X)),tt-=et,X+=et,n)break t}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;F<16;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(M!==(65535&s.check)){g.msg="header crc mismatch",s.mode=30;break}F=M=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),g.adler=s.check=0,s.mode=12;break;case 10:for(;F<32;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}g.adler=s.check=f(M),F=M=0,s.mode=11;case 11:if(s.havedict===0)return g.next_out=pt,g.avail_out=lt,g.next_in=X,g.avail_in=tt,s.hold=M,s.bits=F,2;g.adler=s.check=1,s.mode=12;case 12:if(D===5||D===6)break t;case 13:if(s.last){M>>>=7&F,F-=7&F,s.mode=27;break}for(;F<3;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}switch(s.last=1&M,F-=1,3&(M>>>=1)){case 0:s.mode=14;break;case 1:if($(s),s.mode=20,D!==6)break;M>>>=2,F-=2;break t;case 2:s.mode=17;break;case 3:g.msg="invalid block type",s.mode=30}M>>>=2,F-=2;break;case 14:for(M>>>=7&F,F-=7&F;F<32;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if((65535&M)!=(M>>>16^65535)){g.msg="invalid stored block lengths",s.mode=30;break}if(s.length=65535&M,F=M=0,s.mode=15,D===6)break t;case 15:s.mode=16;case 16:if(et=s.length){if(tt<et&&(et=tt),lt<et&&(et=lt),et===0)break t;a.arraySet(at,H,X,et,pt),tt-=et,X+=et,lt-=et,pt+=et,s.length-=et;break}s.mode=12;break;case 17:for(;F<14;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(s.nlen=257+(31&M),M>>>=5,F-=5,s.ndist=1+(31&M),M>>>=5,F-=5,s.ncode=4+(15&M),M>>>=4,F-=4,286<s.nlen||30<s.ndist){g.msg="too many length or distance symbols",s.mode=30;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;F<3;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}s.lens[V[s.have++]]=7&M,M>>>=3,F-=3}for(;s.have<19;)s.lens[V[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,j={bits:s.lenbits},Z=r(0,s.lens,0,19,s.lencode,0,s.work,j),s.lenbits=j.bits,Z){g.msg="invalid code lengths set",s.mode=30;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;St=(b=s.lencode[M&(1<<s.lenbits)-1])>>>16&255,Ot=65535&b,!((gt=b>>>24)<=F);){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(Ot<16)M>>>=gt,F-=gt,s.lens[s.have++]=Ot;else{if(Ot===16){for(T=gt+2;F<T;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(M>>>=gt,F-=gt,s.have===0){g.msg="invalid bit length repeat",s.mode=30;break}n=s.lens[s.have-1],et=3+(3&M),M>>>=2,F-=2}else if(Ot===17){for(T=gt+3;F<T;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}F-=gt,n=0,et=3+(7&(M>>>=gt)),M>>>=3,F-=3}else{for(T=gt+7;F<T;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}F-=gt,n=0,et=11+(127&(M>>>=gt)),M>>>=7,F-=7}if(s.have+et>s.nlen+s.ndist){g.msg="invalid bit length repeat",s.mode=30;break}for(;et--;)s.lens[s.have++]=n}}if(s.mode===30)break;if(s.lens[256]===0){g.msg="invalid code -- missing end-of-block",s.mode=30;break}if(s.lenbits=9,j={bits:s.lenbits},Z=r(w,s.lens,0,s.nlen,s.lencode,0,s.work,j),s.lenbits=j.bits,Z){g.msg="invalid literal/lengths set",s.mode=30;break}if(s.distbits=6,s.distcode=s.distdyn,j={bits:s.distbits},Z=r(E,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,j),s.distbits=j.bits,Z){g.msg="invalid distances set",s.mode=30;break}if(s.mode=20,D===6)break t;case 20:s.mode=21;case 21:if(6<=tt&&258<=lt){g.next_out=pt,g.avail_out=lt,g.next_in=X,g.avail_in=tt,s.hold=M,s.bits=F,m(g,it),pt=g.next_out,at=g.output,lt=g.avail_out,X=g.next_in,H=g.input,tt=g.avail_in,M=s.hold,F=s.bits,s.mode===12&&(s.back=-1);break}for(s.back=0;St=(b=s.lencode[M&(1<<s.lenbits)-1])>>>16&255,Ot=65535&b,!((gt=b>>>24)<=F);){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(St&&!(240&St)){for(At=gt,Rt=St,Lt=Ot;St=(b=s.lencode[Lt+((M&(1<<At+Rt)-1)>>At)])>>>16&255,Ot=65535&b,!(At+(gt=b>>>24)<=F);){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}M>>>=At,F-=At,s.back+=At}if(M>>>=gt,F-=gt,s.back+=gt,s.length=Ot,St===0){s.mode=26;break}if(32&St){s.back=-1,s.mode=12;break}if(64&St){g.msg="invalid literal/length code",s.mode=30;break}s.extra=15&St,s.mode=22;case 22:if(s.extra){for(T=s.extra;F<T;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}s.length+=M&(1<<s.extra)-1,M>>>=s.extra,F-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;St=(b=s.distcode[M&(1<<s.distbits)-1])>>>16&255,Ot=65535&b,!((gt=b>>>24)<=F);){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(!(240&St)){for(At=gt,Rt=St,Lt=Ot;St=(b=s.distcode[Lt+((M&(1<<At+Rt)-1)>>At)])>>>16&255,Ot=65535&b,!(At+(gt=b>>>24)<=F);){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}M>>>=At,F-=At,s.back+=At}if(M>>>=gt,F-=gt,s.back+=gt,64&St){g.msg="invalid distance code",s.mode=30;break}s.offset=Ot,s.extra=15&St,s.mode=24;case 24:if(s.extra){for(T=s.extra;F<T;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}s.offset+=M&(1<<s.extra)-1,M>>>=s.extra,F-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){g.msg="invalid distance too far back",s.mode=30;break}s.mode=25;case 25:if(lt===0)break t;if(et=it-lt,s.offset>et){if((et=s.offset-et)>s.whave&&s.sane){g.msg="invalid distance too far back",s.mode=30;break}Tt=et>s.wnext?(et-=s.wnext,s.wsize-et):s.wnext-et,et>s.length&&(et=s.length),Nt=s.window}else Nt=at,Tt=pt-s.offset,et=s.length;for(lt<et&&(et=lt),lt-=et,s.length-=et;at[pt++]=Nt[Tt++],--et;);s.length===0&&(s.mode=21);break;case 26:if(lt===0)break t;at[pt++]=s.length,lt--,s.mode=21;break;case 27:if(s.wrap){for(;F<32;){if(tt===0)break t;tt--,M|=H[X++]<<F,F+=8}if(it-=lt,g.total_out+=it,s.total+=it,it&&(g.adler=s.check=s.flags?l(s.check,at,it,pt-it):u(s.check,at,it,pt-it)),it=lt,(s.flags?M:f(M))!==s.check){g.msg="incorrect data check",s.mode=30;break}F=M=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;F<32;){if(tt===0)break t;tt--,M+=H[X++]<<F,F+=8}if(M!==(4294967295&s.total)){g.msg="incorrect length check",s.mode=30;break}F=M=0}s.mode=29;case 29:Z=1;break t;case 30:Z=-3;break t;case 31:return-4;case 32:default:return c}return g.next_out=pt,g.avail_out=lt,g.next_in=X,g.avail_in=tt,s.hold=M,s.bits=F,(s.wsize||it!==g.avail_out&&s.mode<30&&(s.mode<27||D!==4))&&K(g,g.output,g.next_out,it-g.avail_out)?(s.mode=31,-4):(ut-=g.avail_in,it-=g.avail_out,g.total_in+=ut,g.total_out+=it,s.total+=it,s.wrap&&it&&(g.adler=s.check=s.flags?l(s.check,at,it,g.next_out-it):u(s.check,at,it,g.next_out-it)),g.data_type=s.bits+(s.last?64:0)+(s.mode===12?128:0)+(s.mode===20||s.mode===15?256:0),(ut==0&&it===0||D===4)&&Z===k&&(Z=-5),Z)},p.inflateEnd=function(g){if(!g||!g.state)return c;var D=g.state;return D.window&&(D.window=null),g.state=null,k},p.inflateGetHeader=function(g,D){var s;return g&&g.state&&2&(s=g.state).wrap?((s.head=D).done=!1,k):c},p.inflateSetDictionary=function(g,D){var s,H=D.length;return g&&g.state?(s=g.state).wrap!==0&&s.mode!==11?c:s.mode===11&&u(1,D,H,0)!==s.check?-3:K(g,D,H,H)?(s.mode=31,-4):(s.havedict=1,k):c},p.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,N,p){var a=o("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],r=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];N.exports=function(w,E,k,c,y,h,_,f){var S,R,x,O,z,B,W,C,$,K=f.bits,g=0,D=0,s=0,H=0,at=0,X=0,pt=0,tt=0,lt=0,M=0,F=null,ut=0,it=new a.Buf16(16),et=new a.Buf16(16),Tt=null,Nt=0;for(g=0;g<=15;g++)it[g]=0;for(D=0;D<c;D++)it[E[k+D]]++;for(at=K,H=15;1<=H&&it[H]===0;H--);if(H<at&&(at=H),H===0)return y[h++]=20971520,y[h++]=20971520,f.bits=1,0;for(s=1;s<H&&it[s]===0;s++);for(at<s&&(at=s),g=tt=1;g<=15;g++)if(tt<<=1,(tt-=it[g])<0)return-1;if(0<tt&&(w===0||H!==1))return-1;for(et[1]=0,g=1;g<15;g++)et[g+1]=et[g]+it[g];for(D=0;D<c;D++)E[k+D]!==0&&(_[et[E[k+D]]++]=D);if(B=w===0?(F=Tt=_,19):w===1?(F=u,ut-=257,Tt=l,Nt-=257,256):(F=m,Tt=r,-1),g=s,z=h,pt=D=M=0,x=-1,O=(lt=1<<(X=at))-1,w===1&&852<lt||w===2&&592<lt)return 1;for(;;){for(W=g-pt,$=_[D]<B?(C=0,_[D]):_[D]>B?(C=Tt[Nt+_[D]],F[ut+_[D]]):(C=96,0),S=1<<g-pt,s=R=1<<X;y[z+(M>>pt)+(R-=S)]=W<<24|C<<16|$|0,R!==0;);for(S=1<<g-1;M&S;)S>>=1;if(S!==0?(M&=S-1,M+=S):M=0,D++,--it[g]==0){if(g===H)break;g=E[k+_[D]]}if(at<g&&(M&O)!==x){for(pt===0&&(pt=at),z+=s,tt=1<<(X=g-pt);X+pt<H&&!((tt-=it[X+pt])<=0);)X++,tt<<=1;if(lt+=1<<X,w===1&&852<lt||w===2&&592<lt)return 1;y[x=M&O]=at<<24|X<<16|z-h|0}}return M!==0&&(y[z+M]=g-pt<<24|64<<16|0),f.bits=at,0}},{"../utils/common":41}],51:[function(o,N,p){N.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,N,p){var a=o("../utils/common"),u=0,l=1;function m(b){for(var L=b.length;0<=--L;)b[L]=0}var r=0,w=29,E=256,k=E+1+w,c=30,y=19,h=2*k+1,_=15,f=16,S=7,R=256,x=16,O=17,z=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(k+2));m(K);var g=new Array(2*c);m(g);var D=new Array(512);m(D);var s=new Array(256);m(s);var H=new Array(w);m(H);var at,X,pt,tt=new Array(c);function lt(b,L,V,J,q){this.static_tree=b,this.extra_bits=L,this.extra_base=V,this.elems=J,this.max_length=q,this.has_stree=b&&b.length}function M(b,L){this.dyn_tree=b,this.max_code=0,this.stat_desc=L}function F(b){return b<256?D[b]:D[256+(b>>>7)]}function ut(b,L){b.pending_buf[b.pending++]=255&L,b.pending_buf[b.pending++]=L>>>8&255}function it(b,L,V){b.bi_valid>f-V?(b.bi_buf|=L<<b.bi_valid&65535,ut(b,b.bi_buf),b.bi_buf=L>>f-b.bi_valid,b.bi_valid+=V-f):(b.bi_buf|=L<<b.bi_valid&65535,b.bi_valid+=V)}function et(b,L,V){it(b,V[2*L],V[2*L+1])}function Tt(b,L){for(var V=0;V|=1&b,b>>>=1,V<<=1,0<--L;);return V>>>1}function Nt(b,L,V){var J,q,rt=new Array(_+1),ot=0;for(J=1;J<=_;J++)rt[J]=ot=ot+V[J-1]<<1;for(q=0;q<=L;q++){var nt=b[2*q+1];nt!==0&&(b[2*q]=Tt(rt[nt]++,nt))}}function gt(b){var L;for(L=0;L<k;L++)b.dyn_ltree[2*L]=0;for(L=0;L<c;L++)b.dyn_dtree[2*L]=0;for(L=0;L<y;L++)b.bl_tree[2*L]=0;b.dyn_ltree[2*R]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function St(b){8<b.bi_valid?ut(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function Ot(b,L,V,J){var q=2*L,rt=2*V;return b[q]<b[rt]||b[q]===b[rt]&&J[L]<=J[V]}function At(b,L,V){for(var J=b.heap[V],q=V<<1;q<=b.heap_len&&(q<b.heap_len&&Ot(L,b.heap[q+1],b.heap[q],b.depth)&&q++,!Ot(L,J,b.heap[q],b.depth));)b.heap[V]=b.heap[q],V=q,q<<=1;b.heap[V]=J}function Rt(b,L,V){var J,q,rt,ot,nt=0;if(b.last_lit!==0)for(;J=b.pending_buf[b.d_buf+2*nt]<<8|b.pending_buf[b.d_buf+2*nt+1],q=b.pending_buf[b.l_buf+nt],nt++,J===0?et(b,q,L):(et(b,(rt=s[q])+E+1,L),(ot=B[rt])!==0&&it(b,q-=H[rt],ot),et(b,rt=F(--J),V),(ot=W[rt])!==0&&it(b,J-=tt[rt],ot)),nt<b.last_lit;);et(b,R,L)}function Lt(b,L){var V,J,q,rt=L.dyn_tree,ot=L.stat_desc.static_tree,nt=L.stat_desc.has_stree,dt=L.stat_desc.elems,Et=-1;for(b.heap_len=0,b.heap_max=h,V=0;V<dt;V++)rt[2*V]!==0?(b.heap[++b.heap_len]=Et=V,b.depth[V]=0):rt[2*V+1]=0;for(;b.heap_len<2;)rt[2*(q=b.heap[++b.heap_len]=Et<2?++Et:0)]=1,b.depth[q]=0,b.opt_len--,nt&&(b.static_len-=ot[2*q+1]);for(L.max_code=Et,V=b.heap_len>>1;1<=V;V--)At(b,rt,V);for(q=dt;V=b.heap[1],b.heap[1]=b.heap[b.heap_len--],At(b,rt,1),J=b.heap[1],b.heap[--b.heap_max]=V,b.heap[--b.heap_max]=J,rt[2*q]=rt[2*V]+rt[2*J],b.depth[q]=(b.depth[V]>=b.depth[J]?b.depth[V]:b.depth[J])+1,rt[2*V+1]=rt[2*J+1]=q,b.heap[1]=q++,At(b,rt,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],function(wt,Bt){var ee,qt,ue,xt,_t,me,Mt=Bt.dyn_tree,ve=Bt.max_code,re=Bt.stat_desc.static_tree,Ge=Bt.stat_desc.has_stree,Kt=Bt.stat_desc.extra_bits,we=Bt.stat_desc.extra_base,ne=Bt.stat_desc.max_length,ce=0;for(xt=0;xt<=_;xt++)wt.bl_count[xt]=0;for(Mt[2*wt.heap[wt.heap_max]+1]=0,ee=wt.heap_max+1;ee<h;ee++)ne<(xt=Mt[2*Mt[2*(qt=wt.heap[ee])+1]+1]+1)&&(xt=ne,ce++),Mt[2*qt+1]=xt,ve<qt||(wt.bl_count[xt]++,_t=0,we<=qt&&(_t=Kt[qt-we]),me=Mt[2*qt],wt.opt_len+=me*(xt+_t),Ge&&(wt.static_len+=me*(re[2*qt+1]+_t)));if(ce!==0){do{for(xt=ne-1;wt.bl_count[xt]===0;)xt--;wt.bl_count[xt]--,wt.bl_count[xt+1]+=2,wt.bl_count[ne]--,ce-=2}while(0<ce);for(xt=ne;xt!==0;xt--)for(qt=wt.bl_count[xt];qt!==0;)ve<(ue=wt.heap[--ee])||(Mt[2*ue+1]!==xt&&(wt.opt_len+=(xt-Mt[2*ue+1])*Mt[2*ue],Mt[2*ue+1]=xt),qt--)}}(b,L),Nt(rt,Et,b.bl_count)}function n(b,L,V){var J,q,rt=-1,ot=L[1],nt=0,dt=7,Et=4;for(ot===0&&(dt=138,Et=3),L[2*(V+1)+1]=65535,J=0;J<=V;J++)q=ot,ot=L[2*(J+1)+1],++nt<dt&&q===ot||(nt<Et?b.bl_tree[2*q]+=nt:q!==0?(q!==rt&&b.bl_tree[2*q]++,b.bl_tree[2*x]++):nt<=10?b.bl_tree[2*O]++:b.bl_tree[2*z]++,rt=q,Et=(nt=0)===ot?(dt=138,3):q===ot?(dt=6,3):(dt=7,4))}function Z(b,L,V){var J,q,rt=-1,ot=L[1],nt=0,dt=7,Et=4;for(ot===0&&(dt=138,Et=3),J=0;J<=V;J++)if(q=ot,ot=L[2*(J+1)+1],!(++nt<dt&&q===ot)){if(nt<Et)for(;et(b,q,b.bl_tree),--nt!=0;);else q!==0?(q!==rt&&(et(b,q,b.bl_tree),nt--),et(b,x,b.bl_tree),it(b,nt-3,2)):nt<=10?(et(b,O,b.bl_tree),it(b,nt-3,3)):(et(b,z,b.bl_tree),it(b,nt-11,7));rt=q,Et=(nt=0)===ot?(dt=138,3):q===ot?(dt=6,3):(dt=7,4)}}m(tt);var j=!1;function T(b,L,V,J){it(b,(r<<1)+(J?1:0),3),function(q,rt,ot,nt){St(q),ut(q,ot),ut(q,~ot),a.arraySet(q.pending_buf,q.window,rt,ot,q.pending),q.pending+=ot}(b,L,V)}p._tr_init=function(b){j||(function(){var L,V,J,q,rt,ot=new Array(_+1);for(q=J=0;q<w-1;q++)for(H[q]=J,L=0;L<1<<B[q];L++)s[J++]=q;for(s[J-1]=q,q=rt=0;q<16;q++)for(tt[q]=rt,L=0;L<1<<W[q];L++)D[rt++]=q;for(rt>>=7;q<c;q++)for(tt[q]=rt<<7,L=0;L<1<<W[q]-7;L++)D[256+rt++]=q;for(V=0;V<=_;V++)ot[V]=0;for(L=0;L<=143;)K[2*L+1]=8,L++,ot[8]++;for(;L<=255;)K[2*L+1]=9,L++,ot[9]++;for(;L<=279;)K[2*L+1]=7,L++,ot[7]++;for(;L<=287;)K[2*L+1]=8,L++,ot[8]++;for(Nt(K,k+1,ot),L=0;L<c;L++)g[2*L+1]=5,g[2*L]=Tt(L,5);at=new lt(K,B,E+1,k,_),X=new lt(g,W,0,c,_),pt=new lt(new Array(0),C,0,y,S)}(),j=!0),b.l_desc=new M(b.dyn_ltree,at),b.d_desc=new M(b.dyn_dtree,X),b.bl_desc=new M(b.bl_tree,pt),b.bi_buf=0,b.bi_valid=0,gt(b)},p._tr_stored_block=T,p._tr_flush_block=function(b,L,V,J){var q,rt,ot=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=function(nt){var dt,Et=4093624447;for(dt=0;dt<=31;dt++,Et>>>=1)if(1&Et&&nt.dyn_ltree[2*dt]!==0)return u;if(nt.dyn_ltree[18]!==0||nt.dyn_ltree[20]!==0||nt.dyn_ltree[26]!==0)return l;for(dt=32;dt<E;dt++)if(nt.dyn_ltree[2*dt]!==0)return l;return u}(b)),Lt(b,b.l_desc),Lt(b,b.d_desc),ot=function(nt){var dt;for(n(nt,nt.dyn_ltree,nt.l_desc.max_code),n(nt,nt.dyn_dtree,nt.d_desc.max_code),Lt(nt,nt.bl_desc),dt=y-1;3<=dt&&nt.bl_tree[2*$[dt]+1]===0;dt--);return nt.opt_len+=3*(dt+1)+5+5+4,dt}(b),q=b.opt_len+3+7>>>3,(rt=b.static_len+3+7>>>3)<=q&&(q=rt)):q=rt=V+5,V+4<=q&&L!==-1?T(b,L,V,J):b.strategy===4||rt===q?(it(b,2+(J?1:0),3),Rt(b,K,g)):(it(b,4+(J?1:0),3),function(nt,dt,Et,wt){var Bt;for(it(nt,dt-257,5),it(nt,Et-1,5),it(nt,wt-4,4),Bt=0;Bt<wt;Bt++)it(nt,nt.bl_tree[2*$[Bt]+1],3);Z(nt,nt.dyn_ltree,dt-1),Z(nt,nt.dyn_dtree,Et-1)}(b,b.l_desc.max_code+1,b.d_desc.max_code+1,ot+1),Rt(b,b.dyn_ltree,b.dyn_dtree)),gt(b),J&&St(b)},p._tr_tally=function(b,L,V){return b.pending_buf[b.d_buf+2*b.last_lit]=L>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&L,b.pending_buf[b.l_buf+b.last_lit]=255&V,b.last_lit++,L===0?b.dyn_ltree[2*V]++:(b.matches++,L--,b.dyn_ltree[2*(s[V]+E+1)]++,b.dyn_dtree[2*F(L)]++),b.last_lit===b.lit_bufsize-1},p._tr_align=function(b){it(b,2,3),et(b,R,K),function(L){L.bi_valid===16?(ut(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)}(b)}},{"../utils/common":41}],53:[function(o,N,p){N.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,N,p){(function(a){(function(u,l){if(!u.setImmediate){var m,r,w,E,k=1,c={},y=!1,h=u.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(u);_=_&&_.setTimeout?_:u,m={}.toString.call(u.process)==="[object process]"?function(x){process.nextTick(function(){S(x)})}:function(){if(u.postMessage&&!u.importScripts){var x=!0,O=u.onmessage;return u.onmessage=function(){x=!1},u.postMessage("","*"),u.onmessage=O,x}}()?(E="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",R,!1):u.attachEvent("onmessage",R),function(x){u.postMessage(E+x,"*")}):u.MessageChannel?((w=new MessageChannel).port1.onmessage=function(x){S(x.data)},function(x){w.port2.postMessage(x)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,function(x){var O=h.createElement("script");O.onreadystatechange=function(){S(x),O.onreadystatechange=null,r.removeChild(O),O=null},r.appendChild(O)}):function(x){setTimeout(S,0,x)},_.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var O=new Array(arguments.length-1),z=0;z<O.length;z++)O[z]=arguments[z+1];var B={callback:x,args:O};return c[k]=B,m(k),k++},_.clearImmediate=f}function f(x){delete c[x]}function S(x){if(y)setTimeout(S,0,x);else{var O=c[x];if(O){y=!0;try{(function(z){var B=z.callback,W=z.args;switch(W.length){case 0:B();break;case 1:B(W[0]);break;case 2:B(W[0],W[1]);break;case 3:B(W[0],W[1],W[2]);break;default:B.apply(l,W)}})(O)}finally{f(x),y=!1}}}}function R(x){x.source===u&&typeof x.data=="string"&&x.data.indexOf(E)===0&&S(+x.data.slice(E.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof je<"u"?je:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Vr);var ci=Vr.exports;const ur=Xr(ci),Ht=0,di={content_country:"US",content_language:"en",theme:"DARK"};function Qr(){const v=new Date,A=o=>String(o).padStart(2,"0");return`${v.getFullYear()}-${A(v.getMonth()+1)}-${A(v.getDate())}-${A(v.getHours())}-${A(v.getMinutes())}-${A(v.getSeconds())}`}function dr(v,A,o=null){let N=A;o&&(A.endsWith(".zip")?N=A.replace(".zip",`-${o}.zip`):A.endsWith(".json")&&(N=A.replace(".json",`-${o}.json`)));const p=URL.createObjectURL(v),a=document.createElement("a");a.href=p,a.download=N,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(p)}function Re(v){if(!v)return"";const A=String(v);let o=A.match(/[?&]v=([^&]+)/);return o&&o[1]||(o=A.match(/youtu\.be\/([^?&/]+)/),o&&o[1])||(o=A.match(/\/shorts\/([^?&/]+)/),o&&o[1])||(o=A.match(/\/embed\/([^?&/]+)/),o&&o[1])?o[1]:""}const We=Number.MAX_SAFE_INTEGER;function le(v){const A=Number(v||0);return!Number.isFinite(A)||isNaN(A)?0:A>We?We:A<-We?-We:Math.trunc(A)}function $r(v){if(!v&&v!==0)return"1970-01-01";const A=String(v).trim();if(/^\d{4}-\d{2}-\d{2}/.test(A))return A.split("T")[0];const o=Number(A);if(!Number.isFinite(o))return"1970-01-01";const N=Math.abs(o);if(N>=1e7&&N<=99999999){const p=String(Math.trunc(o)),a=p.slice(0,4),u=p.slice(4,6),l=p.slice(6,8);return`${a}-${u}-${l}`}return N>1e12?new Date(o).toISOString().split("T")[0]:N>=1e9?new Date(o*1e3).toISOString().split("T")[0]:new Date(o).toISOString().split("T")[0]}function Hr(v){if(v==null)return 0;if(typeof v=="number")return v>1e12?Math.floor(v):Math.floor(v*1e3);const A=String(v).trim();if(!A)return 0;const o=Date.parse(A);if(!isNaN(o))return o;const N=Number(A);return Number.isFinite(N)?N>1e12?Math.floor(N):Math.floor(N*1e3):0}async function fi(v,A,o,N,p){Y("Starting conversion to NewPipe format...");let a,u=new ur,l="",m=null,r=null;const w=p||null;let E=!1;if(o==="merge"&&v){Y("Loading existing NewPipe backup...");const f=await v.arrayBuffer(),S=await ur.loadAsync(f),R=S.file("newpipe.db");if(R){const z=await R.async("uint8array");a=new N.Database(z),Y("Database loaded. Running integrity check...");const B=a.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");B&&B[0]&&B[0].values&&Y(`Existing NewPipe database contains: ${B[0].values.flat().join(", ")} tables.`,"schema");try{ui(a),l=lr(a)}catch(W){Y("Warning: failed to ensure stream_state schema: "+(W.message||W.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const x=S.file("preferences.json");x&&(m=await x.async("string"));const O=S.file("newpipe.settings");O&&(r=await O.async("blob"))}else Y("Creating new NewPipe database..."),a=new N.Database,li(a),l=lr(a);Y("Parsing LibreTube JSON...");const k=await A.text(),c=JSON.parse(k);a.run("BEGIN TRANSACTION");try{Y("Processing Subscriptions..."),o==="merge"&&a.run(`DELETE FROM subscriptions WHERE service_id = ${Ht}`);let f=0;if(c.subscriptions){const S=a.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");c.subscriptions.forEach(R=>{try{const x=R.url||`https://www.youtube.com/channel/${R.channelId}`,O=R.name||"Unknown",z=R.avatar||R.avatarUrl||null;if(!x.includes("youtube.com")&&!x.includes("youtu.be")){Y(`Dropped non-YouTube subscription: ${O} (${x})`,"warn");return}S.run([Ht,x,O,z,0,"",0]),f++}catch(x){Y(`ERROR inserting subscription ${R.name}: ${x.message||x.toString()}`,"err")}}),S.free()}Y(`Inserted ${f} subscriptions.`)}catch(f){throw Y(`FATAL ERROR during Subscriptions phase: ${f.message||f.toString()}`,"err"),f}try{Y("Processing Playlists..."),o==="merge"&&(w==="only_libretube"?(a.run("DELETE FROM playlist_stream_join"),a.run("DELETE FROM playlists"),a.run("DELETE FROM remote_playlists"),Y("Cleared existing playlists; will import only LibreTube playlists.")):w==="only_newpipe"?(E=!0,Y("Preserving existing NewPipe playlists; skipping import from LibreTube.")):Y(`Merging playlists with behavior: ${w||"default (LibreTube precedence)"}`));let f=0;if(c.localPlaylists&&!E){const S=a.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),R=a.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),x=a.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)"),O=c.localPlaylists;for(const z of O){const B=z.playlist.name||"Untitled";try{const W=a.prepare("SELECT uid FROM playlists WHERE name = ?");W.bind([B]);const C=[];for(;W.step();)C.push(W.getAsObject());if(W.free(),C.length>0){const D=C[0].uid;if(w==="merge_lt_precedence")try{const s=a.prepare("DELETE FROM playlist_stream_join WHERE playlist_id = ?");s.bind([D]),s.step(),s.free();const H=a.prepare("DELETE FROM playlists WHERE uid = ?");H.bind([D]),H.step(),H.free(),Y(`Replaced existing local playlist: ${B}`,"schema")}catch(s){Y(`WARN: failed to replace playlist ${B}: ${s.message||s.toString()}`,"warn")}else{Y(`Skipping duplicate local playlist: ${B}`,"warn");continue}}R.run([B,0,-1,f]);const K=a.exec("SELECT last_insert_rowid()")[0].values[0][0];let g=0;for(const D of z.videos){const s=D.videoId||(D.url?Re(D.url):null);if(!s){Y(`Skipped video in playlist ${B} due to missing videoId.`,"warn");continue}const H=`https://www.youtube.com/watch?v=${s}`;try{const at=D.title||"Unknown",X=D.uploader||"Unknown",pt=D.duration||0,tt=D.uploadDate?new Date(D.uploadDate).getTime()/1e3:null,lt=D.thumbnailUrl||null;S.run([Ht,H,at,"VIDEO_STREAM",pt,X,tt,lt]);const M=a.prepare("SELECT uid FROM streams WHERE service_id = ? AND url = ?");M.bind([Ht,H]);let F=null;if(M.step()&&(F=M.getAsObject().uid),M.free(),F!==null){const ut=g;if(x.run([K,F,g++]),ut===0)try{const it=a.prepare("UPDATE playlists SET thumbnail_stream_id = ? WHERE uid = ?");it.bind([F,K]),it.step(),it.free()}catch(it){Y(`WARN: failed to set playlist thumbnail for ${B}: ${it.message||it.toString()}`,"warn")}}else Y(`Warning: Could not find/insert stream for video ${at}`,"warn")}catch(at){Y(`ERROR processing video "${D.title}" in playlist "${B}": ${at.message||at.toString()}`,"err")}}f++}catch(W){throw Y(`FATAL ERROR processing playlist "${B}": ${W.message||W.toString()}`,"err"),W}}S.free(),R.free(),x.free()}Y(`Processed ${f} local playlists.`)}catch(f){throw Y(`FATAL ERROR during Local Playlists phase: ${f.message||f.toString()}`,"err"),f}try{Y("Processing Remote Playlist Bookmarks...");let f=0;if(c.playlistBookmarks&&!E){const S=a.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)"),R=c.playlistBookmarks;for(const x of R)try{const O=x.url||(x.playlistId?`https://www.youtube.com/playlist?list=${x.playlistId}`:null);if(!O||!O.includes("youtube.com")&&!O.includes("youtu.be")){Y(`Dropped non-YouTube remote playlist: ${x.playlistName||"Untitled"}`,"warn");continue}const z=x.playlistName||x.name||"Untitled",B=x.thumbnailUrl||null,W=x.uploader||"Unknown",C=typeof x.videos=="number"?x.videos:0;try{const $=a.prepare("SELECT uid FROM remote_playlists WHERE url = ? OR name = ?");$.bind([O,z]);const K=[];for(;$.step();)K.push($.getAsObject());if($.free(),K.length>0){const g=K[0].uid;if(w==="merge_np_precedence")continue;if(w==="merge_lt_precedence"){const D=a.prepare("DELETE FROM remote_playlists WHERE uid = ?");D.bind([g]),D.step(),D.free()}}}catch{}S.run([Ht,z,O,B,W,f++,C])}catch(O){Y(`ERROR inserting remote playlist ${x.playlistName||"Untitled"}: ${O.message||O.toString()}`,"err")}S.free()}Y(`Processed ${f} remote playlist bookmarks.`)}catch(f){throw Y(`FATAL ERROR during Remote Playlists phase: ${f.message||f.toString()}`,"err"),f}try{Y("Processing Watch History...");let f=0,S=0,R=0;const x=c.history||c.watchHistory||c.watch_history||c.watch_history_items||[],O=new Map;if(c.watchPositions&&Array.isArray(c.watchPositions)){const z=c.watchPositions;for(const B of z)if(B&&B.videoId){const W=Number(B.position||0);O.set(String(B.videoId),W)}}if(x&&x.length>0){const z=a.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),B=a.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),W=a.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const C of x)try{const $=C.videoId||C.videoIdStr||C.id||(C.url?Re(C.url):"")||"";if(!$)continue;const K=`https://www.youtube.com/watch?v=${$}`,g=C.title||C.name||"Unknown",D=C.uploader||C.uploaderName||"Unknown",s=C.duration||C.length||0,H=C.uploadDate?isNaN(Number(C.uploadDate))?Math.floor(new Date(C.uploadDate).getTime()/1e3):Math.floor(Number(C.uploadDate)):null,at=C.thumbnailUrl||C.thumbnail||null;let X=0;const pt=O.get($),tt="9223372036854775807";if(pt!=null)String(pt)===tt?X=0:X=Math.floor(Number(pt)||0);else{const et=C.currentTime||C.position||C.progress||0;X=Math.floor(Number(et||0)*1e3)}let lt=C.accessDate||C.accessedAt||C.lastWatched||C.timestamp||C.date||C.time,M;if(!lt)M=Date.now();else if(typeof lt=="number")M=lt>1e12?Math.floor(lt):Math.floor(lt*1e3);else{const et=Date.parse(String(lt));M=isNaN(et)?Date.now():et}const F=Number(C.repeatCount||C.watchCount||C.playCount||C.repeat_count||1);z.run([Ht,K,g,"VIDEO_STREAM",s,D,H,at]);const ut=a.prepare("SELECT uid FROM streams WHERE service_id = ? AND url = ?");ut.bind([Ht,K]);let it=null;if(ut.step()&&(it=ut.getAsObject().uid),ut.free(),it!==null){try{B.run([X,it])}catch(et){Y(`WARN: failed to write stream_state for ${$}: ${et.message||et.toString()}`,"warn")}try{if(o==="merge"){const et=M-1e3,Tt=M+1e3,Nt=a.prepare("SELECT access_date, repeat_count FROM stream_history WHERE stream_id = ? AND access_date BETWEEN ? AND ?");Nt.bind([it,et,Tt]);const gt=[];for(;Nt.step();)gt.push(Nt.getAsObject());if(Nt.free(),gt.length>0){const St=Number(gt[0].access_date),At=(Number(gt[0].repeat_count)||0)+F,Rt=a.prepare("UPDATE stream_history SET repeat_count = ? WHERE stream_id = ? AND access_date = ?");Rt.bind([At,it,St]),Rt.step(),Rt.free(),R++}else W.run([it,M,F]),S++}else W.run([it,M,F]),S++}catch(et){Y(`WARN: failed to write stream_history for ${$}: ${et.message||et.toString()}`,"warn")}f++}}catch($){Y(`ERROR processing history item: ${$.message||$.toString()}`,"warn")}z.free(),B.free(),W.free()}Y(`Processed ${f} history items (added: ${S}, duplicates merged: ${R}).`)}catch(f){throw Y(`FATAL ERROR during History phase: ${f.message||f.toString()}`,"err"),f}try{a.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),Y("Inserted room_master_table identity.")}catch(f){Y("Error inserting room_master_table: "+f.message,"warn")}try{Y("Committing transaction..."),a.run("COMMIT")}catch(f){throw Y(`FATAL ERROR on COMMIT: ${f.message||f.toString()}`,"err"),f}Y("Exporting database...");const y=a.export();if(a.close(),u.file("newpipe.db",y),m?(u.file("preferences.json",m),Y("Preserved existing preferences.json.")):(u.file("preferences.json",JSON.stringify(di,null,2)),Y("Created default preferences.json.")),r&&(u.file("newpipe.settings",r),Y("Preserved existing newpipe.settings.")),u.file("stream_state_debug.txt",l||"No stream_state debug information collected."),Y("Attached stream_state_debug.txt to zip for inspection.","schema"),l){const f=l.split(`
`).slice(0,12).join(`
`);Y(`stream_state_debug preview:
`+f,"schema")}const h=await u.generateAsync({type:"blob"}),_=Qr();dr(h,"newpipe_converted.zip",_),Y("Done! File downloaded.","info")}async function hi(v,A,o,N,p,a){Y("Starting conversion to LibreTube format...");let u={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[],watchPositions:[]};const l=p||null;let m=!1,r;if(o==="merge"&&A){Y("Reading target LibreTube file...");const h=await A.text(),_=JSON.parse(h);u=_,r={playlistBookmarks:Array.isArray(_.playlistBookmarks)?JSON.parse(JSON.stringify(_.playlistBookmarks)):_.playlistBookmarks,localPlaylists:Array.isArray(_.localPlaylists)?JSON.parse(JSON.stringify(_.localPlaylists)):_.localPlaylists,otherPlaylistKeys:{}},Object.keys(_).forEach(f=>{if(f!=="playlistBookmarks"&&f!=="localPlaylists"&&/playlist/i.test(f))try{r.otherPlaylistKeys||(r.otherPlaylistKeys={}),r.otherPlaylistKeys[f]=JSON.parse(JSON.stringify(_[f]))}catch{r.otherPlaylistKeys||(r.otherPlaylistKeys={}),r.otherPlaylistKeys[f]=_[f]}}),l==="only_newpipe"?(u.subscriptions=[],u.playlistBookmarks=[],u.localPlaylists=[],Y("Cleared target LibreTube playlists; will import only NewPipe playlists.")):l==="only_libretube"?(m=!0,Y("Preserving existing LibreTube playlists; will skip importing NewPipe playlists.")):(u.subscriptions=u.subscriptions||[],u.playlistBookmarks=u.playlistBookmarks||[],u.localPlaylists=u.localPlaylists||[],Y(`Merging playlists with behavior: ${l||"default (LibreTube precedence)"}`))}Y("Reading NewPipe backup...");const w=await v.arrayBuffer(),k=(await ur.loadAsync(w)).file("newpipe.db");if(!k)throw new Error("NewPipe ZIP must contain newpipe.db");const c=await k.async("uint8array"),y=new N.Database(c);Y("NewPipe database loaded.");try{try{const z=lr(y);Y(`Stream state debug (input NewPipe DB):
`+(z||"No stream_state debug info collected."),"schema")}catch(z){Y("Failed to collect input stream_state debug: "+(z.message||z.toString()),"warn")}Y("Extracting Subscriptions...");const h=y.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${Ht}`);h.length>0&&h[0].values.forEach(B=>{const W=String(B[0]);if(!W||!W.includes("youtube.com")&&!W.includes("youtu.be")){Y(`Dropped non-YouTube subscription URL: ${B[1]}`,"warn");return}let C="";const $=W.match(/channel\/([\w-]+)/),K=W.match(/user\/([\w-]+)/);$?C=$[1]:K&&(C=K[1]),u.subscriptions.push({channelId:C,url:W,name:String(B[1]),avatar:B[2]?String(B[2]):void 0,verified:!1})}),Y(`Extracted ${u.subscriptions.length} YouTube subscriptions.`),Y("Extracting Remote Playlists...");const _=y.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${Ht}`);_.length>0&&!m&&_[0].values.forEach(B=>{const W=String(B[1]);if(!W||!W.includes("youtube.com")&&!W.includes("youtu.be")){Y(`Dropped non-YouTube remote playlist URL: ${B[0]}`,"warn");return}const C=W.match(/[?&]list=([^&]+)/),$=C?C[1]:"";u.playlistBookmarks.push({playlistId:$,playlistName:String(B[0]),thumbnailUrl:B[3]?String(B[3]):void 0,uploader:B[2]?String(B[2]):void 0,uploaderUrl:"",videos:le(B[4])})}),Y(`Extracted ${u.playlistBookmarks.length} remote playlist bookmarks.`),Y("Extracting Local Playlists...");const f=y.exec("SELECT uid, name FROM playlists");if(f.length>0&&!m)for(const z of f[0].values){const B=Number(z[0]),W=String(z[1]),C=[];let $=0;const K=y.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${B} AND s.service_id = ${Ht}
                    ORDER BY j.join_index ASC
                `);if(K.length>0&&K[0].values.forEach(g=>{const D=String(g[0]),s=Re(D);if(!s){Y(`Warning: Skipped stream in playlist "${W}" due to unparseable URL: ${D}`,"warn");return}C.push({id:$++,playlistId:le(B),videoId:s,title:String(g[1]),uploadDate:$r(g[4]),uploader:String(g[3]),thumbnailUrl:g[5]?String(g[5]):void 0,duration:le(g[2])})}),C.length>0||W){const g=u.localPlaylists.findIndex(D=>D.playlist&&D.playlist.name===W);if(g>=0)if(l==="merge_np_precedence")u.localPlaylists.splice(g,1);else continue;u.localPlaylists.push({playlist:{id:le(B),name:W,thumbnailUrl:C.length>0?C[0].thumbnailUrl:""},videos:C})}}if(Y(`Extracted ${u.localPlaylists.length} local playlists.`),o==="merge"&&p==="only_libretube"&&r)try{u.playlistBookmarks=r.playlistBookmarks,u.localPlaylists=r.localPlaylists,Object.keys(r.otherPlaylistKeys||{}).forEach(z=>{u[z]=r.otherPlaylistKeys[z]}),Y("Restored original LibreTube playlist data (only_libretube).")}catch(z){Y("Failed to restore preserved LibreTube playlists: "+(z.message||z.toString()),"warn")}if(u&&Array.isArray(u.watchPositions)&&(u.watchPositions=u.watchPositions.map(z=>z&&z.position!==void 0&&z.position!==null?{...z,position:le(z.position)}:z)),a===void 0?!0:!!a)try{const z=y.exec(`SELECT s.url, s.title, s.duration, s.uploader, s.uploader_url, s.thumbnail_url, s.upload_date, sh.access_date, sh.repeat_count FROM stream_history sh JOIN streams s ON sh.stream_id = s.uid WHERE s.service_id = ${Ht}`)||[],B=y.exec(`SELECT s.url, ss.progress_time FROM stream_state ss JOIN streams s ON ss.stream_id = s.uid WHERE s.service_id = ${Ht}`)||[];u.watchHistory=u.watchHistory||[],u.watchPositions=u.watchPositions||[];const W=new Map;for(const C of u.watchPositions)C&&C.videoId&&W.set(String(C.videoId),le(C.position));if(B.length>0){const C=B[0].values;for(const $ of C){const K=String($[0]),g=$[1]||0,D=Number(g),s=Re(K);if(!s)continue;const H=W.get(s)||0,at=le(D);at>H&&W.set(s,at)}}if(u.watchPositions=Array.from(W.entries()).map(([C,$])=>({videoId:C,position:$})),z.length>0){const C=z[0].values,$=Array.isArray(u.watchHistory)?u.watchHistory.map(g=>({...g,accessDate:Hr(g&&(g.accessDate||g.accessedAt||g.lastWatched||g.timestamp||g.date||g.time)||0)})):[],K=new Map;for(const g of $)g&&g.videoId&&K.set(String(g.videoId),g);for(const g of C){const D=String(g[0]),s=g[1]?String(g[1]):"",H=le(g[2]),at=g[3]?String(g[3]):"",X=g[4]?String(g[4]):"",pt=g[5]?String(g[5]):"",tt=g[6],lt=g[7],M=Re(D);if(!M)continue;let F="";try{const et=String(X).match(/channel\/([\w-]+)/),Tt=String(X).match(/user\/([\w-]+)/);et?F=et[1]:Tt?F=Tt[1]:/^[UC][A-Za-z0-9_-]{20,}$/.test(X)&&(F=X)}catch{F=""}const ut=$r(tt);if(K.has(M))continue;const it=Hr(lt);$.push({videoId:M,title:s,uploadDate:ut,uploader:at,uploaderUrl:F,uploaderAvatar:"",thumbnailUrl:pt,duration:H,accessDate:it})}$.sort((g,D)=>Number(D&&D.accessDate?D.accessDate:0)-Number(g&&g.accessDate?g.accessDate:0)),u.watchHistory=$}}catch(z){Y("Failed to import watch history from NewPipe DB: "+(z.message||z.toString()),"warn")}const R=JSON.stringify(u,null,2),x=new Blob([R],{type:"application/json"}),O=Qr();dr(x,"libretube_converted.json",O),Y("Done! File downloaded.","info")}finally{y.close(),Y("NewPipe database closed.","info")}}async function Jr(v){Y("Parsing STT backup file...","info");const A=await v.text(),o=new Map,N=[],p=new Map,a=new Map,u=A.split(`
`);let l=0;for(const m of u){const r=m.trim();if(!r)continue;const w=r.split("	");if(w.length===0)continue;l++;const E=w[0];if(E==="recordType"){const k={id:parseInt(w[1],10),name:w[2]||"",emoji:w[3]||"",color:parseInt(w[4],10)||0,category_id:parseInt(w[5],10)||0};isNaN(k.id)||o.set(k.id,k)}else if(E==="record"){let k=parseInt(w[4],10);if(isNaN(k)){const y=w[4];y&&y.endsWith("f")&&(k=parseInt(y.slice(0,-1),10))}const c={id:parseInt(w[1],10),type_id:parseInt(w[2],10),start_timestamp:parseInt(w[3],10),end_timestamp:k,comment:w.slice(5).join("	")||void 0};if(isNaN(c.id)||isNaN(c.type_id)||isNaN(c.start_timestamp)||isNaN(c.end_timestamp)){Y(`Skipping invalid record: ${w.join("	")}`,"warn");continue}N.push(c)}else if(E==="category"){const k={id:parseInt(w[1],10),name:w[2]||"",color:parseInt(w[3],10)||0};isNaN(k.id)||p.set(k.id,k)}else if(E==="recordTag"){const k={id:parseInt(w[1],10),name:w[3]||"",emoji:w[7]||"",color:parseInt(w[4],10)||0,type_id:parseInt(w[5],10)||0};isNaN(k.id)||a.set(k.id,k)}}return Y(`Parsed ${o.size} record types, ${N.length} records (${l} rows total)`,"info"),{recordTypes:o,records:N,categories:p,recordTags:a}}function fr(v,A){if(A<=0)return v;const o=A*60*1e3;return v.filter(N=>N.end_timestamp-N.start_timestamp>=o)}function hr(v){const A=new Map;for(const o of v){const p=new Date(o.start_timestamp).toISOString().split("T")[0];A.has(p)||A.set(p,[]),A.get(p).push(o)}return A}function pr(v,A){return v.filter(o=>o.type_id===A)}async function tn(v,A){Y("Parsing uHabits backup file...","info");const o=await v.arrayBuffer(),N=new A.Database(new Uint8Array(o)),p=new Map,a=new Map,u=[];try{const l=N.exec(`
			SELECT id, archived, color, description, freq_den, freq_num, highlight, 
			       name, position, reminder_hour, reminder_min, reminder_days, 
			       type, target_type, target_value, unit, question, uuid
			FROM Habits
		`);if(l.length>0){for(const r of l[0].values){if(r.length<18){Y(`Skipping malformed habit row with ${r.length} columns`,"warn");continue}const w=Number(r[0]),E=String(r[7]??""),k=String(r[16]??""),c=Number(r[12]);if(!Number.isFinite(w)||!E){Y("Skipping habit with invalid id or name","warn");continue}const y={id:w,archived:Number(r[1]),color:Number(r[2]),description:r[3]!==null?String(r[3]):void 0,freq_den:Number(r[4]),freq_num:Number(r[5]),highlight:Number(r[6]),name:E,position:Number(r[8]),reminder_hour:Number(r[9]),reminder_min:Number(r[10]),reminder_days:Number(r[11]),type:c,target_type:Number(r[13]),target_value:Number(r[14]),unit:String(r[15]??""),question:k,uuid:r[17]!==null?String(r[17]):void 0};p.set(y.id,y),y.type===0&&a.set(y.id,y)}Y(`Loaded ${p.size} habits (${a.size} boolean)`,"info")}const m=N.exec("SELECT id, habit, timestamp, value, notes FROM Repetitions");if(m.length>0){for(const r of m[0].values){if(r.length<5){Y(`Skipping malformed repetition row with ${r.length} columns`,"warn");continue}const w=Number(r[0]),E=Number(r[1]),k=Number(r[2]),c=Number(r[3]);if(!Number.isFinite(w)||!Number.isFinite(E)||!Number.isFinite(k)){Y("Skipping repetition with invalid id/habit_id/timestamp","warn");continue}u.push({id:w,habit_id:E,timestamp:k,value:c,notes:r[4]!==null?String(r[4]):void 0})}Y(`Loaded ${u.length} repetitions`,"info")}}catch(l){throw N.close(),l}return{db:N,allHabits:p,booleanHabits:a,repetitions:u}}function pi(v){const A=new Date(v);return A.setHours(0,0,0,0),A.getTime()}function mi(v){return v.export()}async function _i(v,A,o,N){Y("Starting STT  uHabits conversion","info");const p=await Jr(v);Y(`Loaded ${p.recordTypes.size} activities, ${p.records.length} records`,"info");const{db:a,allHabits:u,booleanHabits:l,repetitions:m}=await tn(A,N);Y(`Loaded ${u.size} habits, ${m.length} repetitions`,"info");const r=new Set;for(const c of m)r.add(`${c.habit_id}:${c.timestamp}`);const w=[],E=[];for(const c of o){const y=p.recordTypes.get(c.sttTypeId),h=l.get(c.uhabitsHabitId);if(!y||!h){Y("Skipping invalid mapping","warn");continue}const _=c.minDuration||0,f=fr(p.records,_),S=pr(f,c.sttTypeId);if(S.length===0)continue;const R=hr(S);let x=0,O=0;for(const[z,B]of R){const W=pi(B[0].start_timestamp),C=`${c.uhabitsHabitId}:${W}`;if(r.has(C)){O++;continue}B.reduce((K,g)=>K+(g.end_timestamp-g.start_timestamp),0);let $="";if(c.copySttComments){const K=B.map(g=>g.comment).filter(g=>!!g&&g.trim().length>0);K.length>0&&($=[...new Set(K)].join("; "))}w.push({habitId:c.uhabitsHabitId,timestamp:W,notes:$}),r.add(C),x++}E.push({name:`"${y.emoji} ${y.name}" -> "${h.name}"`,newCount:x,skippedCount:O})}w.sort((c,y)=>c.timestamp-y.timestamp);for(const c of w)a.run(`
			INSERT INTO Repetitions (habit, timestamp, value, notes)
			VALUES (?, ?, ?, ?)
		`,[c.habitId,c.timestamp,2,c.notes]);for(const c of E)Y(`${c.name}: +${c.newCount}${c.skippedCount>0?` (${c.skippedCount} skipped)`:""}`,"info");Y(`Conversion complete: ${w.length} new repetitions added`,"info");const k=mi(a);return a.close(),new Blob([k],{type:"application/x-sqlite3"})}let Ut=null,Dt=null,yi=0;const Jt=new Map;function gi(v){const A=document.getElementById("file-left"),o=document.getElementById("file-right"),N=document.getElementById("add-mapping"),p=document.getElementById("btn-convert-stt");!A||!o||!N||!p||(A.addEventListener("change",async()=>{var u;const a=(u=A.files)==null?void 0:u[0];if(a)try{Ut=await Jr(a),Y(`Loaded ${Ut.recordTypes.size} STT activity types`,"info"),document.querySelectorAll(".stt-activity-select").forEach(l=>en(l)),Zr(),be(),cr()}catch(l){Y(`Error loading STT file: ${l.message}`,"err"),Ut=null}}),o.addEventListener("change",async()=>{var u;const a=(u=o.files)==null?void 0:u[0];if(a)try{Dt=await tn(a,v),Y(`Loaded ${Dt.allHabits.size} habits (${Dt.booleanHabits.size} boolean)`,"info"),document.querySelectorAll(".uhabits-habit-select").forEach(l=>rn(l)),Zr(),be(),cr()}catch(l){Y(`Error loading uHabits file: ${l.message}`,"err"),Dt!=null&&Dt.db&&Dt.db.close(),Dt=null}}),N.addEventListener("click",()=>Gr()),p.addEventListener("click",async()=>await vi(v)),Gr())}function Gr(){const v=document.getElementById("mapping-list");if(!v)return;const A=yi++,o=document.createElement("div");o.className="mapping-item",o.setAttribute("data-mapping-id",A.toString()),o.innerHTML=`
		<div class="mapping-selects">
			<select class="stt-activity-select" data-mapping-id="${A}">
				<option value="">Select STT activity...</option>
			</select>
			<span class="mapping-arrow"></span>
			<select class="uhabits-habit-select" data-mapping-id="${A}">
				<option value="">Select uHabits habit...</option>
			</select>
			<button class="remove-button remove-mapping" aria-label="Remove mapping">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><!-- Icon from Lucide by Lucide Contributors - https://github.com/lucide-icons/lucide/blob/main/LICENSE --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"/></svg>
			</button>
		</div>
		<div class="mapping-options">
			<label class="option-item">
				<span class="option-label">Min duration:</span>
				<input type="number" class="min-duration-input" value="5" min="0" step="1" title="Minimum duration in minutes">
				<span class="option-unit">min</span>
			</label>
			<label class="option-item option-checkbox" title="Copy STT activity comments to repetition notes">
				<input type="checkbox" class="copy-stt-comments-checkbox">
				<span class="option-label">Copy comments</span>
			</label>
		</div>
		<div class="activity-grid-container" style="display: none;">
			<div class="grid-year-nav">
				<button class="year-prev" data-mapping-id="${A}" title="Previous year"></button>
				<span class="grid-year-display"></span>
				<button class="year-next" data-mapping-id="${A}" title="Next year"></button>
			</div>
			<activity-grid start-week-on-monday class="habit-preview-grid" dark-mode color-theme="purple"></activity-grid>
		</div>
	`,v.appendChild(o);const N=o.querySelector(".stt-activity-select"),p=o.querySelector(".uhabits-habit-select");Ut&&en(N),Dt&&rn(p),N.addEventListener("change",()=>{Ae(A),be()}),p.addEventListener("change",()=>{Ae(A),be()});const a=o.querySelector(".min-duration-input");a&&a.addEventListener("change",()=>{Ae(A),be()}),o.querySelector(".remove-mapping").addEventListener("click",()=>{Jt.delete(A),o.remove(),be(),cr()});const l=o.querySelector(".year-prev"),m=o.querySelector(".year-next");l&&l.addEventListener("click",()=>{const r=Jt.get(A)||new Date().getFullYear();Jt.set(A,r-1),Ae(A)}),m&&m.addEventListener("click",()=>{const r=Jt.get(A)||new Date().getFullYear();Jt.set(A,r+1),Ae(A)})}function en(v){if(Ut){v.innerHTML='<option value="">Select STT activity...</option>',v.value="";for(const[A,o]of Ut.recordTypes){const N=document.createElement("option");N.value=A.toString(),N.textContent=`${o.emoji} ${o.name} (id: ${A})`,v.appendChild(N)}}}function rn(v){if(!Dt)return;v.innerHTML='<option value="">Select uHabits habit...</option>',v.value="";const A=[],o=[];for(const[N,p]of Dt.booleanHabits)p.archived?o.push([N,p]):A.push([N,p]);for(const[N,p]of A){const a=document.createElement("option");a.value=N.toString(),a.textContent=`${p.name} (id: ${N})`,v.appendChild(a)}if(o.length>0){const N=document.createElement("option");N.disabled=!0,N.textContent=" Archived ",N.style.color="#888",v.appendChild(N);for(const[p,a]of o){const u=document.createElement("option");u.value=p.toString(),u.textContent=`${a.name} (id: ${p})`,u.style.fontStyle="italic",u.style.opacity="0.7",v.appendChild(u)}}}function Zr(){document.querySelectorAll(".activity-grid-container").forEach(v=>{v.style.display="none"})}function bi(v,A,o){if(!Ut||!Dt)return 0;const N=fr(Ut.records,o),p=pr(N,v),a=hr(p),u=new Set;for(const m of Dt.repetitions)m.habit_id===A&&m.value>0&&u.add(new Date(m.timestamp).toISOString().split("T")[0]);let l=0;for(const m of a.keys())u.has(m)||l++;return l}function Ae(v){const A=document.querySelector(`[data-mapping-id="${v}"]`);if(!A||!Ut||!Dt)return;const o=A.querySelector(".stt-activity-select"),N=A.querySelector(".uhabits-habit-select"),p=A.querySelector(".activity-grid-container"),a=A.querySelector("activity-grid"),u=parseInt(o.value),l=parseInt(N.value);if(!u||!l){p.style.display="none";return}p.style.display="block";const m=A.querySelector(".min-duration-input"),r=m&&parseInt(m.value)||0,w=new Set,E=[];for(const x of Dt.repetitions)if(x.habit_id===l&&x.value>0){const O=new Date(x.timestamp).toISOString().split("T")[0];w.add(O),E.push({date:O,count:2})}const k=fr(Ut.records,r),c=pr(k,u),y=hr(c),h=[];for(const[x]of y)w.has(x)||h.push({date:x,count:1});if(a.data=[...E,...h],!Jt.has(v)){const x=[...E.map(O=>O.date),...h.map(O=>O.date)];if(x.length>0){x.sort();const O=x[x.length-1],z=new Date(O).getFullYear();Jt.set(v,z)}else Jt.set(v,new Date().getFullYear())}const _=Jt.get(v)||new Date().getFullYear(),f=new Date(_,0,1),S=new Date(_,11,31);a.endDate=S.toISOString().split("T")[0],a.startDate=f.toISOString().split("T")[0];const R=p.querySelector(".grid-year-display");R&&(R.textContent=_.toString())}function be(){const v=document.getElementById("conversion-summary");if(!v||!Ut||!Dt)return;const A=document.querySelectorAll(".mapping-item");let o=0,N=0;const p=[];for(let a=0;a<A.length;a++){const u=A[a],l=u.querySelector(".stt-activity-select"),m=u.querySelector(".uhabits-habit-select"),r=u.querySelector(".min-duration-input"),w=parseInt(l.value),E=parseInt(m.value);if(w&&E){o++;const k=Ut.recordTypes.get(w),c=Dt.booleanHabits.get(E);if(k&&c){const y=r&&parseInt(r.value)||0,h=bi(w,E,y);N+=h,p.push(`"${k.emoji} ${k.name}"  "${c.name}": ${h} new days`)}}}if(o>0){v.style.display="block",v.textContent="";const a=document.createElement("h4");a.textContent="Conversion Summary",v.appendChild(a);const u=document.createDocumentFragment(),l=document.createElement("ul"),m=document.createElement("li");m.textContent=`${N} new repetitions will be added`,l.appendChild(m);for(const r of p){const w=document.createElement("li");w.textContent=r,l.appendChild(w)}u.appendChild(l),v.appendChild(u)}else v.style.display="none"}function cr(){var a,u;const v=document.getElementById("btn-convert-stt");if(!v)return;const A=document.getElementById("file-left"),o=document.getElementById("file-right"),N=document.querySelectorAll(".mapping-item").length>0,p=Ut&&Dt&&((a=A==null?void 0:A.files)==null?void 0:a[0])&&((u=o==null?void 0:o.files)==null?void 0:u[0])&&N;v.disabled=!p}async function vi(v){var l,m;if(!Ut||!Dt)return;const A=document.getElementById("file-left"),o=document.getElementById("file-right"),N=(l=A==null?void 0:A.files)==null?void 0:l[0],p=(m=o==null?void 0:o.files)==null?void 0:m[0];if(!N||!p){Y("Missing required files","err");return}const a=[],u=document.querySelectorAll(".mapping-item");for(let r=0;r<u.length;r++){const w=u[r],E=w.querySelector(".stt-activity-select"),k=w.querySelector(".uhabits-habit-select"),c=w.querySelector(".min-duration-input"),y=w.querySelector(".copy-stt-comments-checkbox"),h=parseInt(E.value),_=parseInt(k.value),f=c&&parseInt(c.value)||0,S=y?y.checked:!1;h&&_&&a.push({sttTypeId:h,uhabitsHabitId:_,minDuration:f,copySttComments:S})}if(a.length===0){Y("No valid mappings configured","err");return}try{const r=document.getElementById("btn-convert-stt");r&&(r.disabled=!0),Y("Starting conversion...","info");const w=await _i(N,p,a,v);dr(w,"uhabits_with_stt.backup",null),Y("Conversion complete! Download started.","info")}catch(r){Y(`Conversion failed: ${r.message}`,"err"),console.error(r)}finally{const r=document.getElementById("btn-convert-stt");r&&(r.disabled=!1)}}let He;function Yr(v){return v==="merge"||v==="convert"}window.onload=async()=>{Y("Initializing SQL.js...");try{He=await oi(),Y("SQL.js ready.")}catch(v){Y("Error loading SQL.js: "+(v.message||v.toString()),"err");return}try{gi(He)}catch(v){Y("Error initializing STT handlers: "+(v.message||v.toString()),"err")}nn(),Ei()};const wi={"action-newpipe-libretube-merge":["merge"],"action-newpipe-libretube-convert":["convert"],"action-stt-uhabits-fill":["stt"],"global-options":["convert","merge"],"main-file-area":["convert","merge","stt"]};function nn(){const v=document.querySelector('input[name="mode"]:checked'),A=v?v.value:"convert",o=document.getElementById("action-newpipe-libretube-merge"),N=document.getElementById("action-newpipe-libretube-convert"),p=document.getElementById("action-stt-uhabits-fill"),a=document.getElementById("global-options"),u=document.getElementById("main-file-area");if(!o||!N||!p||!a||!u)return;for(const[c,y]of Object.entries(wi)){const h=document.getElementById(c);h&&(h.style.display=y.includes(A)?"":"none")}document.querySelectorAll(".zone-title, .zone-hint").forEach(c=>{const y=c.getAttribute(`data-${A}`);y&&(c.innerHTML=y)});const l=window.prevMode,m=Yr(l),r=Yr(A),w=l&&m!==r,E=document.getElementById("file-left"),k=document.getElementById("file-right");if(E){const c=E.getAttribute(`data-${A}`);c&&(E.accept=c),w&&(E.value="",E.dispatchEvent(new Event("change",{bubbles:!0})))}if(k){const c=k.getAttribute(`data-${A}`);c&&(k.accept=c),w&&(k.value="",k.dispatchEvent(new Event("change",{bubbles:!0})))}window.prevMode=A}async function sn(v){var l,m;const A=document.querySelector('input[name="mode"]:checked'),o=A?A.value:"convert",N=(l=document.getElementById("file-left").files)==null?void 0:l[0],p=(m=document.getElementById("file-right").files)==null?void 0:m[0],a=N,u=p;if(o==="merge"&&(!N||!p))return Y("Merge mode requires BOTH files.","err");if(o==="convert"){if(v==="to_newpipe"&&!p)return Y("Missing LibreTube source file.","err");if(v==="to_libretube"&&!N)return Y("Missing NewPipe source file.","err")}try{document.querySelectorAll(".controls button").forEach(c=>c.disabled=!0);const r=document.getElementById("playlist-behavior"),w=r?r.value:void 0,E=document.getElementById("include-watch-history"),k=E?E.checked:!0;v==="to_newpipe"?await fi(a,u,o,He,w):await hi(a,u,o,He,w,k)}catch(r){Y(`FATAL ERROR: ${r.message||r.toString()||"An unknown error occurred"}`,"err"),r.stack?Y(`Stack Trace: ${r.stack}`,"err"):Y(`Error Object: ${r.toString()}`,"err"),console.error(r)}finally{document.querySelectorAll(".controls button").forEach(r=>r.disabled=!1)}}window.processBackup=sn;window.updateUI=nn;window.addEventListener("DOMContentLoaded",()=>{const v=document.getElementById("btn-merge"),A=document.getElementById("merge-direction"),o=document.getElementById("playlist-behavior");v&&A&&o&&(o.value=A.checked?"merge_np_precedence":"merge_lt_precedence",A.addEventListener("change",()=>{A.checked?o.value="merge_np_precedence":o.value="merge_lt_precedence"}),v.addEventListener("click",async()=>{const N=A.checked?"to_libretube":"to_newpipe";await sn(N)}))});function Ei(){document.querySelectorAll(".drop-zone").forEach(v=>{const A=v.querySelector('input[type="file"]'),o=v.querySelector(".file-name"),N=v.querySelector(".clear-file");A&&(v.addEventListener("click",p=>{p.target===A||p.target===N||A.click()}),v.addEventListener("keydown",p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),A.click())}),v.addEventListener("dragover",p=>{p.preventDefault(),v.classList.add("active")}),v.addEventListener("dragleave",()=>{v.classList.remove("active")}),v.addEventListener("drop",p=>{p.preventDefault(),v.classList.remove("active");const a=p.dataTransfer&&p.dataTransfer.files;if(a&&a.length)try{const u=new DataTransfer;for(let l=0;l<a.length;l++)u.items.add(a[l]);A.files=u.files,A.dispatchEvent(new Event("change",{bubbles:!0}))}catch(u){console.warn("Could not set input.files programmatically",u)}}),A.addEventListener("change",()=>{const p=A.files&&A.files[0];if(p){const a=document.querySelector('input[name="mode"]:checked'),u=a?a.value:"convert",l=A.getAttribute(`data-${u}`);if(l){const m=l.split(",").map(E=>E.trim().toLowerCase()),r=p.name.toLowerCase();if(!m.some(E=>r.endsWith(E))){Y(`Invalid file type. Expected: ${m.join(", ")}`,"err"),A.value="",o&&(o.textContent=""),N&&(N.style.display="none");return}}}o&&(o.textContent=p?p.name:""),N&&(N.style.display=p?"flex":"none")}),N&&N.addEventListener("click",p=>{p.stopPropagation(),A.value="",A.dispatchEvent(new Event("change",{bubbles:!0}))}))})}
//# sourceMappingURL=index-DOH2IlkC.js.map

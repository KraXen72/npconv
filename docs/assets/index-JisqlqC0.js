var yn=Object.defineProperty;var wn=(V,nt,p)=>nt in V?yn(V,nt,{enumerable:!0,configurable:!0,writable:!0,value:p}):V[nt]=p;var ee=(V,nt,p)=>wn(V,typeof nt!="symbol"?nt+"":nt,p);(function(){const nt=document.createElement("link").relList;if(nt&&nt.supports&&nt.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))L(k);new MutationObserver(k=>{for(const l of k)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&L(f)}).observe(document,{childList:!0,subtree:!0});function p(k){const l={};return k.integrity&&(l.integrity=k.integrity),k.referrerPolicy&&(l.referrerPolicy=k.referrerPolicy),k.crossOrigin==="use-credentials"?l.credentials="include":k.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function L(k){if(k.ep)return;k.ep=!0;const l=p(k);fetch(k.href,l)}})();function rt(V,nt="info"){const p=document.getElementById("debug-console");if(!p)return;const L=document.createElement("div");L.textContent=`[${new Date().toLocaleTimeString()}] ${V}`,nt==="err"?L.className="log-err":nt==="warn"?L.className="log-warn":nt==="schema"?L.className="log-schema":L.className="log-info",p.appendChild(L),p.scrollTop=p.scrollHeight}var Ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ar(V){return V&&V.__esModule&&Object.prototype.hasOwnProperty.call(V,"default")?V.default:V}function vn(V){if(V.__esModule)return V;var nt=V.default;if(typeof nt=="function"){var p=function L(){return this instanceof L?Reflect.construct(nt,arguments,this.constructor):nt.apply(this,arguments)};p.prototype=nt.prototype}else p={};return Object.defineProperty(p,"__esModule",{value:!0}),Object.keys(V).forEach(function(L){var k=Object.getOwnPropertyDescriptor(V,L);Object.defineProperty(p,L,k.get?k:{enumerable:!0,get:function(){return V[L]}})}),p}var Rr={exports:{}};const En={},kn=Object.freeze(Object.defineProperty({__proto__:null,default:En},Symbol.toStringTag,{value:"Module"})),kr=vn(kn);(function(V,nt){var p=void 0,L=function(k){return p||(p=new Promise(function(l,f){var a=typeof k<"u"?k:{},m=a.onAbort;a.onAbort=function(t){f(new Error(t)),m&&m(t)},a.postRun=a.postRun||[],a.postRun.push(function(){l(a)}),V=void 0;var s;s||(s=typeof a<"u"?a:{});var A=typeof window=="object",S=typeof WorkerGlobalScope<"u",N=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";s.onRuntimeInitialized=function(){function t(C,X){switch(typeof X){case"boolean":gn(C,X?1:0);break;case"number":pn(C,X);break;case"string":mn(C,X,-1,-1);break;case"object":if(X===null)yr(C);else if(X.length!=null){var ct=Ae(X,Ne);_n(C,ct,X.length,-1),Re(ct)}else xe(C,"Wrong API use : tried to return a value of an unknown type ("+X+").",-1);break;default:yr(C)}}function e(C,X){for(var ct=[],mt=0;mt<C;mt+=1){var gt=Ct(X+4*mt,"i32"),St=un(gt);if(St===1||St===2)gt=dn(gt);else if(St===3)gt=fn(gt);else if(St===4){St=gt,gt=cn(St),St=hn(St);for(var $t=new Uint8Array(gt),qt=0;qt<gt;qt+=1)$t[qt]=q[St+qt];gt=$t}else gt=null;ct.push(gt)}return ct}function n(C,X){this.Qa=C,this.db=X,this.Oa=1,this.lb=[]}function o(C,X){if(this.db=X,X=ft(C)+1,this.eb=He(X),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Et(C,W,this.eb,X),this.kb=this.eb,this.Za=this.pb=null}function v(C){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),C!=null){var X=this.filename,ct="/",mt=X;if(ct&&(ct=typeof ct=="string"?ct:De(ct),mt=X?I(ct+"/"+X):ct),X=ue(!0,!0),mt=Fr(mt,X),C){if(typeof C=="string"){ct=Array(C.length);for(var gt=0,St=C.length;gt<St;++gt)ct[gt]=C.charCodeAt(gt);C=ct}Ee(mt,X|146),ct=fe(mt,577),ur(ct,C,0,C.length,0),Me(ct),Ee(mt,X)}}this.handleError(ht(this.filename,P)),this.db=Ct(P,"i32"),vr(this.db),this.fb={},this.Sa={}}var P=te(4),G=s.cwrap,ht=G("sqlite3_open","number",["string","number"]),wt=G("sqlite3_close_v2","number",["number"]),bt=G("sqlite3_exec","number",["number","string","number","number","number"]),Ot=G("sqlite3_changes","number",["number"]),Ut=G("sqlite3_prepare_v2","number",["number","string","number","number","number"]),pr=G("sqlite3_sql","string",["number"]),Gr=G("sqlite3_normalized_sql","string",["number"]),mr=G("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Hr=G("sqlite3_bind_text","number",["number","number","number","number","number"]),_r=G("sqlite3_bind_blob","number",["number","number","number","number","number"]),Zr=G("sqlite3_bind_double","number",["number","number","number"]),Xr=G("sqlite3_bind_int","number",["number","number","number"]),Yr=G("sqlite3_bind_parameter_index","number",["number","string"]),Kr=G("sqlite3_step","number",["number"]),Vr=G("sqlite3_errmsg","string",["number"]),Qr=G("sqlite3_column_count","number",["number"]),Jr=G("sqlite3_data_count","number",["number"]),tn=G("sqlite3_column_double","number",["number","number"]),gr=G("sqlite3_column_text","string",["number","number"]),en=G("sqlite3_column_blob","number",["number","number"]),rn=G("sqlite3_column_bytes","number",["number","number"]),nn=G("sqlite3_column_type","number",["number","number"]),sn=G("sqlite3_column_name","string",["number","number"]),an=G("sqlite3_reset","number",["number"]),on=G("sqlite3_clear_bindings","number",["number"]),ln=G("sqlite3_finalize","number",["number"]),br=G("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),un=G("sqlite3_value_type","number",["number"]),cn=G("sqlite3_value_bytes","number",["number"]),fn=G("sqlite3_value_text","string",["number"]),hn=G("sqlite3_value_blob","number",["number"]),dn=G("sqlite3_value_double","number",["number"]),pn=G("sqlite3_result_double","",["number","number"]),yr=G("sqlite3_result_null","",["number"]),mn=G("sqlite3_result_text","",["number","string","number","number"]),_n=G("sqlite3_result_blob","",["number","number","number","number"]),gn=G("sqlite3_result_int","",["number","number"]),xe=G("sqlite3_result_error","",["number","string","number"]),wr=G("sqlite3_aggregate_context","number",["number","number"]),vr=G("RegisterExtensionFunctions","number",["number"]),Er=G("sqlite3_update_hook","number",["number","number","number"]);n.prototype.bind=function(C){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(C)?this.Cb(C):C!=null&&typeof C=="object"?this.Db(C):!0},n.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var C=Kr(this.Qa);switch(C){case 100:return!0;case 101:return!1;default:throw this.db.handleError(C)}},n.prototype.wb=function(C){return C==null&&(C=this.Oa,this.Oa+=1),tn(this.Qa,C)},n.prototype.Gb=function(C){if(C==null&&(C=this.Oa,this.Oa+=1),C=gr(this.Qa,C),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(C)},n.prototype.Hb=function(C){return C==null&&(C=this.Oa,this.Oa+=1),gr(this.Qa,C)},n.prototype.getBlob=function(C){C==null&&(C=this.Oa,this.Oa+=1);var X=rn(this.Qa,C);C=en(this.Qa,C);for(var ct=new Uint8Array(X),mt=0;mt<X;mt+=1)ct[mt]=q[C+mt];return ct},n.prototype.get=function(C,X){X=X||{},C!=null&&this.bind(C)&&this.step(),C=[];for(var ct=Jr(this.Qa),mt=0;mt<ct;mt+=1)switch(nn(this.Qa,mt)){case 1:var gt=X.useBigInt?this.Gb(mt):this.wb(mt);C.push(gt);break;case 2:C.push(this.wb(mt));break;case 3:C.push(this.Hb(mt));break;case 4:C.push(this.getBlob(mt));break;default:C.push(null)}return C},n.prototype.getColumnNames=function(){for(var C=[],X=Qr(this.Qa),ct=0;ct<X;ct+=1)C.push(sn(this.Qa,ct));return C},n.prototype.getAsObject=function(C,X){C=this.get(C,X),X=this.getColumnNames();for(var ct={},mt=0;mt<X.length;mt+=1)ct[X[mt]]=C[mt];return ct},n.prototype.getSQL=function(){return pr(this.Qa)},n.prototype.getNormalizedSQL=function(){return Gr(this.Qa)},n.prototype.run=function(C){return C!=null&&this.bind(C),this.step(),this.reset()},n.prototype.sb=function(C,X){X==null&&(X=this.Oa,this.Oa+=1),C=vt(C);var ct=Ae(C,Ne);this.lb.push(ct),this.db.handleError(Hr(this.Qa,X,ct,C.length-1,0))},n.prototype.Bb=function(C,X){X==null&&(X=this.Oa,this.Oa+=1);var ct=Ae(C,Ne);this.lb.push(ct),this.db.handleError(_r(this.Qa,X,ct,C.length,0))},n.prototype.rb=function(C,X){X==null&&(X=this.Oa,this.Oa+=1),this.db.handleError((C===(C|0)?Xr:Zr)(this.Qa,X,C))},n.prototype.Eb=function(C){C==null&&(C=this.Oa,this.Oa+=1),_r(this.Qa,C,0,0,0)},n.prototype.tb=function(C,X){switch(X==null&&(X=this.Oa,this.Oa+=1),typeof C){case"string":this.sb(C,X);return;case"number":this.rb(C,X);return;case"bigint":this.sb(C.toString(),X);return;case"boolean":this.rb(C+0,X);return;case"object":if(C===null){this.Eb(X);return}if(C.length!=null){this.Bb(C,X);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+C+")."},n.prototype.Db=function(C){var X=this;return Object.keys(C).forEach(function(ct){var mt=Yr(X.Qa,ct);mt!==0&&X.tb(C[ct],mt)}),!0},n.prototype.Cb=function(C){for(var X=0;X<C.length;X+=1)this.tb(C[X],X+1);return!0},n.prototype.reset=function(){return this.freemem(),on(this.Qa)===0&&an(this.Qa)===0},n.prototype.freemem=function(){for(var C;(C=this.lb.pop())!==void 0;)Re(C)},n.prototype.free=function(){this.freemem();var C=ln(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,C},o.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var C=be(),X=te(4);r(P),r(X);try{this.db.handleError(mr(this.db.db,this.kb,-1,P,X)),this.kb=Ct(X,"i32");var ct=Ct(P,"i32");return ct===0?(this.mb(),{done:!0}):(this.Za=new n(ct,this.db),this.db.fb[ct]=this.Za,{value:this.Za,done:!1})}catch(mt){throw this.pb=b(this.kb),this.mb(),mt}finally{ge(C)}},o.prototype.mb=function(){Re(this.eb),this.eb=null},o.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:b(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(o.prototype[Symbol.iterator]=function(){return this}),v.prototype.run=function(C,X){if(!this.db)throw"Database closed";if(X){C=this.prepare(C,X);try{C.step()}finally{C.free()}}else this.handleError(bt(this.db,C,0,0,P));return this},v.prototype.exec=function(C,X,ct){if(!this.db)throw"Database closed";var mt=be(),gt=null;try{var St=$e(C),$t=te(4);for(C=[];Ct(St,"i8")!==0;){r(P),r($t),this.handleError(mr(this.db,St,-1,P,$t));var qt=Ct(P,"i32");if(St=Ct($t,"i32"),qt!==0){var Bt=null;for(gt=new n(qt,this),X!=null&&gt.bind(X);gt.step();)Bt===null&&(Bt={columns:gt.getColumnNames(),values:[]},C.push(Bt)),Bt.values.push(gt.get(null,ct));gt.free()}}return C}catch(Gt){throw gt&&gt.free(),Gt}finally{ge(mt)}},v.prototype.each=function(C,X,ct,mt,gt){typeof X=="function"&&(mt=ct,ct=X,X=void 0),C=this.prepare(C,X);try{for(;C.step();)ct(C.getAsObject(null,gt))}finally{C.free()}if(typeof mt=="function")return mt()},v.prototype.prepare=function(C,X){if(r(P),this.handleError(Ut(this.db,C,-1,P,0)),C=Ct(P,"i32"),C===0)throw"Nothing to prepare";var ct=new n(C,this);return X!=null&&ct.bind(X),this.fb[C]=ct},v.prototype.iterateStatements=function(C){return new o(C,this)},v.prototype.export=function(){Object.values(this.fb).forEach(function(X){X.free()}),Object.values(this.Sa).forEach(Jt),this.Sa={},this.handleError(wt(this.db));var C=Br(this.filename);return this.handleError(ht(this.filename,P)),this.db=Ct(P,"i32"),vr(this.db),C},v.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(C){C.free()}),Object.values(this.Sa).forEach(Jt),this.Sa={},this.Ya&&(Jt(this.Ya),this.Ya=void 0),this.handleError(wt(this.db)),ir("/"+this.filename),this.db=null)},v.prototype.handleError=function(C){if(C===0)return null;throw C=Vr(this.db),Error(C)},v.prototype.getRowsModified=function(){return Ot(this.db)},v.prototype.create_function=function(C,X){Object.prototype.hasOwnProperty.call(this.Sa,C)&&(Jt(this.Sa[C]),delete this.Sa[C]);var ct=_e(function(mt,gt,St){gt=e(gt,St);try{var $t=X.apply(null,gt)}catch(qt){xe(mt,qt,-1);return}t(mt,$t)},"viii");return this.Sa[C]=ct,this.handleError(br(this.db,C,X.length,1,0,ct,0,0,0)),this},v.prototype.create_aggregate=function(C,X){var ct=X.init||function(){return null},mt=X.finalize||function(Bt){return Bt},gt=X.step;if(!gt)throw"An aggregate function must have a step function in "+C;var St={};Object.hasOwnProperty.call(this.Sa,C)&&(Jt(this.Sa[C]),delete this.Sa[C]),X=C+"__finalize",Object.hasOwnProperty.call(this.Sa,X)&&(Jt(this.Sa[X]),delete this.Sa[X]);var $t=_e(function(Bt,Gt,Xe){var le=wr(Bt,1);Object.hasOwnProperty.call(St,le)||(St[le]=ct()),Gt=e(Gt,Xe),Gt=[St[le]].concat(Gt);try{St[le]=gt.apply(null,Gt)}catch(bn){delete St[le],xe(Bt,bn,-1)}},"viii"),qt=_e(function(Bt){var Gt=wr(Bt,1);try{var Xe=mt(St[Gt])}catch(le){delete St[Gt],xe(Bt,le,-1);return}t(Bt,Xe),delete St[Gt]},"vi");return this.Sa[C]=$t,this.Sa[X]=qt,this.handleError(br(this.db,C,gt.length-1,1,0,0,$t,qt,0)),this},v.prototype.updateHook=function(C){this.Ya&&(Er(this.db,0,0),Jt(this.Ya),this.Ya=void 0),C&&(this.Ya=_e(function(X,ct,mt,gt,St){switch(ct){case 18:X="insert";break;case 23:X="update";break;case 9:X="delete";break;default:throw"unknown operationCode in updateHook callback: "+ct}if(mt=mt?F(W,mt):"",gt=gt?F(W,gt):"",St>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";C(X,mt,gt,Number(St))},"viiiij"),Er(this.db,this.Ya,0))},s.Database=v};var c={...s},y="./this.program",h=(t,e)=>{throw e},_="",u,g;if(N){var E=kr;_=__dirname+"/",g=t=>(t=pt(t)?new URL(t):t,E.readFileSync(t)),u=async t=>(t=pt(t)?new URL(t):t,E.readFileSync(t,void 0)),!s.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),V.exports=s,h=(t,e)=>{throw process.exitCode=t,e}}else(A||S)&&(S?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),_=_.startsWith("blob:")?"":_.slice(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),S&&(g=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),u=async t=>{if(pt(t))return new Promise((n,o)=>{var v=new XMLHttpRequest;v.open("GET",t,!0),v.responseType="arraybuffer",v.onload=()=>{v.status==200||v.status==0&&v.response?n(v.response):o(v.status)},v.onerror=o,v.send(null)});var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw Error(e.status+" : "+e.url)});var x=s.print||console.log.bind(console),T=s.printErr||console.error.bind(console);Object.assign(s,c),c=null,s.thisProgram&&(y=s.thisProgram);var M=s.wasmBinary,D,j=!1,R,q,W,w,O,i,$,lt,Y,pt=t=>t.startsWith("file://");function Q(){var t=D.buffer;s.HEAP8=q=new Int8Array(t),s.HEAP16=w=new Int16Array(t),s.HEAPU8=W=new Uint8Array(t),s.HEAPU16=new Uint16Array(t),s.HEAP32=O=new Int32Array(t),s.HEAPU32=i=new Uint32Array(t),s.HEAPF32=$=new Float32Array(t),s.HEAPF64=Y=new Float64Array(t),s.HEAP64=lt=new BigInt64Array(t),s.HEAPU64=new BigUint64Array(t)}var at=0,U=null;function z(t){var e;throw(e=s.onAbort)==null||e.call(s,t),t="Aborted("+t+")",T(t),j=!0,new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info.")}var ut;async function it(t){if(!M)try{var e=await u(t);return new Uint8Array(e)}catch{}if(t==ut&&M)t=new Uint8Array(M);else if(g)t=g(t);else throw"both async and sync fetching of the wasm failed";return t}async function J(t,e){try{var n=await it(t);return await WebAssembly.instantiate(n,e)}catch(o){T(`failed to asynchronously prepare wasm: ${o}`),z(o)}}async function Tt(t){var e=ut;if(!M&&typeof WebAssembly.instantiateStreaming=="function"&&!pt(e)&&!N)try{var n=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,t)}catch(o){T(`wasm streaming compile failed: ${o}`),T("falling back to ArrayBuffer instantiation")}return J(e,t)}class Nt{constructor(e){ee(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var yt=t=>{for(;0<t.length;)t.shift()(s)},kt=[],Rt=[],xt=()=>{var t=s.preRun.shift();Rt.unshift(t)};function Ct(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return q[t];case"i8":return q[t];case"i16":return w[t>>1];case"i32":return O[t>>2];case"i64":return lt[t>>3];case"float":return $[t>>2];case"double":return Y[t>>3];case"*":return i[t>>2];default:z(`invalid type for getValue: ${e}`)}}var Lt=s.noExitRuntime||!0;function r(t){var e="i32";switch(e.endsWith("*")&&(e="*"),e){case"i1":q[t]=0;break;case"i8":q[t]=0;break;case"i16":w[t>>1]=0;break;case"i32":O[t>>2]=0;break;case"i64":lt[t>>3]=BigInt(0);break;case"float":$[t>>2]=0;break;case"double":Y[t>>3]=0;break;case"*":i[t>>2]=0;break;default:z(`invalid type for setValue: ${e}`)}}var H=typeof TextDecoder<"u"?new TextDecoder:void 0,F=(t,e=0,n=NaN)=>{var o=e+n;for(n=e;t[n]&&!(n>=o);)++n;if(16<n-e&&t.buffer&&H)return H.decode(t.subarray(e,n));for(o="";e<n;){var v=t[e++];if(v&128){var P=t[e++]&63;if((v&224)==192)o+=String.fromCharCode((v&31)<<6|P);else{var G=t[e++]&63;v=(v&240)==224?(v&15)<<12|P<<6|G:(v&7)<<18|P<<12|G<<6|t[e++]&63,65536>v?o+=String.fromCharCode(v):(v-=65536,o+=String.fromCharCode(55296|v>>10,56320|v&1023))}}else o+=String.fromCharCode(v)}return o},b=(t,e)=>t?F(W,t,e):"",d=(t,e)=>{for(var n=0,o=t.length-1;0<=o;o--){var v=t[o];v==="."?t.splice(o,1):v===".."?(t.splice(o,1),n++):n&&(t.splice(o,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},I=t=>{var e=t.charAt(0)==="/",n=t.slice(-1)==="/";return(t=d(t.split("/").filter(o=>!!o),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},Z=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.slice(0,-1)),t+e)},K=t=>t&&t.match(/([^\/]+|\/)\/*$/)[1],B=()=>{if(N){var t=kr;return e=>t.randomFillSync(e)}return e=>crypto.getRandomValues(e)},tt=t=>{(tt=B())(t)},ot=(...t)=>{for(var e="",n=!1,o=t.length-1;-1<=o&&!n;o--){if(n=0<=o?t[o]:"/",typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,n=n.charAt(0)==="/"}return e=d(e.split("/").filter(v=>!!v),!n).join("/"),(n?"/":"")+e||"."},et=[],ft=t=>{for(var e=0,n=0;n<t.length;++n){var o=t.charCodeAt(n);127>=o?e++:2047>=o?e+=2:55296<=o&&57343>=o?(e+=4,++n):e+=3}return e},Et=(t,e,n,o)=>{if(!(0<o))return 0;var v=n;o=n+o-1;for(var P=0;P<t.length;++P){var G=t.charCodeAt(P);if(55296<=G&&57343>=G){var ht=t.charCodeAt(++P);G=65536+((G&1023)<<10)|ht&1023}if(127>=G){if(n>=o)break;e[n++]=G}else{if(2047>=G){if(n+1>=o)break;e[n++]=192|G>>6}else{if(65535>=G){if(n+2>=o)break;e[n++]=224|G>>12}else{if(n+3>=o)break;e[n++]=240|G>>18,e[n++]=128|G>>12&63}e[n++]=128|G>>6&63}e[n++]=128|G&63}}return e[n]=0,n-v},vt=(t,e)=>{var n=Array(ft(t)+1);return t=Et(t,n,0,n.length),e&&(n.length=t),n},Dt=[];function Yt(t,e){Dt[t]={input:[],output:[],cb:e},Fe(t,Mt)}var Mt={open(t){var e=Dt[t.node.rdev];if(!e)throw new st(43);t.tty=e,t.seekable=!1},close(t){t.tty.cb.fsync(t.tty)},fsync(t){t.tty.cb.fsync(t.tty)},read(t,e,n,o){if(!t.tty||!t.tty.cb.xb)throw new st(60);for(var v=0,P=0;P<o;P++){try{var G=t.tty.cb.xb(t.tty)}catch{throw new st(29)}if(G===void 0&&v===0)throw new st(6);if(G==null)break;v++,e[n+P]=G}return v&&(t.node.atime=Date.now()),v},write(t,e,n,o){if(!t.tty||!t.tty.cb.qb)throw new st(60);try{for(var v=0;v<o;v++)t.tty.cb.qb(t.tty,e[n+v])}catch{throw new st(29)}return o&&(t.node.mtime=t.node.ctime=Date.now()),v}},ne={xb(){t:{if(!et.length){var t=null;if(N){var e=Buffer.alloc(256),n=0,o=process.stdin.fd;try{n=E.readSync(o,e,0,256)}catch(v){if(v.toString().includes("EOF"))n=0;else throw v}0<n&&(t=e.slice(0,n).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(t=window.prompt("Input: "),t!==null&&(t+=`
`));if(!t){t=null;break t}et=vt(t,!0)}t=et.shift()}return t},qb(t,e){e===null||e===10?(x(F(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(x(F(t.output)),t.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},It={qb(t,e){e===null||e===10?(T(F(t.output)),t.output=[]):e!=0&&t.output.push(e)},fsync(t){var e;0<((e=t.output)==null?void 0:e.length)&&(T(F(t.output)),t.output=[])}},_t={Wa:null,Xa(){return _t.createNode(null,"/",16895,0)},createNode(t,e,n,o){if((n&61440)===24576||(n&61440)===4096)throw new st(63);return _t.Wa||(_t.Wa={dir:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,lookup:_t.La.lookup,hb:_t.La.hb,rename:_t.La.rename,unlink:_t.La.unlink,rmdir:_t.La.rmdir,readdir:_t.La.readdir,symlink:_t.La.symlink},stream:{Va:_t.Ma.Va}},file:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:{Va:_t.Ma.Va,read:_t.Ma.read,write:_t.Ma.write,ib:_t.Ma.ib,jb:_t.Ma.jb}},link:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua,readlink:_t.La.readlink},stream:{}},ub:{node:{Ta:_t.La.Ta,Ua:_t.La.Ua},stream:Ur}}),n=Ve(t,e,n,o),Pt(n.mode)?(n.La=_t.Wa.dir.node,n.Ma=_t.Wa.dir.stream,n.Na={}):(n.mode&61440)===32768?(n.La=_t.Wa.file.node,n.Ma=_t.Wa.file.stream,n.Ra=0,n.Na=null):(n.mode&61440)===40960?(n.La=_t.Wa.link.node,n.Ma=_t.Wa.link.stream):(n.mode&61440)===8192&&(n.La=_t.Wa.ub.node,n.Ma=_t.Wa.ub.stream),n.atime=n.mtime=n.ctime=Date.now(),t&&(t.Na[e]=n,t.atime=t.mtime=t.ctime=n.atime),n},Sb(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},La:{Ta(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Pt(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.atime),e.mtime=new Date(t.mtime),e.ctime=new Date(t.ctime),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},Ua(t,e){for(var n of["mode","atime","mtime","ctime"])e[n]!=null&&(t[n]=e[n]);e.size!==void 0&&(e=e.size,t.Ra!=e&&(e==0?(t.Na=null,t.Ra=0):(n=t.Na,t.Na=new Uint8Array(e),n&&t.Na.set(n.subarray(0,Math.min(e,t.Ra))),t.Ra=e)))},lookup(){throw _t.vb},hb(t,e,n,o){return _t.createNode(t,e,n,o)},rename(t,e,n){try{var o=se(e,n)}catch{}if(o){if(Pt(t.mode))for(var v in o.Na)throw new st(55);Pe(o)}delete t.parent.Na[t.name],e.Na[n]=t,t.name=n,e.ctime=e.mtime=t.parent.ctime=t.parent.mtime=Date.now()},unlink(t,e){delete t.Na[e],t.ctime=t.mtime=Date.now()},rmdir(t,e){var n=se(t,e),o;for(o in n.Na)throw new st(55);delete t.Na[e],t.ctime=t.mtime=Date.now()},readdir(t){return[".","..",...Object.keys(t.Na)]},symlink(t,e,n){return t=_t.createNode(t,e,41471,0),t.link=n,t},readlink(t){if((t.mode&61440)!==40960)throw new st(28);return t.link}},Ma:{read(t,e,n,o,v){var P=t.node.Na;if(v>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-v,o),8<t&&P.subarray)e.set(P.subarray(v,v+t),n);else for(o=0;o<t;o++)e[n+o]=P[v+o];return t},write(t,e,n,o,v,P){if(e.buffer===q.buffer&&(P=!1),!o)return 0;if(t=t.node,t.mtime=t.ctime=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(P)return t.Na=e.subarray(n,n+o),t.Ra=o;if(t.Ra===0&&v===0)return t.Na=e.slice(n,n+o),t.Ra=o;if(v+o<=t.Ra)return t.Na.set(e.subarray(n,n+o),v),o}P=v+o;var G=t.Na?t.Na.length:0;if(G>=P||(P=Math.max(P,G*(1048576>G?2:1.125)>>>0),G!=0&&(P=Math.max(P,256)),G=t.Na,t.Na=new Uint8Array(P),0<t.Ra&&t.Na.set(G.subarray(0,t.Ra),0)),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(n,n+o),v);else for(P=0;P<o;P++)t.Na[v+P]=e[n+P];return t.Ra=Math.max(t.Ra,v+o),o},Va(t,e,n){if(n===1?e+=t.position:n===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new st(28);return e},ib(t,e,n,o,v){if((t.node.mode&61440)!==32768)throw new st(43);if(t=t.node.Na,v&2||!t||t.buffer!==q.buffer){v=!0,o=65536*Math.ceil(e/65536);var P=hr(65536,o);if(P&&W.fill(0,P,P+o),o=P,!o)throw new st(48);t&&((0<n||n+e<t.length)&&(t.subarray?t=t.subarray(n,n+e):t=Array.prototype.slice.call(t,n,n+e)),q.set(t,o))}else v=!1,o=t.byteOffset;return{Kb:o,Ab:v}},jb(t,e,n,o){return _t.Ma.write(t,e,0,o,n,!1),0}}},ue=(t,e)=>{var n=0;return t&&(n|=365),e&&(n|=146),n},Ft=null,he={},Kt=[],Le=1,Ht=null,de=!1,Vt=!0,ie={},st=class{constructor(t){ee(this,"name","ErrnoError");this.Pa=t}},Dr=class{constructor(){ee(this,"gb",{});ee(this,"node",null)}get flags(){return this.gb.flags}set flags(t){this.gb.flags=t}get position(){return this.gb.position}set position(t){this.gb.position=t}},zr=class{constructor(t,e,n,o){ee(this,"La",{});ee(this,"Ma",{});ee(this,"ab",null);t||(t=this),this.parent=t,this.Xa=t.Xa,this.id=Le++,this.name=e,this.mode=n,this.rdev=o,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(t){t?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(t){t?this.mode|=146:this.mode&=-147}};function jt(t,e={}){if(!t)throw new st(44);e.nb??(e.nb=!0),t.charAt(0)==="/"||(t="//"+t);var n=0;t:for(;40>n;n++){t=t.split("/").filter(ht=>!!ht);for(var o=Ft,v="/",P=0;P<t.length;P++){var G=P===t.length-1;if(G&&e.parent)break;if(t[P]!==".")if(t[P]==="..")v=Z(v),o=o.parent;else{v=I(v+"/"+t[P]);try{o=se(o,t[P])}catch(ht){if((ht==null?void 0:ht.Pa)===44&&G&&e.Jb)return{path:v};throw ht}if(!o.ab||G&&!e.nb||(o=o.ab.root),(o.mode&61440)===40960&&(!G||e.$a)){if(!o.La.readlink)throw new st(52);o=o.La.readlink(o),o.charAt(0)==="/"||(o=Z(v)+"/"+o),t=o+"/"+t.slice(P+1).join("/");continue t}}}return{path:v,node:o}}throw new st(32)}function De(t){for(var e;;){if(t===t.parent)return t=t.Xa.zb,e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function ze(t,e){for(var n=0,o=0;o<e.length;o++)n=(n<<5)-n+e.charCodeAt(o)|0;return(t+n>>>0)%Ht.length}function Pe(t){var e=ze(t.parent.id,t.name);if(Ht[e]===t)Ht[e]=t.bb;else for(e=Ht[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function se(t,e){var n=Pt(t.mode)?(n=ce(t,"x"))?n:t.La.lookup?0:2:54;if(n)throw new st(n);for(n=Ht[ze(t.id,e)];n;n=n.bb){var o=n.name;if(n.parent.id===t.id&&o===e)return n}return t.La.lookup(t,e)}function Ve(t,e,n,o){return t=new zr(t,e,n,o),e=ze(t.parent.id,t.name),t.bb=Ht[e],Ht[e]=t}function Pt(t){return(t&61440)===16384}function Qe(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function ce(t,e){if(Vt)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function Je(t,e){if(!Pt(t.mode))return 54;try{return se(t,e),20}catch{}return ce(t,"wx")}function tr(t,e,n){try{var o=se(t,e)}catch(v){return v.Pa}if(t=ce(t,"wx"))return t;if(n){if(!Pt(o.mode))return 54;if(o===o.parent||De(o)==="/")return 10}else if(Pt(o.mode))return 31;return 0}function ye(t){if(!t)throw new st(63);return t}function zt(t){if(t=Kt[t],!t)throw new st(8);return t}function er(t,e=-1){if(t=Object.assign(new Dr,t),e==-1)t:{for(e=0;4096>=e;e++)if(!Kt[e])break t;throw new st(33)}return t.fd=e,Kt[e]=t}function Pr(t,e=-1){var n,o;return t=er(t,e),(o=(n=t.Ma)==null?void 0:n.Rb)==null||o.call(n,t),t}function Ue(t,e,n){var o=t==null?void 0:t.Ma.Ua;t=o?t:e,o??(o=e.La.Ua),ye(o),o(t,n)}var Ur={open(t){var e,n;t.Ma=he[t.node.rdev].Ma,(n=(e=t.Ma).open)==null||n.call(e,t)},Va(){throw new st(70)}};function Fe(t,e){he[t]={Ma:e}}function rr(t,e){var n=e==="/";if(n&&Ft)throw new st(10);if(!n&&e){var o=jt(e,{nb:!1});if(e=o.path,o=o.node,o.ab)throw new st(10);if(!Pt(o.mode))throw new st(54)}e={type:t,Wb:{},zb:e,Ib:[]},t=t.Xa(e),t.Xa=e,e.root=t,n?Ft=t:o&&(o.ab=e,o.Xa&&o.Xa.Ib.push(e))}function we(t,e,n){var o=jt(t,{parent:!0}).node;if(t=K(t),!t)throw new st(28);if(t==="."||t==="..")throw new st(20);var v=Je(o,t);if(v)throw new st(v);if(!o.La.hb)throw new st(63);return o.La.hb(o,t,e,n)}function Fr(t,e=438){return we(t,e&4095|32768,0)}function Zt(t,e=511){return we(t,e&1023|16384,0)}function ve(t,e,n){typeof n>"u"&&(n=e,e=438),we(t,e|8192,n)}function Be(t,e){if(!ot(t))throw new st(44);var n=jt(e,{parent:!0}).node;if(!n)throw new st(44);e=K(e);var o=Je(n,e);if(o)throw new st(o);if(!n.La.symlink)throw new st(63);n.La.symlink(n,e,t)}function nr(t){var e=jt(t,{parent:!0}).node;t=K(t);var n=se(e,t),o=tr(e,t,!0);if(o)throw new st(o);if(!e.La.rmdir)throw new st(63);if(n.ab)throw new st(10);e.La.rmdir(e,t),Pe(n)}function ir(t){var e=jt(t,{parent:!0}).node;if(!e)throw new st(44);t=K(t);var n=se(e,t),o=tr(e,t,!1);if(o)throw new st(o);if(!e.La.unlink)throw new st(63);if(n.ab)throw new st(10);e.La.unlink(e,t),Pe(n)}function pe(t,e){return t=jt(t,{$a:!e}).node,ye(t.La.Ta)(t)}function sr(t,e,n,o){Ue(t,e,{mode:n&4095|e.mode&-4096,ctime:Date.now(),Fb:o})}function Ee(t,e){t=typeof t=="string"?jt(t,{$a:!0}).node:t,sr(null,t,e)}function ar(t,e,n){if(Pt(e.mode))throw new st(31);if((e.mode&61440)!==32768)throw new st(28);var o=ce(e,"w");if(o)throw new st(o);Ue(t,e,{size:n,timestamp:Date.now()})}function fe(t,e,n=438){if(t==="")throw new st(44);if(typeof e=="string"){var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(typeof o>"u")throw Error(`Unknown file open mode: ${e}`);e=o}if(n=e&64?n&4095|32768:0,typeof t=="object")o=t;else{var v=t.endsWith("/");t=jt(t,{$a:!(e&131072),Jb:!0}),o=t.node,t=t.path}var P=!1;if(e&64)if(o){if(e&128)throw new st(20)}else{if(v)throw new st(31);o=we(t,n|511,0),P=!0}if(!o)throw new st(44);if((o.mode&61440)===8192&&(e&=-513),e&65536&&!Pt(o.mode))throw new st(54);if(!P&&(v=o?(o.mode&61440)===40960?32:Pt(o.mode)&&(Qe(e)!=="r"||e&576)?31:ce(o,Qe(e)):44))throw new st(v);return e&512&&!P&&(v=o,v=typeof v=="string"?jt(v,{$a:!0}).node:v,ar(null,v,0)),e&=-131713,v=er({node:o,path:De(o),flags:e,seekable:!0,position:0,Ma:o.Ma,Lb:[],error:!1}),v.Ma.open&&v.Ma.open(v),P&&Ee(o,n&511),!s.logReadFiles||e&1||t in ie||(ie[t]=1),v}function Me(t){if(t.fd===null)throw new st(8);t.ob&&(t.ob=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{Kt[t.fd]=null}t.fd=null}function or(t,e,n){if(t.fd===null)throw new st(8);if(!t.seekable||!t.Ma.Va)throw new st(70);if(n!=0&&n!=1&&n!=2)throw new st(28);t.position=t.Ma.Va(t,e,n),t.Lb=[]}function lr(t,e,n,o,v){if(0>o||0>v)throw new st(28);if(t.fd===null)throw new st(8);if((t.flags&2097155)===1)throw new st(8);if(Pt(t.node.mode))throw new st(31);if(!t.Ma.read)throw new st(28);var P=typeof v<"u";if(!P)v=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.read(t,e,n,o,v),P||(t.position+=e),e}function ur(t,e,n,o,v){if(0>o||0>v)throw new st(28);if(t.fd===null)throw new st(8);if(!(t.flags&2097155))throw new st(8);if(Pt(t.node.mode))throw new st(31);if(!t.Ma.write)throw new st(28);t.seekable&&t.flags&1024&&or(t,0,2);var P=typeof v<"u";if(!P)v=t.position;else if(!t.seekable)throw new st(70);return e=t.Ma.write(t,e,n,o,v,void 0),P||(t.position+=e),e}function Br(t){var e,n=fe(t,n||0);t=pe(t).size;var o=new Uint8Array(t);return lr(n,o,0,t,0),e=o,Me(n),e}function Qt(t,e,n){t=I("/dev/"+t);var o=ue(!!e,!!n);Qt.yb??(Qt.yb=64);var v=Qt.yb++<<8|0;Fe(v,{open(P){P.seekable=!1},close(){var P;(P=n==null?void 0:n.buffer)!=null&&P.length&&n(10)},read(P,G,ht,wt){for(var bt=0,Ot=0;Ot<wt;Ot++){try{var Ut=e()}catch{throw new st(29)}if(Ut===void 0&&bt===0)throw new st(6);if(Ut==null)break;bt++,G[ht+Ot]=Ut}return bt&&(P.node.atime=Date.now()),bt},write(P,G,ht,wt){for(var bt=0;bt<wt;bt++)try{n(G[ht+bt])}catch{throw new st(29)}return wt&&(P.node.mtime=P.node.ctime=Date.now()),bt}}),ve(t,o,v)}var At={};function ae(t,e,n){if(e.charAt(0)==="/")return e;if(t=t===-100?"/":zt(t).path,e.length==0){if(!n)throw new st(44);return t}return t+"/"+e}function ke(t,e){O[t>>2]=e.dev,O[t+4>>2]=e.mode,i[t+8>>2]=e.nlink,O[t+12>>2]=e.uid,O[t+16>>2]=e.gid,O[t+20>>2]=e.rdev,lt[t+24>>3]=BigInt(e.size),O[t+32>>2]=4096,O[t+36>>2]=e.blocks;var n=e.atime.getTime(),o=e.mtime.getTime(),v=e.ctime.getTime();return lt[t+40>>3]=BigInt(Math.floor(n/1e3)),i[t+48>>2]=n%1e3*1e6,lt[t+56>>3]=BigInt(Math.floor(o/1e3)),i[t+64>>2]=o%1e3*1e6,lt[t+72>>3]=BigInt(Math.floor(v/1e3)),i[t+80>>2]=v%1e3*1e6,lt[t+88>>3]=BigInt(e.ino),0}var Se=void 0,Te=()=>{var t=O[+Se>>2];return Se+=4,t},je=0,Mr=[0,31,60,91,121,152,182,213,244,274,305,335],jr=[0,31,59,90,120,151,181,212,243,273,304,334],me={},cr=t=>{var e;R=t,Lt||0<je||((e=s.onExit)==null||e.call(s,t),j=!0),h(t,new Nt(t))},qr=t=>{if(!j)try{if(t(),!(Lt||0<je))try{R=t=R,cr(t)}catch(e){e instanceof Nt||e=="unwind"||h(1,e)}}catch(e){e instanceof Nt||e=="unwind"||h(1,e)}},qe={},fr=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},e;for(e in qe)qe[e]===void 0?delete t[e]:t[e]=qe[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);We=n}return We},We,$e=t=>{var e=ft(t)+1,n=te(e);return Et(t,W,n,e),n},Wr=(t,e,n,o)=>{var v={string:bt=>{var Ot=0;return bt!=null&&bt!==0&&(Ot=$e(bt)),Ot},array:bt=>{var Ot=te(bt.length);return q.set(bt,Ot),Ot}};t=s["_"+t];var P=[],G=0;if(o)for(var ht=0;ht<o.length;ht++){var wt=v[n[ht]];wt?(G===0&&(G=be()),P[ht]=wt(o[ht])):P[ht]=o[ht]}return n=t(...P),n=function(bt){return G!==0&&ge(G),e==="string"?bt?F(W,bt):"":e==="boolean"?!!bt:bt}(n)},Ne=0,Ae=(t,e)=>(e=e==1?te(t.length):He(t.length),t.subarray||t.slice||(t=new Uint8Array(t)),W.set(t,e),e),oe,Ge=[],Xt,Jt=t=>{oe.delete(Xt.get(t)),Xt.set(t,null),Ge.push(t)},_e=(t,e)=>{if(!oe){oe=new WeakMap;var n=Xt.length;if(oe)for(var o=0;o<0+n;o++){var v=Xt.get(o);v&&oe.set(v,o)}}if(n=oe.get(t)||0)return n;if(Ge.length)n=Ge.pop();else{try{Xt.grow(1)}catch(wt){throw wt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":wt}n=Xt.length-1}try{Xt.set(n,t)}catch(wt){if(!(wt instanceof TypeError))throw wt;if(typeof WebAssembly.Function=="function"){var P=WebAssembly.Function;o={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},v={parameters:[],results:e[0]=="v"?[]:[o[e[0]]]};for(var G=1;G<e.length;++G)v.parameters.push(o[e[G]]);e=new P(v,t)}else{o=[1],v=e.slice(0,1),e=e.slice(1),G={i:127,p:127,j:126,f:125,d:124,e:111},o.push(96);var ht=e.length;128>ht?o.push(ht):o.push(ht%128|128,ht>>7);for(P of e)o.push(G[P]);v=="v"?o.push(0):o.push(1,G[v]),e=[0,97,115,109,1,0,0,0,1],P=o.length,128>P?e.push(P):e.push(P%128|128,P>>7),e.push(...o),e.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),e=new WebAssembly.Module(new Uint8Array(e)),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}Xt.set(n,e)}return oe.set(t,n),n};Ht=Array(4096),rr(_t,"/"),Zt("/tmp"),Zt("/home"),Zt("/home/web_user"),function(){Zt("/dev"),Fe(259,{read:()=>0,write:(o,v,P,G)=>G,Va:()=>0}),ve("/dev/null",259),Yt(1280,ne),Yt(1536,It),ve("/dev/tty",1280),ve("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,n=()=>(e===0&&(tt(t),e=t.byteLength),t[--e]);Qt("random",n),Qt("urandom",n),Zt("/dev/shm"),Zt("/dev/shm/tmp")}(),function(){Zt("/proc");var t=Zt("/proc/self");Zt("/proc/self/fd"),rr({Xa(){var e=Ve(t,"fd",16895,73);return e.Ma={Va:_t.Ma.Va},e.La={lookup(n,o){n=+o;var v=zt(n);return n={parent:null,Xa:{zb:"fake"},La:{readlink:()=>v.path},id:n+1},n.parent=n},readdir(){return Array.from(Kt.entries()).filter(([,n])=>n).map(([n])=>n.toString())}},e}},"/proc/self/fd")}(),_t.vb=new st(44),_t.vb.stack="<generic error, no stack>";var $r={a:(t,e,n,o)=>z(`Assertion failed: ${t?F(W,t):""}, at: `+[e?e?F(W,e):"":"unknown filename",n,o?o?F(W,o):"":"unknown function"]),i:function(t,e){try{return t=t?F(W,t):"",Ee(t,e),0}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},L:function(t,e,n){try{if(e=e?F(W,e):"",e=ae(t,e),n&-8)return-28;var o=jt(e,{$a:!0}).node;return o?(t="",n&4&&(t+="r"),n&2&&(t+="w"),n&1&&(t+="x"),t&&ce(o,t)?-2:0):-44}catch(v){if(typeof At>"u"||v.name!=="ErrnoError")throw v;return-v.Pa}},j:function(t,e){try{var n=zt(t);return sr(n,n.node,e,!1),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},h:function(t){try{var e=zt(t);return Ue(e,e.node,{timestamp:Date.now(),Fb:!1}),0}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},b:function(t,e,n){Se=n;try{var o=zt(t);switch(e){case 0:var v=Te();if(0>v)break;for(;Kt[v];)v++;return Pr(o,v).fd;case 1:case 2:return 0;case 3:return o.flags;case 4:return v=Te(),o.flags|=v,0;case 12:return v=Te(),w[v+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(P){if(typeof At>"u"||P.name!=="ErrnoError")throw P;return-P.Pa}},g:function(t,e){try{var n=zt(t),o=n.node,v=n.Ma.Ta;t=v?n:o,v??(v=o.La.Ta),ye(v);var P=v(t);return ke(e,P)}catch(G){if(typeof At>"u"||G.name!=="ErrnoError")throw G;return-G.Pa}},H:function(t,e){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var n=zt(t);if(0>e||!(n.flags&2097155))throw new st(28);return ar(n,n.node,e),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},G:function(t,e){try{if(e===0)return-28;var n=ft("/")+1;return e<n?-68:(Et("/",W,t,e),n)}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},K:function(t,e){try{return t=t?F(W,t):"",ke(e,pe(t,!0))}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},C:function(t,e,n){try{return e=e?F(W,e):"",e=ae(t,e),Zt(e,n),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},J:function(t,e,n,o){try{e=e?F(W,e):"";var v=o&256;return e=ae(t,e,o&4096),ke(n,v?pe(e,!0):pe(e))}catch(P){if(typeof At>"u"||P.name!=="ErrnoError")throw P;return-P.Pa}},x:function(t,e,n,o){Se=o;try{e=e?F(W,e):"",e=ae(t,e);var v=o?Te():0;return fe(e,n,v).fd}catch(P){if(typeof At>"u"||P.name!=="ErrnoError")throw P;return-P.Pa}},v:function(t,e,n,o){try{if(e=e?F(W,e):"",e=ae(t,e),0>=o)return-28;var v=jt(e).node;if(!v)throw new st(44);if(!v.La.readlink)throw new st(28);var P=v.La.readlink(v),G=Math.min(o,ft(P)),ht=q[n+G];return Et(P,W,n,o+1),q[n+G]=ht,G}catch(wt){if(typeof At>"u"||wt.name!=="ErrnoError")throw wt;return-wt.Pa}},u:function(t){try{return t=t?F(W,t):"",nr(t),0}catch(e){if(typeof At>"u"||e.name!=="ErrnoError")throw e;return-e.Pa}},f:function(t,e){try{return t=t?F(W,t):"",ke(e,pe(t))}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},r:function(t,e,n){try{return e=e?F(W,e):"",e=ae(t,e),n===0?ir(e):n===512?nr(e):z("Invalid flags passed to unlinkat"),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},q:function(t,e,n){try{e=e?F(W,e):"",e=ae(t,e,!0);var o=Date.now(),v,P;if(n){var G=i[n>>2]+4294967296*O[n+4>>2],ht=O[n+8>>2];ht==1073741823?v=o:ht==1073741822?v=null:v=1e3*G+ht/1e6,n+=16,G=i[n>>2]+4294967296*O[n+4>>2],ht=O[n+8>>2],ht==1073741823?P=o:ht==1073741822?P=null:P=1e3*G+ht/1e6}else P=v=o;if((P??v)!==null){t=v;var wt=jt(e,{$a:!0}).node;ye(wt.La.Ua)(wt,{atime:t,mtime:P})}return 0}catch(bt){if(typeof At>"u"||bt.name!=="ErrnoError")throw bt;return-bt.Pa}},m:()=>z(""),l:()=>{Lt=!1,je=0},A:function(t,e){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t),t=new Date(1e3*t),O[e>>2]=t.getSeconds(),O[e+4>>2]=t.getMinutes(),O[e+8>>2]=t.getHours(),O[e+12>>2]=t.getDate(),O[e+16>>2]=t.getMonth(),O[e+20>>2]=t.getFullYear()-1900,O[e+24>>2]=t.getDay();var n=t.getFullYear();O[e+28>>2]=(n%4!==0||n%100===0&&n%400!==0?jr:Mr)[t.getMonth()]+t.getDate()-1|0,O[e+36>>2]=-(60*t.getTimezoneOffset()),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var o=new Date(t.getFullYear(),0,1).getTimezoneOffset();O[e+32>>2]=(n!=o&&t.getTimezoneOffset()==Math.min(o,n))|0},y:function(t,e,n,o,v,P,G){v=-9007199254740992>v||9007199254740992<v?NaN:Number(v);try{if(isNaN(v))return 61;var ht=zt(o);if(e&2&&!(n&2)&&(ht.flags&2097155)!==2)throw new st(2);if((ht.flags&2097155)===1)throw new st(2);if(!ht.Ma.ib)throw new st(43);if(!t)throw new st(28);var wt=ht.Ma.ib(ht,t,v,e,n),bt=wt.Kb;return O[P>>2]=wt.Ab,i[G>>2]=bt,0}catch(Ot){if(typeof At>"u"||Ot.name!=="ErrnoError")throw Ot;return-Ot.Pa}},z:function(t,e,n,o,v,P){P=-9007199254740992>P||9007199254740992<P?NaN:Number(P);try{var G=zt(v);if(n&2){if(n=P,(G.node.mode&61440)!==32768)throw new st(43);if(!(o&2)){var ht=W.slice(t,t+e);G.Ma.jb&&G.Ma.jb(G,ht,n,e,o)}}}catch(wt){if(typeof At>"u"||wt.name!=="ErrnoError")throw wt;return-wt.Pa}},n:(t,e)=>{if(me[t]&&(clearTimeout(me[t].id),delete me[t]),!e)return 0;var n=setTimeout(()=>{delete me[t],qr(()=>dr(t,performance.now()))},e);return me[t]={id:n,Xb:e},0},B:(t,e,n,o)=>{var v=new Date().getFullYear(),P=new Date(v,0,1).getTimezoneOffset();v=new Date(v,6,1).getTimezoneOffset(),i[t>>2]=60*Math.max(P,v),O[e>>2]=+(P!=v),e=G=>{var ht=Math.abs(G);return`UTC${0<=G?"-":"+"}${String(Math.floor(ht/60)).padStart(2,"0")}${String(ht%60).padStart(2,"0")}`},t=e(P),e=e(v),v<P?(Et(t,W,n,17),Et(e,W,o,17)):(Et(t,W,o,17),Et(e,W,n,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:t=>{var e=W.length;if(t>>>=0,2147483648<t)return!1;for(var n=1;4>=n;n*=2){var o=e*(1+.2/n);o=Math.min(o,t+100663296);t:{o=(Math.min(2147483648,65536*Math.ceil(Math.max(t,o)/65536))-D.buffer.byteLength+65535)/65536|0;try{D.grow(o),Q();var v=1;break t}catch{}v=void 0}if(v)return!0}return!1},E:(t,e)=>{var n=0;return fr().forEach((o,v)=>{var P=e+n;for(v=i[t+4*v>>2]=P,P=0;P<o.length;++P)q[v++]=o.charCodeAt(P);q[v]=0,n+=o.length+1}),0},F:(t,e)=>{var n=fr();i[t>>2]=n.length;var o=0;return n.forEach(v=>o+=v.length+1),i[e>>2]=o,0},e:function(t){try{var e=zt(t);return Me(e),0}catch(n){if(typeof At>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},p:function(t,e){try{var n=zt(t);return q[e]=n.tty?2:Pt(n.mode)?3:(n.mode&61440)===40960?7:4,w[e+2>>1]=0,lt[e+8>>3]=BigInt(0),lt[e+16>>3]=BigInt(0),0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return o.Pa}},w:function(t,e,n,o){try{t:{var v=zt(t);t=e;for(var P,G=e=0;G<n;G++){var ht=i[t>>2],wt=i[t+4>>2];t+=8;var bt=lr(v,q,ht,wt,P);if(0>bt){var Ot=-1;break t}if(e+=bt,bt<wt)break;typeof P<"u"&&(P+=bt)}Ot=e}return i[o>>2]=Ot,0}catch(Ut){if(typeof At>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Pa}},D:function(t,e,n,o){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e);try{if(isNaN(e))return 61;var v=zt(t);return or(v,e,n),lt[o>>3]=BigInt(v.position),v.ob&&e===0&&n===0&&(v.ob=null),0}catch(P){if(typeof At>"u"||P.name!=="ErrnoError")throw P;return P.Pa}},I:function(t){var n;try{var e=zt(t);return(n=e.Ma)!=null&&n.fsync?e.Ma.fsync(e):0}catch(o){if(typeof At>"u"||o.name!=="ErrnoError")throw o;return o.Pa}},t:function(t,e,n,o){try{t:{var v=zt(t);t=e;for(var P,G=e=0;G<n;G++){var ht=i[t>>2],wt=i[t+4>>2];t+=8;var bt=ur(v,q,ht,wt,P);if(0>bt){var Ot=-1;break t}if(e+=bt,bt<wt)break;typeof P<"u"&&(P+=bt)}Ot=e}return i[o>>2]=Ot,0}catch(Ut){if(typeof At>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Pa}},k:cr},dt;(async function(){var n;function t(o){var v;return dt=o.exports,D=dt.M,Q(),Xt=dt.O,at--,(v=s.monitorRunDependencies)==null||v.call(s,at),at==0&&U&&(o=U,U=null,o()),dt}at++,(n=s.monitorRunDependencies)==null||n.call(s,at);var e={a:$r};return s.instantiateWasm?new Promise(o=>{s.instantiateWasm(e,(v,P)=>{t(v),o(v.exports)})}):(ut??(ut=s.locateFile?s.locateFile("sql-wasm.wasm",_):_+"sql-wasm.wasm"),t((await Tt(e)).instance))})(),s._sqlite3_free=t=>(s._sqlite3_free=dt.P)(t),s._sqlite3_value_text=t=>(s._sqlite3_value_text=dt.Q)(t),s._sqlite3_prepare_v2=(t,e,n,o,v)=>(s._sqlite3_prepare_v2=dt.R)(t,e,n,o,v),s._sqlite3_step=t=>(s._sqlite3_step=dt.S)(t),s._sqlite3_reset=t=>(s._sqlite3_reset=dt.T)(t),s._sqlite3_exec=(t,e,n,o,v)=>(s._sqlite3_exec=dt.U)(t,e,n,o,v),s._sqlite3_finalize=t=>(s._sqlite3_finalize=dt.V)(t),s._sqlite3_column_name=(t,e)=>(s._sqlite3_column_name=dt.W)(t,e),s._sqlite3_column_text=(t,e)=>(s._sqlite3_column_text=dt.X)(t,e),s._sqlite3_column_type=(t,e)=>(s._sqlite3_column_type=dt.Y)(t,e),s._sqlite3_errmsg=t=>(s._sqlite3_errmsg=dt.Z)(t),s._sqlite3_clear_bindings=t=>(s._sqlite3_clear_bindings=dt._)(t),s._sqlite3_value_blob=t=>(s._sqlite3_value_blob=dt.$)(t),s._sqlite3_value_bytes=t=>(s._sqlite3_value_bytes=dt.aa)(t),s._sqlite3_value_double=t=>(s._sqlite3_value_double=dt.ba)(t),s._sqlite3_value_int=t=>(s._sqlite3_value_int=dt.ca)(t),s._sqlite3_value_type=t=>(s._sqlite3_value_type=dt.da)(t),s._sqlite3_result_blob=(t,e,n,o)=>(s._sqlite3_result_blob=dt.ea)(t,e,n,o),s._sqlite3_result_double=(t,e)=>(s._sqlite3_result_double=dt.fa)(t,e),s._sqlite3_result_error=(t,e,n)=>(s._sqlite3_result_error=dt.ga)(t,e,n),s._sqlite3_result_int=(t,e)=>(s._sqlite3_result_int=dt.ha)(t,e),s._sqlite3_result_int64=(t,e)=>(s._sqlite3_result_int64=dt.ia)(t,e),s._sqlite3_result_null=t=>(s._sqlite3_result_null=dt.ja)(t),s._sqlite3_result_text=(t,e,n,o)=>(s._sqlite3_result_text=dt.ka)(t,e,n,o),s._sqlite3_aggregate_context=(t,e)=>(s._sqlite3_aggregate_context=dt.la)(t,e),s._sqlite3_column_count=t=>(s._sqlite3_column_count=dt.ma)(t),s._sqlite3_data_count=t=>(s._sqlite3_data_count=dt.na)(t),s._sqlite3_column_blob=(t,e)=>(s._sqlite3_column_blob=dt.oa)(t,e),s._sqlite3_column_bytes=(t,e)=>(s._sqlite3_column_bytes=dt.pa)(t,e),s._sqlite3_column_double=(t,e)=>(s._sqlite3_column_double=dt.qa)(t,e),s._sqlite3_bind_blob=(t,e,n,o,v)=>(s._sqlite3_bind_blob=dt.ra)(t,e,n,o,v),s._sqlite3_bind_double=(t,e,n)=>(s._sqlite3_bind_double=dt.sa)(t,e,n),s._sqlite3_bind_int=(t,e,n)=>(s._sqlite3_bind_int=dt.ta)(t,e,n),s._sqlite3_bind_text=(t,e,n,o,v)=>(s._sqlite3_bind_text=dt.ua)(t,e,n,o,v),s._sqlite3_bind_parameter_index=(t,e)=>(s._sqlite3_bind_parameter_index=dt.va)(t,e),s._sqlite3_sql=t=>(s._sqlite3_sql=dt.wa)(t),s._sqlite3_normalized_sql=t=>(s._sqlite3_normalized_sql=dt.xa)(t),s._sqlite3_changes=t=>(s._sqlite3_changes=dt.ya)(t),s._sqlite3_close_v2=t=>(s._sqlite3_close_v2=dt.za)(t),s._sqlite3_create_function_v2=(t,e,n,o,v,P,G,ht,wt)=>(s._sqlite3_create_function_v2=dt.Aa)(t,e,n,o,v,P,G,ht,wt),s._sqlite3_update_hook=(t,e,n)=>(s._sqlite3_update_hook=dt.Ba)(t,e,n),s._sqlite3_open=(t,e)=>(s._sqlite3_open=dt.Ca)(t,e);var He=s._malloc=t=>(He=s._malloc=dt.Da)(t),Re=s._free=t=>(Re=s._free=dt.Ea)(t);s._RegisterExtensionFunctions=t=>(s._RegisterExtensionFunctions=dt.Fa)(t);var hr=(t,e)=>(hr=dt.Ga)(t,e),dr=(t,e)=>(dr=dt.Ha)(t,e),ge=t=>(ge=dt.Ia)(t),te=t=>(te=dt.Ja)(t),be=()=>(be=dt.Ka)();s.stackSave=()=>be(),s.stackRestore=t=>ge(t),s.stackAlloc=t=>te(t),s.cwrap=(t,e,n,o)=>{var v=!n||n.every(P=>P==="number"||P==="boolean");return e!=="string"&&v&&!o?s["_"+t]:(...P)=>Wr(t,e,n,P)},s.addFunction=_e,s.removeFunction=Jt,s.UTF8ToString=b,s.ALLOC_NORMAL=Ne,s.allocate=Ae,s.allocateUTF8OnStack=$e;function Ze(){function t(){var v;if(s.calledRun=!0,!j){if(!s.noFSInit&&!de){var e,n;de=!0,o??(o=s.stdin),e??(e=s.stdout),n??(n=s.stderr),o?Qt("stdin",o):Be("/dev/tty","/dev/stdin"),e?Qt("stdout",null,e):Be("/dev/tty","/dev/stdout"),n?Qt("stderr",null,n):Be("/dev/tty1","/dev/stderr"),fe("/dev/stdin",0),fe("/dev/stdout",1),fe("/dev/stderr",1)}if(dt.N(),Vt=!1,(v=s.onRuntimeInitialized)==null||v.call(s),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var o=s.postRun.shift();kt.unshift(o)}yt(kt)}}if(0<at)U=Ze;else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)xt();yt(Rt),0<at?U=Ze:s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),t()},1)):t()}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return Ze(),a}),p)};V.exports=L,V.exports.default=L})(Rr);var Sn=Rr.exports;const Sr=Ar(Sn),Tn="/npconv/assets/sql-wasm-C1U8OeUW.wasm";async function Nn(){try{return await Sr({locateFile:()=>String(Tn)})}catch{try{return await Sr()}catch(V){throw rt("Failed to initialize sql.js: "+(V.message||V.toString()),"err"),V}}}function An(V){rt("Generating NewPipe Schema (excluding sqlite_sequence)...","schema");const nt=["PRAGMA foreign_keys = ON","CREATE TABLE IF NOT EXISTS android_metadata (locale TEXT)","CREATE TABLE IF NOT EXISTS subscriptions (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT, name TEXT, avatar_url TEXT, subscriber_count INTEGER, description TEXT, notification_mode INTEGER NOT NULL)","CREATE UNIQUE INDEX IF NOT EXISTS index_subscriptions_service_id_url ON subscriptions (service_id, url)","CREATE TABLE IF NOT EXISTS search_history (creation_date INTEGER, service_id INTEGER NOT NULL, search TEXT, id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL)","CREATE INDEX IF NOT EXISTS index_search_history_search ON search_history (search)","CREATE TABLE IF NOT EXISTS streams (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, url TEXT NOT NULL, title TEXT NOT NULL, stream_type TEXT NOT NULL, duration INTEGER NOT NULL, uploader TEXT NOT NULL, uploader_url TEXT, thumbnail_url TEXT, view_count INTEGER, textual_upload_date TEXT, upload_date INTEGER, is_upload_date_approximation INTEGER)","CREATE UNIQUE INDEX IF NOT EXISTS index_streams_service_id_url ON streams (service_id, url)","CREATE TABLE IF NOT EXISTS stream_history (stream_id INTEGER NOT NULL, access_date INTEGER NOT NULL, repeat_count INTEGER NOT NULL, PRIMARY KEY(stream_id, access_date), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS stream_state (progress_time INTEGER NOT NULL, stream_id INTEGER NOT NULL, PRIMARY KEY(stream_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE TABLE IF NOT EXISTS playlist_stream_join (playlist_id INTEGER NOT NULL, stream_id INTEGER NOT NULL, join_index INTEGER NOT NULL, PRIMARY KEY(playlist_id, join_index), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(playlist_id) REFERENCES playlists(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_playlist_stream_join_stream_id ON playlist_stream_join (stream_id)","CREATE UNIQUE INDEX IF NOT EXISTS index_playlist_stream_join_playlist_id_join_index ON playlist_stream_join (playlist_id, join_index)","CREATE TABLE IF NOT EXISTS playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT, is_thumbnail_permanent INTEGER NOT NULL, thumbnail_stream_id INTEGER NOT NULL, display_index INTEGER NOT NULL)","CREATE TABLE IF NOT EXISTS remote_playlists (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, service_id INTEGER NOT NULL, name TEXT, url TEXT, thumbnail_url TEXT, uploader TEXT, display_index INTEGER NOT NULL, stream_count INTEGER)","CREATE TABLE IF NOT EXISTS feed (stream_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(stream_id, subscription_id), FOREIGN KEY(stream_id) REFERENCES streams(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_subscription_id ON feed (subscription_id)","CREATE TABLE IF NOT EXISTS feed_group_subscription_join (group_id INTEGER NOT NULL, subscription_id INTEGER NOT NULL, PRIMARY KEY(group_id, subscription_id), FOREIGN KEY(group_id) REFERENCES feed_group(uid) ON UPDATE CASCADE ON DELETE CASCADE, FOREIGN KEY(subscription_id) REFERENCES subscriptions(uid) ON UPDATE CASCADE ON DELETE CASCADE)","CREATE INDEX IF NOT EXISTS index_feed_group_subscription_join_subscription_id ON feed_group_subscription_join (subscription_id)","CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER, identity_hash TEXT)","CREATE TABLE IF NOT EXISTS feed_group (uid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, name TEXT NOT NULL, icon_id INTEGER NOT NULL, sort_order INTEGER NOT NULL)","CREATE INDEX IF NOT EXISTS index_feed_group_sort_order ON feed_group (sort_order)","INSERT OR IGNORE INTO android_metadata VALUES ('en_US')"];V.run("BEGIN TRANSACTION");try{for(const p of nt)V.run(p);V.run("COMMIT"),rt("Schema created.","schema")}catch(p){try{V.run("ROLLBACK")}catch{}throw rt("Failed to create schema: "+(p.message||p.toString()),"err"),p}}function Rn(V){try{const nt=V.exec("PRAGMA foreign_key_list('stream_state')"),p=V.exec("PRAGMA table_info('stream_state')");let L=!1;nt&&nt.length>0&&nt[0].values&&nt[0].values.length>0&&(L=!0);let k=!1;if(p&&p.length>0&&p[0].values.length>=2){const l=p[0].values,f=l.map(m=>m[1]),a=l.map(m=>m[5]);f[0]==="progress_time"&&f[1]==="stream_id"&&a[0]===0&&a[1]===1&&(k=!0)}if(!L||!k){rt("Patching stream_state schema to Room-compatible definition...","schema"),V.run("BEGIN TRANSACTION");const l=V.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='stream_state'");if(l&&l.length>0&&l[0].values.length>0){V.run("ALTER TABLE stream_state RENAME TO stream_state_old"),V.run("CREATE TABLE `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");try{V.run("INSERT INTO stream_state (progress_time, stream_id) SELECT progress_time, stream_id FROM stream_state_old")}catch(f){rt("Note: could not copy old stream_state rows: "+(f.message||f.toString()),"warn")}V.run("DROP TABLE stream_state_old")}else V.run("CREATE TABLE IF NOT EXISTS `stream_state` (`progress_time` INTEGER NOT NULL, `stream_id` INTEGER NOT NULL, PRIMARY KEY(`stream_id`), FOREIGN KEY(`stream_id`) REFERENCES `streams`(`uid`) ON UPDATE CASCADE ON DELETE CASCADE)");V.run("COMMIT"),rt("stream_state schema patched.","schema")}else rt("stream_state schema OK.","schema")}catch(nt){rt("Failed to ensure stream_state schema: "+(nt.message||nt.toString()),"err")}}const Wt=0,xn={content_country:"US",content_language:"en",theme:"DARK"};function xr(){const V=new Date,nt=p=>String(p).padStart(2,"0");return`${V.getFullYear()}-${nt(V.getMonth()+1)}-${nt(V.getDate())}-${nt(V.getHours())}-${nt(V.getMinutes())}-${nt(V.getSeconds())}`}function Ir(V,nt,p=null){let L=nt;p&&(nt.endsWith(".zip")?L=nt.replace(".zip",`-${p}.zip`):nt.endsWith(".json")&&(L=nt.replace(".json",`-${p}.json`)));const k=URL.createObjectURL(V),l=document.createElement("a");l.href=k,l.download=L,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(k)}function Oe(V){throw new Error('Could not dynamically require "'+V+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Or={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(V,nt){(function(p){V.exports=p()})(function(){return function p(L,k,l){function f(s,A){if(!k[s]){if(!L[s]){var S=typeof Oe=="function"&&Oe;if(!A&&S)return S(s,!0);if(a)return a(s,!0);var N=new Error("Cannot find module '"+s+"'");throw N.code="MODULE_NOT_FOUND",N}var c=k[s]={exports:{}};L[s][0].call(c.exports,function(y){var h=L[s][1][y];return f(h||y)},c,c.exports,p,L,k,l)}return k[s].exports}for(var a=typeof Oe=="function"&&Oe,m=0;m<l.length;m++)f(l[m]);return f}({1:[function(p,L,k){var l=p("./utils"),f=p("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";k.encode=function(m){for(var s,A,S,N,c,y,h,_=[],u=0,g=m.length,E=g,x=l.getTypeOf(m)!=="string";u<m.length;)E=g-u,S=x?(s=m[u++],A=u<g?m[u++]:0,u<g?m[u++]:0):(s=m.charCodeAt(u++),A=u<g?m.charCodeAt(u++):0,u<g?m.charCodeAt(u++):0),N=s>>2,c=(3&s)<<4|A>>4,y=1<E?(15&A)<<2|S>>6:64,h=2<E?63&S:64,_.push(a.charAt(N)+a.charAt(c)+a.charAt(y)+a.charAt(h));return _.join("")},k.decode=function(m){var s,A,S,N,c,y,h=0,_=0,u="data:";if(m.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var g,E=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===a.charAt(64)&&E--,m.charAt(m.length-2)===a.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=f.uint8array?new Uint8Array(0|E):new Array(0|E);h<m.length;)s=a.indexOf(m.charAt(h++))<<2|(N=a.indexOf(m.charAt(h++)))>>4,A=(15&N)<<4|(c=a.indexOf(m.charAt(h++)))>>2,S=(3&c)<<6|(y=a.indexOf(m.charAt(h++))),g[_++]=s,c!==64&&(g[_++]=A),y!==64&&(g[_++]=S);return g}},{"./support":30,"./utils":32}],2:[function(p,L,k){var l=p("./external"),f=p("./stream/DataWorker"),a=p("./stream/Crc32Probe"),m=p("./stream/DataLengthProbe");function s(A,S,N,c,y){this.compressedSize=A,this.uncompressedSize=S,this.crc32=N,this.compression=c,this.compressedContent=y}s.prototype={getContentWorker:function(){var A=new f(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),S=this;return A.on("end",function(){if(this.streamInfo.data_length!==S.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),A},getCompressedWorker:function(){return new f(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(A,S,N){return A.pipe(new a).pipe(new m("uncompressedSize")).pipe(S.compressWorker(N)).pipe(new m("compressedSize")).withStreamInfo("compression",S)},L.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(p,L,k){var l=p("./stream/GenericWorker");k.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},k.DEFLATE=p("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(p,L,k){var l=p("./utils"),f=function(){for(var a,m=[],s=0;s<256;s++){a=s;for(var A=0;A<8;A++)a=1&a?3988292384^a>>>1:a>>>1;m[s]=a}return m}();L.exports=function(a,m){return a!==void 0&&a.length?l.getTypeOf(a)!=="string"?function(s,A,S,N){var c=f,y=N+S;s^=-1;for(var h=N;h<y;h++)s=s>>>8^c[255&(s^A[h])];return-1^s}(0|m,a,a.length,0):function(s,A,S,N){var c=f,y=N+S;s^=-1;for(var h=N;h<y;h++)s=s>>>8^c[255&(s^A.charCodeAt(h))];return-1^s}(0|m,a,a.length,0):0}},{"./utils":32}],5:[function(p,L,k){k.base64=!1,k.binary=!1,k.dir=!1,k.createFolders=!0,k.date=null,k.compression=null,k.compressionOptions=null,k.comment=null,k.unixPermissions=null,k.dosPermissions=null},{}],6:[function(p,L,k){var l=null;l=typeof Promise<"u"?Promise:p("lie"),L.exports={Promise:l}},{lie:37}],7:[function(p,L,k){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",f=p("pako"),a=p("./utils"),m=p("./stream/GenericWorker"),s=l?"uint8array":"array";function A(S,N){m.call(this,"FlateWorker/"+S),this._pako=null,this._pakoAction=S,this._pakoOptions=N,this.meta={}}k.magic="\b\0",a.inherits(A,m),A.prototype.processChunk=function(S){this.meta=S.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(s,S.data),!1)},A.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var S=this;this._pako.onData=function(N){S.push({data:N,meta:S.meta})}},k.compressWorker=function(S){return new A("Deflate",S)},k.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(p,L,k){function l(c,y){var h,_="";for(h=0;h<y;h++)_+=String.fromCharCode(255&c),c>>>=8;return _}function f(c,y,h,_,u,g){var E,x,T=c.file,M=c.compression,D=g!==s.utf8encode,j=a.transformTo("string",g(T.name)),R=a.transformTo("string",s.utf8encode(T.name)),q=T.comment,W=a.transformTo("string",g(q)),w=a.transformTo("string",s.utf8encode(q)),O=R.length!==T.name.length,i=w.length!==q.length,$="",lt="",Y="",pt=T.dir,Q=T.date,at={crc32:0,compressedSize:0,uncompressedSize:0};y&&!h||(at.crc32=c.crc32,at.compressedSize=c.compressedSize,at.uncompressedSize=c.uncompressedSize);var U=0;y&&(U|=8),D||!O&&!i||(U|=2048);var z=0,ut=0;pt&&(z|=16),u==="UNIX"?(ut=798,z|=function(J,Tt){var Nt=J;return J||(Nt=Tt?16893:33204),(65535&Nt)<<16}(T.unixPermissions,pt)):(ut=20,z|=function(J){return 63&(J||0)}(T.dosPermissions)),E=Q.getUTCHours(),E<<=6,E|=Q.getUTCMinutes(),E<<=5,E|=Q.getUTCSeconds()/2,x=Q.getUTCFullYear()-1980,x<<=4,x|=Q.getUTCMonth()+1,x<<=5,x|=Q.getUTCDate(),O&&(lt=l(1,1)+l(A(j),4)+R,$+="up"+l(lt.length,2)+lt),i&&(Y=l(1,1)+l(A(W),4)+w,$+="uc"+l(Y.length,2)+Y);var it="";return it+=`
\0`,it+=l(U,2),it+=M.magic,it+=l(E,2),it+=l(x,2),it+=l(at.crc32,4),it+=l(at.compressedSize,4),it+=l(at.uncompressedSize,4),it+=l(j.length,2),it+=l($.length,2),{fileRecord:S.LOCAL_FILE_HEADER+it+j+$,dirRecord:S.CENTRAL_FILE_HEADER+l(ut,2)+it+l(W.length,2)+"\0\0\0\0"+l(z,4)+l(_,4)+j+$+W}}var a=p("../utils"),m=p("../stream/GenericWorker"),s=p("../utf8"),A=p("../crc32"),S=p("../signature");function N(c,y,h,_){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=h,this.encodeFileName=_,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(N,m),N.prototype.push=function(c){var y=c.meta.percent||0,h=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,m.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:h?(y+100*(h-_-1))/h:100}}))},N.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var y=this.streamFiles&&!c.file.dir;if(y){var h=f(c,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},N.prototype.closedSource=function(c){this.accumulate=!1;var y=this.streamFiles&&!c.file.dir,h=f(c,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),y)this.push({data:function(_){return S.DATA_DESCRIPTOR+l(_.crc32,4)+l(_.compressedSize,4)+l(_.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},N.prototype.flush=function(){for(var c=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var h=this.bytesWritten-c,_=function(u,g,E,x,T){var M=a.transformTo("string",T(x));return S.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(u,2)+l(u,2)+l(g,4)+l(E,4)+l(M.length,2)+M}(this.dirRecords.length,h,c,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},N.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},N.prototype.registerPrevious=function(c){this._sources.push(c);var y=this;return c.on("data",function(h){y.processChunk(h)}),c.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),c.on("error",function(h){y.error(h)}),this},N.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},N.prototype.error=function(c){var y=this._sources;if(!m.prototype.error.call(this,c))return!1;for(var h=0;h<y.length;h++)try{y[h].error(c)}catch{}return!0},N.prototype.lock=function(){m.prototype.lock.call(this);for(var c=this._sources,y=0;y<c.length;y++)c[y].lock()},L.exports=N},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(p,L,k){var l=p("../compressions"),f=p("./ZipFileWorker");k.generateWorker=function(a,m,s){var A=new f(m.streamFiles,s,m.platform,m.encodeFileName),S=0;try{a.forEach(function(N,c){S++;var y=function(g,E){var x=g||E,T=l[x];if(!T)throw new Error(x+" is not a valid compression method !");return T}(c.options.compression,m.compression),h=c.options.compressionOptions||m.compressionOptions||{},_=c.dir,u=c.date;c._compressWorker(y,h).withStreamInfo("file",{name:N,dir:_,date:u,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(A)}),A.entriesCount=S}catch(N){A.error(N)}return A}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(p,L,k){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new l;for(var a in this)typeof this[a]!="function"&&(f[a]=this[a]);return f}}(l.prototype=p("./object")).loadAsync=p("./load"),l.support=p("./support"),l.defaults=p("./defaults"),l.version="3.10.1",l.loadAsync=function(f,a){return new l().loadAsync(f,a)},l.external=p("./external"),L.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(p,L,k){var l=p("./utils"),f=p("./external"),a=p("./utf8"),m=p("./zipEntries"),s=p("./stream/Crc32Probe"),A=p("./nodejsUtils");function S(N){return new f.Promise(function(c,y){var h=N.decompressed.getContentWorker().pipe(new s);h.on("error",function(_){y(_)}).on("end",function(){h.streamInfo.crc32!==N.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}L.exports=function(N,c){var y=this;return c=l.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),A.isNode&&A.isStream(N)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",N,!0,c.optimizedBinaryString,c.base64).then(function(h){var _=new m(c);return _.load(h),_}).then(function(h){var _=[f.Promise.resolve(h)],u=h.files;if(c.checkCRC32)for(var g=0;g<u.length;g++)_.push(S(u[g]));return f.Promise.all(_)}).then(function(h){for(var _=h.shift(),u=_.files,g=0;g<u.length;g++){var E=u[g],x=E.fileNameStr,T=l.resolve(E.fileNameStr);y.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:c.createFolders}),E.dir||(y.file(T).unsafeOriginalName=x)}return _.zipComment.length&&(y.comment=_.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(p,L,k){var l=p("../utils"),f=p("../stream/GenericWorker");function a(m,s){f.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(s)}l.inherits(a,f),a.prototype._bindStream=function(m){var s=this;(this._stream=m).pause(),m.on("data",function(A){s.push({data:A,meta:{percent:0}})}).on("error",function(A){s.isPaused?this.generatedError=A:s.error(A)}).on("end",function(){s.isPaused?s._upstreamEnded=!0:s.end()})},a.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},L.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(p,L,k){var l=p("readable-stream").Readable;function f(a,m,s){l.call(this,m),this._helper=a;var A=this;a.on("data",function(S,N){A.push(S)||A._helper.pause(),s&&s(N)}).on("error",function(S){A.emit("error",S)}).on("end",function(){A.push(null)})}p("../utils").inherits(f,l),f.prototype._read=function(){this._helper.resume()},L.exports=f},{"../utils":32,"readable-stream":16}],14:[function(p,L,k){L.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,f);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,f)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var f=new Buffer(l);return f.fill(0),f},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(p,L,k){function l(T,M,D){var j,R=a.getTypeOf(M),q=a.extend(D||{},A);q.date=q.date||new Date,q.compression!==null&&(q.compression=q.compression.toUpperCase()),typeof q.unixPermissions=="string"&&(q.unixPermissions=parseInt(q.unixPermissions,8)),q.unixPermissions&&16384&q.unixPermissions&&(q.dir=!0),q.dosPermissions&&16&q.dosPermissions&&(q.dir=!0),q.dir&&(T=u(T)),q.createFolders&&(j=_(T))&&g.call(this,j,!0);var W=R==="string"&&q.binary===!1&&q.base64===!1;D&&D.binary!==void 0||(q.binary=!W),(M instanceof S&&M.uncompressedSize===0||q.dir||!M||M.length===0)&&(q.base64=!1,q.binary=!0,M="",q.compression="STORE",R="string");var w=null;w=M instanceof S||M instanceof m?M:y.isNode&&y.isStream(M)?new h(T,M):a.prepareContent(T,M,q.binary,q.optimizedBinaryString,q.base64);var O=new N(T,w,q);this.files[T]=O}var f=p("./utf8"),a=p("./utils"),m=p("./stream/GenericWorker"),s=p("./stream/StreamHelper"),A=p("./defaults"),S=p("./compressedObject"),N=p("./zipObject"),c=p("./generate"),y=p("./nodejsUtils"),h=p("./nodejs/NodejsStreamInputAdapter"),_=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var M=T.lastIndexOf("/");return 0<M?T.substring(0,M):""},u=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},g=function(T,M){return M=M!==void 0?M:A.createFolders,T=u(T),this.files[T]||l.call(this,T,null,{dir:!0,createFolders:M}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var M,D,j;for(M in this.files)j=this.files[M],(D=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&T(D,j)},filter:function(T){var M=[];return this.forEach(function(D,j){T(D,j)&&M.push(j)}),M},file:function(T,M,D){if(arguments.length!==1)return T=this.root+T,l.call(this,T,M,D),this;if(E(T)){var j=T;return this.filter(function(q,W){return!W.dir&&j.test(q)})}var R=this.files[this.root+T];return R&&!R.dir?R:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(R,q){return q.dir&&T.test(R)});var M=this.root+T,D=g.call(this,M),j=this.clone();return j.root=D.name,j},remove:function(T){T=this.root+T;var M=this.files[T];if(M||(T.slice(-1)!=="/"&&(T+="/"),M=this.files[T]),M&&!M.dir)delete this.files[T];else for(var D=this.filter(function(R,q){return q.name.slice(0,T.length)===T}),j=0;j<D.length;j++)delete this.files[D[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var M,D={};try{if((D=a.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");a.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var j=D.comment||this.comment||"";M=c.generateWorker(this,D,j)}catch(R){(M=new m("error")).error(R)}return new s(M,D.type||"string",D.mimeType)},generateAsync:function(T,M){return this.generateInternalStream(T).accumulate(M)},generateNodeStream:function(T,M){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(M)}};L.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(p,L,k){L.exports=p("stream")},{stream:void 0}],17:[function(p,L,k){var l=p("./DataReader");function f(a){l.call(this,a);for(var m=0;m<this.data.length;m++)a[m]=255&a[m]}p("../utils").inherits(f,l),f.prototype.byteAt=function(a){return this.data[this.zero+a]},f.prototype.lastIndexOfSignature=function(a){for(var m=a.charCodeAt(0),s=a.charCodeAt(1),A=a.charCodeAt(2),S=a.charCodeAt(3),N=this.length-4;0<=N;--N)if(this.data[N]===m&&this.data[N+1]===s&&this.data[N+2]===A&&this.data[N+3]===S)return N-this.zero;return-1},f.prototype.readAndCheckSignature=function(a){var m=a.charCodeAt(0),s=a.charCodeAt(1),A=a.charCodeAt(2),S=a.charCodeAt(3),N=this.readData(4);return m===N[0]&&s===N[1]&&A===N[2]&&S===N[3]},f.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,m},L.exports=f},{"../utils":32,"./DataReader":18}],18:[function(p,L,k){var l=p("../utils");function f(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var m,s=0;for(this.checkOffset(a),m=this.index+a-1;m>=this.index;m--)s=(s<<8)+this.byteAt(m);return this.index+=a,s},readString:function(a){return l.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},L.exports=f},{"../utils":32}],19:[function(p,L,k){var l=p("./Uint8ArrayReader");function f(a){l.call(this,a)}p("../utils").inherits(f,l),f.prototype.readData=function(a){this.checkOffset(a);var m=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,m},L.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(p,L,k){var l=p("./DataReader");function f(a){l.call(this,a)}p("../utils").inherits(f,l),f.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},f.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},f.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},f.prototype.readData=function(a){this.checkOffset(a);var m=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,m},L.exports=f},{"../utils":32,"./DataReader":18}],21:[function(p,L,k){var l=p("./ArrayReader");function f(a){l.call(this,a)}p("../utils").inherits(f,l),f.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,m},L.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(p,L,k){var l=p("../utils"),f=p("../support"),a=p("./ArrayReader"),m=p("./StringReader"),s=p("./NodeBufferReader"),A=p("./Uint8ArrayReader");L.exports=function(S){var N=l.getTypeOf(S);return l.checkSupport(N),N!=="string"||f.uint8array?N==="nodebuffer"?new s(S):f.uint8array?new A(l.transformTo("uint8array",S)):new a(l.transformTo("array",S)):new m(S)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(p,L,k){k.LOCAL_FILE_HEADER="PK",k.CENTRAL_FILE_HEADER="PK",k.CENTRAL_DIRECTORY_END="PK",k.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",k.ZIP64_CENTRAL_DIRECTORY_END="PK",k.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(p,L,k){var l=p("./GenericWorker"),f=p("../utils");function a(m){l.call(this,"ConvertWorker to "+m),this.destType=m}f.inherits(a,l),a.prototype.processChunk=function(m){this.push({data:f.transformTo(this.destType,m.data),meta:m.meta})},L.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(p,L,k){var l=p("./GenericWorker"),f=p("../crc32");function a(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}p("../utils").inherits(a,l),a.prototype.processChunk=function(m){this.streamInfo.crc32=f(m.data,this.streamInfo.crc32||0),this.push(m)},L.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(p,L,k){var l=p("../utils"),f=p("./GenericWorker");function a(m){f.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}l.inherits(a,f),a.prototype.processChunk=function(m){if(m){var s=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=s+m.data.length}f.prototype.processChunk.call(this,m)},L.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(p,L,k){var l=p("../utils"),f=p("./GenericWorker");function a(m){f.call(this,"DataWorker");var s=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(A){s.dataIsReady=!0,s.data=A,s.max=A&&A.length||0,s.type=l.getTypeOf(A),s.isPaused||s._tickAndRepeat()},function(A){s.error(A)})}l.inherits(a,f),a.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,s=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,s);break;case"uint8array":m=this.data.subarray(this.index,s);break;case"array":case"nodebuffer":m=this.data.slice(this.index,s)}return this.index=s,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},L.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(p,L,k){function l(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,a){return this._listeners[f].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,a){if(this._listeners[f])for(var m=0;m<this._listeners[f].length;m++)this._listeners[f][m].call(this,a)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var a=this;return f.on("data",function(m){a.processChunk(m)}),f.on("end",function(){a.end()}),f.on("error",function(m){a.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,a){return this.extraStreamInfo[f]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},L.exports=l},{}],29:[function(p,L,k){var l=p("../utils"),f=p("./ConvertWorker"),a=p("./GenericWorker"),m=p("../base64"),s=p("../support"),A=p("../external"),S=null;if(s.nodestream)try{S=p("../nodejs/NodejsStreamOutputAdapter")}catch{}function N(y,h){return new A.Promise(function(_,u){var g=[],E=y._internalType,x=y._outputType,T=y._mimeType;y.on("data",function(M,D){g.push(M),h&&h(D)}).on("error",function(M){g=[],u(M)}).on("end",function(){try{var M=function(D,j,R){switch(D){case"blob":return l.newBlob(l.transformTo("arraybuffer",j),R);case"base64":return m.encode(j);default:return l.transformTo(D,j)}}(x,function(D,j){var R,q=0,W=null,w=0;for(R=0;R<j.length;R++)w+=j[R].length;switch(D){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(W=new Uint8Array(w),R=0;R<j.length;R++)W.set(j[R],q),q+=j[R].length;return W;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+D+"'")}}(E,g),T);_(M)}catch(D){u(D)}g=[]}).resume()})}function c(y,h,_){var u=h;switch(h){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=h,this._mimeType=_,l.checkSupport(u),this._worker=y.pipe(new f(u)),y.lock()}catch(g){this._worker=new a("error"),this._worker.error(g)}}c.prototype={accumulate:function(y){return N(this,y)},on:function(y,h){var _=this;return y==="data"?this._worker.on(y,function(u){h.call(_,u.data,u.meta)}):this._worker.on(y,function(){l.delay(h,arguments,_)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new S(this,{objectMode:this._outputType!=="nodebuffer"},y)}},L.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(p,L,k){if(k.base64=!0,k.array=!0,k.string=!0,k.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",k.nodebuffer=typeof Buffer<"u",k.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")k.blob=!1;else{var l=new ArrayBuffer(0);try{k.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(l),k.blob=f.getBlob("application/zip").size===0}catch{k.blob=!1}}}try{k.nodestream=!!p("readable-stream").Readable}catch{k.nodestream=!1}},{"readable-stream":16}],31:[function(p,L,k){for(var l=p("./utils"),f=p("./support"),a=p("./nodejsUtils"),m=p("./stream/GenericWorker"),s=new Array(256),A=0;A<256;A++)s[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;s[254]=s[254]=1;function S(){m.call(this,"utf-8 decode"),this.leftOver=null}function N(){m.call(this,"utf-8 encode")}k.utf8encode=function(c){return f.nodebuffer?a.newBufferFrom(c,"utf-8"):function(y){var h,_,u,g,E,x=y.length,T=0;for(g=0;g<x;g++)(64512&(_=y.charCodeAt(g)))==55296&&g+1<x&&(64512&(u=y.charCodeAt(g+1)))==56320&&(_=65536+(_-55296<<10)+(u-56320),g++),T+=_<128?1:_<2048?2:_<65536?3:4;for(h=f.uint8array?new Uint8Array(T):new Array(T),g=E=0;E<T;g++)(64512&(_=y.charCodeAt(g)))==55296&&g+1<x&&(64512&(u=y.charCodeAt(g+1)))==56320&&(_=65536+(_-55296<<10)+(u-56320),g++),_<128?h[E++]=_:(_<2048?h[E++]=192|_>>>6:(_<65536?h[E++]=224|_>>>12:(h[E++]=240|_>>>18,h[E++]=128|_>>>12&63),h[E++]=128|_>>>6&63),h[E++]=128|63&_);return h}(c)},k.utf8decode=function(c){return f.nodebuffer?l.transformTo("nodebuffer",c).toString("utf-8"):function(y){var h,_,u,g,E=y.length,x=new Array(2*E);for(h=_=0;h<E;)if((u=y[h++])<128)x[_++]=u;else if(4<(g=s[u]))x[_++]=65533,h+=g-1;else{for(u&=g===2?31:g===3?15:7;1<g&&h<E;)u=u<<6|63&y[h++],g--;1<g?x[_++]=65533:u<65536?x[_++]=u:(u-=65536,x[_++]=55296|u>>10&1023,x[_++]=56320|1023&u)}return x.length!==_&&(x.subarray?x=x.subarray(0,_):x.length=_),l.applyFromCharCode(x)}(c=l.transformTo(f.uint8array?"uint8array":"array",c))},l.inherits(S,m),S.prototype.processChunk=function(c){var y=l.transformTo(f.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var h=y;(y=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),y.set(h,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var _=function(g,E){var x;for((E=E||g.length)>g.length&&(E=g.length),x=E-1;0<=x&&(192&g[x])==128;)x--;return x<0||x===0?E:x+s[g[x]]>E?x:E}(y),u=y;_!==y.length&&(f.uint8array?(u=y.subarray(0,_),this.leftOver=y.subarray(_,y.length)):(u=y.slice(0,_),this.leftOver=y.slice(_,y.length))),this.push({data:k.utf8decode(u),meta:c.meta})},S.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:k.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},k.Utf8DecodeWorker=S,l.inherits(N,m),N.prototype.processChunk=function(c){this.push({data:k.utf8encode(c.data),meta:c.meta})},k.Utf8EncodeWorker=N},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(p,L,k){var l=p("./support"),f=p("./base64"),a=p("./nodejsUtils"),m=p("./external");function s(h){return h}function A(h,_){for(var u=0;u<h.length;++u)_[u]=255&h.charCodeAt(u);return _}p("setimmediate"),k.newBlob=function(h,_){k.checkSupport("blob");try{return new Blob([h],{type:_})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(h),u.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var S={stringifyByChunk:function(h,_,u){var g=[],E=0,x=h.length;if(x<=u)return String.fromCharCode.apply(null,h);for(;E<x;)_==="array"||_==="nodebuffer"?g.push(String.fromCharCode.apply(null,h.slice(E,Math.min(E+u,x)))):g.push(String.fromCharCode.apply(null,h.subarray(E,Math.min(E+u,x)))),E+=u;return g.join("")},stringifyByChar:function(h){for(var _="",u=0;u<h.length;u++)_+=String.fromCharCode(h[u]);return _},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function N(h){var _=65536,u=k.getTypeOf(h),g=!0;if(u==="uint8array"?g=S.applyCanBeUsed.uint8array:u==="nodebuffer"&&(g=S.applyCanBeUsed.nodebuffer),g)for(;1<_;)try{return S.stringifyByChunk(h,u,_)}catch{_=Math.floor(_/2)}return S.stringifyByChar(h)}function c(h,_){for(var u=0;u<h.length;u++)_[u]=h[u];return _}k.applyFromCharCode=N;var y={};y.string={string:s,array:function(h){return A(h,new Array(h.length))},arraybuffer:function(h){return y.string.uint8array(h).buffer},uint8array:function(h){return A(h,new Uint8Array(h.length))},nodebuffer:function(h){return A(h,a.allocBuffer(h.length))}},y.array={string:N,array:s,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return a.newBufferFrom(h)}},y.arraybuffer={string:function(h){return N(new Uint8Array(h))},array:function(h){return c(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:s,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return a.newBufferFrom(new Uint8Array(h))}},y.uint8array={string:N,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:s,nodebuffer:function(h){return a.newBufferFrom(h)}},y.nodebuffer={string:N,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return y.nodebuffer.uint8array(h).buffer},uint8array:function(h){return c(h,new Uint8Array(h.length))},nodebuffer:s},k.transformTo=function(h,_){if(_=_||"",!h)return _;k.checkSupport(h);var u=k.getTypeOf(_);return y[u][h](_)},k.resolve=function(h){for(var _=h.split("/"),u=[],g=0;g<_.length;g++){var E=_[g];E==="."||E===""&&g!==0&&g!==_.length-1||(E===".."?u.pop():u.push(E))}return u.join("/")},k.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":l.nodebuffer&&a.isBuffer(h)?"nodebuffer":l.uint8array&&h instanceof Uint8Array?"uint8array":l.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},k.checkSupport=function(h){if(!l[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},k.MAX_VALUE_16BITS=65535,k.MAX_VALUE_32BITS=-1,k.pretty=function(h){var _,u,g="";for(u=0;u<(h||"").length;u++)g+="\\x"+((_=h.charCodeAt(u))<16?"0":"")+_.toString(16).toUpperCase();return g},k.delay=function(h,_,u){setImmediate(function(){h.apply(u||null,_||[])})},k.inherits=function(h,_){function u(){}u.prototype=_.prototype,h.prototype=new u},k.extend=function(){var h,_,u={};for(h=0;h<arguments.length;h++)for(_ in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],_)&&u[_]===void 0&&(u[_]=arguments[h][_]);return u},k.prepareContent=function(h,_,u,g,E){return m.Promise.resolve(_).then(function(x){return l.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new m.Promise(function(T,M){var D=new FileReader;D.onload=function(j){T(j.target.result)},D.onerror=function(j){M(j.target.error)},D.readAsArrayBuffer(x)}):x}).then(function(x){var T=k.getTypeOf(x);return T?(T==="arraybuffer"?x=k.transformTo("uint8array",x):T==="string"&&(E?x=f.decode(x):u&&g!==!0&&(x=function(M){return A(M,l.uint8array?new Uint8Array(M.length):new Array(M.length))}(x))),x):m.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(p,L,k){var l=p("./reader/readerFor"),f=p("./utils"),a=p("./signature"),m=p("./zipEntry"),s=p("./support");function A(S){this.files=[],this.loadOptions=S}A.prototype={checkSignature:function(S){if(!this.reader.readAndCheckSignature(S)){this.reader.index-=4;var N=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(N)+", expected "+f.pretty(S)+")")}},isSignature:function(S,N){var c=this.reader.index;this.reader.setIndex(S);var y=this.reader.readString(4)===N;return this.reader.setIndex(c),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var S=this.reader.readData(this.zipCommentLength),N=s.uint8array?"uint8array":"array",c=f.transformTo(N,S);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var S,N,c,y=this.zip64EndOfCentralSize-44;0<y;)S=this.reader.readInt(2),N=this.reader.readInt(4),c=this.reader.readData(N),this.zip64ExtensibleData[S]={id:S,length:N,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var S,N;for(S=0;S<this.files.length;S++)N=this.files[S],this.reader.setIndex(N.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),N.readLocalPart(this.reader),N.handleUTF8(),N.processAttributes()},readCentralDir:function(){var S;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(S=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(S);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var S=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(S<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(S);var N=S;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(S=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(S),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var y=N-c;if(0<y)this.isSignature(N,a.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(S){this.reader=l(S)},load:function(S){this.prepareReader(S),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},L.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(p,L,k){var l=p("./reader/readerFor"),f=p("./utils"),a=p("./compressedObject"),m=p("./crc32"),s=p("./utf8"),A=p("./compressions"),S=p("./support");function N(c,y){this.options=c,this.loadOptions=y}N.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var y,h;if(c.skip(22),this.fileNameLength=c.readInt(2),h=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(_){for(var u in A)if(Object.prototype.hasOwnProperty.call(A,u)&&A[u].magic===_)return A[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,y,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var y=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(y),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=l(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var y,h,_,u=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<u;)y=c.readInt(2),h=c.readInt(2),_=c.readData(h),this.extraFields[y]={id:y,length:h,value:_};c.setIndex(u)},handleUTF8:function(){var c=S.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var h=f.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var u=f.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var y=l(c.value);return y.readInt(1)!==1||m(this.fileName)!==y.readInt(4)?null:s.utf8decode(y.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var y=l(c.value);return y.readInt(1)!==1||m(this.fileComment)!==y.readInt(4)?null:s.utf8decode(y.readData(c.length-5))}return null}},L.exports=N},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(p,L,k){function l(y,h,_){this.name=y,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=h,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var f=p("./stream/StreamHelper"),a=p("./stream/DataWorker"),m=p("./utf8"),s=p("./compressedObject"),A=p("./stream/GenericWorker");l.prototype={internalStream:function(y){var h=null,_="string";try{if(!y)throw new Error("No output type specified.");var u=(_=y.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),h=this._decompressWorker();var g=!this._dataBinary;g&&!u&&(h=h.pipe(new m.Utf8EncodeWorker)),!g&&u&&(h=h.pipe(new m.Utf8DecodeWorker))}catch(E){(h=new A("error")).error(E)}return new f(h,_,"")},async:function(y,h){return this.internalStream(y).accumulate(h)},nodeStream:function(y,h){return this.internalStream(y||"nodebuffer").toNodejsStream(h)},_compressWorker:function(y,h){if(this._data instanceof s&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new m.Utf8EncodeWorker)),s.createWorkerFrom(_,y,h)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof A?this._data:new a(this._data)}};for(var S=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],N=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<S.length;c++)l.prototype[S[c]]=N;L.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(p,L,k){(function(l){var f,a,m=l.MutationObserver||l.WebKitMutationObserver;if(m){var s=0,A=new m(y),S=l.document.createTextNode("");A.observe(S,{characterData:!0}),f=function(){S.data=s=++s%2}}else if(l.setImmediate||l.MessageChannel===void 0)f="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var h=l.document.createElement("script");h.onreadystatechange=function(){y(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},l.document.documentElement.appendChild(h)}:function(){setTimeout(y,0)};else{var N=new l.MessageChannel;N.port1.onmessage=y,f=function(){N.port2.postMessage(0)}}var c=[];function y(){var h,_;a=!0;for(var u=c.length;u;){for(_=c,c=[],h=-1;++h<u;)_[h]();u=c.length}a=!1}L.exports=function(h){c.push(h)!==1||a||f()}}).call(this,typeof Ie<"u"?Ie:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(p,L,k){var l=p("immediate");function f(){}var a={},m=["REJECTED"],s=["FULFILLED"],A=["PENDING"];function S(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=A,this.queue=[],this.outcome=void 0,u!==f&&h(this,u)}function N(u,g,E){this.promise=u,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function c(u,g,E){l(function(){var x;try{x=g(E)}catch(T){return a.reject(u,T)}x===u?a.reject(u,new TypeError("Cannot resolve promise with itself")):a.resolve(u,x)})}function y(u){var g=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof g=="function")return function(){g.apply(u,arguments)}}function h(u,g){var E=!1;function x(D){E||(E=!0,a.reject(u,D))}function T(D){E||(E=!0,a.resolve(u,D))}var M=_(function(){g(T,x)});M.status==="error"&&x(M.value)}function _(u,g){var E={};try{E.value=u(g),E.status="success"}catch(x){E.status="error",E.value=x}return E}(L.exports=S).prototype.finally=function(u){if(typeof u!="function")return this;var g=this.constructor;return this.then(function(E){return g.resolve(u()).then(function(){return E})},function(E){return g.resolve(u()).then(function(){throw E})})},S.prototype.catch=function(u){return this.then(null,u)},S.prototype.then=function(u,g){if(typeof u!="function"&&this.state===s||typeof g!="function"&&this.state===m)return this;var E=new this.constructor(f);return this.state!==A?c(E,this.state===s?u:g,this.outcome):this.queue.push(new N(E,u,g)),E},N.prototype.callFulfilled=function(u){a.resolve(this.promise,u)},N.prototype.otherCallFulfilled=function(u){c(this.promise,this.onFulfilled,u)},N.prototype.callRejected=function(u){a.reject(this.promise,u)},N.prototype.otherCallRejected=function(u){c(this.promise,this.onRejected,u)},a.resolve=function(u,g){var E=_(y,g);if(E.status==="error")return a.reject(u,E.value);var x=E.value;if(x)h(u,x);else{u.state=s,u.outcome=g;for(var T=-1,M=u.queue.length;++T<M;)u.queue[T].callFulfilled(g)}return u},a.reject=function(u,g){u.state=m,u.outcome=g;for(var E=-1,x=u.queue.length;++E<x;)u.queue[E].callRejected(g);return u},S.resolve=function(u){return u instanceof this?u:a.resolve(new this(f),u)},S.reject=function(u){var g=new this(f);return a.reject(g,u)},S.all=function(u){var g=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=u.length,x=!1;if(!E)return this.resolve([]);for(var T=new Array(E),M=0,D=-1,j=new this(f);++D<E;)R(u[D],D);return j;function R(q,W){g.resolve(q).then(function(w){T[W]=w,++M!==E||x||(x=!0,a.resolve(j,T))},function(w){x||(x=!0,a.reject(j,w))})}},S.race=function(u){var g=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=u.length,x=!1;if(!E)return this.resolve([]);for(var T=-1,M=new this(f);++T<E;)D=u[T],g.resolve(D).then(function(j){x||(x=!0,a.resolve(M,j))},function(j){x||(x=!0,a.reject(M,j))});var D;return M}},{immediate:36}],38:[function(p,L,k){var l={};(0,p("./lib/utils/common").assign)(l,p("./lib/deflate"),p("./lib/inflate"),p("./lib/zlib/constants")),L.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(p,L,k){var l=p("./zlib/deflate"),f=p("./utils/common"),a=p("./utils/strings"),m=p("./zlib/messages"),s=p("./zlib/zstream"),A=Object.prototype.toString,S=0,N=-1,c=0,y=8;function h(u){if(!(this instanceof h))return new h(u);this.options=f.assign({level:N,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},u||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var E=l.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(E!==S)throw new Error(m[E]);if(g.header&&l.deflateSetHeader(this.strm,g.header),g.dictionary){var x;if(x=typeof g.dictionary=="string"?a.string2buf(g.dictionary):A.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(E=l.deflateSetDictionary(this.strm,x))!==S)throw new Error(m[E]);this._dict_set=!0}}function _(u,g){var E=new h(g);if(E.push(u,!0),E.err)throw E.msg||m[E.err];return E.result}h.prototype.push=function(u,g){var E,x,T=this.strm,M=this.options.chunkSize;if(this.ended)return!1;x=g===~~g?g:g===!0?4:0,typeof u=="string"?T.input=a.string2buf(u):A.call(u)==="[object ArrayBuffer]"?T.input=new Uint8Array(u):T.input=u,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new f.Buf8(M),T.next_out=0,T.avail_out=M),(E=l.deflate(T,x))!==1&&E!==S)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(f.shrinkBuf(T.output,T.next_out))):this.onData(f.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return x===4?(E=l.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===S):x!==2||(this.onEnd(S),!(T.avail_out=0))},h.prototype.onData=function(u){this.chunks.push(u)},h.prototype.onEnd=function(u){u===S&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},k.Deflate=h,k.deflate=_,k.deflateRaw=function(u,g){return(g=g||{}).raw=!0,_(u,g)},k.gzip=function(u,g){return(g=g||{}).gzip=!0,_(u,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(p,L,k){var l=p("./zlib/inflate"),f=p("./utils/common"),a=p("./utils/strings"),m=p("./zlib/constants"),s=p("./zlib/messages"),A=p("./zlib/zstream"),S=p("./zlib/gzheader"),N=Object.prototype.toString;function c(h){if(!(this instanceof c))return new c(h);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},h||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||h&&h.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var u=l.inflateInit2(this.strm,_.windowBits);if(u!==m.Z_OK)throw new Error(s[u]);this.header=new S,l.inflateGetHeader(this.strm,this.header)}function y(h,_){var u=new c(_);if(u.push(h,!0),u.err)throw u.msg||s[u.err];return u.result}c.prototype.push=function(h,_){var u,g,E,x,T,M,D=this.strm,j=this.options.chunkSize,R=this.options.dictionary,q=!1;if(this.ended)return!1;g=_===~~_?_:_===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof h=="string"?D.input=a.binstring2buf(h):N.call(h)==="[object ArrayBuffer]"?D.input=new Uint8Array(h):D.input=h,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new f.Buf8(j),D.next_out=0,D.avail_out=j),(u=l.inflate(D,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&R&&(M=typeof R=="string"?a.string2buf(R):N.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,u=l.inflateSetDictionary(this.strm,M)),u===m.Z_BUF_ERROR&&q===!0&&(u=m.Z_OK,q=!1),u!==m.Z_STREAM_END&&u!==m.Z_OK)return this.onEnd(u),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&u!==m.Z_STREAM_END&&(D.avail_in!==0||g!==m.Z_FINISH&&g!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=a.utf8border(D.output,D.next_out),x=D.next_out-E,T=a.buf2string(D.output,E),D.next_out=x,D.avail_out=j-x,x&&f.arraySet(D.output,D.output,E,x,0),this.onData(T)):this.onData(f.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(q=!0)}while((0<D.avail_in||D.avail_out===0)&&u!==m.Z_STREAM_END);return u===m.Z_STREAM_END&&(g=m.Z_FINISH),g===m.Z_FINISH?(u=l.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===m.Z_OK):g!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(D.avail_out=0))},c.prototype.onData=function(h){this.chunks.push(h)},c.prototype.onEnd=function(h){h===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},k.Inflate=c,k.inflate=y,k.inflateRaw=function(h,_){return(_=_||{}).raw=!0,y(h,_)},k.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(p,L,k){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";k.assign=function(m){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var A=s.shift();if(A){if(typeof A!="object")throw new TypeError(A+"must be non-object");for(var S in A)A.hasOwnProperty(S)&&(m[S]=A[S])}}return m},k.shrinkBuf=function(m,s){return m.length===s?m:m.subarray?m.subarray(0,s):(m.length=s,m)};var f={arraySet:function(m,s,A,S,N){if(s.subarray&&m.subarray)m.set(s.subarray(A,A+S),N);else for(var c=0;c<S;c++)m[N+c]=s[A+c]},flattenChunks:function(m){var s,A,S,N,c,y;for(s=S=0,A=m.length;s<A;s++)S+=m[s].length;for(y=new Uint8Array(S),s=N=0,A=m.length;s<A;s++)c=m[s],y.set(c,N),N+=c.length;return y}},a={arraySet:function(m,s,A,S,N){for(var c=0;c<S;c++)m[N+c]=s[A+c]},flattenChunks:function(m){return[].concat.apply([],m)}};k.setTyped=function(m){m?(k.Buf8=Uint8Array,k.Buf16=Uint16Array,k.Buf32=Int32Array,k.assign(k,f)):(k.Buf8=Array,k.Buf16=Array,k.Buf32=Array,k.assign(k,a))},k.setTyped(l)},{}],42:[function(p,L,k){var l=p("./common"),f=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var m=new l.Buf8(256),s=0;s<256;s++)m[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function A(S,N){if(N<65537&&(S.subarray&&a||!S.subarray&&f))return String.fromCharCode.apply(null,l.shrinkBuf(S,N));for(var c="",y=0;y<N;y++)c+=String.fromCharCode(S[y]);return c}m[254]=m[254]=1,k.string2buf=function(S){var N,c,y,h,_,u=S.length,g=0;for(h=0;h<u;h++)(64512&(c=S.charCodeAt(h)))==55296&&h+1<u&&(64512&(y=S.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(y-56320),h++),g+=c<128?1:c<2048?2:c<65536?3:4;for(N=new l.Buf8(g),h=_=0;_<g;h++)(64512&(c=S.charCodeAt(h)))==55296&&h+1<u&&(64512&(y=S.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(y-56320),h++),c<128?N[_++]=c:(c<2048?N[_++]=192|c>>>6:(c<65536?N[_++]=224|c>>>12:(N[_++]=240|c>>>18,N[_++]=128|c>>>12&63),N[_++]=128|c>>>6&63),N[_++]=128|63&c);return N},k.buf2binstring=function(S){return A(S,S.length)},k.binstring2buf=function(S){for(var N=new l.Buf8(S.length),c=0,y=N.length;c<y;c++)N[c]=S.charCodeAt(c);return N},k.buf2string=function(S,N){var c,y,h,_,u=N||S.length,g=new Array(2*u);for(c=y=0;c<u;)if((h=S[c++])<128)g[y++]=h;else if(4<(_=m[h]))g[y++]=65533,c+=_-1;else{for(h&=_===2?31:_===3?15:7;1<_&&c<u;)h=h<<6|63&S[c++],_--;1<_?g[y++]=65533:h<65536?g[y++]=h:(h-=65536,g[y++]=55296|h>>10&1023,g[y++]=56320|1023&h)}return A(g,y)},k.utf8border=function(S,N){var c;for((N=N||S.length)>S.length&&(N=S.length),c=N-1;0<=c&&(192&S[c])==128;)c--;return c<0||c===0?N:c+m[S[c]]>N?c:N}},{"./common":41}],43:[function(p,L,k){L.exports=function(l,f,a,m){for(var s=65535&l|0,A=l>>>16&65535|0,S=0;a!==0;){for(a-=S=2e3<a?2e3:a;A=A+(s=s+f[m++]|0)|0,--S;);s%=65521,A%=65521}return s|A<<16|0}},{}],44:[function(p,L,k){L.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(p,L,k){var l=function(){for(var f,a=[],m=0;m<256;m++){f=m;for(var s=0;s<8;s++)f=1&f?3988292384^f>>>1:f>>>1;a[m]=f}return a}();L.exports=function(f,a,m,s){var A=l,S=s+m;f^=-1;for(var N=s;N<S;N++)f=f>>>8^A[255&(f^a[N])];return-1^f}},{}],46:[function(p,L,k){var l,f=p("../utils/common"),a=p("./trees"),m=p("./adler32"),s=p("./crc32"),A=p("./messages"),S=0,N=4,c=0,y=-2,h=-1,_=4,u=2,g=8,E=9,x=286,T=30,M=19,D=2*x+1,j=15,R=3,q=258,W=q+R+1,w=42,O=113,i=1,$=2,lt=3,Y=4;function pt(r,H){return r.msg=A[H],H}function Q(r){return(r<<1)-(4<r?9:0)}function at(r){for(var H=r.length;0<=--H;)r[H]=0}function U(r){var H=r.state,F=H.pending;F>r.avail_out&&(F=r.avail_out),F!==0&&(f.arraySet(r.output,H.pending_buf,H.pending_out,F,r.next_out),r.next_out+=F,H.pending_out+=F,r.total_out+=F,r.avail_out-=F,H.pending-=F,H.pending===0&&(H.pending_out=0))}function z(r,H){a._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,H),r.block_start=r.strstart,U(r.strm)}function ut(r,H){r.pending_buf[r.pending++]=H}function it(r,H){r.pending_buf[r.pending++]=H>>>8&255,r.pending_buf[r.pending++]=255&H}function J(r,H){var F,b,d=r.max_chain_length,I=r.strstart,Z=r.prev_length,K=r.nice_match,B=r.strstart>r.w_size-W?r.strstart-(r.w_size-W):0,tt=r.window,ot=r.w_mask,et=r.prev,ft=r.strstart+q,Et=tt[I+Z-1],vt=tt[I+Z];r.prev_length>=r.good_match&&(d>>=2),K>r.lookahead&&(K=r.lookahead);do if(tt[(F=H)+Z]===vt&&tt[F+Z-1]===Et&&tt[F]===tt[I]&&tt[++F]===tt[I+1]){I+=2,F++;do;while(tt[++I]===tt[++F]&&tt[++I]===tt[++F]&&tt[++I]===tt[++F]&&tt[++I]===tt[++F]&&tt[++I]===tt[++F]&&tt[++I]===tt[++F]&&tt[++I]===tt[++F]&&tt[++I]===tt[++F]&&I<ft);if(b=q-(ft-I),I=ft-q,Z<b){if(r.match_start=H,K<=(Z=b))break;Et=tt[I+Z-1],vt=tt[I+Z]}}while((H=et[H&ot])>B&&--d!=0);return Z<=r.lookahead?Z:r.lookahead}function Tt(r){var H,F,b,d,I,Z,K,B,tt,ot,et=r.w_size;do{if(d=r.window_size-r.lookahead-r.strstart,r.strstart>=et+(et-W)){for(f.arraySet(r.window,r.window,et,et,0),r.match_start-=et,r.strstart-=et,r.block_start-=et,H=F=r.hash_size;b=r.head[--H],r.head[H]=et<=b?b-et:0,--F;);for(H=F=et;b=r.prev[--H],r.prev[H]=et<=b?b-et:0,--F;);d+=et}if(r.strm.avail_in===0)break;if(Z=r.strm,K=r.window,B=r.strstart+r.lookahead,tt=d,ot=void 0,ot=Z.avail_in,tt<ot&&(ot=tt),F=ot===0?0:(Z.avail_in-=ot,f.arraySet(K,Z.input,Z.next_in,ot,B),Z.state.wrap===1?Z.adler=m(Z.adler,K,ot,B):Z.state.wrap===2&&(Z.adler=s(Z.adler,K,ot,B)),Z.next_in+=ot,Z.total_in+=ot,ot),r.lookahead+=F,r.lookahead+r.insert>=R)for(I=r.strstart-r.insert,r.ins_h=r.window[I],r.ins_h=(r.ins_h<<r.hash_shift^r.window[I+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[I+R-1])&r.hash_mask,r.prev[I&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=I,I++,r.insert--,!(r.lookahead+r.insert<R)););}while(r.lookahead<W&&r.strm.avail_in!==0)}function Nt(r,H){for(var F,b;;){if(r.lookahead<W){if(Tt(r),r.lookahead<W&&H===S)return i;if(r.lookahead===0)break}if(F=0,r.lookahead>=R&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+R-1])&r.hash_mask,F=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),F!==0&&r.strstart-F<=r.w_size-W&&(r.match_length=J(r,F)),r.match_length>=R)if(b=a._tr_tally(r,r.strstart-r.match_start,r.match_length-R),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=R){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+R-1])&r.hash_mask,F=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else b=a._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(b&&(z(r,!1),r.strm.avail_out===0))return i}return r.insert=r.strstart<R-1?r.strstart:R-1,H===N?(z(r,!0),r.strm.avail_out===0?lt:Y):r.last_lit&&(z(r,!1),r.strm.avail_out===0)?i:$}function yt(r,H){for(var F,b,d;;){if(r.lookahead<W){if(Tt(r),r.lookahead<W&&H===S)return i;if(r.lookahead===0)break}if(F=0,r.lookahead>=R&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+R-1])&r.hash_mask,F=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=R-1,F!==0&&r.prev_length<r.max_lazy_match&&r.strstart-F<=r.w_size-W&&(r.match_length=J(r,F),r.match_length<=5&&(r.strategy===1||r.match_length===R&&4096<r.strstart-r.match_start)&&(r.match_length=R-1)),r.prev_length>=R&&r.match_length<=r.prev_length){for(d=r.strstart+r.lookahead-R,b=a._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-R),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=d&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+R-1])&r.hash_mask,F=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=R-1,r.strstart++,b&&(z(r,!1),r.strm.avail_out===0))return i}else if(r.match_available){if((b=a._tr_tally(r,0,r.window[r.strstart-1]))&&z(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return i}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(b=a._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<R-1?r.strstart:R-1,H===N?(z(r,!0),r.strm.avail_out===0?lt:Y):r.last_lit&&(z(r,!1),r.strm.avail_out===0)?i:$}function kt(r,H,F,b,d){this.good_length=r,this.max_lazy=H,this.nice_length=F,this.max_chain=b,this.func=d}function Rt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*D),this.dyn_dtree=new f.Buf16(2*(2*T+1)),this.bl_tree=new f.Buf16(2*(2*M+1)),at(this.dyn_ltree),at(this.dyn_dtree),at(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(j+1),this.heap=new f.Buf16(2*x+1),at(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*x+1),at(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xt(r){var H;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=u,(H=r.state).pending=0,H.pending_out=0,H.wrap<0&&(H.wrap=-H.wrap),H.status=H.wrap?w:O,r.adler=H.wrap===2?0:1,H.last_flush=S,a._tr_init(H),c):pt(r,y)}function Ct(r){var H=xt(r);return H===c&&function(F){F.window_size=2*F.w_size,at(F.head),F.max_lazy_match=l[F.level].max_lazy,F.good_match=l[F.level].good_length,F.nice_match=l[F.level].nice_length,F.max_chain_length=l[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=R-1,F.match_available=0,F.ins_h=0}(r.state),H}function Lt(r,H,F,b,d,I){if(!r)return y;var Z=1;if(H===h&&(H=6),b<0?(Z=0,b=-b):15<b&&(Z=2,b-=16),d<1||E<d||F!==g||b<8||15<b||H<0||9<H||I<0||_<I)return pt(r,y);b===8&&(b=9);var K=new Rt;return(r.state=K).strm=r,K.wrap=Z,K.gzhead=null,K.w_bits=b,K.w_size=1<<K.w_bits,K.w_mask=K.w_size-1,K.hash_bits=d+7,K.hash_size=1<<K.hash_bits,K.hash_mask=K.hash_size-1,K.hash_shift=~~((K.hash_bits+R-1)/R),K.window=new f.Buf8(2*K.w_size),K.head=new f.Buf16(K.hash_size),K.prev=new f.Buf16(K.w_size),K.lit_bufsize=1<<d+6,K.pending_buf_size=4*K.lit_bufsize,K.pending_buf=new f.Buf8(K.pending_buf_size),K.d_buf=1*K.lit_bufsize,K.l_buf=3*K.lit_bufsize,K.level=H,K.strategy=I,K.method=F,Ct(r)}l=[new kt(0,0,0,0,function(r,H){var F=65535;for(F>r.pending_buf_size-5&&(F=r.pending_buf_size-5);;){if(r.lookahead<=1){if(Tt(r),r.lookahead===0&&H===S)return i;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var b=r.block_start+F;if((r.strstart===0||r.strstart>=b)&&(r.lookahead=r.strstart-b,r.strstart=b,z(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-W&&(z(r,!1),r.strm.avail_out===0))return i}return r.insert=0,H===N?(z(r,!0),r.strm.avail_out===0?lt:Y):(r.strstart>r.block_start&&(z(r,!1),r.strm.avail_out),i)}),new kt(4,4,8,4,Nt),new kt(4,5,16,8,Nt),new kt(4,6,32,32,Nt),new kt(4,4,16,16,yt),new kt(8,16,32,32,yt),new kt(8,16,128,128,yt),new kt(8,32,128,256,yt),new kt(32,128,258,1024,yt),new kt(32,258,258,4096,yt)],k.deflateInit=function(r,H){return Lt(r,H,g,15,8,0)},k.deflateInit2=Lt,k.deflateReset=Ct,k.deflateResetKeep=xt,k.deflateSetHeader=function(r,H){return r&&r.state?r.state.wrap!==2?y:(r.state.gzhead=H,c):y},k.deflate=function(r,H){var F,b,d,I;if(!r||!r.state||5<H||H<0)return r?pt(r,y):y;if(b=r.state,!r.output||!r.input&&r.avail_in!==0||b.status===666&&H!==N)return pt(r,r.avail_out===0?-5:y);if(b.strm=r,F=b.last_flush,b.last_flush=H,b.status===w)if(b.wrap===2)r.adler=0,ut(b,31),ut(b,139),ut(b,8),b.gzhead?(ut(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),ut(b,255&b.gzhead.time),ut(b,b.gzhead.time>>8&255),ut(b,b.gzhead.time>>16&255),ut(b,b.gzhead.time>>24&255),ut(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),ut(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(ut(b,255&b.gzhead.extra.length),ut(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(r.adler=s(r.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(ut(b,0),ut(b,0),ut(b,0),ut(b,0),ut(b,0),ut(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),ut(b,3),b.status=O);else{var Z=g+(b.w_bits-8<<4)<<8;Z|=(2<=b.strategy||b.level<2?0:b.level<6?1:b.level===6?2:3)<<6,b.strstart!==0&&(Z|=32),Z+=31-Z%31,b.status=O,it(b,Z),b.strstart!==0&&(it(b,r.adler>>>16),it(b,65535&r.adler)),r.adler=1}if(b.status===69)if(b.gzhead.extra){for(d=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),U(r),d=b.pending,b.pending!==b.pending_buf_size));)ut(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(b.status===73)if(b.gzhead.name){d=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),U(r),d=b.pending,b.pending===b.pending_buf_size)){I=1;break}I=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,ut(b,I)}while(I!==0);b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),I===0&&(b.gzindex=0,b.status=91)}else b.status=91;if(b.status===91)if(b.gzhead.comment){d=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),U(r),d=b.pending,b.pending===b.pending_buf_size)){I=1;break}I=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,ut(b,I)}while(I!==0);b.gzhead.hcrc&&b.pending>d&&(r.adler=s(r.adler,b.pending_buf,b.pending-d,d)),I===0&&(b.status=103)}else b.status=103;if(b.status===103&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&U(r),b.pending+2<=b.pending_buf_size&&(ut(b,255&r.adler),ut(b,r.adler>>8&255),r.adler=0,b.status=O)):b.status=O),b.pending!==0){if(U(r),r.avail_out===0)return b.last_flush=-1,c}else if(r.avail_in===0&&Q(H)<=Q(F)&&H!==N)return pt(r,-5);if(b.status===666&&r.avail_in!==0)return pt(r,-5);if(r.avail_in!==0||b.lookahead!==0||H!==S&&b.status!==666){var K=b.strategy===2?function(B,tt){for(var ot;;){if(B.lookahead===0&&(Tt(B),B.lookahead===0)){if(tt===S)return i;break}if(B.match_length=0,ot=a._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,ot&&(z(B,!1),B.strm.avail_out===0))return i}return B.insert=0,tt===N?(z(B,!0),B.strm.avail_out===0?lt:Y):B.last_lit&&(z(B,!1),B.strm.avail_out===0)?i:$}(b,H):b.strategy===3?function(B,tt){for(var ot,et,ft,Et,vt=B.window;;){if(B.lookahead<=q){if(Tt(B),B.lookahead<=q&&tt===S)return i;if(B.lookahead===0)break}if(B.match_length=0,B.lookahead>=R&&0<B.strstart&&(et=vt[ft=B.strstart-1])===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]){Et=B.strstart+q;do;while(et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&et===vt[++ft]&&ft<Et);B.match_length=q-(Et-ft),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=R?(ot=a._tr_tally(B,1,B.match_length-R),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(ot=a._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),ot&&(z(B,!1),B.strm.avail_out===0))return i}return B.insert=0,tt===N?(z(B,!0),B.strm.avail_out===0?lt:Y):B.last_lit&&(z(B,!1),B.strm.avail_out===0)?i:$}(b,H):l[b.level].func(b,H);if(K!==lt&&K!==Y||(b.status=666),K===i||K===lt)return r.avail_out===0&&(b.last_flush=-1),c;if(K===$&&(H===1?a._tr_align(b):H!==5&&(a._tr_stored_block(b,0,0,!1),H===3&&(at(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),U(r),r.avail_out===0))return b.last_flush=-1,c}return H!==N?c:b.wrap<=0?1:(b.wrap===2?(ut(b,255&r.adler),ut(b,r.adler>>8&255),ut(b,r.adler>>16&255),ut(b,r.adler>>24&255),ut(b,255&r.total_in),ut(b,r.total_in>>8&255),ut(b,r.total_in>>16&255),ut(b,r.total_in>>24&255)):(it(b,r.adler>>>16),it(b,65535&r.adler)),U(r),0<b.wrap&&(b.wrap=-b.wrap),b.pending!==0?c:1)},k.deflateEnd=function(r){var H;return r&&r.state?(H=r.state.status)!==w&&H!==69&&H!==73&&H!==91&&H!==103&&H!==O&&H!==666?pt(r,y):(r.state=null,H===O?pt(r,-3):c):y},k.deflateSetDictionary=function(r,H){var F,b,d,I,Z,K,B,tt,ot=H.length;if(!r||!r.state||(I=(F=r.state).wrap)===2||I===1&&F.status!==w||F.lookahead)return y;for(I===1&&(r.adler=m(r.adler,H,ot,0)),F.wrap=0,ot>=F.w_size&&(I===0&&(at(F.head),F.strstart=0,F.block_start=0,F.insert=0),tt=new f.Buf8(F.w_size),f.arraySet(tt,H,ot-F.w_size,F.w_size,0),H=tt,ot=F.w_size),Z=r.avail_in,K=r.next_in,B=r.input,r.avail_in=ot,r.next_in=0,r.input=H,Tt(F);F.lookahead>=R;){for(b=F.strstart,d=F.lookahead-(R-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[b+R-1])&F.hash_mask,F.prev[b&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=b,b++,--d;);F.strstart=b,F.lookahead=R-1,Tt(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=R-1,F.match_available=0,r.next_in=K,r.input=B,r.avail_in=Z,F.wrap=I,c},k.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(p,L,k){L.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(p,L,k){L.exports=function(l,f){var a,m,s,A,S,N,c,y,h,_,u,g,E,x,T,M,D,j,R,q,W,w,O,i,$;a=l.state,m=l.next_in,i=l.input,s=m+(l.avail_in-5),A=l.next_out,$=l.output,S=A-(f-l.avail_out),N=A+(l.avail_out-257),c=a.dmax,y=a.wsize,h=a.whave,_=a.wnext,u=a.window,g=a.hold,E=a.bits,x=a.lencode,T=a.distcode,M=(1<<a.lenbits)-1,D=(1<<a.distbits)-1;t:do{E<15&&(g+=i[m++]<<E,E+=8,g+=i[m++]<<E,E+=8),j=x[g&M];e:for(;;){if(g>>>=R=j>>>24,E-=R,(R=j>>>16&255)===0)$[A++]=65535&j;else{if(!(16&R)){if(!(64&R)){j=x[(65535&j)+(g&(1<<R)-1)];continue e}if(32&R){a.mode=12;break t}l.msg="invalid literal/length code",a.mode=30;break t}q=65535&j,(R&=15)&&(E<R&&(g+=i[m++]<<E,E+=8),q+=g&(1<<R)-1,g>>>=R,E-=R),E<15&&(g+=i[m++]<<E,E+=8,g+=i[m++]<<E,E+=8),j=T[g&D];r:for(;;){if(g>>>=R=j>>>24,E-=R,!(16&(R=j>>>16&255))){if(!(64&R)){j=T[(65535&j)+(g&(1<<R)-1)];continue r}l.msg="invalid distance code",a.mode=30;break t}if(W=65535&j,E<(R&=15)&&(g+=i[m++]<<E,(E+=8)<R&&(g+=i[m++]<<E,E+=8)),c<(W+=g&(1<<R)-1)){l.msg="invalid distance too far back",a.mode=30;break t}if(g>>>=R,E-=R,(R=A-S)<W){if(h<(R=W-R)&&a.sane){l.msg="invalid distance too far back",a.mode=30;break t}if(O=u,(w=0)===_){if(w+=y-R,R<q){for(q-=R;$[A++]=u[w++],--R;);w=A-W,O=$}}else if(_<R){if(w+=y+_-R,(R-=_)<q){for(q-=R;$[A++]=u[w++],--R;);if(w=0,_<q){for(q-=R=_;$[A++]=u[w++],--R;);w=A-W,O=$}}}else if(w+=_-R,R<q){for(q-=R;$[A++]=u[w++],--R;);w=A-W,O=$}for(;2<q;)$[A++]=O[w++],$[A++]=O[w++],$[A++]=O[w++],q-=3;q&&($[A++]=O[w++],1<q&&($[A++]=O[w++]))}else{for(w=A-W;$[A++]=$[w++],$[A++]=$[w++],$[A++]=$[w++],2<(q-=3););q&&($[A++]=$[w++],1<q&&($[A++]=$[w++]))}break}}break}}while(m<s&&A<N);m-=q=E>>3,g&=(1<<(E-=q<<3))-1,l.next_in=m,l.next_out=A,l.avail_in=m<s?s-m+5:5-(m-s),l.avail_out=A<N?N-A+257:257-(A-N),a.hold=g,a.bits=E}},{}],49:[function(p,L,k){var l=p("../utils/common"),f=p("./adler32"),a=p("./crc32"),m=p("./inffast"),s=p("./inftrees"),A=1,S=2,N=0,c=-2,y=1,h=852,_=592;function u(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(w){var O;return w&&w.state?(O=w.state,w.total_in=w.total_out=O.total=0,w.msg="",O.wrap&&(w.adler=1&O.wrap),O.mode=y,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new l.Buf32(h),O.distcode=O.distdyn=new l.Buf32(_),O.sane=1,O.back=-1,N):c}function x(w){var O;return w&&w.state?((O=w.state).wsize=0,O.whave=0,O.wnext=0,E(w)):c}function T(w,O){var i,$;return w&&w.state?($=w.state,O<0?(i=0,O=-O):(i=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?c:($.window!==null&&$.wbits!==O&&($.window=null),$.wrap=i,$.wbits=O,x(w))):c}function M(w,O){var i,$;return w?($=new g,(w.state=$).window=null,(i=T(w,O))!==N&&(w.state=null),i):c}var D,j,R=!0;function q(w){if(R){var O;for(D=new l.Buf32(512),j=new l.Buf32(32),O=0;O<144;)w.lens[O++]=8;for(;O<256;)w.lens[O++]=9;for(;O<280;)w.lens[O++]=7;for(;O<288;)w.lens[O++]=8;for(s(A,w.lens,0,288,D,0,w.work,{bits:9}),O=0;O<32;)w.lens[O++]=5;s(S,w.lens,0,32,j,0,w.work,{bits:5}),R=!1}w.lencode=D,w.lenbits=9,w.distcode=j,w.distbits=5}function W(w,O,i,$){var lt,Y=w.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new l.Buf8(Y.wsize)),$>=Y.wsize?(l.arraySet(Y.window,O,i-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):($<(lt=Y.wsize-Y.wnext)&&(lt=$),l.arraySet(Y.window,O,i-$,lt,Y.wnext),($-=lt)?(l.arraySet(Y.window,O,i-$,$,0),Y.wnext=$,Y.whave=Y.wsize):(Y.wnext+=lt,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=lt))),0}k.inflateReset=x,k.inflateReset2=T,k.inflateResetKeep=E,k.inflateInit=function(w){return M(w,15)},k.inflateInit2=M,k.inflate=function(w,O){var i,$,lt,Y,pt,Q,at,U,z,ut,it,J,Tt,Nt,yt,kt,Rt,xt,Ct,Lt,r,H,F,b,d=0,I=new l.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return c;(i=w.state).mode===12&&(i.mode=13),pt=w.next_out,lt=w.output,at=w.avail_out,Y=w.next_in,$=w.input,Q=w.avail_in,U=i.hold,z=i.bits,ut=Q,it=at,H=N;t:for(;;)switch(i.mode){case y:if(i.wrap===0){i.mode=13;break}for(;z<16;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(2&i.wrap&&U===35615){I[i.check=0]=255&U,I[1]=U>>>8&255,i.check=a(i.check,I,2,0),z=U=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&U)<<8)+(U>>8))%31){w.msg="incorrect header check",i.mode=30;break}if((15&U)!=8){w.msg="unknown compression method",i.mode=30;break}if(z-=4,r=8+(15&(U>>>=4)),i.wbits===0)i.wbits=r;else if(r>i.wbits){w.msg="invalid window size",i.mode=30;break}i.dmax=1<<r,w.adler=i.check=1,i.mode=512&U?10:12,z=U=0;break;case 2:for(;z<16;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(i.flags=U,(255&i.flags)!=8){w.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){w.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=U>>8&1),512&i.flags&&(I[0]=255&U,I[1]=U>>>8&255,i.check=a(i.check,I,2,0)),z=U=0,i.mode=3;case 3:for(;z<32;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}i.head&&(i.head.time=U),512&i.flags&&(I[0]=255&U,I[1]=U>>>8&255,I[2]=U>>>16&255,I[3]=U>>>24&255,i.check=a(i.check,I,4,0)),z=U=0,i.mode=4;case 4:for(;z<16;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}i.head&&(i.head.xflags=255&U,i.head.os=U>>8),512&i.flags&&(I[0]=255&U,I[1]=U>>>8&255,i.check=a(i.check,I,2,0)),z=U=0,i.mode=5;case 5:if(1024&i.flags){for(;z<16;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}i.length=U,i.head&&(i.head.extra_len=U),512&i.flags&&(I[0]=255&U,I[1]=U>>>8&255,i.check=a(i.check,I,2,0)),z=U=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(Q<(J=i.length)&&(J=Q),J&&(i.head&&(r=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),l.arraySet(i.head.extra,$,Y,J,r)),512&i.flags&&(i.check=a(i.check,$,J,Y)),Q-=J,Y+=J,i.length-=J),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(Q===0)break t;for(J=0;r=$[Y+J++],i.head&&r&&i.length<65536&&(i.head.name+=String.fromCharCode(r)),r&&J<Q;);if(512&i.flags&&(i.check=a(i.check,$,J,Y)),Q-=J,Y+=J,r)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(Q===0)break t;for(J=0;r=$[Y+J++],i.head&&r&&i.length<65536&&(i.head.comment+=String.fromCharCode(r)),r&&J<Q;);if(512&i.flags&&(i.check=a(i.check,$,J,Y)),Q-=J,Y+=J,r)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;z<16;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(U!==(65535&i.check)){w.msg="header crc mismatch",i.mode=30;break}z=U=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),w.adler=i.check=0,i.mode=12;break;case 10:for(;z<32;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}w.adler=i.check=u(U),z=U=0,i.mode=11;case 11:if(i.havedict===0)return w.next_out=pt,w.avail_out=at,w.next_in=Y,w.avail_in=Q,i.hold=U,i.bits=z,2;w.adler=i.check=1,i.mode=12;case 12:if(O===5||O===6)break t;case 13:if(i.last){U>>>=7&z,z-=7&z,i.mode=27;break}for(;z<3;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}switch(i.last=1&U,z-=1,3&(U>>>=1)){case 0:i.mode=14;break;case 1:if(q(i),i.mode=20,O!==6)break;U>>>=2,z-=2;break t;case 2:i.mode=17;break;case 3:w.msg="invalid block type",i.mode=30}U>>>=2,z-=2;break;case 14:for(U>>>=7&z,z-=7&z;z<32;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if((65535&U)!=(U>>>16^65535)){w.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&U,z=U=0,i.mode=15,O===6)break t;case 15:i.mode=16;case 16:if(J=i.length){if(Q<J&&(J=Q),at<J&&(J=at),J===0)break t;l.arraySet(lt,$,Y,J,pt),Q-=J,Y+=J,at-=J,pt+=J,i.length-=J;break}i.mode=12;break;case 17:for(;z<14;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(i.nlen=257+(31&U),U>>>=5,z-=5,i.ndist=1+(31&U),U>>>=5,z-=5,i.ncode=4+(15&U),U>>>=4,z-=4,286<i.nlen||30<i.ndist){w.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;z<3;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}i.lens[Z[i.have++]]=7&U,U>>>=3,z-=3}for(;i.have<19;)i.lens[Z[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,F={bits:i.lenbits},H=s(0,i.lens,0,19,i.lencode,0,i.work,F),i.lenbits=F.bits,H){w.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;kt=(d=i.lencode[U&(1<<i.lenbits)-1])>>>16&255,Rt=65535&d,!((yt=d>>>24)<=z);){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(Rt<16)U>>>=yt,z-=yt,i.lens[i.have++]=Rt;else{if(Rt===16){for(b=yt+2;z<b;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(U>>>=yt,z-=yt,i.have===0){w.msg="invalid bit length repeat",i.mode=30;break}r=i.lens[i.have-1],J=3+(3&U),U>>>=2,z-=2}else if(Rt===17){for(b=yt+3;z<b;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}z-=yt,r=0,J=3+(7&(U>>>=yt)),U>>>=3,z-=3}else{for(b=yt+7;z<b;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}z-=yt,r=0,J=11+(127&(U>>>=yt)),U>>>=7,z-=7}if(i.have+J>i.nlen+i.ndist){w.msg="invalid bit length repeat",i.mode=30;break}for(;J--;)i.lens[i.have++]=r}}if(i.mode===30)break;if(i.lens[256]===0){w.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,F={bits:i.lenbits},H=s(A,i.lens,0,i.nlen,i.lencode,0,i.work,F),i.lenbits=F.bits,H){w.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,F={bits:i.distbits},H=s(S,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,F),i.distbits=F.bits,H){w.msg="invalid distances set",i.mode=30;break}if(i.mode=20,O===6)break t;case 20:i.mode=21;case 21:if(6<=Q&&258<=at){w.next_out=pt,w.avail_out=at,w.next_in=Y,w.avail_in=Q,i.hold=U,i.bits=z,m(w,it),pt=w.next_out,lt=w.output,at=w.avail_out,Y=w.next_in,$=w.input,Q=w.avail_in,U=i.hold,z=i.bits,i.mode===12&&(i.back=-1);break}for(i.back=0;kt=(d=i.lencode[U&(1<<i.lenbits)-1])>>>16&255,Rt=65535&d,!((yt=d>>>24)<=z);){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(kt&&!(240&kt)){for(xt=yt,Ct=kt,Lt=Rt;kt=(d=i.lencode[Lt+((U&(1<<xt+Ct)-1)>>xt)])>>>16&255,Rt=65535&d,!(xt+(yt=d>>>24)<=z);){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}U>>>=xt,z-=xt,i.back+=xt}if(U>>>=yt,z-=yt,i.back+=yt,i.length=Rt,kt===0){i.mode=26;break}if(32&kt){i.back=-1,i.mode=12;break}if(64&kt){w.msg="invalid literal/length code",i.mode=30;break}i.extra=15&kt,i.mode=22;case 22:if(i.extra){for(b=i.extra;z<b;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}i.length+=U&(1<<i.extra)-1,U>>>=i.extra,z-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;kt=(d=i.distcode[U&(1<<i.distbits)-1])>>>16&255,Rt=65535&d,!((yt=d>>>24)<=z);){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(!(240&kt)){for(xt=yt,Ct=kt,Lt=Rt;kt=(d=i.distcode[Lt+((U&(1<<xt+Ct)-1)>>xt)])>>>16&255,Rt=65535&d,!(xt+(yt=d>>>24)<=z);){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}U>>>=xt,z-=xt,i.back+=xt}if(U>>>=yt,z-=yt,i.back+=yt,64&kt){w.msg="invalid distance code",i.mode=30;break}i.offset=Rt,i.extra=15&kt,i.mode=24;case 24:if(i.extra){for(b=i.extra;z<b;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}i.offset+=U&(1<<i.extra)-1,U>>>=i.extra,z-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){w.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(at===0)break t;if(J=it-at,i.offset>J){if((J=i.offset-J)>i.whave&&i.sane){w.msg="invalid distance too far back",i.mode=30;break}Tt=J>i.wnext?(J-=i.wnext,i.wsize-J):i.wnext-J,J>i.length&&(J=i.length),Nt=i.window}else Nt=lt,Tt=pt-i.offset,J=i.length;for(at<J&&(J=at),at-=J,i.length-=J;lt[pt++]=Nt[Tt++],--J;);i.length===0&&(i.mode=21);break;case 26:if(at===0)break t;lt[pt++]=i.length,at--,i.mode=21;break;case 27:if(i.wrap){for(;z<32;){if(Q===0)break t;Q--,U|=$[Y++]<<z,z+=8}if(it-=at,w.total_out+=it,i.total+=it,it&&(w.adler=i.check=i.flags?a(i.check,lt,it,pt-it):f(i.check,lt,it,pt-it)),it=at,(i.flags?U:u(U))!==i.check){w.msg="incorrect data check",i.mode=30;break}z=U=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;z<32;){if(Q===0)break t;Q--,U+=$[Y++]<<z,z+=8}if(U!==(4294967295&i.total)){w.msg="incorrect length check",i.mode=30;break}z=U=0}i.mode=29;case 29:H=1;break t;case 30:H=-3;break t;case 31:return-4;case 32:default:return c}return w.next_out=pt,w.avail_out=at,w.next_in=Y,w.avail_in=Q,i.hold=U,i.bits=z,(i.wsize||it!==w.avail_out&&i.mode<30&&(i.mode<27||O!==4))&&W(w,w.output,w.next_out,it-w.avail_out)?(i.mode=31,-4):(ut-=w.avail_in,it-=w.avail_out,w.total_in+=ut,w.total_out+=it,i.total+=it,i.wrap&&it&&(w.adler=i.check=i.flags?a(i.check,lt,it,w.next_out-it):f(i.check,lt,it,w.next_out-it)),w.data_type=i.bits+(i.last?64:0)+(i.mode===12?128:0)+(i.mode===20||i.mode===15?256:0),(ut==0&&it===0||O===4)&&H===N&&(H=-5),H)},k.inflateEnd=function(w){if(!w||!w.state)return c;var O=w.state;return O.window&&(O.window=null),w.state=null,N},k.inflateGetHeader=function(w,O){var i;return w&&w.state&&2&(i=w.state).wrap?((i.head=O).done=!1,N):c},k.inflateSetDictionary=function(w,O){var i,$=O.length;return w&&w.state?(i=w.state).wrap!==0&&i.mode!==11?c:i.mode===11&&f(1,O,$,0)!==i.check?-3:W(w,O,$,$)?(i.mode=31,-4):(i.havedict=1,N):c},k.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(p,L,k){var l=p("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];L.exports=function(A,S,N,c,y,h,_,u){var g,E,x,T,M,D,j,R,q,W=u.bits,w=0,O=0,i=0,$=0,lt=0,Y=0,pt=0,Q=0,at=0,U=0,z=null,ut=0,it=new l.Buf16(16),J=new l.Buf16(16),Tt=null,Nt=0;for(w=0;w<=15;w++)it[w]=0;for(O=0;O<c;O++)it[S[N+O]]++;for(lt=W,$=15;1<=$&&it[$]===0;$--);if($<lt&&(lt=$),$===0)return y[h++]=20971520,y[h++]=20971520,u.bits=1,0;for(i=1;i<$&&it[i]===0;i++);for(lt<i&&(lt=i),w=Q=1;w<=15;w++)if(Q<<=1,(Q-=it[w])<0)return-1;if(0<Q&&(A===0||$!==1))return-1;for(J[1]=0,w=1;w<15;w++)J[w+1]=J[w]+it[w];for(O=0;O<c;O++)S[N+O]!==0&&(_[J[S[N+O]]++]=O);if(D=A===0?(z=Tt=_,19):A===1?(z=f,ut-=257,Tt=a,Nt-=257,256):(z=m,Tt=s,-1),w=i,M=h,pt=O=U=0,x=-1,T=(at=1<<(Y=lt))-1,A===1&&852<at||A===2&&592<at)return 1;for(;;){for(j=w-pt,q=_[O]<D?(R=0,_[O]):_[O]>D?(R=Tt[Nt+_[O]],z[ut+_[O]]):(R=96,0),g=1<<w-pt,i=E=1<<Y;y[M+(U>>pt)+(E-=g)]=j<<24|R<<16|q|0,E!==0;);for(g=1<<w-1;U&g;)g>>=1;if(g!==0?(U&=g-1,U+=g):U=0,O++,--it[w]==0){if(w===$)break;w=S[N+_[O]]}if(lt<w&&(U&T)!==x){for(pt===0&&(pt=lt),M+=i,Q=1<<(Y=w-pt);Y+pt<$&&!((Q-=it[Y+pt])<=0);)Y++,Q<<=1;if(at+=1<<Y,A===1&&852<at||A===2&&592<at)return 1;y[x=U&T]=lt<<24|Y<<16|M-h|0}}return U!==0&&(y[M+U]=w-pt<<24|64<<16|0),u.bits=lt,0}},{"../utils/common":41}],51:[function(p,L,k){L.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(p,L,k){var l=p("../utils/common"),f=0,a=1;function m(d){for(var I=d.length;0<=--I;)d[I]=0}var s=0,A=29,S=256,N=S+1+A,c=30,y=19,h=2*N+1,_=15,u=16,g=7,E=256,x=16,T=17,M=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(N+2));m(W);var w=new Array(2*c);m(w);var O=new Array(512);m(O);var i=new Array(256);m(i);var $=new Array(A);m($);var lt,Y,pt,Q=new Array(c);function at(d,I,Z,K,B){this.static_tree=d,this.extra_bits=I,this.extra_base=Z,this.elems=K,this.max_length=B,this.has_stree=d&&d.length}function U(d,I){this.dyn_tree=d,this.max_code=0,this.stat_desc=I}function z(d){return d<256?O[d]:O[256+(d>>>7)]}function ut(d,I){d.pending_buf[d.pending++]=255&I,d.pending_buf[d.pending++]=I>>>8&255}function it(d,I,Z){d.bi_valid>u-Z?(d.bi_buf|=I<<d.bi_valid&65535,ut(d,d.bi_buf),d.bi_buf=I>>u-d.bi_valid,d.bi_valid+=Z-u):(d.bi_buf|=I<<d.bi_valid&65535,d.bi_valid+=Z)}function J(d,I,Z){it(d,Z[2*I],Z[2*I+1])}function Tt(d,I){for(var Z=0;Z|=1&d,d>>>=1,Z<<=1,0<--I;);return Z>>>1}function Nt(d,I,Z){var K,B,tt=new Array(_+1),ot=0;for(K=1;K<=_;K++)tt[K]=ot=ot+Z[K-1]<<1;for(B=0;B<=I;B++){var et=d[2*B+1];et!==0&&(d[2*B]=Tt(tt[et]++,et))}}function yt(d){var I;for(I=0;I<N;I++)d.dyn_ltree[2*I]=0;for(I=0;I<c;I++)d.dyn_dtree[2*I]=0;for(I=0;I<y;I++)d.bl_tree[2*I]=0;d.dyn_ltree[2*E]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function kt(d){8<d.bi_valid?ut(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function Rt(d,I,Z,K){var B=2*I,tt=2*Z;return d[B]<d[tt]||d[B]===d[tt]&&K[I]<=K[Z]}function xt(d,I,Z){for(var K=d.heap[Z],B=Z<<1;B<=d.heap_len&&(B<d.heap_len&&Rt(I,d.heap[B+1],d.heap[B],d.depth)&&B++,!Rt(I,K,d.heap[B],d.depth));)d.heap[Z]=d.heap[B],Z=B,B<<=1;d.heap[Z]=K}function Ct(d,I,Z){var K,B,tt,ot,et=0;if(d.last_lit!==0)for(;K=d.pending_buf[d.d_buf+2*et]<<8|d.pending_buf[d.d_buf+2*et+1],B=d.pending_buf[d.l_buf+et],et++,K===0?J(d,B,I):(J(d,(tt=i[B])+S+1,I),(ot=D[tt])!==0&&it(d,B-=$[tt],ot),J(d,tt=z(--K),Z),(ot=j[tt])!==0&&it(d,K-=Q[tt],ot)),et<d.last_lit;);J(d,E,I)}function Lt(d,I){var Z,K,B,tt=I.dyn_tree,ot=I.stat_desc.static_tree,et=I.stat_desc.has_stree,ft=I.stat_desc.elems,Et=-1;for(d.heap_len=0,d.heap_max=h,Z=0;Z<ft;Z++)tt[2*Z]!==0?(d.heap[++d.heap_len]=Et=Z,d.depth[Z]=0):tt[2*Z+1]=0;for(;d.heap_len<2;)tt[2*(B=d.heap[++d.heap_len]=Et<2?++Et:0)]=1,d.depth[B]=0,d.opt_len--,et&&(d.static_len-=ot[2*B+1]);for(I.max_code=Et,Z=d.heap_len>>1;1<=Z;Z--)xt(d,tt,Z);for(B=ft;Z=d.heap[1],d.heap[1]=d.heap[d.heap_len--],xt(d,tt,1),K=d.heap[1],d.heap[--d.heap_max]=Z,d.heap[--d.heap_max]=K,tt[2*B]=tt[2*Z]+tt[2*K],d.depth[B]=(d.depth[Z]>=d.depth[K]?d.depth[Z]:d.depth[K])+1,tt[2*Z+1]=tt[2*K+1]=B,d.heap[1]=B++,xt(d,tt,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(vt,Dt){var Yt,Mt,ne,It,_t,ue,Ft=Dt.dyn_tree,he=Dt.max_code,Kt=Dt.stat_desc.static_tree,Le=Dt.stat_desc.has_stree,Ht=Dt.stat_desc.extra_bits,de=Dt.stat_desc.extra_base,Vt=Dt.stat_desc.max_length,ie=0;for(It=0;It<=_;It++)vt.bl_count[It]=0;for(Ft[2*vt.heap[vt.heap_max]+1]=0,Yt=vt.heap_max+1;Yt<h;Yt++)Vt<(It=Ft[2*Ft[2*(Mt=vt.heap[Yt])+1]+1]+1)&&(It=Vt,ie++),Ft[2*Mt+1]=It,he<Mt||(vt.bl_count[It]++,_t=0,de<=Mt&&(_t=Ht[Mt-de]),ue=Ft[2*Mt],vt.opt_len+=ue*(It+_t),Le&&(vt.static_len+=ue*(Kt[2*Mt+1]+_t)));if(ie!==0){do{for(It=Vt-1;vt.bl_count[It]===0;)It--;vt.bl_count[It]--,vt.bl_count[It+1]+=2,vt.bl_count[Vt]--,ie-=2}while(0<ie);for(It=Vt;It!==0;It--)for(Mt=vt.bl_count[It];Mt!==0;)he<(ne=vt.heap[--Yt])||(Ft[2*ne+1]!==It&&(vt.opt_len+=(It-Ft[2*ne+1])*Ft[2*ne],Ft[2*ne+1]=It),Mt--)}}(d,I),Nt(tt,Et,d.bl_count)}function r(d,I,Z){var K,B,tt=-1,ot=I[1],et=0,ft=7,Et=4;for(ot===0&&(ft=138,Et=3),I[2*(Z+1)+1]=65535,K=0;K<=Z;K++)B=ot,ot=I[2*(K+1)+1],++et<ft&&B===ot||(et<Et?d.bl_tree[2*B]+=et:B!==0?(B!==tt&&d.bl_tree[2*B]++,d.bl_tree[2*x]++):et<=10?d.bl_tree[2*T]++:d.bl_tree[2*M]++,tt=B,Et=(et=0)===ot?(ft=138,3):B===ot?(ft=6,3):(ft=7,4))}function H(d,I,Z){var K,B,tt=-1,ot=I[1],et=0,ft=7,Et=4;for(ot===0&&(ft=138,Et=3),K=0;K<=Z;K++)if(B=ot,ot=I[2*(K+1)+1],!(++et<ft&&B===ot)){if(et<Et)for(;J(d,B,d.bl_tree),--et!=0;);else B!==0?(B!==tt&&(J(d,B,d.bl_tree),et--),J(d,x,d.bl_tree),it(d,et-3,2)):et<=10?(J(d,T,d.bl_tree),it(d,et-3,3)):(J(d,M,d.bl_tree),it(d,et-11,7));tt=B,Et=(et=0)===ot?(ft=138,3):B===ot?(ft=6,3):(ft=7,4)}}m(Q);var F=!1;function b(d,I,Z,K){it(d,(s<<1)+(K?1:0),3),function(B,tt,ot,et){kt(B),ut(B,ot),ut(B,~ot),l.arraySet(B.pending_buf,B.window,tt,ot,B.pending),B.pending+=ot}(d,I,Z)}k._tr_init=function(d){F||(function(){var I,Z,K,B,tt,ot=new Array(_+1);for(B=K=0;B<A-1;B++)for($[B]=K,I=0;I<1<<D[B];I++)i[K++]=B;for(i[K-1]=B,B=tt=0;B<16;B++)for(Q[B]=tt,I=0;I<1<<j[B];I++)O[tt++]=B;for(tt>>=7;B<c;B++)for(Q[B]=tt<<7,I=0;I<1<<j[B]-7;I++)O[256+tt++]=B;for(Z=0;Z<=_;Z++)ot[Z]=0;for(I=0;I<=143;)W[2*I+1]=8,I++,ot[8]++;for(;I<=255;)W[2*I+1]=9,I++,ot[9]++;for(;I<=279;)W[2*I+1]=7,I++,ot[7]++;for(;I<=287;)W[2*I+1]=8,I++,ot[8]++;for(Nt(W,N+1,ot),I=0;I<c;I++)w[2*I+1]=5,w[2*I]=Tt(I,5);lt=new at(W,D,S+1,N,_),Y=new at(w,j,0,c,_),pt=new at(new Array(0),R,0,y,g)}(),F=!0),d.l_desc=new U(d.dyn_ltree,lt),d.d_desc=new U(d.dyn_dtree,Y),d.bl_desc=new U(d.bl_tree,pt),d.bi_buf=0,d.bi_valid=0,yt(d)},k._tr_stored_block=b,k._tr_flush_block=function(d,I,Z,K){var B,tt,ot=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=function(et){var ft,Et=4093624447;for(ft=0;ft<=31;ft++,Et>>>=1)if(1&Et&&et.dyn_ltree[2*ft]!==0)return f;if(et.dyn_ltree[18]!==0||et.dyn_ltree[20]!==0||et.dyn_ltree[26]!==0)return a;for(ft=32;ft<S;ft++)if(et.dyn_ltree[2*ft]!==0)return a;return f}(d)),Lt(d,d.l_desc),Lt(d,d.d_desc),ot=function(et){var ft;for(r(et,et.dyn_ltree,et.l_desc.max_code),r(et,et.dyn_dtree,et.d_desc.max_code),Lt(et,et.bl_desc),ft=y-1;3<=ft&&et.bl_tree[2*q[ft]+1]===0;ft--);return et.opt_len+=3*(ft+1)+5+5+4,ft}(d),B=d.opt_len+3+7>>>3,(tt=d.static_len+3+7>>>3)<=B&&(B=tt)):B=tt=Z+5,Z+4<=B&&I!==-1?b(d,I,Z,K):d.strategy===4||tt===B?(it(d,2+(K?1:0),3),Ct(d,W,w)):(it(d,4+(K?1:0),3),function(et,ft,Et,vt){var Dt;for(it(et,ft-257,5),it(et,Et-1,5),it(et,vt-4,4),Dt=0;Dt<vt;Dt++)it(et,et.bl_tree[2*q[Dt]+1],3);H(et,et.dyn_ltree,ft-1),H(et,et.dyn_dtree,Et-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,ot+1),Ct(d,d.dyn_ltree,d.dyn_dtree)),yt(d),K&&kt(d)},k._tr_tally=function(d,I,Z){return d.pending_buf[d.d_buf+2*d.last_lit]=I>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&I,d.pending_buf[d.l_buf+d.last_lit]=255&Z,d.last_lit++,I===0?d.dyn_ltree[2*Z]++:(d.matches++,I--,d.dyn_ltree[2*(i[Z]+S+1)]++,d.dyn_dtree[2*z(I)]++),d.last_lit===d.lit_bufsize-1},k._tr_align=function(d){it(d,2,3),J(d,E,W),function(I){I.bi_valid===16?(ut(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(d)}},{"../utils/common":41}],53:[function(p,L,k){L.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(p,L,k){(function(l){(function(f,a){if(!f.setImmediate){var m,s,A,S,N=1,c={},y=!1,h=f.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(f);_=_&&_.setTimeout?_:f,m={}.toString.call(f.process)==="[object process]"?function(x){process.nextTick(function(){g(x)})}:function(){if(f.postMessage&&!f.importScripts){var x=!0,T=f.onmessage;return f.onmessage=function(){x=!1},f.postMessage("","*"),f.onmessage=T,x}}()?(S="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",E,!1):f.attachEvent("onmessage",E),function(x){f.postMessage(S+x,"*")}):f.MessageChannel?((A=new MessageChannel).port1.onmessage=function(x){g(x.data)},function(x){A.port2.postMessage(x)}):h&&"onreadystatechange"in h.createElement("script")?(s=h.documentElement,function(x){var T=h.createElement("script");T.onreadystatechange=function(){g(x),T.onreadystatechange=null,s.removeChild(T),T=null},s.appendChild(T)}):function(x){setTimeout(g,0,x)},_.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var T=new Array(arguments.length-1),M=0;M<T.length;M++)T[M]=arguments[M+1];var D={callback:x,args:T};return c[N]=D,m(N),N++},_.clearImmediate=u}function u(x){delete c[x]}function g(x){if(y)setTimeout(g,0,x);else{var T=c[x];if(T){y=!0;try{(function(M){var D=M.callback,j=M.args;switch(j.length){case 0:D();break;case 1:D(j[0]);break;case 2:D(j[0],j[1]);break;case 3:D(j[0],j[1],j[2]);break;default:D.apply(a,j)}})(T)}finally{u(x),y=!1}}}}function E(x){x.source===f&&typeof x.data=="string"&&x.data.indexOf(S)===0&&g(+x.data.slice(S.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof Ie<"u"?Ie:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Or);var In=Or.exports;const Ye=Ar(In);async function On(V,nt,p,L,k){rt("Starting conversion to NewPipe format...");let l,f=new Ye,a="",m=null,s=null;const A=k||null;let S=!1;if(p==="merge"&&V){rt("Loading existing NewPipe backup...");const u=await V.arrayBuffer(),g=await Ye.loadAsync(u),E=g.file("newpipe.db");if(E){const M=await E.async("uint8array");l=new L.Database(M),rt("Database loaded. Running integrity check...");const D=l.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';");D&&D[0]&&D[0].values&&rt(`Existing NewPipe database contains: ${D[0].values.flat().join(", ")} tables.`,"schema");try{Rn(l);try{const j=l.exec("PRAGMA table_info('stream_state')")||[],R=l.exec("PRAGMA foreign_key_list('stream_state')")||[],q=l.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,j.length>0&&(a+=JSON.stringify(j[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,R.length>0&&(a+=JSON.stringify(R[0],null,2)+`
`),a+=`
CREATE statement:
`,q.length>0&&q[0].values&&q[0].values.length>0&&(a+=q[0].values[0][0]+`
`)}catch(j){a+="Failed to collect stream_state debug info: "+(j.message||j.toString())+`
`}}catch(j){rt("Warning: failed to ensure stream_state schema: "+(j.message||j.toString()),"warn")}}else throw new Error("Invalid NewPipe backup: missing newpipe.db");const x=g.file("preferences.json");x&&(m=await x.async("string"));const T=g.file("newpipe.settings");T&&(s=await T.async("blob"))}else{rt("Creating new NewPipe database..."),l=new L.Database,An(l);try{const u=l.exec("PRAGMA table_info('stream_state')")||[],g=l.exec("PRAGMA foreign_key_list('stream_state')")||[],E=l.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];a+=`PRAGMA table_info("stream_state"):
`,u.length>0&&(a+=JSON.stringify(u[0],null,2)+`
`),a+=`
PRAGMA foreign_key_list("stream_state"):
`,g.length>0&&(a+=JSON.stringify(g[0],null,2)+`
`),a+=`
CREATE statement:
`,E.length>0&&E[0].values&&E[0].values.length>0&&(a+=E[0].values[0][0]+`
`)}catch(u){a+="Failed to collect stream_state debug info (new DB): "+(u.message||u.toString())+`
`}}rt("Parsing LibreTube JSON...");const N=await nt.text(),c=JSON.parse(N);l.run("BEGIN TRANSACTION");try{rt("Processing Subscriptions..."),p==="merge"&&l.run(`DELETE FROM subscriptions WHERE service_id = ${Wt}`);let u=0;if(c.subscriptions){const g=l.prepare("INSERT INTO subscriptions (service_id, url, name, avatar_url, subscriber_count, description, notification_mode) VALUES (?, ?, ?, ?, ?, ?, ?)");c.subscriptions.forEach(E=>{try{const x=E.url||`https://www.youtube.com/channel/${E.channelId}`,T=E.name||"Unknown",M=E.avatar||E.avatarUrl||null;if(!x.includes("youtube.com")&&!x.includes("youtu.be")){rt(`Dropped non-YouTube subscription: ${T} (${x})`,"warn");return}g.run([Wt,x,T,M,0,"",0]),u++}catch(x){rt(`ERROR inserting subscription ${E.name}: ${x.message||x.toString()}`,"err")}}),g.free()}rt(`Inserted ${u} subscriptions.`)}catch(u){throw rt(`FATAL ERROR during Subscriptions phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Playlists...");let u=!1;const g=k||null;p==="merge"&&(g==="only_libretube"?(l.run("DELETE FROM playlist_stream_join"),l.run("DELETE FROM playlists"),l.run("DELETE FROM remote_playlists"),rt("Cleared existing playlists; will import only LibreTube playlists.")):g==="only_newpipe"?(u=!0,rt("Preserving existing NewPipe playlists; skipping import from LibreTube.")):rt(`Merging playlists with behavior: ${g||"default (LibreTube precedence)"}`));let E=0;if(c.localPlaylists&&!u){const x=l.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),T=l.prepare("INSERT INTO playlists (name, is_thumbnail_permanent, thumbnail_stream_id, display_index) VALUES (?, ?, ?, ?)"),M=l.prepare("INSERT INTO playlist_stream_join (playlist_id, stream_id, join_index) VALUES (?, ?, ?)");for(const D of c.localPlaylists){const j=D.playlist.name||"Untitled";try{const R=l.exec(`SELECT uid FROM playlists WHERE name = '${j.replace(/'/g,"''")}'`);if(R.length>0)if(g==="merge_lt_precedence"){const O=R[0].values[0][0];try{l.run(`DELETE FROM playlist_stream_join WHERE playlist_id = ${O}`),l.run(`DELETE FROM playlists WHERE uid = ${O}`),rt(`Replaced existing local playlist: ${j}`,"schema")}catch(i){rt(`WARN: failed to replace playlist ${j}: ${i.message||i.toString()}`,"warn")}}else{rt(`Skipping duplicate local playlist: ${j}`,"warn");continue}T.run([j,0,-1,E]);const W=l.exec("SELECT last_insert_rowid()")[0].values[0][0];let w=0;for(const O of D.videos){const i=`https://www.youtube.com/watch?v=${O.videoId}`;if(!O.videoId){rt(`Skipped video in playlist ${j} due to missing videoId.`,"warn");continue}try{const $=O.title||"Unknown",lt=O.uploader||"Unknown",Y=O.duration||0,pt=O.uploadDate?new Date(O.uploadDate).getTime()/1e3:null,Q=O.thumbnailUrl||null;x.run([Wt,i,$,"VIDEO_STREAM",Y,lt,pt,Q]);const at=l.exec(`SELECT uid FROM streams WHERE service_id=${Wt} AND url='${i.replace(/'/g,"''")}'`);if(at.length>0&&at[0].values.length>0){const U=at[0].values[0][0],z=w;if(M.run([W,U,w++]),z===0)try{l.run(`UPDATE playlists SET thumbnail_stream_id = ${U} WHERE uid = ${W}`)}catch(ut){rt(`WARN: failed to set playlist thumbnail for ${j}: ${ut.message||ut.toString()}`,"warn")}}else rt(`Warning: Could not find/insert stream for video ${$}`,"warn")}catch($){rt(`ERROR processing video "${O.title}" in playlist "${j}": ${$.message||$.toString()}`,"err")}}E++}catch(R){throw rt(`FATAL ERROR processing playlist "${j}": ${R.message||R.toString()}`,"err"),R}}x.free(),T.free(),M.free()}rt(`Processed ${E} local playlists.`)}catch(u){throw rt(`FATAL ERROR during Local Playlists phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Remote Playlist Bookmarks...");let u=0;const g=l.prepare("INSERT INTO remote_playlists (service_id, name, url, thumbnail_url, uploader, display_index, stream_count) VALUES (?, ?, ?, ?, ?, ?, ?)");if(c.playlistBookmarks&&!S){for(const E of c.playlistBookmarks)try{const x=E.url||(E.playlistId?`https://www.youtube.com/playlist?list=${E.playlistId}`:null);if(!x||!x.includes("youtube.com")&&!x.includes("youtu.be")){rt(`Dropped non-YouTube remote playlist: ${E.playlistName||"Untitled"}`,"warn");continue}const T=E.playlistName||E.name||"Untitled",M=E.thumbnailUrl||null,D=E.uploader||"Unknown",j=typeof E.videos=="number"?E.videos:0;try{const R=l.exec(`SELECT uid FROM remote_playlists WHERE url = '${x.replace(/'/g,"''")}' OR name = '${T.replace(/'/g,"''")}'`);if(R&&R.length>0&&R[0].values.length>0){if(A==="merge_np_precedence")continue;if(A==="merge_lt_precedence"){const q=R[0].values[0][0];l.run(`DELETE FROM remote_playlists WHERE uid = ${q}`)}}}catch{}g.run([Wt,T,x,M,D,u++,j])}catch(x){rt(`ERROR inserting remote playlist ${E.playlistName||"Untitled"}: ${x.message||x.toString()}`,"err")}g.free()}rt(`Processed ${u} remote playlist bookmarks.`)}catch(u){throw rt(`FATAL ERROR during Remote Playlists phase: ${u.message||u.toString()}`,"err"),u}try{rt("Processing Watch History...");let u=0,g=0,E=0;const x=c.history||c.watchHistory||c.watch_history||c.watch_history_items||[],T=new Map;if(c.watchPositions&&Array.isArray(c.watchPositions)){for(const M of c.watchPositions)if(M&&M.videoId){const D=Number(M.position||0);T.set(String(M.videoId),D)}}if(x&&x.length>0){const M=l.prepare("INSERT OR IGNORE INTO streams (service_id, url, title, stream_type, duration, uploader, upload_date, thumbnail_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?)"),D=l.prepare("INSERT OR REPLACE INTO stream_state (progress_time, stream_id) VALUES (?, ?)"),j=l.prepare("INSERT OR REPLACE INTO stream_history (stream_id, access_date, repeat_count) VALUES (?, ?, ?)");for(const R of x)try{const q=R.videoId||R.videoIdStr||R.id||R.url&&(R.url.match(/v=([^&]+)/)||[])[1];if(!q)continue;const W=`https://www.youtube.com/watch?v=${q}`,w=R.title||R.name||"Unknown",O=R.uploader||R.uploaderName||"Unknown",i=R.duration||R.length||0,$=R.uploadDate?isNaN(Number(R.uploadDate))?Math.floor(new Date(R.uploadDate).getTime()/1e3):Math.floor(Number(R.uploadDate)):null,lt=R.thumbnailUrl||R.thumbnail||null;let Y=0;const pt=T.get(q),Q="9223372036854775807";if(pt!=null)String(pt)===Q?Y=0:Y=Math.floor(Number(pt)||0);else{const it=R.currentTime||R.position||R.progress||0;Y=Math.floor(Number(it||0)*1e3)}let at=R.accessDate||R.accessedAt||R.lastWatched||R.timestamp||R.date||R.time,U;if(!at)U=Date.now();else if(typeof at=="number")U=at>1e12?Math.floor(at):Math.floor(at*1e3);else{const it=Date.parse(String(at));U=isNaN(it)?Date.now():it}const z=Number(R.repeatCount||R.watchCount||R.playCount||R.repeat_count||1);M.run([Wt,W,w,"VIDEO_STREAM",i,O,$,lt]);const ut=l.exec(`SELECT uid FROM streams WHERE service_id=${Wt} AND url='${W.replace(/'/g,"''")}'`);if(ut.length>0&&ut[0].values.length>0){const it=ut[0].values[0][0];try{D.run([Y,it])}catch(J){rt(`WARN: failed to write stream_state for ${q}: ${J.message||J.toString()}`,"warn")}try{if(p==="merge"){const J=U-1e3,Tt=U+1e3,Nt=l.exec(`SELECT access_date, repeat_count FROM stream_history WHERE stream_id = ${it} AND access_date BETWEEN ${J} AND ${Tt}`);if(Nt&&Nt.length>0&&Nt[0].values.length>0){const yt=Number(Nt[0].values[0][0]),Rt=(Number(Nt[0].values[0][1])||0)+z;l.run(`UPDATE stream_history SET repeat_count = ${Rt} WHERE stream_id = ${it} AND access_date = ${yt}`),E++}else j.run([it,U,z]),g++}else j.run([it,U,z]),g++}catch(J){rt(`WARN: failed to write stream_history for ${q}: ${J.message||J.toString()}`,"warn")}u++}}catch(q){rt(`ERROR processing history item: ${q.message||q.toString()}`,"warn")}M.free(),D.free(),j.free()}rt(`Processed ${u} history items (added: ${g}, duplicates merged: ${E}).`)}catch(u){rt(`Error processing history: ${u.message}`,"err")}try{l.run("INSERT INTO room_master_table (id, identity_hash) VALUES (42, '7591e8039faa74d8c0517dc867af9d3e')"),rt("Inserted room_master_table identity.")}catch(u){rt("Error inserting room_master_table: "+u.message,"warn")}try{rt("Committing transaction..."),l.run("COMMIT")}catch(u){throw rt(`FATAL ERROR on COMMIT: ${u.message||u.toString()}`,"err"),u}rt("Exporting database...");const y=l.export();if(f.file("newpipe.db",y),m?(f.file("preferences.json",m),rt("Preserved existing preferences.json.")):(f.file("preferences.json",JSON.stringify(xn,null,2)),rt("Created default preferences.json.")),s&&(f.file("newpipe.settings",s),rt("Preserved existing newpipe.settings.")),f.file("stream_state_debug.txt",a||"No stream_state debug information collected."),rt("Attached stream_state_debug.txt to zip for inspection.","schema"),a){const u=a.split(`
`).slice(0,12).join(`
`);rt(`stream_state_debug preview:
`+u,"schema")}const h=await f.generateAsync({type:"blob"}),_=xr();Ir(h,"newpipe_converted.zip",_),rt("Done! File downloaded.","info")}const Ce=Number.MAX_SAFE_INTEGER;function re(V){const nt=Number(V||0);return!Number.isFinite(nt)||isNaN(nt)?0:nt>Ce?Ce:nt<-Ce?-Ce:Math.trunc(nt)}function Tr(V){if(!V&&V!==0)return"1970-01-01";const nt=String(V).trim();if(/^\d{4}-\d{2}-\d{2}/.test(nt))return nt.split("T")[0];const p=Number(nt);if(!Number.isFinite(p))return"1970-01-01";const L=Math.abs(p);if(L>=1e7&&L<=99999999){const k=String(Math.trunc(p)),l=k.slice(0,4),f=k.slice(4,6),a=k.slice(6,8);return`${l}-${f}-${a}`}return L>1e12?new Date(p).toISOString().split("T")[0]:L>=1e9?new Date(p*1e3).toISOString().split("T")[0]:new Date(p).toISOString().split("T")[0]}function Nr(V){if(V==null)return 0;if(typeof V=="number")return V>1e12?Math.floor(V):Math.floor(V*1e3);const nt=String(V).trim();if(!nt)return 0;const p=Date.parse(nt);if(!isNaN(p))return p;const L=Number(nt);return Number.isFinite(L)?L>1e12?Math.floor(L):Math.floor(L*1e3):0}async function Cn(V,nt,p,L,k,l){rt("Starting conversion to LibreTube format...");let f={watchHistory:[],subscriptions:[],playlistBookmarks:[],localPlaylists:[],preferences:[]};const a=k||null;let m=!1;if(p==="merge"&&nt){rt("Reading target LibreTube file...");const T=await nt.text();f=JSON.parse(T),a==="only_newpipe"?(f.subscriptions=[],f.playlistBookmarks=[],f.localPlaylists=[],rt("Cleared target LibreTube playlists; will import only NewPipe playlists.")):a==="only_libretube"?(m=!0,rt("Preserving existing LibreTube playlists; will skip importing NewPipe playlists.")):(f.subscriptions=f.subscriptions||[],f.playlistBookmarks=f.playlistBookmarks||[],f.localPlaylists=f.localPlaylists||[],rt(`Merging playlists with behavior: ${a||"default (NewPipe precedence)"}`))}rt("Reading NewPipe backup...");const s=await V.arrayBuffer(),S=(await Ye.loadAsync(s)).file("newpipe.db");if(!S)throw new Error("NewPipe ZIP must contain newpipe.db");const N=await S.async("uint8array"),c=new L.Database(N);rt("NewPipe database loaded.");try{let T="";const M=c.exec("PRAGMA table_info('stream_state')")||[],D=c.exec("PRAGMA foreign_key_list('stream_state')")||[],j=c.exec("SELECT sql FROM sqlite_master WHERE type='table' AND name='stream_state'")||[];T+=`PRAGMA table_info("stream_state"):
`,M.length>0&&(T+=JSON.stringify(M[0],null,2)+`
`),T+=`
PRAGMA foreign_key_list("stream_state"):
`,D.length>0&&(T+=JSON.stringify(D[0],null,2)+`
`),T+=`
CREATE statement:
`,j.length>0&&j[0].values&&j[0].values.length>0&&(T+=j[0].values[0][0]+`
`),rt(`Stream state debug (input NewPipe DB):
`+(T||"No stream_state debug info collected."),"schema")}catch(T){rt("Failed to collect input stream_state debug: "+(T.message||T.toString()),"warn")}rt("Extracting Subscriptions...");const y=c.exec(`SELECT url, name, avatar_url FROM subscriptions WHERE service_id = ${Wt}`);y.length>0&&y[0].values.forEach(M=>{const D=M[0];if(!D||!D.includes("youtube.com")&&!D.includes("youtu.be")){rt(`Dropped non-YouTube subscription URL: ${M[1]}`,"warn");return}let j="";const R=D.match(/channel\/([\w-]+)/),q=D.match(/user\/([\w-]+)/);R?j=R[1]:q&&(j=q[1]),f.subscriptions.push({channelId:j,url:D,name:M[1],avatar:M[2],verified:!1})}),rt(`Extracted ${f.subscriptions.length} YouTube subscriptions.`),rt("Extracting Remote Playlists...");const h=c.exec(`SELECT name, url, uploader, thumbnail_url, stream_count FROM remote_playlists WHERE service_id = ${Wt}`);h.length>0&&!m&&h[0].values.forEach(M=>{const D=M[1];if(!D||!D.includes("youtube.com")&&!D.includes("youtu.be")){rt(`Dropped non-YouTube remote playlist URL: ${M[0]}`,"warn");return}const j=D.match(/[?&]list=([^&]+)/),R=j?j[1]:"";f.playlistBookmarks.push({playlistId:R,playlistName:M[0],thumbnailUrl:M[3],uploader:M[2],uploaderUrl:"",videos:re(M[4])})}),rt(`Extracted ${f.playlistBookmarks.length} remote playlist bookmarks.`),rt("Extracting Local Playlists...");const _=c.exec("SELECT uid, name FROM playlists");if(_.length>0&&!m)for(const T of _[0].values){const M=T[0],D=T[1],j=[];let R=0;const q=c.exec(`
                    SELECT s.url, s.title, s.duration, s.uploader, s.upload_date, s.thumbnail_url
                    FROM playlist_stream_join j
                    JOIN streams s ON j.stream_id = s.uid
                    WHERE j.playlist_id = ${M} AND s.service_id = ${Wt}
                    ORDER BY j.join_index ASC
                `);if(q.length>0&&q[0].values.forEach(W=>{const w=W[0],O=w.match(/v=([^&]+)/),i=O?O[1]:"";if(!i){rt(`Warning: Skipped stream in playlist "${D}" due to unparseable URL: ${w}`,"warn");return}j.push({id:R++,playlistId:re(M),videoId:i,title:W[1],uploadDate:Tr(W[4]),uploader:W[3],thumbnailUrl:W[5],duration:re(W[2])})}),j.length>0||D){const W=f.localPlaylists.findIndex(w=>w.playlist&&w.playlist.name===D);if(W>=0)if(a==="merge_np_precedence")f.localPlaylists.splice(W,1);else continue;f.localPlaylists.push({playlist:{id:re(M),name:D,thumbnailUrl:j.length>0?j[0].thumbnailUrl:""},videos:j})}}if(rt(`Extracted ${f.localPlaylists.length} local playlists.`),f&&Array.isArray(f.watchPositions)&&(f.watchPositions=f.watchPositions.map(T=>T&&T.position!==void 0&&T.position!==null?{...T,position:re(T.position)}:T)),(l===void 0?!0:!!l)&&V)try{const T=c.exec(`SELECT s.url, s.title, s.duration, s.uploader, s.uploader_url, s.thumbnail_url, s.upload_date, sh.access_date, sh.repeat_count FROM stream_history sh JOIN streams s ON sh.stream_id = s.uid WHERE s.service_id = ${Wt}`)||[],M=c.exec(`SELECT s.url, ss.progress_time FROM stream_state ss JOIN streams s ON ss.stream_id = s.uid WHERE s.service_id = ${Wt}`)||[];f.watchHistory=f.watchHistory||[],f.watchPositions=f.watchPositions||[];const D=new Map;for(const j of f.watchPositions)j&&j.videoId&&D.set(String(j.videoId),re(j.position));if(M.length>0){const j=M[0].values;for(const R of j){const q=R[0],W=R[1]||0,w=Number(W),O=String(q||"").match(/v=([^&]+)/),i=O?O[1]:"";if(!i)continue;const $=D.get(i)||0,lt=re(w);lt>$&&D.set(i,lt)}}if(f.watchPositions=Array.from(D.entries()).map(([j,R])=>({videoId:j,position:R})),T.length>0){const j=T[0].values,R=Array.isArray(f.watchHistory)?f.watchHistory.map(W=>({...W,accessDate:Nr(W&&(W.accessDate||W.accessedAt||W.lastWatched||W.timestamp||W.date||W.time)||0)})):[],q=new Map;for(const W of R)W&&W.videoId&&q.set(String(W.videoId),W);for(const W of j){const w=W[0],O=W[1]||"",i=re(W[2]),$=W[3]||"",lt=W[4]||"",Y=W[5]||"",pt=W[6],Q=W[7],at=String(w||"").match(/v=([^&]+)/),U=at?at[1]:"";if(!U)continue;let z="";try{const J=String(lt).match(/channel\/([\w-]+)/),Tt=String(lt).match(/user\/([\w-]+)/);J?z=J[1]:Tt?z=Tt[1]:/^[UC][A-Za-z0-9_-]{20,}$/.test(lt)&&(z=lt)}catch{z=""}const ut=Tr(pt);if(q.has(U))continue;const it=Nr(Q);R.push({videoId:U,title:O,uploadDate:ut,uploader:$,uploaderUrl:z,uploaderAvatar:"",thumbnailUrl:Y,duration:i,accessDate:it})}R.sort((W,w)=>(w&&w.accessDate?w.accessDate:0)-(W&&W.accessDate?W.accessDate:0)),f.watchHistory=R}}catch(T){rt("Failed to import watch history from NewPipe DB: "+(T.message||T.toString()),"warn")}const g=JSON.stringify(f,null,2),E=new Blob([g],{type:"application/json"}),x=xr();Ir(E,"libretube_converted.json",x),rt("Done! File downloaded.","info")}let Ke;window.onload=async()=>{rt("Initializing SQL.js...");try{Ke=await Nn(),rt("SQL.js ready.")}catch(V){rt("Error loading SQL.js: "+(V.message||V.toString()),"err")}Cr(),Ln()};function Cr(){const V=document.querySelector('input[name="mode"]:checked'),nt=V?V.value:"convert",p=document.getElementById("file-newpipe"),L=document.getElementById("file-libretube"),k=document.getElementById("merge-controls"),l=document.getElementById("convert-controls");!p||!L||!k||!l||(nt==="merge"?(k.style.display="",l.style.display="none",p.disabled=!1,L.disabled=!1):(k.style.display="none",l.style.display="",p.disabled=!1,L.disabled=!1))}async function Lr(V){var l,f;const nt=document.querySelector('input[name="mode"]:checked'),p=nt?nt.value:"convert",L=(l=document.getElementById("file-newpipe").files)==null?void 0:l[0],k=(f=document.getElementById("file-libretube").files)==null?void 0:f[0];if(p==="merge"&&(!L||!k))return rt("Merge mode requires BOTH files.","err");if(p==="convert"){if(V==="to_newpipe"&&!k)return rt("Missing LibreTube source file.","err");if(V==="to_libretube"&&!L)return rt("Missing NewPipe source file.","err")}try{document.querySelectorAll(".controls button").forEach(S=>S.disabled=!0);const a=document.getElementById("playlist-behavior"),m=a?a.value:void 0,s=document.getElementById("include-watch-history"),A=s?s.checked:!0;V==="to_newpipe"?await On(L,k,p,Ke,m):await Cn(L,k,p,Ke,m,A)}catch(a){rt(`FATAL ERROR: ${a.message||a.toString()||"An unknown error occurred"}`,"err"),a.stack?rt(`Stack Trace: ${a.stack}`,"err"):rt(`Error Object: ${a.toString()}`,"err"),console.error(a)}finally{document.querySelectorAll(".controls button").forEach(a=>a.disabled=!1)}}window.processBackup=Lr;window.updateUI=Cr;window.addEventListener("DOMContentLoaded",()=>{const V=document.getElementById("btn-merge"),nt=document.getElementById("merge-direction"),p=document.getElementById("playlist-behavior");V&&nt&&p&&(p.value=nt.checked?"merge_np_precedence":"merge_lt_precedence",nt.addEventListener("change",()=>{nt.checked?p.value="merge_np_precedence":p.value="merge_lt_precedence"}),V.addEventListener("click",async()=>{const L=nt.checked?"to_libretube":"to_newpipe";await Lr(L)}))});function Ln(){document.querySelectorAll(".drop-zone").forEach(V=>{const nt=V.querySelector('input[type="file"]'),p=V.querySelector(".file-name");nt&&(V.addEventListener("click",L=>{L.target!==nt&&nt.click()}),V.addEventListener("keydown",L=>{(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),nt.click())}),V.addEventListener("dragover",L=>{L.preventDefault(),V.classList.add("active")}),V.addEventListener("dragleave",()=>{V.classList.remove("active")}),V.addEventListener("drop",L=>{L.preventDefault(),V.classList.remove("active");const k=L.dataTransfer&&L.dataTransfer.files;if(k&&k.length)try{const l=new DataTransfer;for(let f=0;f<k.length;f++)l.items.add(k[f]);nt.files=l.files,nt.dispatchEvent(new Event("change",{bubbles:!0}))}catch(l){console.warn("Could not set input.files programmatically",l)}}),nt.addEventListener("change",()=>{const L=nt.files&&nt.files[0];p&&(p.textContent=L?L.name:"")}))})}
//# sourceMappingURL=index-JisqlqC0.js.map

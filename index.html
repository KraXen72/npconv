<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>NewPipe <-> LibreTube Backup Converter</title>

	<!-- Bundled JS will include dependencies (jszip, sql.js) -->
</head>

<body>
	<div class="container">
		<h1>Backup Converter</h1>

		<div class="mode-selector">
			<label class="radio-label">
				<input type="radio" name="mode" value="merge" onchange="updateUI()">
				Mode 1: Merge (Override Subs/Playlists)
			</label>
			<label class="radio-label">
				<input type="radio" name="mode" value="convert" checked onchange="updateUI()">
				Mode 2: Convert (Generate New)
			</label>
		</div>

		<div class="file-area">
			<div class="drop-zone" id="zone-newpipe" role="button" tabindex="0" aria-label="Select NewPipe backup">
				<h4>NewPipe Backup (.zip)</h4>
				<p><small class="hint">Contains newpipe.db<br>click/drop file to upload</small></p>
				<input type="file" id="file-newpipe" accept=".zip">
				<div class="file-name" aria-live="polite"></div>
			</div>

			<div class="drop-zone" id="zone-libretube" role="button" tabindex="0" aria-label="Select LibreTube backup">
				<h4>LibreTube Backup (.json)</h4>
				<p><small class="hint">JSON export file<br>click/drop file to upload</small></p>
				<input type="file" id="file-libretube" accept=".json">
				<div class="file-name" aria-live="polite"></div>
			</div>
		</div>

		<div class="controls">
			<button id="btn-to-newpipe" onclick="processBackup('to_newpipe')">
				Target: NewPipe
			</button>
			<button id="btn-to-libretube" onclick="processBackup('to_libretube')">
				Target: LibreTube
			</button>
		</div>

		<h3>Debug Log</h3>
		<div id="debug-console">waiting for input...</div>
	</div>
	<script type="module" src="/src/main.ts" defer></script>
</body>

</html>